<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
<title>Forevermore Concept</title>
<style title="Twine CSS">@keyframes appear{0%{opacity:0}to{opacity:1}}@keyframes fade-in-out{0%,to{opacity:0}50%{opacity:1}}@keyframes rumble{25%{top:-0.1em}75%{top:0.1em}0%,to{top:0px}}@keyframes shudder{25%{left:0.1em}75%{left:-0.1em}0%,to{left:0px}}@keyframes buoy{25%{top:0.25em}75%{top:-0.25em}0%,to{top:0px}}@keyframes sway{25%{left:0.25em}75%{left:-0.25em}0%,to{left:0px}}@keyframes pulse{0%{transform:scale(0, 0)}20%{transform:scale(1.2, 1.2)}40%{transform:scale(0.9, 0.9)}60%{transform:scale(1.05, 1.05)}80%{transform:scale(0.925, 0.925)}to{transform:scale(1, 1)}}@keyframes zoom-in{0%{transform:scale(0, 0)}to{transform:scale(1, 1)}}@keyframes shudder-in{0%, to{transform:translateX(0em)}5%, 25%, 45%{transform:translateX(-1em)}15%, 35%, 55%{transform:translateX(1em)}65%{transform:translateX(-0.6em)}75%{transform:translateX(0.6em)}85%{transform:translateX(-0.2em)}95%{transform:translateX(0.2em)}}@keyframes rumble-in{0%, to{transform:translateY(0em)}5%, 25%, 45%{transform:translateY(-1em)}15%, 35%, 55%{transform:translateY(1em)}65%{transform:translateY(-0.6em)}75%{transform:translateY(0.6em)}85%{transform:translateY(-0.2em)}95%{transform:translateY(0.2em)}}@keyframes fidget{0%, 8.1%, 82.1%, 31.1%, 38.1%, 44.1%, 40.1%, 47.1%, 74.1%, 16.1%, 27.1%, 72.1%, 24.1%, 95.1%, 6.1%, 36.1%, 20.1%, 4.1%, 91.1%, 14.1%, 87.1%, to{left:0px;top:0px}8%, 82%, 31%, 38%, 44%{left:-1px}40%, 47%, 74%, 16%, 27%{left:1px}72%, 24%, 95%, 6%, 36%{top:-1px}20%, 4%, 91%, 14%, 87%{top:1px}}@keyframes slide-right{0%{transform:translateX(-100vw)}}@keyframes slide-left{0%{transform:translateX(100vw)}}@keyframes slide-up{0%{transform:translateY(100vh)}}@keyframes slide-down{0%{transform:translateY(-100vh)}}@keyframes fade-right{0%{opacity:0;transform:translateX(-1em)}to{opacity:1}}@keyframes fade-left{0%{opacity:0;transform:translateX(1em)}to{opacity:1}}@keyframes fade-up{0%{opacity:0;transform:translateY(1em)}to{opacity:1}}@keyframes fade-down{0%{opacity:0;transform:translateY(-1em)}to{opacity:1}}@keyframes flicker{0%,29%,31%,63%,65%,77%,79%,86%,88%,91%,93%{opacity:0}30%{opacity:0.2}64%{opacity:0.4}78%{opacity:0.6}87%{opacity:0.8}92%, to{opacity:1}}@keyframes blur{0%{filter:blur(2rem);opacity:0}25%{opacity:1}to{filter:blur(0rem);opacity:1}}.dom-debug-mode tw-story,.dom-debug-mode tw-passage,.dom-debug-mode tw-sidebar,.dom-debug-mode tw-include,.dom-debug-mode tw-hook,.dom-debug-mode tw-expression,.dom-debug-mode tw-link,.dom-debug-mode tw-dialog,.dom-debug-mode tw-columns,.dom-debug-mode tw-column,.dom-debug-mode tw-align{outline:1px solid #f5a3da;min-height:32px;display:block !important}.dom-debug-mode tw-story::before,.dom-debug-mode tw-passage::before,.dom-debug-mode tw-sidebar::before,.dom-debug-mode tw-include::before,.dom-debug-mode tw-hook::before,.dom-debug-mode tw-expression::before,.dom-debug-mode tw-link::before,.dom-debug-mode tw-dialog::before,.dom-debug-mode tw-columns::before,.dom-debug-mode tw-column::before,.dom-debug-mode tw-align::before{position:absolute;top:0;left:0;height:16px;background-color:#f5a3da;color:black;font-size:16px;font-weight:normal;font-style:normal;font-family:monospace;display:inline-block;line-height:100%;white-space:pre;z-index:999997}.dom-debug-mode tw-story:hover,.dom-debug-mode tw-passage:hover,.dom-debug-mode tw-sidebar:hover,.dom-debug-mode tw-include:hover,.dom-debug-mode tw-hook:hover,.dom-debug-mode tw-expression:hover,.dom-debug-mode tw-link:hover,.dom-debug-mode tw-dialog:hover,.dom-debug-mode tw-columns:hover,.dom-debug-mode tw-column:hover,.dom-debug-mode tw-align:hover{outline:1px solid #fc9}.dom-debug-mode tw-story:hover::before,.dom-debug-mode tw-passage:hover::before,.dom-debug-mode tw-sidebar:hover::before,.dom-debug-mode tw-include:hover::before,.dom-debug-mode tw-hook:hover::before,.dom-debug-mode tw-expression:hover::before,.dom-debug-mode tw-link:hover::before,.dom-debug-mode tw-dialog:hover::before,.dom-debug-mode tw-columns:hover::before,.dom-debug-mode tw-column:hover::before,.dom-debug-mode tw-align:hover::before{background-color:#fc9;transition:background-color 1s}.dom-debug-mode tw-passage,.dom-debug-mode tw-include,.dom-debug-mode tw-hook,.dom-debug-mode tw-expression,.dom-debug-mode tw-link,.dom-debug-mode tw-dialog,.dom-debug-mode tw-columns,.dom-debug-mode tw-column,.dom-debug-mode tw-align{padding:1em;margin:0}.dom-debug-mode tw-story::before{content:'<tw-story tags="' attr(tags) '">'}.dom-debug-mode tw-passage::before{top:-16px;content:'<tw-passage tags="' attr(tags) '">'}.dom-debug-mode tw-sidebar::before{top:-16px;content:"<tw-sidebar>"}.dom-debug-mode tw-hook::before{content:'<tw-hook name="' attr(name) '">'}.dom-debug-mode tw-expression::before{content:'<tw-expression name="' attr(name) '">'}.dom-debug-mode tw-link::before{content:'<tw-link name="' attr(name) '">'}.dom-debug-mode tw-dialog::before{content:"<tw-dialog>"}.dom-debug-mode tw-columns::before{content:"<tw-columns>"}.dom-debug-mode tw-column::before{content:"<tw-column>"}.dom-debug-mode tw-align::before{content:"<tw-align>"}.dom-debug-mode tw-include::before{content:'<tw-include type="' attr(type) '" name="' attr(name) '">'}.debug-mode tw-expression{display:inline-block !important}.debug-mode tw-expression[type=variable]::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"$" attr(name)}.debug-mode tw-expression[type=tempVariable]::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"_" attr(name)}.debug-mode tw-expression[return=boolean]{background-color:rgba(179,179,179,0.2)}.debug-mode tw-expression[return=array]{background-color:rgba(255,102,102,0.2)}.debug-mode tw-expression[return=dataset]{background-color:rgba(255,128,0,0.2)}.debug-mode tw-expression[return=number]{background-color:rgba(255,179,102,0.2)}.debug-mode tw-expression[return=datamap]{background-color:rgba(255,255,102,0.2)}.debug-mode tw-expression[return=changer]{background-color:rgba(179,255,102,0.2)}.debug-mode tw-expression[return=lambda]{background-color:rgba(102,255,102,0.2)}.debug-mode tw-expression[return=hookname]{background-color:rgba(102,255,204,0.2)}.debug-mode tw-expression[return=string]{background-color:rgba(102,255,255,0.2)}.debug-mode tw-expression[return=datatype]{background-color:rgba(102,153,255,0.2)}.debug-mode tw-expression[return=gradient],.debug-mode tw-expression[return=colour]{background-color:rgba(204,102,255,0.2)}.debug-mode tw-expression[return=instant],.debug-mode tw-expression[return=macro]{background-color:rgba(240,117,199,0.2)}.debug-mode tw-expression[return=command]{background-color:rgba(153,153,255,0.2)}.debug-mode tw-expression.false{background-color:rgba(255,0,0,0.2) !important}.debug-mode tw-expression[type=macro]::before{content:"(" attr(name) ":)";padding:0 0.5rem;font-size:1rem;vertical-align:middle;line-height:normal;background-color:inherit;border:1px solid rgba(255,255,255,0.5)}.debug-mode tw-hook{background-color:rgba(0,85,255,0.1) !important}.debug-mode tw-hook::before{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"["}.debug-mode tw-hook::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"]"}.debug-mode tw-hook[name]::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"]<" attr(name) "|"}.debug-mode tw-pseudo-hook{background-color:rgba(255,170,0,0.1) !important}.debug-mode tw-collapsed::before{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"{"}.debug-mode tw-collapsed::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"}"}.debug-mode tw-verbatim::before,.debug-mode tw-verbatim::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"`"}.debug-mode tw-align[style*="text-align: center"]{background:linear-gradient(to right, rgba(255,204,189,0) 0%, rgba(255,204,189,0.25) 50%, rgba(255,204,189,0) 100%)}.debug-mode tw-align[style*="text-align: left"]{background:linear-gradient(to right, rgba(255,204,189,0.25) 0%, rgba(255,204,189,0) 100%)}.debug-mode tw-align[style*="text-align: right"]{background:linear-gradient(to right, rgba(255,204,189,0) 0%, rgba(255,204,189,0.25) 100%)}.debug-mode tw-column{background-color:rgba(189,228,255,0.2)}.debug-mode tw-enchantment{animation:enchantment 0.5s infinite;border:1px solid}.debug-mode tw-link::after,.debug-mode tw-broken-link::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:attr(passage-name)}.debug-mode tw-include{background-color:rgba(204,128,51,0.1)}.debug-mode tw-include::before{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:attr(type) ' "' attr(name) '"'}@keyframes enchantment{0%,to{border-color:#ffb366}50%{border-color:#6fc}}tw-debugger{position:fixed;box-sizing:border-box;bottom:0;right:0;z-index:999999;min-width:10em;min-height:1em;padding:0em 0.5em 0.5em 1em;font-size:1.25em;font-family:sans-serif;color:#000;border-left:solid #000 2px;border-top:solid #000 2px;border-top-left-radius:.5em;background:#fff;opacity:1}tw-debugger select{margin-right:1em;width:12em}tw-debugger button{border-radius:3px;border:solid #999 1px;margin:auto 4px;background-color:#fff;font-size:inherit;color:#000}tw-debugger button.enabled{background-color:#eee;box-shadow:inset #ddd 3px 5px 0.5em}tw-debugger .panel{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;position:absolute;bottom:100%;left:-2px;right:0;padding:1em;max-height:40vh;overflow-y:scroll;overflow-x:hidden;z-index:999998;background:#fff;border:inherit;border-bottom:solid #999 2px;border-top-left-radius:.5em;border-bottom-left-radius:.5em;font-size:0.8em}tw-debugger .panel:empty,tw-debugger .panel[hidden]{display:none}tw-debugger .panel-source,tw-debugger .panel-row-source{font-family:monospace;overflow-x:scroll;white-space:pre;-ms-flex-preferred-size:100%;flex-basis:100%}tw-debugger .panel-row-source{margin:5px 0}tw-debugger .panel-rows{width:100%;overflow-x:scroll}tw-debugger .panel-rows>*{display:table-row}tw-debugger .panel-rows>div:nth-of-type(2n){background:#EEE}tw-debugger .panel-row-buttons{text-align:right}tw-debugger .panel-variables .panel-rows:empty::before{content:"~ No variables ~";font-style:italic;color:#888;text-align:center}tw-debugger .panel-enchantments .panel-rows:empty::before{content:"~ No enchantments ~";font-style:italic;color:#888;text-align:center}tw-debugger .panel-errors .panel-rows:empty::before{content:"~ No errors... for now. ~";font-style:italic;color:#888;text-align:center}tw-debugger .panel-rows:empty+.panel-variables-bottom{display:none}tw-debugger .panel-storylets:not(.panel-exclusive) .storylet-exclusive,tw-debugger .panel-storylets:not(.panel-urgent) .storylet-urgent{display:none}tw-debugger .panel-variables-bottom{padding-top:5px}tw-debugger .enchantment-row{min-height:1.5em}tw-debugger .variable-path{opacity:0.4}tw-debugger .temporary-variable-scope,tw-debugger .enchantment-local{font-family:sans-serif;font-weight:normal;opacity:0.8;font-size:0.75em}tw-debugger .temporary-variable-scope:not(:empty)::before,tw-debugger .enchantment-local:not(:empty)::before{content:" in "}tw-debugger .variable-name,tw-debugger .enchantment-name{font-family:monospace;font-weight:bold}tw-debugger .variable-type{color:#444;font-weight:normal;text-overflow:ellipsis;overflow:hidden;max-width:10em}tw-debugger .error-row{display:table-row;background-color:rgba(230,101,204,0.3)}tw-debugger .error-row:nth-of-type(2n){background-color:rgba(237,145,219,0.3)}tw-debugger .error-row>*{display:table-cell;padding:0.25em 0.5em}tw-debugger .error-row .error-message{cursor:help}tw-debugger .error-row .error-passage{color:#444}tw-debugger .storylet-row{background-color:rgba(201,233,222,0.3)}tw-debugger .storylet-row:nth-child(2n){background-color:rgba(128,203,178,0.3)}tw-debugger .storylet-row.storylet-closed{font-style:italic;opacity:0.4;background-color:rgba(217,217,217,0.3)}tw-debugger .storylet-row.storylet-closed:nth-child(2n){background-color:rgba(166,166,166,0.3)}.storylet-error tw-debugger .storylet-row{background-color:rgba(230,101,204,0.3)}.storylet-error tw-debugger .storylet-row:nth-child(2n){background-color:rgba(237,145,219,0.3)}tw-debugger .storylet-row .storylet-name,tw-debugger .storylet-row .storylet-value{display:inline-block;width:50%}tw-debugger .tabs{padding-bottom:0.5em}tw-debugger .tab{border-radius:0px 0px 0.5em 0.5em;border-top:none}tw-debugger .resizer{position:absolute;height:3em;border-left:2px solid #ccc;border-right:2px solid #ccc;top:10px;left:4px;width:8px;cursor:ew-resize}tw-dialog{z-index:999997;border:#fff solid 2px;padding:2em;color:#fff;background-color:#000;display:block}@media (min-width: 576px){tw-dialog{max-width:50vw}}tw-dialog input[type=text]{font-size:inherit;width:100%}tw-dialog-links{text-align:right;display:-ms-flexbox;display:flex;-ms-flex-pack:end;justify-content:flex-end}tw-backdrop{z-index:999996;position:fixed;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,0.8);display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}tw-backdrop ~ tw-backdrop{display:none}tw-link,.link,tw-icon,.enchantment-clickblock{cursor:pointer}tw-link,.enchantment-link{color:#4169E1;font-weight:bold;text-decoration:none;transition:color 0.2s ease-in-out}tw-passage [style^="color"] tw-link:not(:hover),tw-passage [style*=" color"] tw-link:not(:hover),tw-passage [style^="color"][hover="true"] tw-link:hover,tw-passage [style*=" color"][hover="true"] tw-link:hover,tw-passage [style^="color"] .enchantment-link:not(:hover),tw-passage [style*=" color"] .enchantment-link:not(:hover),tw-passage [style^="color"][hover="true"] .enchantment-link:hover,tw-passage [style*=" color"][hover="true"] .enchantment-link:hover{color:inherit}tw-link:hover,.enchantment-link:hover{color:#00bfff}tw-link:active,.enchantment-link:active{color:#DD4B39}.visited{color:#6941e1}tw-passage [style^="color"] .visited:not(:hover),tw-passage [style*=" color"] .visited:not(:hover),tw-passage [style^="color"][hover="true"] .visited:hover,tw-passage [style*=" color"][hover="true"] .visited:hover{color:inherit}.visited:hover{color:#E3E}tw-broken-link{color:#993333;border-bottom:2px solid #993333;cursor:not-allowed}tw-passage [style^="color"] tw-broken-link:not(:hover),tw-passage [style*=" color"] tw-broken-link:not(:hover),tw-passage [style^="color"][hover="true"] tw-broken-link:hover,tw-passage [style*=" color"][hover="true"] tw-broken-link:hover{color:inherit}.enchantment-mouseover{border-bottom:2px dashed #999}.enchantment-mouseout{border:rgba(64,149,191,0.6) 1px solid}.enchantment-mouseout:hover{background-color:rgba(175,197,207,0.75);border:transparent 1px solid;border-radius:0.2em}.enchantment-clickblock{width:100%;height:100%;display:block}.enchantment-clickblock>:not(tw-enchantment)::after{content:"";width:100%;height:100%;top:0;left:0;display:block;box-sizing:border-box;position:absolute;pointer-events:none;color:rgba(65,105,225,0.5);transition:color 0.2s ease-in-out}.enchantment-clickblock>:not(tw-enchantment):hover::after{color:rgba(0,191,255,0.5)}.enchantment-clickblock>:not(tw-enchantment):active::after{color:rgba(222,78,59,0.5)}.enchantment-clickblock>:not(tw-enchantment)::after{box-shadow:inset 0 0 0 0.5vmax}.enchantment-clickblock>tw-passage::after,.enchantment-clickblock>tw-sidebar::after{box-shadow:0 0 0 0.5vmax}.enchantment-mouseoverblock>:not(tw-enchantment)::after{content:"";width:100%;height:100%;top:0;left:0;display:block;box-sizing:border-box;position:absolute;pointer-events:none;border:2px dashed #999}.enchantment-mouseoutblock>:not(tw-enchantment)::after{content:"";width:100%;height:100%;top:0;left:0;display:block;box-sizing:border-box;position:absolute;pointer-events:none;border:rgba(64,149,191,0.6) 2px solid}.enchantment-mouseoutblock:hover>:not(tw-enchantment)::after{content:"";width:100%;height:100%;top:0;left:0;display:block;box-sizing:border-box;position:absolute;pointer-events:none;background-color:rgba(175,197,207,0.75);border:transparent 2px solid;border-radius:0.2em}tw-link.enchantment-button,.enchantment-link.enchantment-button,.enchantment-button:not(.enchantment-link) tw-link,.enchantment-button:not(.enchantment-link) .enchantment-link{border-radius:16px;border-style:solid;border-width:2px;text-align:center;padding:0px 8px;display:block}tw-dialog-links{padding-top:1.5em}tw-dialog-links tw-link{border-radius:16px;border-style:solid;border-width:2px;text-align:center;padding:0px 8px;display:block;display:inline-block}html{margin:0;height:100%;overflow-x:hidden}*,:before,:after{position:relative;box-sizing:inherit}body{margin:0;height:100%}tw-storydata{display:none}tw-story{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;font:100% Georgia, serif;box-sizing:border-box;width:100%;min-height:100%;font-size:1.5em;line-height:1.5em;padding:5% 5%;overflow:hidden;background-color:#000;color:#fff}tw-story [style*=content-box] *{box-sizing:border-box}@media (min-width: 576px){tw-story{padding:5% 20%}}tw-story tw-consecutive-br{display:block;height:1.6ex;visibility:hidden}tw-story select{background-color:transparent;font:inherit;border-style:solid;padding:2px}tw-story select:not([disabled]){color:inherit}tw-story textarea{resize:none;background-color:transparent;font:inherit;color:inherit;border-style:none;padding:2px}tw-story input[type=checkbox]{transform:scale(1.5);margin:0 0.5em}tw-story tw-noscript{animation:appear 0.8s}tw-passage{display:block}tw-sidebar{text-align:center;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between}@media (min-width: 576px){tw-sidebar{left:-5em;width:3em;position:absolute;-ms-flex-direction:column;flex-direction:column}tw-enchantment[style*="width"]>tw-sidebar{width:inherit}}tw-icon{display:inline-block;margin:0.5em 0;font-size:66px;font-family:"Verdana",sans-serif}tw-icon[alt]{opacity:0.2}tw-icon[alt]:hover{opacity:0.4}tw-icon[data-label]::after{font-weight:bold;content:attr(data-label);font-size:20px;bottom:-20px;left:-50%;white-space:nowrap}tw-meter{display:block}tw-hook:empty,tw-expression:empty{display:none}tw-error{display:inline-block;border-radius:0.2em;padding:0.2em;font-size:1rem;cursor:help;white-space:pre-wrap}tw-error.error{background-color:rgba(223,58,190,0.6);color:#fff}tw-error.warning{background-color:rgba(223,140,58,0.6);color:#fff;display:none}.debug-mode tw-error.warning{display:inline}tw-error-explanation{display:block;font-size:0.8rem;line-height:1rem}tw-open-button,tw-folddown{cursor:pointer;line-height:0em;border-radius:1px;border:1px solid black;font-size:0.8rem;margin:0 0.4rem;padding:2px;white-space:pre}tw-folddown::after{content:"\25b6"}tw-folddown.open::after{content:"\25bc"}tw-open-button::after{content:"Open"}tw-notifier{border-radius:0.2em;padding:0.2em;font-size:1rem;background-color:rgba(223,182,58,0.4);display:none}.debug-mode tw-notifier{display:inline}tw-notifier::before{content:attr(message)}tw-colour{border:1px solid black;display:inline-block;width:1em;height:1em}tw-enchantment:empty{display:none}h1{font-size:3em}h2{font-size:2.25em}h3{font-size:1.75em}h1,h2,h3,h4,h5,h6{line-height:1em;margin:0.3em 0 0.6em 0}pre{font-size:1rem;line-height:initial}small{font-size:70%}big{font-size:120%}mark{color:rgba(0,0,0,0.6);background-color:#ff9}ins{color:rgba(0,0,0,0.6);background-color:rgba(255,242,204,0.5);border-radius:0.5em;box-shadow:0em 0em 0.2em #ffe699;text-decoration:none}center{text-align:center;margin:0 auto;width:60%}blink{text-decoration:none;animation:fade-in-out 1s steps(1, end) infinite alternate}tw-align{display:block}tw-columns{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:justify;justify-content:space-between}.transition-in{animation:appear 0ms step-start}.transition-out{animation:appear 0ms step-end}[data-t8n^=dissolve].transition-in,[data-t8n=fade].transition-in{animation:appear .8s}[data-t8n^=dissolve].transition-out,[data-t8n=fade].transition-out{animation:appear .8s reverse}[data-t8n^=shudder].transition-in{display:inline-block !important;animation:shudder-in .8s}[data-t8n^=shudder].transition-out{display:inline-block !important;animation:shudder-in .8s reverse}[data-t8n^=rumble].transition-in{display:inline-block !important;animation:rumble-in .8s}[data-t8n^=rumble].transition-out{display:inline-block !important;animation:rumble-in .8s reverse}[data-t8n^=pulse].transition-in{animation:pulse .8s;display:inline-block !important}[data-t8n^=pulse].transition-out{animation:pulse .8s reverse;display:inline-block !important}[data-t8n^=zoom].transition-in{animation:zoom-in .8s;display:inline-block !important}[data-t8n^=zoom].transition-out{animation:zoom-in .8s reverse;display:inline-block !important}[data-t8n^=blur].transition-in{animation:blur .8s;display:inline-block !important}[data-t8n^=blur].transition-out{animation:blur .8s reverse;display:inline-block !important}[data-t8n^=slideleft].transition-in{animation:slide-left .8s;display:inline-block !important}[data-t8n^=slideleft].transition-out{animation:slide-right .8s reverse;display:inline-block !important}[data-t8n^=slideright].transition-in{animation:slide-right .8s;display:inline-block !important}[data-t8n^=slideright].transition-out{animation:slide-left .8s reverse;display:inline-block !important}[data-t8n^=slideup].transition-in{animation:slide-up .8s;display:inline-block !important}[data-t8n^=slideup].transition-out{animation:slide-down .8s reverse;display:inline-block !important}[data-t8n^=slidedown].transition-in{animation:slide-down .8s;display:inline-block !important}[data-t8n^=slidedown].transition-out{animation:slide-up .8s reverse;display:inline-block !important}[data-t8n^=fadeleft].transition-in{animation:fade-left .8s;display:inline-block !important}[data-t8n^=fadeleft].transition-out{animation:fade-right .8s reverse;display:inline-block !important}[data-t8n^=faderight].transition-in{animation:fade-right .8s;display:inline-block !important}[data-t8n^=faderight].transition-out{animation:fade-left .8s reverse;display:inline-block !important}[data-t8n^=fadeup].transition-in{animation:fade-up .8s;display:inline-block !important}[data-t8n^=fadeup].transition-out{animation:fade-down .8s reverse;display:inline-block !important}[data-t8n^=fadedown].transition-in{animation:fade-down .8s;display:inline-block !important}[data-t8n^=fadedown].transition-out{animation:fade-up .8s reverse;display:inline-block !important}[data-t8n^=flicker].transition-in{animation:flicker .8s}[data-t8n^=flicker].transition-out{animation:flicker .8s reverse}
</style>
</head>
<body>
<tw-story><noscript><tw-noscript>JavaScript needs to be enabled to play Forevermore Concept.</tw-noscript></noscript></tw-story>
<tw-storydata name="Forevermore Concept" startnode="419" creator="Twine" creator-version="2.3.16" ifid="75B7072E-A279-48DD-9A78-F0114C6838B7" zoom="1" format="Harlowe" format-version="3.2.3" options="" hidden><style role="stylesheet" id="twine-user-stylesheet" type="text/twine-css">@import url('http://fonts.cdnfonts.com/css/butler');
@import url('http://fonts.cdnfonts.com/css/butler-stencil');

tw-passage{
  font-family: 'butler', sans-serif;
  font-size: 110%;
  letter-spacing: 0.2px;
  -webkit-animation: fadeIn 2000ms 1 forwards;
animation: fadeIn 2000ms 1 forwards;
}

picformat{
	border-radius: 1em;
	margin: 1em;
}

h1{
  
  font-family: 'Butler Stencil', sans-serif;
}

  tw-story {margin-left: 5%; vertical-align: middle; background-color: #fdfffb; width: initial; margin-right: 5%; line-height:1.2; overflow:auto; } 

  tw-link { color: #AD0000; }

tw-story[tags="light"] {
  background-color: #fdfffb;
    color: #1F1F1F;

}

tw-story[tags="dark"] {
  background-color: #1F1F1F;
    color: #fdfffb; 
}

tw-link, .enchantment-link {
  color: #AD0000;

}

@-webkit-keyframes fade-out {
	0% {opacity: 1;}
	100% {opacity: 0;} 
} 

@keyframes fade-out {
	0% {opacity: 1;}
	100% {opacity: 0;} 
} 

tw-hook[name="fadeout"] {
	-webkit-animation-name: fade-out;
	-webkit-animation-duration: 10s;
	-webkit-animation-fill-mode: both;
	animation-name: fade-out;
	animation-duration: 10s;
	animation-fill-mode: both;
}

@-webkit-keyframes fadeIn {
  0% {
	opacity: 0;
  }

  100% {
	opacity: 1;
  }
}

@keyframes fadeIn {
  0% {
	opacity: 0;
  }

  100% {
	opacity: 1;
  }
}

tw-debugger {
	display: none;
}

tw-sidebar {
	display: visible;
}



/**
 * Harlowe Audio Library (HAL), by Chapel, v2.2.1
 * for Harlowe 2.1.0 and higher
 * Released under the Unlicense, and dedicated to the public domain.
**/
#audio-overlay{position:fixed;top:0;right:0;left:0;bottom:0;z-index:100000;background:#111}.lds-ring{display:block;position:relative;top:20%;margin:auto;width:20em;height:20em}.lds-ring div{box-sizing:border-box;display:block;position:absolute;width:18em;height:18em;margin:6px;border:6px solid #fff;border-radius:50%;-webkit-animation:lds-ring 1.2s cubic-bezier(.5,0,.5,1) infinite;animation:lds-ring 1.2s cubic-bezier(.5,0,.5,1) infinite;border-color:#fff transparent transparent transparent}.lds-ring div:nth-child(1){-webkit-animation-delay:-.45s;animation-delay:-.45s}.lds-ring div:nth-child(2){-webkit-animation-delay:-.3s;animation-delay:-.3s}.lds-ring div:nth-child(3){-webkit-animation-delay:-.15s;animation-delay:-.15s}@-webkit-keyframes lds-ring{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes lds-ring{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}input#audio-volume{width:100%;margin:2em 0}span#vol-title{position:relative;bottom:-1em;font-size:1rem;float:left}tw-link#audio-mute{display:inline-block;padding:.3em;width:90%;text-decoration:none;color:#111;background:#eee;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border:1px solid #000}tw-link#audio-mute:hover{opacity:.8}tw-link#audio-mute:active{opacity:.6}tw-link#audio-mute span{display:inline-block;width:1em;position:relative;height:1em;top:.2em;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAQAAABLCVATAAABF0lEQVR4Ae2VJVREYRSEB3ftuFUaLhF6I22iF7TgLr1XvAc849CwiBac9Xtm3e97cefp/Pec7+mdH0mZrGtMoBomyAEHfjGHXKg07gNxeUS3BuMAqGZswE7YcOIYgqgG7BFlSQgTAgKysC2jNjQmghFQCOpMxq+QmQgmFATU4kcq/YlgfKB1lALUqFSukRIbEwpy4BTZPM/Bu9TaQ362KAsl56sAtSR+Sgv6RCFdr/gjBYiuj65c3J0eNEmXz95TgybocvmoJj3avf5l59L1iD/WglZCP7/uh8zgeQ6epdahaZENFIPCCFvEYNPW4JdNazBGzhkj6caCbSc02DRRu0+8RR/+rb7wx6D505HxCVKvG0zpp+yknHe8MBDkT/s8AAAAAElFTkSuQmCC);background-size:contain}tw-link#audio-mute.muted span{right:4px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAASElEQVR4Ae3WsQ0AMAjAsJ7ez9MTGEmlRGL3BJzPq6prw2DDYMNgw2DDYMOwh1kAMUygQIEC2RejANVxnVE9aDOqJ39GVZWqB5Z3r1ndBX5oAAAAAElFTkSuQmCC)}div#audio-volume{float:left}div#audio-controls{font:100% Georgia,serif;font-size:1.5em;position:fixed;width:8em;height:100%;padding:1em 2em;z-index:10000;top:0;left:0;bottom:0;background:#333;color:#eee;transition:left .3s;text-align:center}div#audio-controls.closed{left:-10.5em}div#audio-controls tw-link#audio-panel-toggle{display:inline-block;width:1.5em;position:absolute;height:1.5em;top:0;right:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;text-decoration:none;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAQAAABLCVATAAAAYklEQVR4Ae3MsQFAMAAEQMDEagCgN4EuVTrbPcACeUBugDNeSdMQomI0PmYdTEYD9DA5jcVoBKuxGY1kNQ6jGRSaGaIj8gw1aI/KYVUSNqsSzMpiVT2zMjlVN0fqVW5o2luMGHqkQmD9cPYAAAAASUVORK5CYII=);background-size:contain}div#audio-controls.closed tw-link#audio-panel-toggle{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAQAAABLCVATAAAAZElEQVR4Ae3TpwGAMBQAUfrEeHB0cDhcXBSO7ehlgBw9N8BL/YZO95r6uA/UEbOv+ylfHRJ9z1BWLynKJqmWohyS6ijKOygKCpmjZYqXTTA2xUiCsShGAMw8/Q3ArFgFMHek0w3WCaR74eO2YQAAAABJRU5ErkJggg==)}@media screen and (max-width:800px){div#audio-controls.closed{left:-12em}div#audio-controls.closed tw-link#audio-panel-toggle{right:-1.5em}}div#story-menu{margin:1em 0}tw-link.story-menu{width:100%;display:block;font-weight:400;background:#ccc;font-size:.9em;padding:.1em 0;color:#111;border:1px solid #333}tw-link.story-menu.hide{display:none}tw-link.story-menu:hover{opacity:.8}tw-link.story-menu:active{opacity:.6}input[type=range].hal{-webkit-appearance:none;width:100%;margin:2.25px 0}input[type=range].hal:focus{outline:0}input[type=range].hal::-webkit-slider-runnable-track{width:100%;height:15.5px;cursor:pointer;box-shadow:.4px .4px 1px #000,0 0 .4px #0d0d0d;background:#111;border-radius:0;border:0 solid #010101}input[type=range].hal::-webkit-slider-thumb{box-shadow:0 0 2.2px rgba(17,17,17,.1),0 0 0 rgba(30,30,30,.1);border:0 solid #fff;height:20px;width:11px;border-radius:0;background:rgba(255,255,255,.93);cursor:pointer;-webkit-appearance:none;margin-top:-2.25px}input[type=range].hal:focus::-webkit-slider-runnable-track{background:#444}input[type=range].hal::-moz-range-track{width:100%;height:15.5px;cursor:pointer;box-shadow:.4px .4px 1px #000,0 0 .4px #0d0d0d;background:#111;border-radius:0;border:0 solid #010101}input[type=range].hal::-moz-range-thumb{box-shadow:0 0 2.2px rgba(17,17,17,.1),0 0 0 rgba(30,30,30,.1);border:0 solid #fff;height:20px;width:11px;border-radius:0;background:rgba(255,255,255,.93);cursor:pointer}input[type=range].hal::-ms-track{width:100%;height:15.5px;cursor:pointer;background:0 0;border-color:transparent;color:transparent}input[type=range].hal::-ms-fill-lower{background:#000;border:0 solid #010101;border-radius:0;box-shadow:.4px .4px 1px #000,0 0 .4px #0d0d0d}input[type=range].hal::-ms-fill-upper{background:#111;border:0 solid #010101;border-radius:0;box-shadow:.4px .4px 1px #000,0 0 .4px #0d0d0d}input[type=range].hal::-ms-thumb{box-shadow:0 0 2.2px rgba(17,17,17,.1),0 0 0 rgba(30,30,30,.1);border:0 solid #fff;height:20px;width:11px;border-radius:0;background:rgba(255,255,255,.93);cursor:pointer;height:15.5px}input[type=range].hal:focus::-ms-fill-lower{background:#111}input[type=range].hal:focus::-ms-fill-upper{background:#444}
/** End of HAL code */</style><script role="script" id="twine-user-script" type="text/twine-javascript">/**
 * Harlowe Audio Library (HAL), by Chapel, v2.2.1
 * for Harlowe 2.1.0 and higher
 * Released under the Unlicense, and dedicated to the public domain.
**/
;!function(e){(jQuery.browser=jQuery.browser||{}).mobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}(navigator.userAgent||navigator.vendor||window.opera),function(){"use strict";window.Fast={filter:function(e,t){for(var o=e.length,n=[],a=0;a<o;a++)t(e[a],a,e)&&n.push(e[a]);return n},forEach:function(e,t){for(var o=e.length,n=0;n<o;n++)t(e[n],n,e)},map:function(e,t){for(var o=e.length,n=new Array(o),a=0;a<o;a++)n[a]=t(e[a],a,e);return n},find:function(e,t){for(var o=e.length,n=0;n<o;n++)if(t(e[n],n,e))return e[n]},findIndex:function(e,t){for(var o=e.length,n=0;n<o;n++)if(t(e[n],n,e))return n;return-1},some:function(e,t){for(var o=e.length,n=0;n<o;n++)if(t(e[n],n,e))return!0;return!1}}}(),window.Chapel=window.Chapel||{},window.Chapel.options={preload:!0,loadDelay:0,muteOnBlur:!0,startingVol:.5,persistPrefs:!0,globalA:!0,showControls:!0,sidebarStartClosed:!0,volumeDisplay:!1,trackLoadLimit:500,totalLoadLimit:8e3,debug:!1},window.Chapel.debug=function(){Chapel.options.debug&&console.log.apply(null,arguments)},function(){"use strict";var n=$("tw-storydata"),o=/(.+?):(.+)/,t=/[\r\n]+/,a=/^["']/,r=/["']$/;function e(e){return Fast.map(Fast.filter(e.split(t),function(e){return e&&e.trim()&&e.includes(":")}),function(e){return e.trim()})}function i(e){return e.trim().replace(a,"").replace(r,"").trim()}function s(e){var t=e.match(o);return t instanceof Array?{key:i(t[1]),value:i(t[2])}:e}var u,l,c,p=n.find('tw-passagedata[name="hal.tracks"]'),d=null;p.length&&(u=e(p.text()),l=[],c=[],Fast.forEach(u,function(e){var t,o=s(e);"string"==typeof o&&c.push(o),l.push([o.key,(t=o.value,Fast.map(t.split(","),i))])}),c.length&&console.error("Some track definitions could not be parsed:\n"+c.join("\n")+"\nPlease check these definitions and try again."),d=new Map(l));var m,h,f=n.find('tw-passagedata[name="hal.config"]'),g=null;function y(e){var t=n.attr("format-version");if(e)return t;var o=t.split(".")[0],o=Number(o);return Number.isNaN(o)&&(o=3),o<1&&(o=3),o}f.length&&(m=e(f.text()),h={},Fast.forEach(Fast.map(m,function(e){return s(e)}),function(e){h[e.key]=e.value}),g=h),g&&Fast.forEach(Object.keys(g),function(e){var t=e,o=h[e],n=typeof Chapel.options[e];"boolean"==n?"true"===o?Chapel.options[t]=!0:"false"===o&&(Chapel.options[t]=!1):"number"==n?(o=Number(o),Number.isNaN(o)||(Chapel.options[t]=o)):"string"==n&&o&&(Chapel.options[t]=o)});var w=require("macros");if(window.Chapel=window.Chapel||{},window.Chapel.Macros={add:function(n){n&&"object"==typeof n&&Fast.forEach(Object.keys(n),function(e){var t,o;o=n[t=e],w.add(t,function(){var e=[].slice.call(arguments).slice(1),t=o.apply(null,e);return"string"==typeof t||"boolean"==typeof t||"number"==typeof t?t:""},w.TypeSignature.zeroOrMore(w.TypeSignature.Any))})}},window.Chapel.Get={version:y(),isHarlowe3OrLater:3<=y(),storyTitle:n.attr("name"),IFID:n.attr("ifid"),fromPassage:d},Chapel.debug("Harlowe Version -> ",y(!0)),Chapel.debug("Harlowe Major Version -> ",Chapel.Get.version),Chapel.debug("Story Title -> ",Chapel.Get.storyTitle),Chapel.debug("Story IFID -> ",Chapel.Get.IFID),Chapel.Get.version<2)throw new Error("The Harlowe Audio Library is only designed to work with Harlowe 2 and 3; you appear to be using Harlowe 1 or an otherwise invalid story format.","get.js -> initialization",176);Chapel.options.storagekey="%%hal-"+Chapel.Get.IFID+"-{"+Chapel.Get.storyTitle+"}",Chapel.debug("Storage Key -> ",Chapel.options.storagekey)}(),function(){"use strict";var t=Chapel.options,e=function(e,t){if(window.localStorage)try{e=""+e,"string"!=typeof t&&(t=JSON.stringify(t)),window.localStorage.setItem(e,t)}catch(e){console.error(e)}},o=function(e){if(window.localStorage)try{return e=""+e,window.localStorage.getItem(e)}catch(e){console.error(e)}},n=function(e){if(window.localStorage)try{e=""+e,window.localStorage.removeItem(e)}catch(e){console.error(e)}},a={loaded:[],classes:{},master:{volume:t.startingVol,mute:!1},groups:{playing:[],looping:[],custom:{}},mute:function(e){a.master.mute=!!e,$(document).trigger({type:":master-mute",mute:!!e})},isMuted:function(){return!!a.master.mute},volume:function(e){e=Number(e),Number.isNaN(e)||(1<e?e=1:e<0&&(e=0),a.master.volume=e),$(document).trigger({type:":master-volume",volume:e})},getVolume:function(){return a.master.volume},stopAll:function(){a.classes.Track&&Fast.forEach(a.classes.Track.list,function(e){e.stop()})},audioPlaying:function(){return!!a.groups.playing.length},savePrefs:function(){e(t.storagekey,a.master)},loadPrefs:function(){var e=o(t.storagekey);e&&"object"==typeof e&&e.hasOwnProperty("volume")&&"number"==typeof e.volume&&e.hasOwnProperty("mute")&&"boolean"==typeof e.volume&&(delete a.master,a.master=e)},clearPrefs:function(){n(t.storagekey)}},r={track:[":available",":loaded",":play",":stop",":mute",":volume"],master:[":master-mute",":master-volume"]};var i=r.track.concat(r.master);function s(e,t){if(!e||"string"!=typeof e||!e.trim())return null;var o=Fast.filter(Fast.map(e.split(" "),function(e){return":"!==(e=e.split(".")[0])[0]&&(e=":"+e),e+".userland"}),function(e){return t?i.includes(e):r.track.includes(e)}).join(" ");return o&&o.trim()?o:null}a.data={parseEvent:s,bail:function(e){throw new Error(e,"audio.js -> bail()",140)}},a.on=function(e,t){t&&"function"==typeof t?(e=s(e,!0))&&$(document).on(e,t):console.error("Chapel.Audio.on() -> invalid callback")},a.one=function(e,t){t&&"function"==typeof t?(e=s(e,!0))&&$(document).one(e,t):console.error("Chapel.Audio.one() -> invalid callback")},a.off=function(e){(e=s(e,!0))&&$(document).off(e)},t.persistPrefs&&($(document).on(":master-mute",a.savePrefs),$(document).on(":master-volume",a.savePrefs)),$(document).on(":play",function(e){e.track.addToGroup("playing")}),$(document).on(":stop",function(e){e.track.removeFromGroup("playing")}),t.muteOnBlur&&$(window).on("blur",function(){a.isMuted()||(a.mute(!0),$(window).one("focus",function(){a.mute(!1)}))}),a.parseEvent=s,window.Chapel=window.Chapel||{},window.Chapel.Audio=a}(),function(){"use strict";var r=Chapel.Audio,o=r.data.pareEvent,a=r.data.bail,i=Chapel.options,t=$(document.createElement("div")).attr("id","audio-container").css("display","none").appendTo(document.body),s={aac:"audio/aac",caf:"audio/x-caf","x-caf":"audio/x-caf",mp3:'audio/mpeg; codecs="mp3"',mpeg:'audio/mpeg; codecs="mp3"',m4a:"audio/mp4",mp4:"audio/mp4","x-m4a":"audio/mp4","x-mp4":"audio/mp4",oga:"audio/ogg",ogg:"audio/ogg",opus:'audio/ogg; codecs="opus"',wav:"audio/wav",wave:"audio/wav",weba:"audio/webm",webm:"audio/webm"};function u(e,t,o){this instanceof u||a("Track: called without `new` operator"),e||a("Track: no id specified"),"string"!=typeof e&&a("Track: track id is not a string"),t&&(!Array.isArray(t)||t.length)||a("Track: no sources specified"),o?t=[].slice.call(arguments).slice(1):"string"==typeof t&&(t=[t]);var n=$(document.createElement("audio"));Fast.forEach(t,function(e){var t,o;$(document.createElement("source")).attr({src:e,type:(t=e.split("."),(o=t[t.length-1]).includes("?")&&(o=o.split("?")[0]),o=o.toLowerCase().trim(),Object.keys(s).includes(o)||a('Track: unsupported file type "'+o+'"'),s[o])}).appendTo(n)}),n.attr({"data-track":"id","data-volume":1,"data-mute":!1}).one("canplaythrough.hal",function(){r.loaded.push(e)}),i.preload&&n.attr("preload","auto"),n[0].volume=+r.master.volume,this.id=e,this.$el=n,this.unwrap=n[0],this.sources=t}Object.assign(u,{list:[],is:function(e){return e instanceof u},has:function(t){return Fast.some(u.list,function(e){return e.id===t})},emit:function(e,t){$(document).trigger({type:e,track:t}),t.emit(e)},add:function(e,t,o){o&&(t=[].slice.call(arguments).slice(1));var n=new u(e,t);return u.list.push(n),n.$el.on("canplay",function(){u.emit(":available",n)}),n.$el.on("canplaythrough",function(){u.emit(":loaded",n)}),n.attach(),n},renew:function(){Fast.forEach(u.list,function(e){e.mute(e.isMuted()),e.volume(e.getVolume())})},getIdx:function(t){return Fast.findIndex(u.list,function(e){return e.id===t})},get:function(t){var e=Fast.find(u.list,function(e){return e.id===t});if(!e)throw new ReferenceError('There is no track with the id "'+t+'". Please check your spelling and capitalization.',"track.js -> Track.get()",155);return e},removeFromDOM:function(e){"string"==typeof e&&(e=u.get(e)),e&&u.is(e)?e.unattach():t.remove()},_runOnMultiple:function(e,t,o){e instanceof Array&&u.prototype.hasOwnProperty(t)&&Fast.forEach(u.list,function(e){u.is(e)||(e=u.get(e)||null),e&&e[t].apply(e,o&&o instanceof Array?o:[])})}}),Object.assign(u.prototype,{constructor:u,emit:function(e){this.$el.trigger({type:e,track:this})},clone:function(){return new u(this.id,this.sources)},isAttached:function(){return $.contains(t[0],this.unwrap)},attach:function(){return this.isAttached()||this.$el.appendTo(t),this},unattach:function(){return this.isAttached()&&this.$el.remove(),this},isPlaying:function(){return!this.unwrap.paused},play:function(){var e=this;return this.unwrap.play(),u.emit(":play",this),this.$el.on("ended",function(){e.unwrap.loop||(e.unwrap.currentTime=0,u.emit(":stop",e))}),this},playWhenPossible:function(){var t=this;return this.unwrap.play().then(function(){u.emit(":play",t),t.$el.on("ended",function(){t.unwrap.loop||(t.unwrap.currentTime=0,u.emit(":stop",t))})},function(e){$(document).one("click mousedown keydown touchstart",function(){t.play()})}).catch(function(e){console.error(e)}),this},forcePlay:function(){var e=this,t=$(document.createElement("a")).css("display","none").appendTo(document.body).on("click",function(){e.play()});setTimeout(function(){t.trigger("click")},safeAudioStart)},pause:function(){return this.unwrap.pause(),u.emit(":pause",this),this},stop:function(){return this.unwrap.pause(),this.unwrap.currentTime=0,u.emit(":stop",this),this},mute:function(e){return e=!!e,this.$el.attr("data-mute",e),r.master.mute?this.unwrap.muted=!0:this.unwrap.muted=e,u.emit(":mute",this),this},isMuted:function(){var e=this.$el.attr("data-mute");return"boolean"==typeof e?e:"false"!==e},toggleMute:function(){return this.mute(!this.isMuted()),this},volume:function(e){return e=Number(e),Number.isNaN(e)||(1<e?e=1:e<0&&(e=0),this.$el.attr("data-volume",e),this.unwrap.volume=e*r.master.volume),u.emit(":volume",this),this},getVolume:function(){return Number(this.$el.attr("data-volume"))},addToGroup:function(e,t){var o=this,n=t?r.groups.custom[e]:r.groups[e];return Fast.some(n,function(e){return o.id===e.id})||n.push(this),this},removeFromGroup:function(e,t){var o=this,n=t?r.groups.custom[e]:r.groups[e],a=Fast.findIndex(n,function(e){return e.id&&e.id===o.id});return n.splice(a,1),this},loop:function(e){return this.unwrap.loop=!!e,this.unwrap.loop?this.addToGroup("looping"):this.removeFromGroup("looping"),this},isLooping:function(){return!!this.unwrap.loop},toggleLoop:function(){return this.loop(!this.isLooping()),this},seek:function(e){return e<0?e=this.unwrap.duration-e:e>this.unwrap.duration&&(e=this.unwrap.duration),this.unwrap.currentTime=e,this},fadeIn:function(e){var t=this;e=e||1;var o=this.getVolume();return this.volume(0),this.play(),this.$el.animate({volume:o*r.master.volume},1e3*e,function(){t.volume(o),u.emit(":volume",t),u.emit(":fade",t)}),this},fadeOut:function(e){e=e||1;var t=this,o=this.getVolume();return this.$el.animate({volume:0},1e3*e,function(){t.stop(),t.volume(o),u.emit(":volume",t),u.emit(":fade",t)}),this},fadeTo:function(e,t){var o=this;if(e=e||1,t=Number(t),!Number.isNaN(t))return 1<t?t=1:t<0&&(t=0),this.$el.animate({volume:t*r.master.volume},1e3*e,function(){o.volume(t),u.emit(":volume",o),u.emit(":fade",o)}),this;alert("ivalid volume level")},delay:function(e,t){var o=this;"function"==typeof t&&(e=Number(e),(Number.isNaN(e)||e<0)&&(e=0),setTimeout(function(){t.call(o,o,e)},e))},on:function(e,t){if(!t||"function"!=typeof t)return console.error("<track>.on() -> invalid callback"),this;(e=o(e))&&this.$el.on(e,t)},one:function(e,t){if(!t||"function"!=typeof t)return console.error("<track>.one() -> invalid callback"),this;(e=o(e))&&this.$el.one(e,t)},off:function(e){(e=o(e))&&this.$el.off(e)}}),r.classes.Track=u,r.newTrack=function(){try{return u.add.apply(null,arguments)}catch(e){console.error(e.message),alert("Error in A.newTrack() -> see the console for more information.")}},r.track=function(e){try{return u.get(e)}catch(e){console.error(e.message),alert("Error in A.track() -> see the console for more information.")}},$(document).on(":master-mute",u.renew),$(document).on(":master-volume",u.renew)}(),function(){"use strict";var i=Chapel.Audio,s=i.classes.Track,o=(i.data._extend,/(play)?list:(.+)/i);i.createGroup=function(e,t,o){var n,a,r=o?[].slice.call(arguments).slice(1):t;n=e,(a=r)&&Array.isArray(a)||(a=[]),i.groups.custom[n]=Fast.map(a,function(e){return s.get(e)})},i.group=function(e){if(!(this instanceof i.group))return new i.group(e);if(Object.keys(i.groups.custom).includes(e))this.members=i.groups.custom[e];else{if(!(i.groups[e]&&i.groups[e]instanceof Array))throw new ReferenceError('There is no group with the id "'+id+'". Please check your spelling and capitalization.',"group.js -> A.group()",29);this.members=i.groups[e]}var t;!o.test(e)||(t=e.match(o)[2])&&t.trim()&&(this.members=i.playlist(t).tracks),Array.isArray(this.members)||(this.members=[],console.error('Could not find members for track group "'+e+'"!'))},Object.assign(i.group,{is:function(e){return this instanceof i.group},_runOnAll:function(e,t,o,n){null!=n?o=[].slice.call(arguments).slice(2):o instanceof Array||(o=[o]);var a=[e.members,t,o];s._runOnMultiple.apply(null,a)}}),Object.assign(i.group.prototype,{constructor:i.group,_run:function(){i.group._runOnAll.apply(null,[this].concat([].slice.call(arguments)))},play:function(){return this._run("play"),this},pause:function(){return this._run("pause"),this},stop:function(){return this._run("stop"),this},mute:function(e){return this._run("mute",e),this},volume:function(e){return this._run("volume",e),this},loop:function(e){return this._run("loop",e),this}})}(),function(){"use strict";var e=Chapel.Audio,r=e.classes.Track;e.data._extend;function n(e,t){if(!(this instanceof n))return new n(e,t);this.id=e,this.tracks=t.map(function(e){return r.get(e)}),this.looping=!1,this.current="",this.playing=!1}Object.assign(n,{list:{},is:function(e){return e instanceof n},add:function(e,t,o){return o&&(t=[].slice.call(arguments).slice(1)),n.list[e]=new n(e,t),n.list[e]},_runOnAll:function(e,t,o,n){null!=n?o=[].slice.call(arguments).slice(2):o instanceof Array||(o=[o]);var a=[e.tracks,t,o];r._runOnMultiple.apply(null,a)}}),Object.assign(n.prototype,{constructor:n,clone:function(){return new n(this.id,this.tracks.map(function(e){return e.id}))},_run:function(){n._runOnAll.apply(null,[this].concat([].slice.call(arguments)))},volume:function(e){return this._run("volume",e),this},mute:function(e){return this._run("mute",e),this},shuffle:function(){for(var e,t,o=this.tracks,n=o.length-1;0<n;n--)e=Math.floor(Math.random()*(n+1)),t=o[n],o[n]=o[e],o[e]=t;return this.tracks=o,this},random:function(){return this.tracks[Math.floor(Math.random()*this.tracks.length)]},isPlaying:function(){return this.playing},nowPlaying:function(){return r.get(this.current)},play:function(e){var t=this;if((e=e||(t.current?Fast.findIndex(t.tracks,function(e){return e.id===t.current}):0))>=t.tracks.length&&t.looping)e=0;else if(e>=t.tracks.length)return t.current="",void(t.playing=!1);var o=t.tracks[e],n=o.isLooping();return o.loop(!1),o.play(),t.playing=!0,setTimeout(function(){o.isPlaying()||(t.playing=!1)},20),t.current=o.id,o.$el.one("ended.playlist",function(){e++,o.loop(n),t.play(e)}),t},loop:function(e){return this.looping=!!e,this},isLooping:function(){return this.looping},stop:function(){var e;return this.current&&this.isPlaying()?(e=this.nowPlaying())&&(e.stop(),e.$el.off(".playlist")):this._run("stop"),this.current="",this.playing=!1,this},pause:function(){var e;return this.current&&this.isPlaying()&&((e=this.nowPlaying())&&e.pause()),this.playing=!1,this}}),e.classes.Playlist=n,e.createPlaylist=function(){try{n.add.apply(null,arguments)}catch(e){console.error(e.message),alert("Error in A.createPlaylist() -> see the console for more information.")}},e.playlist=function(e){try{var t=n.list[e]||null;if(!t)throw new ReferenceError('There is no playlist with the id "'+e+'". Please check your spelling and capitalization.',"list.js -> A.playlist()",171);return t}catch(e){console.error(e.message),alert("Error in A.createPlaylist() -> see the console for more information.")}}}(),function(){"use strict";var t=Chapel.Audio,o=t.classes.Track,n=t.classes.Playlist;function a(t,o){if("object"!=typeof o)throw new TypeError("Invalid extension.","extensions.js -> _extend()",8);Fast.forEach(Object.keys(o),function(e){if(void 0!==t[e])throw new Error('Invalid extension: cannot clobber existing property "'+e+'".',"extensions.js -> _extend()",8);t[e]=o[e]})}t.extend=function(e){a(Audio,e)},o.extend=function(e){a(o,e)},o.extendPrototype=function(e){a(o.prototype,e)},t.extendTrack=o.extend,t.extendTrackProto=o.extendPrototype,t.group.extend=function(e){a(t.group,e)},t.group.extendPrototype=function(e){a(t.group.prototype,e)},t.extendGroup=t.group.extend,t.extendGroupProto=t.group.extendPrototype,n.extend=function(e){a(n,e)},n.extendPrototype=function(e){a(n.prototype,e)},t.extendPlaylist=n.extend,t.extendPlaylistProto=n.extendPrototype}(),function(){"use strict";var e,t,o,n,a,r,i,s,u=Chapel.options;u.showControls&&(e=$(document.createElement("div")).attr("id","story-menu").css("display","none"),t=$(document.createElement("span")).attr("id","vol-title").append("Volume"),u.volumeDisplay||t.css("display","none"),o=$(document.createElement("input")).attr({id:"audio-volume",type:"range",min:1,max:99,step:1,title:"Volume"}).addClass("hal"),(n=Math.trunc(100*window.Chapel.Audio.master.volume))<0?n=0:100<n&&(n=100),o.attr("value",n),a=function(e){void 0===e&&(e=o.val()),t.empty().append("Volume "+e)},o.on("input",function(){window.Chapel.Audio.volume($(this).val()/100),a($(this).val())}),r=$(document.createElement("tw-link")).attr({id:"audio-mute",title:"Mute"}).append("Mute <span></span>").on("click",function(e){e.preventDefault(),$(this).toggleClass("muted"),Chapel.Audio.mute(!Chapel.Audio.isMuted())}),Chapel.Audio.isMuted()&&r.addClass("muted"),i=$(document.createElement("tw-link")).attr("id","audio-panel-toggle").on("click",function(e){e.preventDefault(),s.toggleClass("closed")}),s=$(document.createElement("div")).attr("id","audio-controls").append(e,t,o,r,i).appendTo(document.body),u.sidebarStartClosed&&s.addClass("closed"),window.Chapel=window.Chapel||{},window.Chapel.Audio=window.Chapel.Audio||{},window.Chapel.Audio.controls={$panel:s,$volume:o,$mute:r,$user:e,close:function(){s.addClass("closed")},open:function(){s.removeClass("closed")},toggle:function(){s.toggleClass("closed")},hide:function(){s.css("display","none")},show:function(){s.css("display","block")},updateVolume:a})}(),function(){"use strict";var s=Chapel.options,t=State,e=$(document.createElement("div")).attr("id","audio-overlay").css("display","none").appendTo(document.body);function o(){e.css("display","block").append('<div class="lds-ring"><div></div><div></div><div></div><div></div></div>')}function u(){e.fadeOut(function(){e.empty()})}window.Chapel=window.Chapel||{},window.Chapel.Audio=window.Chapel.Audio||{},window.Chapel.Audio.loadScreen={show:o,dismiss:u,kill:function(){$("#audio-overlay").remove()}},window.Chapel.Audio.$overlay=e,window.Chapel.Audio.preload=function(){var a,e,r,i;Chapel.debug("This is a mobile browser -> ",$.browser.mobile),t.pastLength||t.futureLength||$.browser.mobile||($(document).ready(function(){o()}),a=100+s.loadDelay,e=Chapel.Audio.classes.Track.list,r=Chapel.Audio.loaded,e.length?(i=Fast.map(e,function(e){return e.id}),0<s.totalLoadLimit&&setTimeout(function(){u()},s.totalLoadLimit),function e(){var t,o,n;i.length?(t=i.shift(),r.includes(t)?e():(o=Chapel.Audio.classes.Track.get(t)).unwrap.readyState<2?(n=!1,o.$el.one("canplaythrough.hal",function(){e(),n=!0}),setTimeout(function(){n||(o.$el.off("canplaythrough.hal"),e())},s.trackLoadLimit)):(r.includes(t)||r.push(t),e())):setTimeout(u,a)}()):setTimeout(u,a))}}(),function(){"use strict";var o=Chapel.options.storagekey+"_hal_restart_";Chapel.debug("HAL Session Key -> ",o);var e,t,n=(window.sessionStorage?(Chapel.debug("Session Storage Available"),e=function(e,t){window.sessionStorage.setItem(o+e,t)},t=function(e){return window.sessionStorage.getItem(o+e)}):(Chapel.debug("Session Storage Unavailable"),e=function(){},t=function(){},console.warn("Session storage is unavailable...")),{save:e,load:t});window.Chapel.Audio.state={_store:n,saveTracks:function(){var e;try{e=Fast.map(Chapel.Audio.classes.Track.list,function(e){return{id:e.id,sources:e.sources}}),Chapel.debug("Session Saved (Tracks) -> ",e),e=JSON.stringify(e),n.save("tracks",e)}catch(e){console.error(e.message)}},loadTracks:function(){var e;try{e=(e=n.load("tracks"))&&JSON.parse(e),Array.isArray(e)&&e.length&&(Chapel.debug("Session Loaded (Tracks) -> ",e),Fast.forEach(e,function(e){e.id&&e.sources&&!Chapel.Audio.classes.Track.has(e.id)?Chapel.Audio.newTrack.apply(null,[e.id].concat(e.sources)):Chapel.debug("Track reloading skipped.")}))}catch(e){console.error(e.message)}},savePlaylists:function(){try{var o=Chapel.Audio.classes.Playlist.list,e=Fast.map(Object.keys(o),function(e){var t={};return t.tracks=Fast.map(o[e].tracks,function(e){return e.id}),t.id=o[e].id,t});Chapel.debug("Session Saved (Playlists) -> ",e),e=JSON.stringify(e),n.save("playlists",e)}catch(e){console.error(e.message)}},loadPlaylists:function(){var e;try{(e=(e=n.load("playlists"))&&JSON.parse(e))&&Array.isArray(e)&&e.length&&(Chapel.debug("Session Loaded (Playlists) -> ",e),Fast.forEach(e,function(e){e.id&&e.tracks&&Chapel.Audio.createPlaylist(e.id,e.tracks)}))}catch(e){console.error(e.message)}},saveGroups:function(){var t;try{t={},Fast.forEach(Object.keys(Chapel.Audio.groups.custom),function(e){t[e]=Fast.map(Chapel.Audio.groups.custom[e],function(e){return"string"==typeof e?e:e.id})}),Chapel.debug("Session Saved (Groups) -> ",t),t=JSON.stringify(t),n.save("groups",t)}catch(e){console.error(e.message)}},loadGroups:function(){var t;try{(t=(t=n.load("groups"))&&JSON.parse(t))&&"object"==typeof t&&(Chapel.debug("Session Loaded (Groups) -> ",t),Fast.forEach(Object.keys(t),function(e){Fast.map(t[e],function(e){return Chapel.Audio.classes.Track.get(e)})}),Chapel.Audio.groups.custom=t)}catch(e){console.error(e.message)}}}}(),function(){"use strict";var e=Chapel.options;e.globalA&&void 0===window.A&&(Chapel.debug("Created global A interface."),window.A=window.Chapel.Audio),Chapel.Get.fromPassage&&(Chapel.debug("Loading tracks from track def special passage -> ",Chapel.Get.fromPassage),Chapel.Get.fromPassage.forEach(function(e,t){Chapel.Audio.newTrack.apply(null,[t].concat(e))})),$(document).on("unload",function(){Chapel.debug("User Prefs Saved"),window.Chapel.Audio.savePrefs()}),Chapel.Audio.classes.Track.renew(),Chapel.Audio.controls&&Chapel.Audio.controls.updateVolume(),Chapel.Get.isHarlowe3OrLater&&($(window).on("unload",function(){Chapel.debug("HAL State Saved"),Chapel.Audio.state.saveTracks(),Chapel.Audio.state.savePlaylists(),Chapel.Audio.state.saveGroups()}),Chapel.debug("HAL State Loaded"),Chapel.Audio.state.loadTracks(),Chapel.Audio.state.loadPlaylists(),Chapel.Audio.state.loadGroups()),e.persistPrefs&&(Chapel.debug("User Prefs Loaded"),Chapel.Audio.loadPrefs())}(),function(){"use strict";var s,u,e,l,t;Chapel.options.showControls&&(s=Engine,u=Chapel.Audio.controls.$user,e=function(){return"none"!==u.css("display")},l=function(){return e()||u.css("display","block"),u},t=function(){return e()&&u.css("display","none"),u},Chapel.Audio.menu={hide:t,show:l,isShown:e,links:{add:function(e,t,o){var n,a;if(!e||"string"!=typeof e){var r="undefined";return alert(r),void console.error(r)}o||"function"!=typeof t?(t&&"string"==typeof t&&(n=t),o&&"function"==typeof o&&(a=o)):(a=t,n=null);var i=$(document.createElement("tw-link")).append(e).attr({tabindex:"0",name:e.toLowerCase().trim()}).on("click",function(){n&&s.goToPassage(n),a&&a()}).addClass("story-menu").appendTo(u);return l(),i},clear:function(){return u.empty(),t()},hide:function(e){e=e.toLowerCase().trim(),$('tw-link.story-menu[name="'+e+'"]').addClass("hide")},show:function(e){e=e.toLowerCase().trim(),$('tw-link.story-menu[name="'+e+'"]').removeClass("hide")},toggle:function(e){e=e.toLowerCase().trim(),$('tw-link.story-menu[name="'+e+'"]').toggleClass("hide")},remove:function(e){e=e.toLowerCase().trim(),$('tw-link.story-menu[name="'+e+'"]').remove()}}})}(),function(){"use strict";var n=Chapel.Audio;function o(e){return e&&"function"==typeof e}function a(e,t){if(!e||"string"!=typeof e)return null;switch(e=e.toLowerCase().trim()){case"isplaying":e="isPlaying";break;case"playwhenpossible":e="playWhenPossible";break;case"ismuted":e="isAMuted";break;case"togglemute":e="toggleMute";break;case"getvolume":e="getVolume";break;case"islooping":e="isLooping";break;case"toggleloop":e="toggleLoop";break;case"fadein":e="fadeIn";break;case"fadeout":e="fadeOut";break;case"fadeto":e="fadeTo";break;case"stopall":e="stopAll"}if("isPlaying"===e&&"master"===t&&(e="audioPlaying"),"group"===t){if(o(n.group.prototype[e]))return e}else if("master"===t){if(o(n[e]))return e}else if(o(n.classes[t].prototype[e]))return e;throw new ReferenceError('Cannot run the command: "'+e+'" on the API "'+t+'". The command may be invalid, or this may be a bug in HAL.',"macros.js -> getCommand()",10)}var e={newtrack:function(){var e=[].slice.call(arguments);try{return n.newTrack.apply(null,e)}catch(e){alert("Error in the (newtrack:) macro: "+e.message)}},newplaylist:function(e,t){t=[].slice.call(arguments).slice(1);try{return n.createPlaylist(e,t)}catch(e){alert("Error in the (newplaylist:) macro: "+e.message)}},newgroup:function(e,t){t=[].slice.call(arguments).slice(1);try{return n.createGroup(e,t)}catch(e){alert("Error in the (newgroup:) macro: "+e.message)}},masteraudio:function(e){try{return e=a(e,"master"),n[e].apply(null,[].slice.call(arguments).slice(1))}catch(e){alert("Error in the (masteraudio:) macro: "+e.message)}},track:function(e,t){try{var o=n.track(e);return o[t=a(t,"Track")].apply(o,[].slice.call(arguments).slice(2))}catch(e){alert("Error in the (track:) macro: "+e.message)}},playlist:function(e,t){try{var o=n.playlist(e);return o[t=a(t,"Playlist")].apply(o,[].slice.call(arguments).slice(2))}catch(e){alert("Error in the (playlist:) macro: "+e.message)}},group:function(e,t){try{var o=n.group(e);return o[t=a(t,"group")].apply(o,[].slice.call(arguments).slice(2))}catch(e){alert("Error in the (group:) macro: "+e.message)}}};window.Chapel.Macros.add(e)}();
/** End of HAL code */</script><tw-passagedata pid="1" name="TUE-0600!-TITLE-CHOICE" tags="light" position="56,3016" size="100,200">[[audiobook version-&gt;TUE-0600!-TITLE(AUDIO)]]
[[text version-&gt;TUE-0600!-TITLE]]</tw-passagedata><tw-passagedata pid="2" name="MON-A(WOODS)-o-2" tags="dark" position="345,9258" size="100,100">...
Except these thoughts.
Can&#39;t understand.  
What [&#39;&#39;happened&#39;&#39;]&lt;c1|?  
What was [&#39;&#39;before&#39;&#39;]&lt;c2|?  
[&#39;&#39;Who&#39;&#39;]&lt;c3| am I?


(click: ?c1)[Something absolute. Something [&#39;&#39;final&#39;&#39;.]&lt;c4|] (click: ?c4)[&#39;&#39;No going back&#39;&#39;.]
(click: ?c2)[Very different from this.] 
(click: ?c3)[I am what is left over.] 

(live:5s)[[[...-&gt;A-o-3-x]]](more:)[[[...-&gt;A-o-3-x]]]</tw-passagedata><tw-passagedata pid="3" name="A-o-3-x" tags="" position="474,9260" size="100,100">(save-game: &#39;a&#39;)
(set: $location to 1)
It&#39;s over now, isn&#39;t it?
[[Yes-&gt;A-o-3-1]]
[[No-&gt;A-o-4-x]]
</tw-passagedata><tw-passagedata pid="4" name="A-o-4-x" tags="" position="605,9390" size="100,100">(set: $location to it + 1)

Are you sure you want to [&#39;&#39;look away&#39;&#39;]&lt;c1| from the light?

(click: ?c1)[The light gradually fades above you.

[[No.  Wait...-&gt;A-o-3-2]]
[[I don&#39;t want to look at the light any more.-&gt;A-o-4-1]]

]

</tw-passagedata><tw-passagedata pid="5" name="A-o-3-1" tags="" position="473,9382" size="100,100">There is the faintest glimmer above you.
From the darkness, the tiniest amount of [&#39;&#39;light.&#39;&#39;]&lt;c1| 

(click: ?c1)[When you look &#39;&#39;up&#39;&#39; at it, it grows, gets &#39;&#39;brighter&#39;&#39;.
You have the &#39;&#39;feeling&#39;&#39; it will take you to a different place.
Do you want to look towards it?

[I do.]&lt;c2|
[No.  Not yet.]&lt;c3|]

(click: ?c2)[[You look up into the light.-&gt;A-o-3-2]] (click: ?c3)[[[You are not ready yet.-&gt;A-o-4-2]]]</tw-passagedata><tw-passagedata pid="6" name="A-o-3-2" tags="" position="470,9525" size="100,100">The light has been growing.| The light grows again.

It illuminates the darkness around you.  

As you look up into it, beams radiate from its edges.  Suddenly, you can sense thousands of tiny, dancing particles around you, glittering like dust motes by a sunlit window.

[...]&lt;c1| 

(click: ?c1)[The light gradually fades above you.
For the first time,  you do not feel alone.

Again and unlike anywhere else, you do not feel alone in the presence of this light.

It says nothing, but you understand and trust it.

It wants you to know there is a place for you.

A place where there is no time.

A place where there is no suffering.

[[...-&gt;A-o-3-3]]
]
</tw-passagedata><tw-passagedata pid="7" name="A-o-4-2" tags="" position="608,9521" size="100,100">(if:$location is 1)[(goto: &quot;A-o-3-3&quot;)]
(if:$location is 2)[(goto: &quot;A-o-4-1&quot;)]
</tw-passagedata><tw-passagedata pid="8" name="A-o-4-1" tags="" position="613,9260" size="100,100">You are here again.

It&#39;s [like...]&lt;c1|(click: ?c1)[everything is gone. 
[Emptiness.]&lt;c2|]


(click: ?c2)[It&#39;s so vast.  Nothing but me.  I should be scared, but I can&#39;t feel anything at all.  [Except for...]&lt;c3| (click: ?c3)[what&#39;s that?  
A kind of [sadness.]&lt;c4|]]

(click: ?c4)[But then...


I start to ask myself [[questions-&gt;A-o-5-x]]]</tw-passagedata><tw-passagedata pid="9" name="A-o-3-3" tags="" position="469,9675" size="100,100">All the things that cause you to be you, with all your pain, will stop forever.

And all you need to do to go there is to let go[...]&lt;c1| 

(click: ?c1)[ You feel something.  The smallest amount of warmth inside.

You feel like you are starting to float upwards[...]&lt;c2|]

(click: ?c2)[The light gets stronger.

You look back down into the darkness.

Is there anything left there for you?

[Let Go.]&lt;c3| (click-replace: ?c3)[[[Let it take you.-&gt;A-o-3-4]]]
[No.  Wait.]&lt;c4| [(click-replace: ?c4)[[[I&#39;m not finished.-&gt;A-o-4-3]]]
]]
</tw-passagedata><tw-passagedata pid="10" name="A-o-3-4" tags="" position="466,9808" size="100,100">You raise higher.  The light brightens. 
You feel warm.
You feel peaceful.
You become the light.
The light was right, you think,
As you become nothing at all.
</tw-passagedata><tw-passagedata pid="11" name="A-o-4-3" tags="" position="607,9672" size="100,100">(set: $location to it + 1)

You feel a pull backwards, back into the darkness.
You are not ready.
The light fades.
The glittering dustmotes disappear[...]&lt;c1| 

(click: ?c1)[The light understands.
It wants you to know it will be here for you, now and forever. 
It will be here for you when you are ready.

[[...-&gt;A-o-4-2]]
]</tw-passagedata><tw-passagedata pid="12" name="A-o-5-x" tags="" position="750,9262" size="100,100">[Where]&lt;c1| am I?
[What]&lt;c2| happened?
[Who]&lt;c3| am I?


(click: ?c1)[A dark endless space with no light or sound.]
(click: ?c2)[Did I choose to come here?]
(click: ?c1)[I don&#39;t know. Why can&#39;t I hear?  Or see?  Am I sick?]

(more:)[Wait!...I [[remember...-&gt;A-o-5-1]]]
===FOUR
....wait!
You remember...
* &lt;i&gt;I have no name
Maybe once, but not now.
* &lt;i&gt;I had a name.
You can&#39;t remember it.
It was the last thing you lost.
-&lt;i&gt;I remember... I was...
*[A Person]
&lt;&gt; A person.
-&gt;FOURPOINTFIVE
*[Alive]
&lt;&gt; Alive.
-&gt;FOURPOINTFIVE
*[Unhappy]
...All you know is that you were feeling very unhappy.</tw-passagedata><tw-passagedata pid="13" name="A-o-5-1" tags="" position="750,9412" size="100,100">Double-click this passage to edit it.</tw-passagedata><tw-passagedata pid="14" name="TUE-0600!-(WOODS)-I-1-i" tags="dark" position="467,3193" size="100,100">(set: $transCounter to 0)\
We begin, as with many stories, in darkness.

|sample1)[(transition: &quot;dissolve&quot;)[Just empty, black silence.  No warmth.  No feeling at all.]]

|sample2)[(transition: &quot;dissolve&quot;)[It is hard to think, and there was [[nothing to remember.-&gt;TUE-0600!-(WOODS)-I-1-ii]]]]


{
(live: 2.5s)[
(set: $transCounter to it + 1)

	(if: $transCounter is 1)[
		(show: ?sample1)
	]
	(else-if: $transCounter is 2)[
		(show: ?sample2)
	]

	(else:)[
		(stop:)
	]
]

}

</tw-passagedata><tw-passagedata pid="15" name="TUE-0600!-(WOODS)-I-1-ii" tags="dark" position="601,3193" size="100,100">(set: $transCounter to 0) 
In this place, no-one could see, because no-one had eyes. 
|sample1)[(transition: &quot;dissolve&quot;)[ No-one could hear, because there was nothing to hear with.]] 
|sample2)[(transition: &quot;dissolve&quot;)[No-one could feel, because there were no shapes or feelings.]] 
|sample3)[(transition: &quot;dissolve&quot;)[But thats not entirely true.  There was one, a single feeling.]] 
|sample4)[(transition: &quot;dissolve&quot;)[[[//This is wrong//.-&gt;TUE-0600!-(WOODS)-I-1-iii]]]]

{ (live: 2s)
[(set: $transCounter to it + 1)
	(if: $transCounter is 1)[
		(show: ?sample1)
	]
	(else-if: $transCounter is 2)[
		(show: ?sample2)
	]
	(else-if: $transCounter is 3)[
		(show: ?sample3)
	]
	(else-if: $transCounter is 4)[
		(show: ?sample4)
	]
	(else:)[
		(stop:)
	]
]
}</tw-passagedata><tw-passagedata pid="16" name="TUE-0600!-(WOODS)-I-1-iii" tags="dark" position="730,3195" size="100,100">(set: $transCounter to 0) 
There should be something, not nothing.  
|sample1)[(transition: &quot;dissolve&quot;)[If this is really nothing, where are the words coming from?]] 
|sample2)[(transition: &quot;dissolve&quot;)[Why is there still some indeterminate want, and need, even where there is nothing else?]] 
|sample3)[(transition: &quot;dissolve&quot;)[Even where there is so little left, there is nothing left to be [[afraid-&gt;TUE-0600!-(WOODS)-I-1-iv]] of, or for?]] 

{ (live: 2s)[ (set: $transCounter to it + 1)
(if: $transCounter is 1)[
		(show: ?sample1)
	]
	(else-if: $transCounter is 2)[
		(show: ?sample2)
	]
	(else-if: $transCounter is 3)[
		(show: ?sample3)
	]

	(else:)[
		(stop:)
	]
]
}
</tw-passagedata><tw-passagedata pid="17" name="TUE-0600!-(WOODS)-I-1-iv" tags="dark" position="858,3197" size="100,100">Because this is no place for things that //are//, is it? 
(set: $transCounter to 0)
|sample1)[(transition: &quot;dissolve&quot;)[This is a place for things that //were//.]] 
|sample2)[(transition: &quot;dissolve&quot;)[Things that //used to be//.]] 
|sample3)[(transition: &quot;dissolve&quot;)[Before...]] 
|sample4)[(transition: &quot;dissolve&quot;)[Something [[wrong-&gt;TUE-0600!-(WOODS)-I-1-v]].]]
{ (live: 2s)[ (set: $transCounter to it + 1)
(if: $transCounter is 1)[
		(show: ?sample1)
	]
	(else-if: $transCounter is 2)[
		(show: ?sample2)
	]
	(else-if: $transCounter is 3)[
		(show: ?sample3)
	]
	(else-if: $transCounter is 4)[
		(show: ?sample4)
	]

	(else:)[
		(stop:)
	]
]
}
</tw-passagedata><tw-passagedata pid="18" name="TUE-0600!-(WOODS)-I-1-v" tags="dark" position="986,3194" size="100,100">The fact clears the air. 
(set: $transCounter to 0)\
|sample1)[(transition: &quot;dissolve&quot;)[Air that is, actually, more than nothing.  ]] 
|sample2)[(transition: &quot;dissolve&quot;)[The space is not empty: it is, in fact, of infinite height and depth.  The things in it are just very, very difficult to [[sense-&gt;TUE-0600!-(WOODS)-I-1-vi]].]] 

{ (live: 2s)[ (set: $transCounter to it + 1)
(if: $transCounter is 1)[
		(show: ?sample1)
	]
	(else-if: $transCounter is 2)[
		(show: ?sample2)
	]
	
	(else:)[
		(stop:)
	]
]
}
</tw-passagedata><tw-passagedata pid="19" name="TUE-0600!-(WOODS)-I-1-vi" tags="dark" position="1116,3196" size="100,100">Difficult to see.  Difficult to hear.  And difficult to [remember]&lt;c1|.
(click: ?c1)[Except for the fact that something bad has happened.
And then, as the search to [understand]&lt;c4| continues...]
(click: ?c4)[A gentle [[[breeze-&gt;TUE-0600!-(WOODS)-I-1-vii]]] rushes through the emptiness.]
</tw-passagedata><tw-passagedata pid="20" name="TUE-0600!-(WOODS)-I-1-vii" tags="dark" position="1236,3195" size="100,100">Nothing more: just the [breeze]&lt;c1|.  (click: ?c1)[But it brings back a rush of familiarity.]
(set: $transCounter to 0)\
|sample1)[(transition: &quot;dissolve&quot;)[As it moves, it can be [heard]&lt;c2|:] (click: ?c2)[ caressing smooth, bare trunks and weaving through high branches.]] 
|sample2)[(transition: &quot;dissolve&quot;)[ And then a [gust]&lt;c3|.] (click: ?c3)[ and leaves catch on the ground, lifting and encircling the space in a sudden swarm of nimble, crisp-sounding movement.]] 
|sample3)[(transition: &quot;dissolve&quot;)[This is a forest. It sounds like [autumn.]&lt;c4|.] (click: ?c4)[The scent, the barest trace of earth. Of rotting leaves, of the last wild garlic. Of wet ground nearby..]] 
|sample4)[(transition: &quot;dissolve&quot;)[And then, for the first time, something to [[see-&gt;TUE-0600!-(WOODS)-I-3-i]].]]

{ (live: 2s)[ (set: $transCounter to it + 1)
(if: $transCounter is 1)[
		(show: ?sample1)
	]
	(else-if: $transCounter is 2)[
		(show: ?sample2)
	]
	(else-if: $transCounter is 3)[
		(show: ?sample3)
	]
	(else-if: $transCounter is 4)[
		(show: ?sample4)
	]

	(else:)[
		(stop:)
	]
]
}
</tw-passagedata><tw-passagedata pid="21" name="TUE-0600!-(WOODS)-I-3-i" tags="light" position="1360,3195" size="100,100">The outline of trunks and branches.
(set: $transCounter to 0)\
|sample1)[(transition: &quot;dissolve&quot;)[The vague, glittering outlines of branches, fanning out above us like a great Cathedral.]]
|sample2)[(transition: &quot;dissolve&quot;)[The glimmering outlines of branches sway, attenuating outwards, dancing and swaying in the breeze.]]
|sample3)[(transition: &quot;dissolve&quot;)[But then, a new noise. Not just the sound of the wind. Something [[else-&gt;TUE-0600!-(WOODS)-I-3-ii]].]]
{
	(live: 3s)[
		(set: $transCounter to it + 1)

		(if: $transCounter is 1)[
			(show: ?sample1)
		]
		(else-if: $transCounter is 2)[
			(show: ?sample2)
		]
		(else-if: $transCounter is 3)[
			(show: ?sample3)
		]
		(else:)[
			(stop:)
		]
	]
}</tw-passagedata><tw-passagedata pid="22" name="TUE-0600!-(WOODS)-I-3-ii" tags="light" position="1483,3197" size="100,100">[The sound of something [[alive-&gt;TUE-0600!-(WOODS)-I-3-iii]].]</tw-passagedata><tw-passagedata pid="23" name="TUE-0600!-(WOODS)-I-3-iii" tags="light" position="1607,3198" size="100,100">Scratching and prodding. Then it hops and flaps.
It is staring at something. And then, all of a sudden, it [shrieks]&lt;c1|.
(click: ?c1)[A horrible sound. A choking, screaming sound, someway between a cry of fear and a scream of rage. A [bird]&lt;c2|.  A second bird joining in, and a third.]
(click: ?c2)[Ravens.  A conspiracy of them.  Circling and flapping above us, and they are fighting over [[something-&gt;TUE-0600!-(WOODS)-I-3-iv]].]</tw-passagedata><tw-passagedata pid="24" name="TUE-0600!-(WOODS)-I-3-iv" tags="light" position="1735,3195" size="100,100">It is like a disgusting, guttural debatethat we can understand. The largest crow is jeering at the other birds, and it flies up and [screams]&lt;c1|:
(click: ?c1)[Get away! I found this.  The first bites are mine.  The meat is mine.  I have never tasted this [before]&lt;c2|...] 
(click: ?c2)[and you will not eat until I have [[finished-&gt;TUE-0600!-(WOODS)-I-3-v]].]</tw-passagedata><tw-passagedata pid="25" name="TUE-0600!-(WOODS)-I-3-v" tags="light" position="1875,3200" size="100,100">(set: $transCounter to 0)\
The large raven lands on something high and heavy in the air.  
|sample1)[(transition: &quot;dissolve&quot;)[Something that swings, back and forth. ]] 
|sample2)[(transition: &quot;dissolve&quot;)[And it greedily begins to tear at the top of the swinging bulk, slurping, and making fresh wet sounds as it burrows into something with hard and soft parts: a painful and disgusting sound, that gets louder, and louder.]] 
|sample3)[(transition: &quot;dissolve&quot;)[&quot;Mine, it thinks.  My prize.  My right.  And then it thinks, this tastes [[good-&gt;TUE-0600!-(WOODS)-I-5-1-i]].]] 

{ (live: 2.5s)[ (set: $transCounter to it + 1)
(if: $transCounter is 1)[
		(show: ?sample1)
	]
	(else-if: $transCounter is 2)[
		(show: ?sample2)
	]
	(else-if: $transCounter is 3)[
		(show: ?sample3)
	
	]
	(else:)[
		(stop:)
	]
]
}
</tw-passagedata><tw-passagedata pid="26" name="TUE-0600!-(WOODS)-I-5-1-i" tags="light" position="2005,3205" size="100,100">The other birds perch nearby, watchful, regarding etiquette.  They hate the head raven, but they fear him enough not to interrupt.
(set: $transCounter to 0)\
|sample1)[(transition: &quot;dissolve&quot;)[The head raven sits on the top of the thing, crouching over till its head is upside down beneath its body, and it is wrenching something something from a cavity within, with its beak. ]] |sample2)[(transition: &quot;dissolve&quot;)[ He is enjoying himself: lithe and agile, quick-witted, moments from anger. His hunger gnaws, even after the first mouthfuls, he is always hungry, always wanting more.  ]] |sample3)[(transition: &quot;dissolve&quot;)[ The small, sensitive pads under its talons shift and curl on the round, cold, hard thing he balances off, and he enjoys curling his talons into the surface. Fine hair tickles between his talons.]] 
|sample4)[(transition: &quot;dissolve&quot;)[He is trying to pull something soft from out of the hard mass beneath him.  He tugs, and wrenches, jerking his head back and forth, and suddenly, it  [[gives-&gt;TUE-0600!-(WOODS)-I-5-1-ii]].]]

{ (live: 3s)[ (set: $transCounter to it + 1)
(if: $transCounter is 1)[
		(show: ?sample1)
	]
	(else-if: $transCounter is 2)[
		(show: ?sample2)
	]
	(else-if: $transCounter is 3)[
		(show: ?sample3)
	]
	(else-if: $transCounter is 4)[
		(show: ?sample4)
	]

	(else:)[
		(stop:)
	]
]
}
</tw-passagedata><tw-passagedata pid="27" name="TUE-0600!-(WOODS)-I-5-1-ii" tags="light" position="2157,3205" size="100,100">The object the crow has been pulling at comes out at once, and he feels a wave of triumph.  It is round in his mouth, gelatinous and sweet.
(set: $transCounter to 0)\
|sample1)[(transition: &quot;dissolve&quot;)[But his triumph turns to panic as he realises how big it is, how difficult to swallow quickly.  //I need this//, he thinks, //I cant let the others get it. I dont have time to enjoy it I must swallow it, swallow it now//.]] 
|sample2)[(transition: &quot;dissolve&quot;)[He gags and gurgles and then, the other birds pounce: flying up from their low positions, their patience spent. The head crow cannot swallow it in time and it ascends hastily into the are , shrieking as best it can with its mouth full, [[conceding his spot-&gt;TUE-0600!-(WOODS)-I-5-1-iii]] to save his meal.]] 

{ (live: 2.5s)[ (set: $transCounter to it + 1)
(if: $transCounter is 1)[
		(show: ?sample1)
	]
	(else-if: $transCounter is 2)[
		(show: ?sample2)
	]
	(else:)[
		(stop:)
	]
]
}



</tw-passagedata><tw-passagedata pid="28" name="TUE-0600!-(WOODS)-I-5-1-iii" tags="light" position="2300,3202" size="100,100">One crow gives chase to the head crow, but the others, flapping and screeching and circling in a maelstrom, all aim for the swinging mass above the forest floor.

(set: $transCounter to 0)\
|sample1)[(transition: &quot;dissolve&quot;)[And as they all concentrate on this thing, its [[outlines-&gt;TUE-0600!-(WOODS)-I-5-1-iv]] become clear.]]

{ (live: 2.5s)[ 
(set: $transCounter to it + 1)
(if: $transCounter is 1)[
		(show: ?sample1)
]
	(else:)[
		(stop:)
	]
]
}</tw-passagedata><tw-passagedata pid="29" name="TUE-0600!-(WOODS)-I-5-1-iv" tags="light" position="2460,3202" size="100,100">(set: $transCounter to 0)\
A man.  

|sample1)[(transition:&quot;dissolve&quot;)[As rigid as if he were a model, carved out of wood. His head, bowed forwards, at a strange angle. His body swings slowly forwards and backwards in the breeze, pivoting along a rope, looped around his neck and reaching upwards towards the branches on the nearest beech tree.]]

|sample2)[(transition: &quot;dissolve&quot;)[He was tall, medium weight, not young.  His features arent clear, and thanks to the [[crows-&gt;TUE-0600!-(WOODS)-I-5-1-v]], never will be again.]]

{ (live: 2.5s)[ 
(set: $transCounter to it + 1)
(if: $transCounter is 1)[
		(show: ?sample1)
]
(else-if: $transCounter is 2)[
		(show: ?sample2)
]
	(else:)[
		(stop:)
	]
]
}</tw-passagedata><tw-passagedata pid="30" name="TUE-0600!-(WOODS)-I-5-1-v" tags="light" position="2609,3199" size="100,100"> (set: $transCounter to 0)\
The crows continue to fight and shriek over who gets the chance at the other eye, at the head, at the rest of this sad, dead piece of bird food: this heavy carcass, swinging like on a butchers hook, a display for the wild animals of the forest, swinging sadly forwards and backwards.
|sample1)[(transition:&quot;dissolve&quot;)[We look at the outline of a corpse and feel no sense of recognition.]]
|sample2)[(transition: &quot;dissolve&quot;)[ [[Who was this man?-&gt;TUE-0600!-(WOODS)-I-5-1-vi]] ]]

{ (live: 2.5s)[ 
(set: $transCounter to it + 1)
(if: $transCounter is 1)[
		(show: ?sample1)
]
(else-if: $transCounter is 2)[
		(show: ?sample2)
]
	(else:)[
		(stop:)
	]
]
}</tw-passagedata><tw-passagedata pid="31" name="TUE-0600!-(WOODS)-I-5-1-vi" tags="light" position="2764,3203" size="100,100">(set: $transCounter to 0)\
//It&#39;s unknown.//  No-one can remember.
|sample1)[(transition:&quot;dissolve&quot;)[//What was his name?//]]
|sample2)[(transition: &quot;dissolve&quot;)[ [[Here, he floats...-&gt;TUE-0600!-(WOODS)-I-5-1-vii]]. ]]

{ (live: 2.5s)[ 
(set: $transCounter to it + 1)
(if: $transCounter is 1)[
		(show: ?sample1)
]
(else-if: $transCounter is 2)[
		(show: ?sample2)
]
	(else:)[
		(stop:)
	]
]
}</tw-passagedata><tw-passagedata pid="32" name="TUE-0600!-(WOODS)-I-5-1-vii" tags="light" position="2905,3207" size="100,100"> (set: $transCounter to 0)\
...distinct but featureless, swinging in front of us.

|sample1)[(transition:&quot;dissolve&quot;)[Coat]&lt;c1|
(click: ?c1)+(replace: ?c1)[(transition: &quot;dissolve&quot;)+(transition-time: 2s)[His long coat billows forwards and backwards with the wind. It seems strange, theatrical: a hanging corpse, wrapped in a fluttering cloak: something from another time and place.]]
[Hands]&lt;c2|
(click: ?c2)+(replace: ?c2)[(transition: &quot;dissolve&quot;)+(transition-time: 2s)[The hands are clenched tightly. On the right, the hand is balled into a fist, on the left, the hand is curled like a claw. A wedding band sits on the finger.]]
[Head]&lt;c3|
(click: ?c3)+(replace: ?c3)[(transition: &quot;dissolve&quot;)+(transition-time: 2s)[Head bowed over, at a strange angle, revealing the hair thinning around the whorl at the top of the head. The hair lifts and falls with the breeze, slanted across the forehead and fringing the eyeless death stare beneath it.]]
[Shoes]&lt;c4|
(click: ?c4)+(replace: ?c4)[(transition: &quot;dissolve&quot;)+(transition-time: 2s)[Well made and comfortable, probably expensive: his shoes give the scent of good quality leather.  They dont seem very muddy for the middle of the woods, where wet ground is everpresent.]]]
|sample2)[(transition: &quot;dissolve&quot;)[[[The ravens-&gt;TUE-0600!-(WOODS)-I-5-1-viii]] are settling on the corpse once more.]]

{ (live: 2.5s)[ 
(set: $transCounter to it + 1)
(if: $transCounter is 1)[
		(show: ?sample1)
]
(else-if: $transCounter is 4)[
		(show: ?sample2)
]
	(else-if:$transCounter is 5)[
		(stop:)
	]
	]
	
	
}
 </tw-passagedata><tw-passagedata pid="33" name="TUE-0600!-(WOODS)-I-5-1-viii" tags="light" position="3038,3209" size="100,100">(set: $transCounter to 0)\
One lands on the shoulder, another takes the same spot on the top of the head as the previous raven. A third tries to land but is warned off by the other two. 
|sample1)[(transition: &quot;dissolve&quot;)[The raven on the head jumps forwards and begins to tear at the remaining eyelid.]] 
|sample2)[(transition: &quot;dissolve&quot;)[ Then it looks up at a far off [[noise-&gt;TUE-0600!-(WOODS)-I-5-1-ix]].]] 

{ (live: 3s)[ (set: $transCounter to it + 1)
(if: $transCounter is 1)[
		(show: ?sample1)
	]
	(else-if: $transCounter is 2)[
		(show: ?sample2)
	]
	(else:)[
		(stop:)
	]
]
}
</tw-passagedata><tw-passagedata pid="34" name="TUE-0600!-(WOODS)-I-5-1-ix" tags="light" position="3169,3218" size="100,100">A flight of [pigeons]&lt;c1|(click: ?c1)[(transition: &quot;dissolve&quot;)+(transition-time: 2s)[ start into the air.]]

Other nearby [birds]&lt;c2|(click: ?c2)[(transition: &quot;dissolve&quot;)+(transition-time: 2s)[ start to chirrup.]]

The woodpeckers [rattle]&lt;c3|(click: ?c3)[(transition: &quot;dissolve&quot;)+(transition-time: 2s)[ goes silent.]]

A [hooded crow]&lt;c4|(click: ?c4)[(transition: &quot;dissolve&quot;)+(transition-time: 2s)[ flies up into the sky, crying out.]]

(more:)[(transition: &quot;dissolve&quot;)+(transition-time:4s)[And the ravens picnicking on the swinging body return to eating, but half-heartedly, looking up constantly, fearing the interruption they know is just beyond sight.](transition: &quot;dissolve&quot;)+(transition-time:8s)[&lt;p&gt;Then, we all [[hear it at once.-&gt;TUE-0600!-(WOODS)-II-1-i]]&lt;/p&gt;]]</tw-passagedata><tw-passagedata pid="35" name="TUE-0600!-(WOODS)-II-1-i" tags="light" position="227,3353" size="100,100">There is a [Dog in the Woods]&lt;c1|.

(click: ?c1)[(transition: &quot;dissolve&quot;)+(transition-time: 2s)[Four-legged, panting, joyful, its lead trailing along the ground, proud to be free, a dog runs through the woods, leaps across a small stream, and chases through the thorn and blackberry scrub, smelling for rabbits.](live:2s)[(transition: &quot;dissolve&quot;)+(transition-time: 2s)
[The [[ravens-&gt;TUE-0600!-(WOODS)-II-1-ii]] all begin to call, angry and loud as they can.](stop:)]]</tw-passagedata><tw-passagedata pid="36" name="TUE-0600!-(WOODS)-II-1-ii" tags="light" position="359,3354" size="100,100">(set: $transCounter to 0)
One of the ravens jumps from one shoulder to the other, causing the body to swing and bob, but the crows keep tearing at the face, faster and faster.

|sample1)[(transition: &quot;dissolve&quot;)[The dog stops jumping through the brush a way off.  A medium-sized hunting dog.  A Vizsla, who whines and raises a paw in the direction of the body, giving its distinctive hunting point. She can smell something that makes her feel excited, but anxious.]] 

|sample2)[(transition: &quot;dissolve&quot;)[Something like smells like [[meat-&gt;TUE-0600!-(WOODS)-II-1-iii]].]] 

{ (live: 3s)[ (set: $transCounter to it + 1)
(if: $transCounter is 1)[
		(show: ?sample1)
	]
	(else-if: $transCounter is 2)[
		(show: ?sample2)
	]


	(else:)[
		(stop:)
	]
]
}</tw-passagedata><tw-passagedata pid="37" name="TUE-0600!-(WOODS)-II-1-iii" tags="light" position="485,3358" size="100,100">(set: $transCounter to 0)\
Far off, a faint whistle turns her head.  Then she shakes itself, smells the air, and runs closer towards the ravens.

|sample1)[(transition: &quot;dissolve&quot;)[The ravens are faster at tearing into their feast now, angry that their meal is being spoiled by this interruptor.]] 

|sample2)[(transition: &quot;dissolve&quot;)[The Vizsla comes round around the tree and sees the body for the first time.  She stops.  Her head bobs slowly, tracking the object that swings in the air.  Then she gives a great whine and [[barks-&gt;TUE-0600!-(WOODS)-II-1-iv]] at the ravens.]] 

{ (live: 3s)[ (set: $transCounter to it + 1)
(if: $transCounter is 1)[
		(show: ?sample1)
	]
	(else-if: $transCounter is 2)[
		(show: ?sample2)
	]

	(else:)[
		(stop:)
	]
]
}</tw-passagedata><tw-passagedata pid="38" name="TUE-0600!-(WOODS)-II-1-iv" tags="light" position="616,3353" size="100,100">(set: $transCounter to 0)\
She jumps up, barking louder and louder, and the ravens stop eating and begin cursing at the Vizsla, hating it with every fibre of their being for the interruption.

|sample1)[(transition: &quot;dissolve&quot;)[The raven on the top of the head leans forwards and gives a great, wet cry, a gollop of jelly drops from his mouth and the loss only makes it angrier and more shrill.]]

|sample2)[(transition: &quot;dissolve&quot;)[But the dog barks on.  She jumps up, once, twice, and her head catches a swinging foot, causing the whole body to [jerk violently]&lt;c1|.  

(click: ?c1)[(transition: &quot;dissolve&quot;)+(transition-time:2s)[It torques and rocks like a hangmans dance, and the ravens displace unhappily, flying up to the nearest [[trees-&gt;TUE-0600!-(WOODS)-II-1-v]], baying and crowing all the more.]]]]
{ (live: 3s)[ (set: $transCounter to it + 1)
(if: $transCounter is 1)[
		(show: ?sample1)
	]
	(else-if: $transCounter is 2)[
		(show: ?sample2)
	]

	(else:)[
		(stop:)
	]
]
}</tw-passagedata><tw-passagedata pid="39" name="TUE-0600!-(WOODS)-II-1-v" tags="light" position="736,3353" size="100,100">(set: $transCounter to 0)\
Another whistle from the forest. Louder this time, clearer than before.

|sample1)[(transition: &quot;dissolve&quot;)[It is an unhappy sound. Flustered, concerned, embarrassed.]] 

|sample2)[(transition: &quot;dissolve&quot;)[To start with, just a vague outline from the distant woods.  Who sounds like a middle-aged woman who is not happy with her dog.  Hurrying through the woods. Shouting, Bella!  BELLE!]] 

|sample3)[(transition: &quot;dissolve&quot;)[The dog owner is thinking, //this is real trouble. I could get a fine.// [[//Bloody dog//-&gt;TUE-0600!-(WOODS)-II-1-vi]].]] 
{ (live: 2s)[ (set: $transCounter to it + 1)
(if: $transCounter is 1)[
		(show: ?sample1)
	]
	(else-if: $transCounter is 2)[
		(show: ?sample2)
	]
	(else-if: $transCounter is 3)[
		(show: ?sample3)
	]

	(else:)[
		(stop:)
	]
]
}






</tw-passagedata><tw-passagedata pid="40" name="TUE-0600!-(WOODS)-II-1-vi" tags="light" position="872,3353" size="100,100">(set: $transCounter to 0)\
Belle! the dog owner yells again, and as if coming from a trance, the Vizsla suddenly remembers she has an owner, and she turns and runs away.

|sample1)[(transition: &quot;dissolve&quot;)[The crows bay and jeer at the dog as she leaves, and one tries to hop back to the body, but it is still swinging too violently for it to comfortably land.]] 

|sample2)[(transition: &quot;dissolve&quot;)[The dog owner sees the Vizsla lolloping towards her, and she shouts,]] 

|sample3)[(transition: &quot;dissolve&quot;)[BELLE! Youre in real trouble, //come here!!// [[Come here-&gt;TUE-0600!-(WOODS)-II-1-vii]]...]] 
{ (live: 2s)[ (set: $transCounter to it + 1)
(if: $transCounter is 1)[
		(show: ?sample1)
	]
	(else-if: $transCounter is 2)[
		(show: ?sample2)
	]
	(else-if: $transCounter is 3)[
		(show: ?sample3)
	]

	(else:)[
		(stop:)
	]
]
}</tw-passagedata><tw-passagedata pid="41" name="TUE-0600!-(WOODS)-II-1-vii" tags="light" position="1019,3355" size="100,100">(set: $transCounter to 0)\
But the dog runs around the woman in a wide circle, barking.  The dog owner stamps her foot down on the trailing lead and she jerks to a halt with an unhappy squeal.

|sample1)[(transition: &quot;dissolve&quot;)[Now, listen you, the dog owner says, pulling the lead from under her foot: but the Vizsla makes a great sound of complaint at her, and pulls as hard as she can, ripping the lead from her hand a second time. ]] 

|sample2)[(transition: &quot;dissolve&quot;)[Bella wails at her owner, then turns and [[tears off-&gt;TUE-0600!-(WOODS)-II-1-viii]] back towards the body.]] 
{ (live: 2s)[ (set: $transCounter to it + 1)
(if: $transCounter is 1)[
		(show: ?sample1)
	]
	(else-if: $transCounter is 2)[
		(show: ?sample2)
	]

	(else:)[
		(stop:)
	]
]
}
</tw-passagedata><tw-passagedata pid="42" name="TUE-0600!-(WOODS)-II-1-viii" tags="light" position="1153,3360" size="100,100">//You little bitch//, the owner thinks, and turns away in anger. 
(set: $transCounter to 0)\

|sample1)[(transition: &quot;dissolve&quot;)[Fine!  You stay here!, she yells, walking a few steps away, thinking about really going back to the car, really leaving Bella in the woods, really teaching her a lesson. But she wouldnt.]] 

|sample2)[(transition: &quot;dissolve&quot;)[With a frustrated sigh, the dog owner turns back in the direction of the Vizsla, and tramps through the low scrub in her wellingtons, around the trunk of a big beech tree, following the dogs muddy prints. ]] 

|sample3)[(transition: &quot;dissolve&quot;)[And then she turns and sees the raven-pecked body, [[swinging in the air-&gt;TUE-0600!-(WOODS)-II-1-ix]].]] 
{ (live: 3s)[ (set: $transCounter to it + 1)
(if: $transCounter is 1)[
		(show: ?sample1)
	]
	(else-if: $transCounter is 2)[
		(show: ?sample2)
	]
	(else-if: $transCounter is 3)[
		(show: ?sample3)
	]

	(else:)[
		(stop:)
	]
]
}





</tw-passagedata><tw-passagedata pid="43" name="TUE-0600!-(WOODS)-II-1-ix" tags="light" position="1287,3363" size="100,100">(set: $transCounter to 0)\
The dog owner stares at the body.

|sample1)[(transition: &quot;dissolve&quot;)[And then she stumbles forwards and drops to her knees, breathing in deeply.]]

|sample2)[(transition: &quot;dissolve&quot;)[She stares up at body, and raises her hand to her mouth.]] 

|sample3)[(transition: &quot;dissolve&quot;)[Oh, God, she says, as Bella prances up to her happily and rapturously begins licking her face.]] 

|sample4)[(transition: &quot;dissolve&quot;)[(goto:&quot;TUE-0600!-(WOODS)-II-1-x&quot;)]] 

{ (live: 3s)[ (set: $transCounter to it + 1)
(if: $transCounter is 1)[
		(show: ?sample1)
	]
	(else-if: $transCounter is 2)[
		(show: ?sample2)
	]
	(else-if: $transCounter is 3)[
		(show: ?sample3)
	]
	(else-if: $transCounter is 4)[
		(show: ?sample4)
	]
	(else:)[
	(stop:)
	]
]
}
</tw-passagedata><tw-passagedata pid="44" name="TUE-0630!-TITLE" tags="light" position="223,3613" size="100,100">&lt;h1&gt;
(transition: &quot;dissolve&quot;)+(transition-time: 2s)[ [[
6:30AM-&gt;TUE-0630!-(WOODS)-II-1-i]]]
&lt;/h1&gt;</tw-passagedata><tw-passagedata pid="45" name="TUE-0630!-(WOODS)-II-1-i" tags="light" position="371,3614" size="100,100">Slowly, like its a great chore, a police officer wraps [[DO NOT CROSS-&gt;TUE-0630!-(WOODS)-II-1-ii]] tape around a tree trunk, and begins marking an ineffectual perimeter, grumbling and trying to ignore the eyeless body swinging above him in the air.</tw-passagedata><tw-passagedata pid="46" name="TUE-0600!-(WOODS)-II-1-x" tags="light" position="1414,3361" size="100,100">|fade-out&gt;[The dog owner stares at the body.]

|fade-out&gt;[And then she stumbles forwards and drops to her knees, breathing in deeply.]

|fade-out&gt;[She stares up at body, and raises her hand to her mouth.]

|fade-out&gt;[Oh, God, she says, as Bella prances up to her happily and rapturously begins licking her face.]

(live:10s)[(goto: &quot;TUE-0630!-TITLE&quot;)]</tw-passagedata><tw-passagedata pid="47" name="TUE-0630!-(WOODS)-II-1-ii" tags="light" position="506,3616" size="100,100">(set: $transCounter to 0)\
Charlotte and Bella walk slowly away with another policeman. 

|sample1)[(transition: &quot;dissolve&quot;)[Her head is low, for some reason she cant understand, she feels desperately ashamed.]] 

|sample2)[(transition: &quot;dissolve&quot;)[//I was caught doing something wrong: walking my dog where no dogs are allowed//, she thinks.  ]] 

|sample3)[(transition: &quot;dissolve&quot;)[And although Charlottes seen something she knows is terrible, she cant help worrying shes about to get a fine, to lose her walking permit in the [[woods-&gt;TUE-0630!-(WOODS)-II-1-iii]]. ]] 
{ (live: 2.5s)[ (set: $transCounter to it + 1)
(if: $transCounter is 1)[
		(show: ?sample1)
	]
	(else-if: $transCounter is 2)[
		(show: ?sample2)
	]
	(else-if: $transCounter is 3)[
		(show: ?sample3)
	]

	(else:)[
		(stop:)
	]
]
}


 



</tw-passagedata><tw-passagedata pid="48" name="TUE-0630!-(WOODS)-II-1-iii" tags="light" position="633,3613" size="100,100">The police officer turns and waves as another [figure]&lt;c1| peers around a far off tree, waves back, and starts to walk forwards. 

(click: ?c1)+(transition: &quot;dissolve&quot;)+(transition-time:2s)[A tall figure, slightly ungainly and hesitant, walking with his hands in his coat pockets with his head cocked, in a way that suggests deep thought or [distraction]&lt;c2|.]

(click: ?c2)+(transition: &quot;dissolve&quot;)+(transition-time:2s)[He walks slowly, looking around carefully, his perceptions are very [keen]&lt;c3|.] (click: ?c3)+(transition: &quot;dissolve&quot;)+(transition-time:2s)[He is cold, his clothes are a little bit wet, he regrets thinking that a scarf would protect him from the [[intermittent rain-&gt;TUE-0630!-(WOODS)-II-1-iv]].]
</tw-passagedata><tw-passagedata pid="49" name="TUE-0630!-(WOODS)-II-1-iv" tags="light" position="757,3615" size="100,100">(set: $transCounter to 0)\
He looks down at the low scrub, trying to work out which snapped bramble canes  could hold a clue, and very quickly giving up. 

|sample1)[(transition: &quot;dissolve&quot;)[He unbuttons his jacket, lifts a professional-looking [camera]&lt;c1| from a strap around his neck, (click: ?c1)[(transition: &quot;dissolve&quot;)+(transition-time:2s)[and takes a picture of the dogs pawprints and the dog-walkers well-placed wellington boots impressions as they appear at the edge of the scrub, then sidles round the tree to where the [[police officer-&gt;TUE-0630!-(WOODS)-II-1-v]] stands.]]]] 

{ (live: 3s)[ (set: $transCounter to it + 1)
(if: $transCounter is 1)[
		(show: ?sample1)
		(stop:)
	]
]
}</tw-passagedata><tw-passagedata pid="50" name="TUE-0630!-(WOODS)-II-1-v" tags="light" position="885,3620" size="100,100">(set: $transCounter to 0)\
Good morning DC Clare, the police officer by the police tape says.

|sample1)[(transition: &quot;dissolve&quot;)[Alright, Davey? the man replies, taking another picture.  Did I get here before the boss?]] 

|sample2)[(transition: &quot;dissolve&quot;)[That you did.]] 

|sample3)[(transition: &quot;dissolve&quot;)[You were first on the scene?]] 

|sample4)[(transition: &quot;dissolve&quot;)[Nope.  Ive just been left with protecting the perimeter.]]

|sample5)[(transition: &quot;dissolve&quot;)[The two look around, a little awkwardly, the pause in a friendly [[conversation-&gt;TUE-0630!-(WOODS)-II-1-vi]] between people who dont really know each other.]]

{ (live: 1.5s)[ (set: $transCounter to it + 1)
(if: $transCounter is 1)[
		(show: ?sample1)
	]
	(else-if: $transCounter is 2)[
		(show: ?sample2)
	]
	(else-if: $transCounter is 3)[
		(show: ?sample3)
	]
	(else-if: $transCounter is 4)[
		(show: ?sample4)
	]
	(else-if: $transCounter is 5)[
		(show: ?sample5)

	]
	(else:)[
		(stop:)
	]
]
}






</tw-passagedata><tw-passagedata pid="51" name="TUE-0630!-(WOODS)-II-1-vi" tags="light" position="1010,3621" size="100,100">(set: $transCounter to 0)\
Have you come here before? the detective constable asks.

|sample1)[(transition: &quot;dissolve&quot;)[Never. You?]] 

|sample2)[(transition: &quot;dissolve&quot;)[The Detective Constable shakes his head.]] 

|sample3)[(transition: &quot;dissolve&quot;)[Lovely place, isnt it? I mean, apart from the eyeless corpse...]] 

|sample4)[(transition: &quot;dissolve&quot;)[Not a pretty sight, no, poor fella, Davey agrees. Honestly, I had better mornings.]]

|sample5)[(transition: &quot;dissolve&quot;)[I dont know, the DC says. Ive got a feeling about this week. That this is the kind of week where you get to prove who you are.]]

|sample6)[(transition: &quot;dissolve&quot;)[If you say so, [[Thom-&gt;TUE-0630!-(WOODS)-II-1-vii]] Davey says skeptically.]]
{ (live: 1.5s)[ (set: $transCounter to it + 1)
(if: $transCounter is 1)[
		(show: ?sample1)
	]
	(else-if: $transCounter is 2)[
		(show: ?sample2)
	]
	(else-if: $transCounter is 3)[
		(show: ?sample3)
	]
	(else-if: $transCounter is 4)[
		(show: ?sample4)
	]
	(else-if: $transCounter is 5)[
		(show: ?sample5)
	]
	(else-if: $transCounter is 6)[
		(show: ?sample6)
	]
	(else:)[
		(stop:)
	]
]
}
</tw-passagedata><tw-passagedata pid="52" name="TUE-0630!-(WOODS)-II-1-vii" tags="light" position="1147,3626" size="100,100">(set: $transCounter to 0)\
The Detective Constable called Thom takes another picture.

|sample1)[(transition: &quot;dissolve&quot;)[He starts to think.]]
|sample2)[
(transition: &quot;dissolve&quot;)[Dogwalker]&lt;c1|
(click: ?c1)+(replace: ?c1)[//Dogwalker in wellingtons, with a medium sized dog, come across the scene.//]
(transition: &quot;dissolve&quot;)[Ravens]&lt;c2|
(click: ?c2)+(replace: ?c2)[//Ravens have worked on the corpse since they found it, probably before dawn//.]
(transition: &quot;dissolve&quot;)[Rope]&lt;c3|
(click: ?c3)+(replace: ?c3)[//Blue rope feels like a strange choice to string him up with. Sailing rope. Or the kind of stuff you leave hanging in one side of the garage//.]
(transition: &quot;dissolve&quot;)[The swinging man]&lt;c4|
(click: ?c4)+(replace: ?c4)[Thom gets an instant feel for the guy swinging from the tree: an academic.

//Middle aged and middle class.  See them all the time in Oxford.  With that strange air of comfortable disatisfaction.//]]

|sample3)[(more:)[(transition: &quot;dissolve&quot;)[So what do you [[know-&gt;TUE-0630!-(WOODS)-II-1-viii]]? Thom asks Davey.]]]
 
{
	(live: 2s)[
		(set: $transCounter to it + 1)

		(if: $transCounter is 1)[
			(show: ?sample1)
		]
		(else-if: $transCounter is 2)[
			(show: ?sample2)
		]
		(else-if: $transCounter is 3)[
			(show: ?sample3)
		]
		(else:)[
			(stop:)
		]
	]
}</tw-passagedata><tw-passagedata pid="53" name="TUE-0630!-(WOODS)-II-1-viii" tags="light" position="1288,3628" size="100,100">(set: $transCounter to 0)\
Woman claims she was walking her dog, on lead, along the road when it broke free of her, run away, and kept barking till she came and found this body

|sample1)[(transition: &quot;dissolve&quot;)[&quot;Its clear though, that she was a naughty woman, who was walking her dog in the woods.]] 

|sample2)[(transition: &quot;dissolve&quot;)[No, not in Wytham Wood? Thom asks, his increduluity only half-feigned.  You can get a fine for that.]] 

|sample3)[(transition: &quot;dissolve&quot;)[Well, I dont think shell be doing it [[again-&gt;TUE-0630!-(WOODS)-II-1-ix]]. ]] 

{ (live: 2s)[ (set: $transCounter to it + 1)
(if: $transCounter is 1)[
		(show: ?sample1)
	]
	(else-if: $transCounter is 2)[
		(show: ?sample2)
	]
	(else-if: $transCounter is 3)[
		(show: ?sample3)
	]
	
	(else:)[
		(stop:)
	]
]
}
</tw-passagedata><tw-passagedata pid="54" name="Offcuts" tags="" position="1005,9268" size="100,100"> (t8n:&quot;dissolve&quot;)+(t8n-time:4s)+(link:&quot;Wowee&quot;)[If this works, this is bullshit]</tw-passagedata><tw-passagedata pid="55" name="TUE-0630!-(WOODS)-II-1-ix" tags="light" position="1416,3629" size="100,100">Anyway, Davey continues, by the time she found him, the crows had had a pretty good go at him. But he looks [fresh]&lt;c1|, wouldnt you say?

(click: ?c1)[(transition: &quot;dissolve&quot;)+(transition-time:2s)[Thom stares at the corpse and nods.  This is from last night, he replies.  You can see the hand, clenched up, the remaining [face]&lt;c2|, grinning.  Rigor mortis which meanseight to twelve hours?]]

(click: ?c2)[(transition: &quot;dissolve&quot;)+(transition-time:2s)[He takes a step closer, looking into whats left of the head.  And the crows already finished off that much of his face, eh? Theyre [brutal]&lt;c3| little bastards, arent they?]]

(click: ?c3)[(transition: &quot;dissolve&quot;)+(transition-time:2s)[Not a very good advert for a bird sanctuary, Davey agrees, and then looks guiltily at his [[feet-&gt;TUE-0630!-(WOODS)-II-1-x]].]]


</tw-passagedata><tw-passagedata pid="56" name="TUE-0630!-(WOODS)-II-1-x" tags="light" position="1554,3627" size="100,100">(set: $transCounter to 0)\
&quot;Listen, Thom, the ground under his feet.  I keep on having to run up to the body and wave this bloody thing, he brandishes the stick, to keep them off it. |sample1)[(transition: &quot;dissolve&quot;)[Im sorry, Thom, Ive probably messed up the footprints beneath the body but what can you do?  I cant let birds eat the poor bloody guy before the pathologist gets here, can I?]] 

|sample2)[(transition: &quot;dissolve&quot;)[Thom looks at Davey, then he nods.]] 

|sample3)[(transition: &quot;dissolve&quot;)[I understand. ]] 

|sample4)[(transition: &quot;dissolve&quot;)[Then he begins to walk a wide circle, around the [[crime scene-&gt;TUE-0630!-(WOODS)-II-1-xi]].]] 
{ (live: 3s)[ (set: $transCounter to it + 1)
(if: $transCounter is 1)[
		(show: ?sample1)
	]
	(else-if: $transCounter is 2)[
		(show: ?sample2)
	]
	(else-if: $transCounter is 3)[
		(show: ?sample3)
	]
	(else-if: $transCounter is 4)[
		(show: ?sample4)
	]

	(else:)[
		(stop:)
	]
]
}



</tw-passagedata><tw-passagedata pid="57" name="TUE-0630!-(WOODS)-II-1-xi" tags="light" position="1698,3626" size="100,100">The crows, still nearby in the branches, angry and heartbroken at the loss of their meal, jeer at Thom as he wanders in an arc around them, towards the beech tree the body is tied to, and begins to examine the [rope]&lt;c1|.

(click: ?c1)[(transition: &quot;dissolve&quot;)+(transition-time: 2s)[It travels from the noose around the corpses neck, up to about twelve feet above the ground, where its coiled twice around the lowest sideways limb.  The noose swings from a point about ten feet out from the tree trunk.  Beyond the coil, the rope stretches down to a lower, thinner branch, at about eye level, where the rope has been tied off with a clove hitch.]]

(live:5s)[(transition: &quot;dissolve&quot;)+(transition-time: 2s)[He takes several pictures of the [[knot-&gt;TUE-0630!-(WOODS)-II-1-xii]].]]

(stop:)</tw-passagedata><tw-passagedata pid="58" name="TUE-0630!-(WOODS)-II-1-xii" tags="light" position="1842,3629" size="100,100">(set: $transCounter to 0)\
Thom turns to Davey and says loudly, as he points, So, if this was a suicide, he ties the rope here, climbs up into that limb, scootches out along it with the rope in his hand.|sample1)[(transition: &quot;dissolve&quot;)[Then he finds the goldilocks spot, loops the rope around the branch a couple of times, ties the other end into a noose, tightens it around his neck, and pushes himself [off]&lt;c1|.]] |sample2)[(transition: &quot;dissolve&quot;)[  I wonder if I could climb a wet tree in the dark and do that. And not get any dirt on my clothes.]] 

(click: ?c1)[(transition: &quot;dissolve&quot;)+(transition-time: 2s)[&quot;Plus, he adds, the clove hitch down at the bottom needs [weight]&lt;c2| to work.  Otherwise it can come undone pretty easily.  You tie that kind of knot once the weight is on the other side, not before.]]

(click: ?c2)[(transition: &quot;dissolve&quot;)+(transition-time: 2s)[Thom turns around and says to Davey, Looks bloody fishy to me, what do you [[think-&gt;TUE-0630!-(WOODS)-II-1-xiii]]?]]

{ (live: 3s)[ (set: $transCounter to it + 1)
(if: $transCounter is 1)[
		(show: ?sample1)
	]
	(else-if: $transCounter is 2)[
		(show: ?sample2)
	]

	(else:)[
		(stop:)
	]
]
}</tw-passagedata><tw-passagedata pid="59" name="TUE-0630!-(WOODS)-II-1-xiii" tags="light" position="1980,3635" size="100,100">Davey shrugs. I dont know, Ive seen some weird deaths in my time, he says, tailing off non-committaly, and looking [away]&lt;c1|.  (click: ?c1)[(transition: &quot;dissolve&quot;)+(transition-time: 2s)[//Not my fight, matey,// he thinks.]]

(live:3s)[(transition: &quot;dissolve&quot;)+(transition-time: 2s)[Thom sighs. He looks up at the body, and then turns away to take in the whole woods. The low sun reaches halfway through a gap in the dark clouds, just for a moment, backlighting the dripping forest with [bronze light]&lt;c2|, raying his face with momentary warmth.] (stop:)]

(click: ?c2)[(transition: &quot;dissolve&quot;)+(transition-time: 2s)[Thom raises the camera and takes a picture.  //What amazing light, he thinks. I should come back here with my pastels at the //[[//weekend//-&gt;TUE-0630!-(WOODS)-II-1-xiv]].]]</tw-passagedata><tw-passagedata pid="60" name="TUE-0630!-(WOODS)-II-1-xiv" tags="light" position="2121,3632" size="100,100">Thom turns back to Davey.


(live: 2s)[(transition: &quot;dissolve&quot;)+(transition-time:2s)[This probably sounds strange, but getting up early makes you feel special, dont you think? When you get to catch the dawn, or be somewhere thats completely quiet.](stop:)] 

(live: 4s)[(transition: &quot;dissolve&quot;)+(transition-time:2s)[I suppose, Davey says, thinking, //well, at least we had a couple of minutes before he got weird.//](stop:)]

(live: 6s)[(transition: &quot;dissolve&quot;)+(transition-time:2s)[Ah Thom says, pointing far off. [[look sharp-&gt;TUE-0630!-(WOODS)-II-1-xv]], Constable Winters.] (stop:)] 

</tw-passagedata><tw-passagedata pid="61" name="TUE-0630!-(WOODS)-II-1-xv" tags="light" position="2262,3633" size="100,100">A woman walks forwards through the woods towards them. She is a little shorter than normal height, but clearly athletic. (live: 2s)[(transition: &quot;dissolve&quot;)+(transition-time:2s)[She walks slowly, confidently, alert but in a very calm and measured way. She is holding an apple box.](stop:)] 

(live: 4s)[(transition: &quot;dissolve&quot;)+(transition-time:2s)[The Pathologist is on his way, she shouts across the space between them. Are you [snapping away]&lt;c1|?](stop:)] 

(click: ?c1)[(transition: &quot;dissolve&quot;)+(transition-time:2s)[Thom raises his camera in response.

Good morning, [Detective Sergeant]&lt;c2|, he shouts breezily back at her.]]

(click: ?c2)[(transition: &quot;dissolve&quot;)+(transition-time:2s)[And thats Davey? Have you been stamping all over my crime scene? Be honest.

I was chasing the [crows]&lt;c3|! Davey stammers.]]

(click: ?c3)[(transition: &quot;dissolve&quot;)+(transition-time:2s)[Crows?

They been trying to [eat]&lt;c4| the body.]]

(click: ?c4)[(transition: &quot;dissolve&quot;)+(transition-time:2s)[Bloody bird sanctuary, she jokes, smiling. 

What do the birds need a sanctuary for? Theyve got [[wings-&gt;TUE-0630!-(WOODS)-II-1-xvi]], dont they?]]

</tw-passagedata><tw-passagedata pid="62" name="TUE-0630!-(WOODS)-II-1-xvi" tags="light" position="2402,3631" size="100,100">The Detective Sergeant reaches the two men, looks up at the body and sighs.

Okay, then, she says.  So, [No ID]&lt;c1|?

(click: ?c1)[(transition: &quot;dissolve&quot;)+(transition-time: 2s)[No ID, Thom says. Havent gone [near]&lt;c2| the body yet.]]

(click: ?c2)[(transition: &quot;dissolve&quot;)+(transition-time: 2s)[&quot;Have you examined the [ground]&lt;c3|?]]

(click: ?c3)[(transition: &quot;dissolve&quot;)+(transition-time: 2s)[Yeah, but, come on, Thom says. Weve got the dogwalkers prints, weve got Belle the dogs prints, weve got Davey the crow-chasers prints all over the place too. Plus it rained most of the night. [Its the woods]&lt;c4|.]]

(click: ?c4)[(transition: &quot;dissolve&quot;)+(transition-time: 2s)[Yeah, Ill just tell that to the Superintendent, that it was the woods, she says, with a grim smile on her face. Im sure hell [[understand-&gt;TUE-0630!-(WOODS)-II-1-xvii]].]]

</tw-passagedata><tw-passagedata pid="63" name="TUE-0630!-(WOODS)-II-1-xvii" tags="light" position="2540,3632" size="100,100">Rachel looks around, thinking.

What do you [think]&lt;c1|?, Thom asks her.

(click: ?c1)[(transition: &quot;dissolve&quot;)+(transition-time: 2s)[Ive been here about four seconds, she says.

[Come on]&lt;c2|, Rachel, Thom says.]]

(click: ?c2)[(transition: &quot;dissolve&quot;)+(transition-time: 2s)[Fine. How on earth was this meant to be a suicide?  I mean, how did he get up there? Scootch along that bloody great branch with a noose around his [neck]&lt;c3|?]]

(click: ?c3)[(transition: &quot;dissolve&quot;)+(transition-time: 2s)[She looks at Thom and smiles. 

Well, did I get it right?

&quot;What do you [mean]&lt;c4|? Thom asks.]]

(click: ?c4)[(transition: &quot;dissolve&quot;)+(transition-time: 2s)[ Rachel turns to Davey with a smile.

&quot;He only ever asks me what I think because he wants to tell me what he [[thinks-&gt;TUE-0630!-(WOODS)-II-1-xviii]].

&quot;Bloody hell, Thom says.  You see what Im dealing with here?]]

</tw-passagedata><tw-passagedata pid="64" name="TUE-0630!-(WOODS)-II-1-xviii" tags="light" position="2669,3629" size="100,100">&quot;Nah, you nailed it, Thom says.

(live: 2s)[(transition: &quot;dissolve&quot;)+(transition-time:2s)[Rachel says.  The whole thing strikes as stupid, desperate or arrogant.](stop:)] 

(live: 4s)[(transition: &quot;dissolve&quot;)+(transition-time:2s)[She looks back at Thom, deadpan.](stop:)]

(live: 6s)[(transition: &quot;dissolve&quot;)+(transition-time:2s)[&quot;Were looking for a male suspect.] (stop:)] 

(live: 8s)[(transition: &quot;dissolve&quot;)+(transition-time:2s)[Thom shakes his head in mock disapproval.  Sexism in the workplace, he says.] (stop:)] 

(live: 10s)[(transition: &quot;dissolve&quot;)+(transition-time:2s)[Right, Thom, enough banter, Rachel says breezily, lets get to [[work-&gt;TUE-0630!-(WOODS)-II-1-xix]].] (stop:)]





</tw-passagedata><tw-passagedata pid="65" name="TUE-0630!-(WOODS)-II-1-xix" tags="light" position="2795,3630" size="100,100">&quot;You go ahead, Rachel says to Thom, taking pictures as you go till you reach the body. Then stand on this [apple box]&lt;c1| and see if he has some ID in his jacket.

(click: ?c1)[(transition: &quot;dissolve&quot;)+(transition-time:2s)[Thom looks at the apple box, sighs, and nods.

Right you are, skip Thom says, then walks forwards, taking pictures of the [ground]&lt;c2|.]]

(click: ?c2)[(transition: &quot;dissolve&quot;)+(transition-time:2s)[Churned up by countless feet and rained on for hours, it bares no singular impressions.

He reaches the body, and Rachel throws the [apple box]&lt;c3| shes been carrying across to him.]]

(click: ?c3)[(transition: &quot;dissolve&quot;)+(transition-time:2s)[He catches the box with one hand and then awkwardly [steps up]&lt;c4| on it.]]

(click: ?c4)[(transition: &quot;dissolve&quot;)+(transition-time:2s)[He looks at the swinging man, and with a grimace, [[reaches-&gt;TUE-0630!-(WOODS)-II-1-xx]] towards him.]]</tw-passagedata><tw-passagedata pid="66" name="TUE-0630!-(WOODS)-II-1-xx" tags="light" position="2931,3631" size="100,100">Thom grabs the cadavers overcoat, and pulls the body towards him, then hugs the corpses legs to keep it in place. 

[Corpses legs]&lt;c1| (click: ?c1)+(replace: ?c1)[The corpse&#39;s legs feel like theyre made out of hardwood.  Ramrod stiff, and cold.  It is an eerie feeling.]

[Overcoat pockets]&lt;c2| (click: ?c2)+(replace: ?c2)[Thom reaches into the overcoat pockets, poorly surpressing a wince.  He feels only some tissues, and can only feel scrunched up tissues, and a torn bit of [something]&lt;c3| that feels smooth, pithy, organic.]

(click: ?c3)[Thom pulls it out.
&quot;What have you got there? Rachel asks.
&quot;Orange peel, Thom grumbles, and puts it back in the [[overcoat pocket-&gt;TUE-0630!-(WOODS)-II-1-xxi]].]</tw-passagedata><tw-passagedata pid="67" name="TUE-0630!-(WOODS)-II-1-xxi" tags="light" position="3085,3635" size="100,100">Thom reaches within the overcoat to the mans jacket,  slips his hand inside that. 

[The shirt]&lt;c1| (click: ?c1)+(replace: ?c1)[The body feels hard and cold through the shirt.]

[Smell]&lt;c2| (click: ?c2)+(replace: ?c2)[Thom can smell the beginning of decay, slightly sweet and slightly rotten, with his face pressed up against it.]

[Shape]&lt;c3| (click: ?c3)+(replace: ?c3)[Thom feels the shape of a [wallet]&lt;c4| in the jacket, and sighs with relief.]

(click: ?c4)[He jimmies the wallet out of the inside jacket, then lets go of the body.  As he prepares to [let go of the body]&lt;c6|, something [catches his eye]&lt;c5|:] (click: ?c5)[the hand balled into a fist has purple knuckles.]

(click: ?c6)[Thom [jumps back down]&lt;c7| off the box.]

(click: ?c7)[Got it, he says triumphantly, holding up the wallet, and walking [[back-&gt;TUE-0630!-(WOODS)-II-1-xxii]] towards Rachel.]
</tw-passagedata><tw-passagedata pid="68" name="TUE-0630!-(WOODS)-II-1-xxii" tags="light" position="3210,3637" size="100,100">Thom looks down at the [wallet]&lt;c1|.(click: ?c1)[Coffee-coloured leather with light stitching, closed with a tab that is worn with many years of use. 

[The wallet]&lt;c2|](click: ?c2)+(replace: ?c2)[A quality item, unshowy, bought to be [used]&lt;c3|, by someone who appreciates durable things.]

(click: ?c3)[Thom opens it up, to see a thoughtful face staring back at him through a [plastic ID window]&lt;c4| inside it.]

(click: ?c4)[Driving license in here, he says to Rachel as he approaches her. Do you want to know his [[name-&gt;TUE-0630!-(WOODS)-II-1-xxiii]]?]
</tw-passagedata><tw-passagedata pid="69" name="TUE-0630!-(WOODS)-II-1-xxiii" tags="light" position="3355,3637" size="100,100">&quot;[Out with it]&lt;c1|, Rachel says.

(click: ?c1)[[&quot;Fancy name,&quot;]&lt;c2|](click: ?c2)[Thom says, reading from the Drivers License.  
Timon. Timon Warwick Rutherford. Born in 1968, which makes him, what? Mid fifties. Address: [Eynsham]&lt;c3|. Keepers Cottage, it says...]
(click: ?c3)[Thats only a couple of miles away, Rachel says. What else is in [[there-&gt;TUE-0630!-(WOODS)-II-1-xxiv]]?]</tw-passagedata><tw-passagedata pid="70" name="TUE-0630!-(WOODS)-II-1-xxiv" tags="light" position="3510,3638" size="100,100">[Bank cards]&lt;c1| (click: ?c1)+(replace: ?c1)[The normal stuff. Two bank cards, two credit cards.&quot;

[Oyster Card]&lt;c2|]
(click: ?c2)+(replace: ?c2)[&quot;Old school Oyster Card.
What do you mean, old school Oyster Card?
Well, you dont need em now, you just tap your bank card. I thought you came from London?
What else is there? Rachel asks. 
[Gym Card]&lt;c3|]
(click: ?c3)+(replace: ?c3)[Gym card for a Health Club in North Oxford, I know the placepricey, nice swimming pool.
[Ashmolean Museum Membership Card]&lt;c4|]
(click: ?c4)+(replace: ?c4)[&quot;Patron of the arts: Museum Membership Card.&quot;
[Coffee Shop Card]&lt;c5|]
(click: ?c5)+(replace: ?c5)[&quot;One of those coffee shop cards you get stamped: he was three stamps from a free cup.&quot;
[Coin Pouch]&lt;c6|]
(click: ?c6)+(replace: ?c6)[&quot;He&#39;s got a few coppers in the  [[coin pouch-&gt;TUE-0630!-(WOODS)-II-1-xxv]].&quot;]







</tw-passagedata><tw-passagedata pid="71" name="TUE-0630!-(WOODS)-II-1-xxv" tags="light" position="3659,3647" size="100,100">&quot;No family pictures in here
Wedding band on the finger, though.
They hear a sudden, [loud yell]&lt;c1| through the woods.

(click: ?c1)[DETECTIVE SERGEANT SHAW, [[WHERE ARE YOU-&gt;TUE-0630!-(WOODS)-II-1-xxvi]]?]

</tw-passagedata><tw-passagedata pid="72" name="TUE-0630!-(WOODS)-II-1-xxvi" tags="light" position="3812,3649" size="100,100">Well, here comes trouble, Rachel says to Thom under her breath, before shouting back WERE OVER HERE SIR, [BY THE DEAD BODY]&lt;c1|.

(click: ?c1)[They watch as slowly, three men walk through the woods towards them. Two carry a stretcher, [one walks ahead of them]&lt;c2|. He is short, squat, in his late thirties, his hands planted firmly in his corduroy jacket pockets, his head swung low, revealing a balding pate hidden beneath a few long waves of combed-over hair.]

(click: ?c2)[He looks like a [man]&lt;c3| who is used to looking at his shoes and grumbling.]

(click: ?c3)[You know I already tripped over on a tree branch in the woods here? Fell on my hands and knees. He thumbs at the stretcher-bearers behind him. These bastards thought it was hilarious, [[didn&#39;t you-&gt;TUE-0630!-(WOODS)-II-1-xxvii]]?]

</tw-passagedata><tw-passagedata pid="73" name="TUE-0630!-(WOODS)-II-1-xxvii" tags="light" position="3936,3645" size="100,100">Well, you dont look too muddy, Felix, Thom says.
DC Thomas Clare, Felix responds, by rote and a little coldly, how are we?
Better than the focus of attention, certainly, Thom says, pointing at [the body]&lt;c1|.

(click: ?c1)[Have we taken the preliminary photographs? Is the ground worth preserving?
Thom nods and shakes his head respectively.
[Birds]&lt;c2| have been at his face.]

(click: ?c2)[Thats to be expected, Felix says. Whats the damage?
Well, I think they got the [[eyes-&gt;TUE-0630!-(WOODS)-II-1-xxviii]], doesnt it? and part of one cheek.]
</tw-passagedata><tw-passagedata pid="74" name="TUE-0630!-(WOODS)-II-1-xxviii" tags="light" position="4093,3650" size="100,100">Have you identified him?
From his wallet. We have a name.
The Pathologist looks up at the body and [frowns]&lt;c4|.

(click: ?c4)[This is ugly business, isnt it?  Is it meant to look like a [suicide]&lt;c5|?]
(click: ?c5)[I dont know, sir. Theres no note.
Well, its looks more like a [[hanging-&gt;TUE-0630!-(WOODS)-II-1-xxix]], doesnt it?]</tw-passagedata><tw-passagedata pid="75" name="TUE-0630!-(WOODS)-II-1-xxix" tags="light" position="4228,3650" size="100,100">I dont find suicide particularly [plausible]&lt;c1|, sir, Rachel says,(click: ?c1)[Thats why I wanted your advice. Where would you get the body down? Rachel asks. I want to preserve the [knot]&lt;c2| on the tree, as well as on the noose...]
(click: ?c2)[Alright, alright, lets try not to mess with any DNA or fibres, as much as we can, Felix interrupts. I would get on the apple box, cut the rope along the main part of the rope beyond arms reach from the ground. But [[first-&gt;TUE-0630!-(WOODS)-II-1-xxx]], he says, and walks up to corpse, taking out a steel tape measure.]

</tw-passagedata><tw-passagedata pid="76" name="TUE-0630!-(WOODS)-II-1-xxx" tags="light" position="4369,3652" size="100,100">Felix [measures]&lt;c1| the distance from the ground to the corpses feet. (click: ?c1)[Then he extends the tape measure upwards, feeding it up until it has passed the top of the corpses head and touches the [tree branch]&lt;c2| above it.]
(click: ?c2)[A gust of wind blows the tape measure so that it suddenly bends like its been snapped, and the metal end hits Felix in the [face]&lt;c3|.]
(click: ?c3)[Ow, he says, grumpily, and [[retracts the tape-&gt;TUE-0630!-(WOODS)-II-1-xxxi]] into the carrier.]

</tw-passagedata><tw-passagedata pid="77" name="TUE-0630!-(WOODS)-II-1-xxxi" tags="light" position="4487,3660" size="100,100">[120 centimetres from the ground...&quot;]&lt;c1|
(click: ?c1)[[&quot;Only 90 centimetres from the branch above...]&lt;c2|] 
(click: ?c2)[Interesting,&quot; he says. Even from here, the neck looks [broken]&lt;c3|.]

(click: ?c3)[Felix [pauses]&lt;c4|.]
(click: ?c4)[For the [first time]&lt;c5|, Felix stares up into the face and [really looks]&lt;c5| at it.]
(click: ?c5)[Oh, bloody hell, he says. [[I know who this man is.-&gt;TUE-0630!-(WOODS)-I-2-i]]]
</tw-passagedata><tw-passagedata pid="78" name="TUE-0630!-(WOODS)-I-2-i" tags="light" position="215,3810" size="100,100">After the paramedics assist cutting down the body, Felix measures the corpses temperature, examines it from top to toe, and spends special time feeling the vertebrae in the top of the neck.

While he does this, he [[talks-&gt;TUE-0630!-(WOODS)-I-2-ii]], very slowly and calculatedly, to Rachel, without looking at her.

</tw-passagedata><tw-passagedata pid="79" name="TUE-0630!-(WOODS)-I-2-ii" tags="light" position="347,3812" size="100,100">I dont remember his name.

&quot;You said Timon, but I would normally remember something that unusual. He was a psychiatrist. 

&quot;One of his patients, a teenager, killed themselves two or three years ago, and he testified at the coroners inquest where I gave a report. 

&quot;If I remember correctly, he was quite upset. He looked like one of those &#39;[[I feel your pain-&gt;TUE-0630!-(WOODS)-I-2-iii]]&#39; kind of therapists, which in my jaded opinion seems to be the norm when it comes to treating adolescents.

</tw-passagedata><tw-passagedata pid="80" name="TUE-0630!-(WOODS)-I-2-iii" tags="light" position="485,3819" size="100,100">So, Timon is a [Psychiatrist]&lt;c1|? Rachel asks
(click: ?c1)[Clinical adolescent psychiatrist, if Im at all correct, Felix says. And so.  Initial facts.  I will not be sharing more information than this until I have performed a complete autopsy, so [listen carefully]&lt;c2|.]  

(click: ?c2)[&quot;This man obviously died last night. I need to get a better handle on the temperature charts overnight before giving you an accurate time range. Now, hes swinging from a [rope of ninety centimetres]&lt;c3|.]

(click: ?c3)[Thats not nearly enough of a drop to break his neck. His neck was broken by an [impact or blow]&lt;c4|: you can see contusions to the back of the head here.] 

(click: ?c4)[He was [[brought here-&gt;TUE-0630!-(WOODS)-I-2-iv]] and strung up within a couple of hours of dying.]

</tw-passagedata><tw-passagedata pid="81" name="TUE-0630!-(WOODS)-I-2-iv" tags="light" position="625,3818" size="100,100">So, Felix, we concur that initial observation suggests [murder]&lt;c1|? Rachel asks.
(click: ?c1)[No, Felix replies, a little testily. Initial observations are that the man [didnt die here]&lt;c2| and his body was strung up to look like a suicide.] 

(click: ?c2)[&quot;What broke his neck is not exactly determined, if he hit his head on the ground and his neck broke on impact, murder might be [impossible to prove]&lt;c3|.]
(click: ?c3)[But the knuckles on his right hand look bruised, Thom interrupts. Couldnt they be [defensive wounds]&lt;c4|? He could have fallen during a fight?]
(click: ?c4)[I didnt remember tuning into the Detective Constable Speculation Hour, Felix says, testily. I will not give you wild guesses after ten minutes with the body. Felix says.
[[Fair enough-&gt;TUE-0630!-(WOODS)-I-2-v]], Rachel says, as Thom stays silent]. 
</tw-passagedata><tw-passagedata pid="82" name="TUE-0630!-(WOODS)-I-2-v" tags="light" position="768,3822" size="100,100">Have you found anything else in the [pockets]&lt;c1|?
(click: ?c1)[House keys, [car keys]&lt;c2| on the same keyring, tissues. Wireless earbuds, but no phone.]
(click: ?c2)[Throw us the car keys, Rachel says.
Felix throws her a bag with a [black car remote]&lt;c3| inside.]
(click: ?c3)[She waves this at Felix. Ill keep this for now, just in case we find the car.
[[Very well-&gt;TUE-0630!-(WOODS)-I-2-vi]], Felix replies.]</tw-passagedata><tw-passagedata pid="83" name="TUE-0630!-(WOODS)-I-2-vi" tags="light" position="915,3820" size="100,100">Rachel looks at the two [paramedics]&lt;c1|. I think its time to take the gentleman away, she says.
(click: ?c1)[But as they lean down, theres the crack of [nearby feet]&lt;c2| under downed twigs and branches, and a flight of wood pigeons take to the air noisily.]
(click: ?c2)[Instinctively, the group freezes in position: the paramedics crouching over the body, the detectives staring in the [direction of the noise.]&lt;c3|]

(click: ?c3)[[[Someone is nearby-&gt;TUE-0630!-(WOODS)-I-3-i]]]</tw-passagedata><tw-passagedata pid="84" name="TUE-0630!-(WOODS)-I-3-i" tags="light" position="1066,3824" size="100,100">A [grey-haired man]&lt;c1| in his late forties paces through the woods, up the gentle slope towards them. 

(click: ?c1)[He has a pair of [binoculars]&lt;c2| around his neck.]

(click: ?c2)[He is both anxious and excited: this isnt really his normal walking route, but he [spotted the policecar]&lt;c3| and ambulance from the road, and heard voices.]

(click: ?c3)[Curious about what has happened, and excited to be the first to learn about something terrible, he moves towards the group, hoping that his [keen interest]&lt;c4| wont be too obvious.]

(click: ?c4)[Rachel looks at the approaching man and says quietly to Thom, Well, heres our first [[rubbernecker-&gt;TUE-0630!-(WOODS)-I-3-ii]], eh?]</tw-passagedata><tw-passagedata pid="85" name="TUE-0630!-(WOODS)-I-3-ii" tags="light" position="1203,3821" size="100,100">She turns to the paramedics and says, Cover him up, quick as you can gentlemen... Then she gives Thom the [nod]&lt;c1|.

(click: ?c1)[[Good morning, sir,]&lt;c2| Thom shouts at the newcomer.]

(click: ?c2)[Hello, officers, the man says nervously. Am I allowed to [walk through]&lt;c3|?]

(click: ?c3)[Afraid not. This is an [active crime scene]&lt;c4|.]

(click: ?c4)[Goodness, [what happened]&lt;c5|? the man says, trying to hide his excitement as he sees clearly the paramedics, a shape on the stretcher, the officers and squat, balding man shooting him a castigating stare.]

(click: ?c5)[Well, we [found a body]&lt;c6|, sir.]

(click: ?c6)[Goodness, how terrible! he says. You know, I, ah, walk through these woods every day. Is there anything [[I can do to help?-&gt;TUE-0630!-(WOODS)-I-3-iii]] ]
</tw-passagedata><tw-passagedata pid="86" name="TUE-0630!-(WOODS)-I-3-iii" tags="light" position="1344,3827" size="100,100">Thom looks at Rachel, then back at the man.
[Not right now, sir, I dont think.]&lt;c1|
(click: ?c1)[But the man has now gotten closer, and he suddenly [stops]&lt;c2|.]
(click: ?c2)[Oh, he says, as the colour drains from his face and the excitement curdles in his stomach. He can [see the body]&lt;c3| on the ground more clearly.] 
(click: ?c3)[//Thats Tim Rutherford//, he thinks. //Thats my neighbour. Christ, he killed himself, didnt he? Poor Joanne//. He is thinking of [[what to say to the police-&gt;TUE-0630!-(WOODS)-I-3-iv]].]


</tw-passagedata><tw-passagedata pid="87" name="TUE-0630!-(WOODS)-I-3-v" tags="light" position="1608,3829" size="100,100">Thom pulls out his notebook and jots the information down in a scratchy cursive that looks more like a doctors handwriting than an artists.

Thank you, sir. [Well be in touch]&lt;c1| if we need anything.
(click: ?c1)[Patrick turns away and starts [walking away, quickly]&lt;c2|. He is thinking, //What do I do? Do I go and tell Jo? Do I stay? My God, what a terrible thing...//]

(click: ?c2)[Rachel and Thom watch him hurry away.
You think he [recognized the body?]&lt;c3| Thom asks Rachel.]

(click: ?c3)[Funny reaction if he didnt, Rachel says. I suppose we should go an [inform the next of kin]&lt;c4| before he does, she says.]

(click: ?c4)[This is going to be a [lot of bloody fun]&lt;c5|, Thom says glumly.]

(click: ?c5)[May as well rip the band-aid off, eh, Thomas? Rachel says, as [[they turn away from the body.-&gt;TUE-0630!-(WOODS)-I-3-vi]] ]</tw-passagedata><tw-passagedata pid="88" name="TUE-0630!-(WOODS)-I-3-vi" tags="light" position="1772,3833" size="100,100">[Well see you later, Felix,]&lt;c1| Rachel says.
(click: ?c1)[[Of course you will,]&lt;c2| Felix says tetchily.]

(click: ?c2)[The Detectives begin to walk away, in one direction, back towards the road. Patrick is hurries through the woods in the other direction, towards the village of Eynsham.  

[[They will both have a part to play in what happens next.-&gt;TUE-0700!-(TITLE)]] ]</tw-passagedata><tw-passagedata pid="89" name="TUE-0700!-(TITLE)" tags="light" position="194,4093" size="100,100">&lt;h1&gt;
(transition: &quot;dissolve&quot;)+(transition-time: 2s)[ [[
THE DETECTIVES-&gt;TUE-0700X-(POLICE)-Ia-1-i]]]
(transition: &quot;dissolve&quot;)+(transition-time: 2s)[ [[
PATRICK WEST-&gt;TUE-0700X-(PATRICK)-Ib-1-i]]]

&lt;/h1&gt;</tw-passagedata><tw-passagedata pid="90" name="TUE-0700X-(POLICE)-Ia-1-i" tags="light" position="344,4018" size="100,100">Thom and Rachel begin to walk back through the forest, towards the road.
They walk around the scrub and towards a larger path, past a giant hornbeam, with a trunk like many huge grey bones fused together: stretching upwards before the branches curl back down on every side like cresting waves. 
Most of its leaves, some still golden, remain shivering on the branches. Its the kind of tree a witch would live in, in a [[fairy tale-&gt;TUE-0700X-(POLICE)-Ia-1-ii]].
</tw-passagedata><tw-passagedata pid="91" name="TUE-0700X-(PATRICK)-Ib-1-i" tags="light" position="346,4175" size="100,100">Patrick hurries through the woods. He turns down the fastest path home as a sick feeling in his stomach begins to grow.
//Tim killed himself in the woods//, he thinks. 
Jesus, how terrible. 
How ghoulish. 
What a terrible thing to do, how unbelievably selfish. 
Torturing his wife like that, traumatising whoever found him in the woods. Wait until I tell Bets, what will she think? Oh, and the kids! I mean, I suppose they didnt know him very well, but we were neighbours. Ill have to have a talk with Evey about suicide. Christ, thats a heavy thing for a little girl to [[come to terms with-&gt;TUE-0700X-(PATRICK)-Ib-1-ii]].

</tw-passagedata><tw-passagedata pid="92" name="TUE-0630!-(WOODS)-I-3-iv" tags="light" position="1481,3830" size="100,100">Sir, I think its best you [continue on your walk]&lt;c5|, Thom says, softly.
(click: ?c5)[Yes, very well, he says, and turns back the way he came.
Before you go, can we have your name and address, just in case we have [any questions]&lt;c6| for you at a later date?]
(click: ?c6)[Of course, the man replies. My name&#39;s [[Patrick West-&gt;TUE-0630!-(WOODS)-I-3-v]]. Im a local, I live in Eynsham. 3 Tanners Lane.]</tw-passagedata><tw-passagedata pid="93" name="TUE-0700X-(POLICE)-Ia-1-ii" tags="light" position="479,4015" size="100,100">I like it here, Thom says.
Good for you, Rachel responds.
You dont?
I dont know, Rachel says, its alright. My Dad used to take me to places like this, you know, only ever in the autumn or winter. He loved it, but it always makes me feel sad, you know? Everything dead. Cold and wet and snotty. That [[Sunday afternoon feeling-&gt;TUE-0700X-(POLICE)-Ia-1-iii]].

</tw-passagedata><tw-passagedata pid="94" name="TUE-0700X-(POLICE)-Ia-1-iii" tags="light" position="611,4014" size="100,100">They walk in silence for a moment.
Not a very pretty way to go, Thom muses.
Thats the thing about nature. Not nearly as romantic when you get up close.
The sun comes out from behind a cloud for a moment and for a moment, they are both walking in the light and the warmth.
Not going to get much more of that, this year, Rachel says, breathing the forest air in deeply for a moment.
Thom nods. Its what makes it special, I think. Winter sun is very low and always carries a colour to it. I find it quite [[special-&gt;TUE-0700X-(POLICE)-Ia-1-iv]], he says.
</tw-passagedata><tw-passagedata pid="95" name="TUE-0700X-(POLICE)-Ia-1-iv" tags="light" position="734,4015" size="100,100">Rachel looks around.
What are you thinking? Thom asks her.
Rachel sighs.
Im just hoping that this doesnt turn into one of those weird cases, she says.
Hey. Unpredictable, weird, motiveless decisions are only difficult to solve when we cant find any unpredictable, weird people with motives and poor decision making skills, Thom says. Cheer up, there may be loads of weirdos in this case.
They break through the edge of the woods, and see[[PC Callum Finch-&gt;TUE-0700X-(POLICE)-Ia-1-v]], who was first at the scene, standing nearby.

</tw-passagedata><tw-passagedata pid="96" name="TUE-0700X-(POLICE)-Ia-1-v" tags="light" position="874,4011" size="100,100">Callum! Thom says, waving. Making yourself useful?
People keep getting lost, Callum shouts back. Ive been told to furnish directions.
Rewarding work, Thom says, with a smile.
We cant all be detectives, Callum replies.
Rachel looks across the muddy fields that stretch two hundred yards before they reach the Oxford Road.
Our man must have found a different route to get him all the way to the crime scene, surely? she asks Thom. How far is this, do you think?
Got to be five hundred metres, Thom replies.
Could you carry me that distance?
Thom thinks for a moment.
Shall we [[try-&gt;TUE-0700X-(POLICE)-Ia-1-vi]]?

</tw-passagedata><tw-passagedata pid="97" name="TUE-0700X-(POLICE)-Ia-1-vi" tags="light" position="1018,4011" size="100,100">Rachel shoots Thom a look like hes the stupidest man in the world.
And what will that prove?
If the murderer was stronger than me, a twenty-eight-year-old police in pretty good condition. Or whether it was at least two people. Or whether the body was dragged, in a tarp or something, in which case Id expect Felix to find more damage on the body and at least part of a trail in the woods.
Rachel sighs, claps her hands and stretches her neck.
Okay then. Do you need to prep? Want to stretch?
Come on, look at me, Thom says. Do I look like I [[need to stretch-&gt;TUE-0700X-(POLICE)-Ia-1-vii]]?
</tw-passagedata><tw-passagedata pid="98" name="TUE-0700X-(POLICE)-Ia-1-vii" tags="light" position="1160,4015" size="100,100">Thom crouches down, Rachel slumps over his shoulder, he wraps his arm around her and struggles to stand up again.
Bloody hell! he says. How much do you weigh?
Not as much as a six foot dead bloke, she replies.
Are you sure? Thom huffs as he starts off towards the road. Must have... bloody... big bones inside of you, he says. Jesus Christ!
His feet feel dangerously uncertain over the slippery mud and uneven ground. Within a [[minute of exertion-&gt;TUE-0700X-(POLICE)-Ia-1-viii]], his neck aches and his stomach muscles hurt.
</tw-passagedata><tw-passagedata pid="99" name="TUE-0700X-(POLICE)-Ia-1-viii" tags="light" position="1301,4021" size="100,100">Weve been going about a minute. How far have we got?
Halfway through the first field.
Fifty metres?
No! At least... fifty three metres, Thom says, gasping.
And were going downhill, in the light. Shall we end the experiment?
I said Id carry you through this field... Thom says.
You know, this isnt very comfortable for me either, Rachel responds.
Suddenly, Thoms foot hits a hollow, hidden by a muddy puddle, and he [[pitches forwards-&gt;TUE-0700X-(POLICE)-Ia-1-ix]].
</tw-passagedata><tw-passagedata pid="100" name="TUE-0700X-(POLICE)-Ia-1-ix" tags="light" position="1438,4021" size="100,100">AAAGH Thom yells, as he staggers forwards, bent and falling towards the ground. Rachel, sensing disaster,  dismounts effectively while Thom plummets towards the ground, hands out.

He lands on the ground in a kind of press-up position, which keeps the mud off everything but his hands and feet.  He awkwardly pushes himself into a crouch position, and then groans for a second.
 
I think you did my bloody back in, Thom says. Rachel reaches out her hand but he slaps it away. I can stand up on my own, he says.

Theres silence for a few seconds. Then [[Rachel chuckles-&gt;TUE-0700X-(POLICE)-Ia-1-x]]. Thom does too. 

</tw-passagedata><tw-passagedata pid="101" name="TUE-0700X-(POLICE)-Ia-1-x" tags="light" position="1576,4021" size="100,100">Thom stands up awkardly and points at where theyve come from.
Look at my footprints! It looks like I weigh forty stone.
Footprints like that would last the night, wouldnt they?
Thom nods. He straightens himself up and blows out.
Any permanent damage? Rachel asks.
Thom shakes his head and looks across the field at the stubble and mud.
I dont see anything footprints like that, do you?
Rachel looks around and says nothing.
So, a different route into the woods.
And an accomplice. Either that or hes built like [[Arnold Schwarzenegger-&gt;TUE-0700X-(POLICE)-Ia-1-xi]].

</tw-passagedata><tw-passagedata pid="102" name="TUE-0700X-(POLICE)-Ia-1-xi" tags="light" position="1721,4027" size="100,100">Maybe, Rachel says. Theres still the knots and the rope that would make it look very suspect.  She looks around.  So what youre saying is, were looking for an Arnold Schwarzenegger type, who has night vision and is intimately familiar with the bylaws of Wytham Wood.
Occams Razor, Thom says, tongue-in-cheek.
All I can say is, Im glad I wore my wellingtons, Rachel says, as they cross the second field, the one that leads down to the Oxford road.
Christ, Thom says, looking at his filthy shoes. Good point, I better put on my spare trainers before we [[say hello to the victims family-&gt;TUE-0700X-(POLICE)-Ia-1-xii]].
</tw-passagedata><tw-passagedata pid="103" name="TUE-0700X-(POLICE)-Ia-1-xii" tags="light" position="1860,4024" size="100,100">The clouds darken across the sky, making it look overpoweringly huge.
Going to rain all day, according to the weather, Rachel says.
Ah, the weathers always wrong, Thom says breezily. They approach the road. You know, my back really is tweaking, he adds.
Then you should work your core more than your glamour muscles.
This is all functional strength, Thom whines, I dont have glamour muscles!
&quot;Tell that to your weedy back, Rachel retorts.  Which job car did you get today?
The Fiesta of Fury, Thom says, pointing at the little blue Ford parked between two police cars by the side of the road. You?
Oh, I got picked up by a PC this morning: there he is, she waves at a [[uniformed officer-&gt;TUE-0700X-(POLICE)-Ia-1-xiii]] standing by the road.

</tw-passagedata><tw-passagedata pid="104" name="TUE-0700X-(POLICE)-Ia-1-xiii" tags="light" position="2007,4027" size="100,100">They walk up to the little car.
You know, in Dubai, the police drive Lamborghinis, Thom says.
Do you want to drive a Lamborghini? Rachel asks, sceptically.
I just dont want to drive a bloody Ford Fiesta, Thom replies.
How will you survive? Rachel asks.
Thom replies by pressing a button on the remote. The Fiesta unlocks and beeps twice.
[[Detective Sergeant-&gt;TUE-0700X-(POLICE)-Ia-1-xiv]]! the uniformed officer a little way off shouts out.</tw-passagedata><tw-passagedata pid="105" name="TUE-0700X-(POLICE)-Ia-1-xiv" tags="light" position="2165,4028" size="100,100">Yes, Constable? Rachel responds, as she opens the passenger-side door to the little Fiesta.
Weve found a vehicle, he shouts.  Might be the victims. Half-mile that way, parked by the road to the nursing home.
Skoda?
A silver Skoda Octavia.
Rachel looks at Thom.
 I think swing by to [[see the car-&gt;TUE-0700X-(POLICE)-Ia-2-i]] on the way to the family, dont you?
Any time between us and this death notification is a good idea in my book, Thom says.

</tw-passagedata><tw-passagedata pid="106" name="TUE-0700X-(POLICE)-Ia-2-i" tags="light" position="2432,4024" size="100,100">Given simple directions by the constable, Thom begins driving slowly South-East, where the Oxford road become the Eynsham Road, alert and looking out for the turning on the left.
He finds it after a minute, turns up the [[single lane road-&gt;TUE-0700X-(POLICE)-Ia-2-ii]].
</tw-passagedata><tw-passagedata pid="107" name="TUE-0700X-(POLICE)-Ia-2-ii" tags="light" position="2590,4025" size="100,100">Reminds me of my youth, Thom says.
Country boy, Rachel replies, absent-mindedly.
Soon they reach a fork in the road.
Idiot didnt mention a fork in the road, Thom grumbles.
Left takes you closer to the woods, Rachel says, and after turning to the left, they soon see a uniformed officer standing next to a [[silver estate car-&gt;TUE-0700X-(POLICE)-Ia-2-iii]], parked in a passing place.

</tw-passagedata><tw-passagedata pid="108" name="TUE-0700X-(POLICE)-Ia-2-iii" tags="light" position="2725,4027" size="100,100">The officer waves at them.
Rachel jumps out the car.
Called in an hour ago by someone in the care home, he says.
Rachel takes the bagged-up car remote from her anorak pocket and thumbs it.
The Octavia unlocks and beeps.
Presto! Thom says.
Personal effects? the Constable asks.
In the dead mans pockets, Rachel replies, reaching into her anorak and pulling out a pair of latex gloves.
She [[opens the drivers door-&gt;TUE-0700X-(POLICE)-Ia-2-iv]], gingerly, at the base of the handle.

</tw-passagedata><tw-passagedata pid="109" name="TUE-0700X-(POLICE)-Ia-2-iv" tags="light" position="2859,4025" size="100,100">Call the main unit and get forensics down here, please, she asks the constable.
Photograph everything. Print the door handles and the boot and the steering wheel. Look for hairs on the headrests and drivers seat. Preserve and document everything. Whoever took him in the woods, drove him in this car. Look she says, and [[points-&gt;TUE-0700X-(POLICE)-Ia-2-v]].

</tw-passagedata><tw-passagedata pid="110" name="TUE-0700X-(POLICE)-Ia-2-v" tags="light" position="3008,4024" size="100,100">The car interior is quite messy. 

A dirty towel 
sits on the back seats, covered in muddy paw prints. 

A thin layer of dust
lies across the dashboard.

A phone in a leather case
sits upright in the cupholder beneath the gearstick.
Take a picture of that, document it, charge it up and lets see about getting it [[unlocked-&gt;TUE-0700X-(POLICE)-Ia-2-vi]], okay? Rachel says.

</tw-passagedata><tw-passagedata pid="111" name="TUE-0700X-(POLICE)-Ia-2-vi" tags="light" position="3151,4027" size="100,100">Rachel straightens herself up and turns to Thom.  How old is that car?
18 Reg, so about five years, Thom replies.
Rachel looks at the dusty exterior, the under-inflated tires, the less-than-perfectly maintained interior.
Didnt treat it very well, did he?
Well, hes got that Oxford Don feel about him, doesnt he? Besides, maybe its insurance. If Felix is right, he spends most days around the kind of little teenage scrotes who spend most of their time breaking into cars for fun, so why tempt them with a juicy target?
&quot;Sounds like an excuse to me, Rachel says, and goes [[silent-&gt;TUE-0700X-(POLICE)-Ia-2-vii]].</tw-passagedata><tw-passagedata pid="112" name="TUE-0700X-(POLICE)-Ia-2-vii" tags="light" position="3306,4028" size="100,100">Thom looks at Rachel. He likes the way she doesnt really say what she thinks until shes really sure. Meticulous. Considered. //Id like to be more like that,// Thom thinks, before immediately hearing himself say:
Gotta be two people, then, doesnt it? Thom says. One drives in his car, the accomplice drives in another. They drop off the body, put the keys in his pocket, trudge back to the other car and drive away.
Rachel just thinks.
Come on, she says. Lets go and inform the next of kin. Get the fun bit [[over and done with-&gt;TUE-0700X-(POLICE)-Ia-3-i]]..

</tw-passagedata><tw-passagedata pid="113" name="TUE-0700X-(POLICE)-Ia-3-i" tags="light" position="3542,4026" size="100,100">The car was left just seven minutes drive from his house, Thom says, checking Google Maps.
He turns right at the B4044, and the forest fades behind the rolling fields: still visible but just a small and distant shape, brown and coppery with the dying leaves. The road changes its name from the Eynsham road to the Oxford Road as they reach Farmoor, a small village on the left-hand side of the road, [[bungalows-&gt;TUE-0700X-(POLICE)-Ia-3-ii]] and two-ups, two-downs, a row of mock Tudor semis, all from the thirties and forties.

[[The road curls on.-&gt;TUE-0700X-(POLICE)-Ia-3-iii]]</tw-passagedata><tw-passagedata pid="114" name="TUE-0700X-(POLICE)-Ia-3-ii" tags="light" position="3679,4124" size="100,100">Probably wont come and paint this, will you? Rachel asks, looking out the window.
Thom smiles. Shes baiting him a little bit.
Nah, Thom replies. As an artist, Im only interested in painting rich peoples houses.
Well, knowing Oxfordshire real estate prices, these probably are rich peoples houses.
Still wont paint em, Thom replies. 

[[The road-&gt;TUE-0700X-(POLICE)-Ia-3-iii]] moves past the houses.</tw-passagedata><tw-passagedata pid="115" name="TUE-0700X-(POLICE)-Ia-3-iii" tags="light" position="3818,4023" size="100,100">The houses dissolve into the tree line, great ash trees crowding out both sides of the road, mostly bare now. The speed limit says 40, but Thom goes resolutely at 35.
Careful there, Sterling Moss... she says sardonically.
Oh, be quiet, Thom says. She knows full well how Thom despises police who speed when it isnt necessary. 

Hes told her before, this is the first sign of a cowboy cop: a willingness to flout a law that they will penalise anybody else for shows an instinct towards bullying and corruption.

Theyre silent for a moment.  Then Rachel decides to [[summarise-&gt;TUE-0700X-(POLICE)-Ia-3-iv]].</tw-passagedata><tw-passagedata pid="116" name="TUE-0700X-(POLICE)-Ia-3-iv" tags="light" position="3958,4023" size="100,100">So. Timon Rutherford:

Age
54 years old. 

Occupation
Clinical adolescent psychiatrist, according to our very own pathologist who claims to have met him at an inquest. 

Injuries
Died last night, probably of a broken neck, most likely sustained by a blow to the back of the head. 

Time and location of death, 
unknown, no certain approximation.  

Transported to the woods
Probably driven to near the location in his own car, found parked near the retirement home, presumably transported there to the woods on foot, certainly after [[dark-&gt;TUE-0700X-(POLICE)-Ia-3-v]]. 

</tw-passagedata><tw-passagedata pid="117" name="TUE-0700X-(POLICE)-Ia-3-v" tags="light" position="4108,4036" size="100,100">An arduous journey
Timon was hung up by a tree away from any of the main paths, approximately six or seven hundred metres from where the car was parked. This action was certainly done after dark, in the cold and wet, over rough ground.  I would guess the victim weighed between seventy and eighty kilos. 

The culprit/s
All this suggests either one culprit of much greater than average strength, or two culprits working together, with enough knowledge of the woods to move through them comfortably in darkness. 

Motive
The motive for going to such lengths to move the body only to stage such an unconvincing suicide are difficult to ascertain at this time. 

Did I miss anything? Rachel asks Thom.
You rarely [[miss anything-&gt;TUE-0700X-(POLICE)-Ia-3-vi]], Thom replies.
</tw-passagedata><tw-passagedata pid="118" name="TUE-0700X-(POLICE)-Ia-3-vi" tags="light" position="4250,4033" size="100,100">He sighs, then says, Odds on the wife did it.
The spouse, Rachel corrects Thom, he could have a husband.
Nah. Dont think so. Not this guy. Look at the state of his car.
Well, thats a stereotype, Rachel says.
Come on, it always ends up being the spouse, doesnt it?
Rachel says nothing.
They revert to silence as they approach the small village of Swinford, and begin to drive across the long limestone bridge, narrow, with stone balustrades on either side.
They have to queue on the other side of the bridge, as cars line up to pay the toll.
I forgot about this, Thom says.
How can you forget about the last [[private toll bridge-&gt;TUE-0700X-(POLICE)-Ia-3-vii]] in England? Rachel responds.

</tw-passagedata><tw-passagedata pid="119" name="TUE-0700X-(POLICE)-Ia-3-vii" tags="light" position="4402,4034" size="100,100">Its not the last private toll bridge in England, Thom replies.
Mickey told me it is.
Its not even the last private toll bridge on the bloody Thames! Thom protests.
Where are the others?
I cant remember. But this isnt the last one.
Well, you convinced me, Rachel says.
Thom approaches the [[man in the booth-&gt;TUE-0700X-(POLICE)-Ia-3-viii]]: a haggard, bald man in a high visibility jacket.

</tw-passagedata><tw-passagedata pid="120" name="TUE-0700X-(POLICE)-Ia-3-viii" tags="light" position="4552,4032" size="100,100">Five pence, please, the tollman says.
Police, official business, Thom says.
The man looks at them and blinks.
Five pence to cross the bridge.
This is police business.
Says who? Youre not wearing a uniform and youre in a Ford Fiesta!
My name is Detective Constable Thomas Clare... Thom says.
Right! the man says, grabbing up his pencil and printing the name above the crossword on yesterdays copy of the Daily Express.
You cant bully people around here, Detective Constable Clare!
Thom, Rachel says, [[Give him the 5p-&gt;TUE-0700X-(POLICE)-Ia-3-ix]],

</tw-passagedata><tw-passagedata pid="121" name="TUE-0700X-(POLICE)-Ia-3-ix" tags="light" position="4700,4031" size="100,100">Im not going to, Thom says. Its the principle.  This is police business. Were legally entitled to come through.
Corruption of authority! the man yells. Wheres my phone?  Im going to film you trying to shake me down.
There are now three cars behind the Fiesta. One of them honks their horn, getting an irate eyeballing from Thom.
Thom, [[give the man his bloody 5p-&gt;TUE-0700X-(POLICE)-Ia-3-x]], Rachel says.

</tw-passagedata><tw-passagedata pid="122" name="TUE-0700X-(POLICE)-Ia-3-x" tags="light" position="4843,4032" size="100,100">I dont have 5p, I dont carry a change purse, Im not an old age pensioner! Thom says.
Oy!  Thats racist against old people, the man says in the booth.
Rachel, whos now also lost her cool, rummages around in her bag and comes out with a ten pence piece. She hands it to Thom, who slams it on the counter.
Keep the change, Rachel says.
Thom [[drives forwards-&gt;TUE-0700X-(POLICE)-Ia-3-xi]], to a chorus of hooting cars behind them.
</tw-passagedata><tw-passagedata pid="123" name="TUE-0700X-(POLICE)-Ia-3-xi" tags="light" position="4994,4029" size="100,100">Bloody hell! What was that? Thom asks.
The great British taxpayer, Rachel says.
You dont pay tax on a toll bridge, Thom says grumpily.
How come you know everything about toll bridges except that you need money to get cross them? Rachel asks.
Thom turns his attention to the Talbot Inn as they pass.
Nice looking pub, he says wistfully, thinking about having an expedition to the woods with his pastels, and then a few drinks at the hostelry. It makes him feel sad, how much hes already looking forward to Saturday, how empty and lacking in joy the [[space ahead-&gt;TUE-0700X-(POLICE)-Ia-3-xii]] of him between Monday and Friday feels now.

</tw-passagedata><tw-passagedata pid="124" name="TUE-0700X-(POLICE)-Ia-3-xii" tags="light" position="5133,4031" size="100,100">They drive past the sports fields and its pavilion, the cotswold stone walls and giant chestnut trees that shed leaves and conkers into the road giving it an ancient, never-changing feel, the sense of a town whose roads and divisions were set out fifteen hundred years ago, by the Saxons under some long-forgotten king.

Pleasant little village, isnt it? he says, as they reach the village proper: the nice old side of town, stone cottages and red brick Victorian villas. He turns left onto Queens Street and slows down as his phone beeps to tell them theyve [[arrived-&gt;TUE-0700X-(POLICE)-Ia-3-xiii]].

</tw-passagedata><tw-passagedata pid="125" name="TUE-0700X-(POLICE)-Ia-3-xiii" tags="light" position="5279,4031" size="100,100">To their left is nothing more than a high stone wall that ends ahead at the corner of a small road, with fire-red grape ivy clinging to its top, and a small arched doorway with an iron gate. Thom parks by the gate and the two detectives get out, silently, preparing themselves for the next hour.
Thom walks up to the gate and looks through.
Garden gate, he says. I think the front door is round the lane.
Alright, Rachel says, straightening out her clothes. Lets get this [[over and done with-&gt;TUE-0700X-(POLICE)-Ia-3-xiv]].

</tw-passagedata><tw-passagedata pid="126" name="TUE-0700X-(POLICE)-Ia-3-xiv" tags="light" position="5418,4032" size="100,100">The detectives walk around the corner and up the little lane, where the stone wall breaks in the centre to reveal a garden and a honey-coloured Georgian two-story cottage. The windows have the same honey-coloured stone mullions dividing them into thin strips, while a curved pediment is carved on top of the old oak front door. A cast iron plaque mounted on the wall announces in an old script, Keepers Cottage. Well-kept and clearly well-loved, a place anyone would feel happy coming home to.
Rachel stops at the threshold and turns to Thom.
I talk, you make observations, okay?
Aye aye, Skipper, Thom replies, before immediately double-taking.
Wait a moment... he says, craning his neck as he looks into the [[darkness of the house across the lane-&gt;TUE-0700X-(POLICE)-Ia-3-xv]].

</tw-passagedata><tw-passagedata pid="127" name="TUE-0700X-(POLICE)-Ia-3-xv" tags="light" position="5562,4030" size="100,100">Look who it is, Thom says, pointing at the window in the little cottage opposite, and then raising his hand as a timid figure hurriedly steps back from the window.
Sneaky rubbernecking sod, Thom says, then shouts loudly, Hello Mister West, he points at his front door. 3 Tanners lane, and then shoots him a thumbs up.
Alright Thom, thats enough, Rachel says, but Thom stands, [[staring into the house-&gt;TUE-0700X-(POLICE)-Ia-3-xvi]].
</tw-passagedata><tw-passagedata pid="128" name="TUE-0700X-(POLICE)-Ia-3-xvi" tags="light" position="5696,4034" size="100,100">Although its difficult to see, Thom can see the shape of a child, a little girl, running up to the man and holding his hand. Then a woman comes up behind him and places a hand on his shoulder. Theyre clearly worried for him. Thom shrugs and turns back to Keepers Cottage.

[[Ill deal with him later-&gt;TUE-0700X-(POLICE)-Ia-3-xvii]], Thom thinks.

</tw-passagedata><tw-passagedata pid="129" name="TUE-0700X-(POLICE)-Ia-3-xvii" tags="light" position="5825,4033" size="100,100">Lets rip the plaster off, eh? he says, and he walks with Rachel up to the Front door of [[Keepers Cottage-&gt;TUE-0730!-(KEEPERS)-I-TITLE]].

</tw-passagedata><tw-passagedata pid="130" name="TUE-0700X-(POLICE)-Ia-3-xviii" tags="light" position="5968,4035" size="100,100">[[over-&gt;TUE-0700X-(POLICE)-Ia-3-xix]]</tw-passagedata><tw-passagedata pid="131" name="TUE-0700X-(POLICE)-Ia-3-xix" tags="light" position="6108,4042" size="100,100">[[over-&gt;TUE-0700X-(POLICE)-Ia-3-xx]]</tw-passagedata><tw-passagedata pid="132" name="TUE-0700X-(POLICE)-Ia-3-xx" tags="light" position="6245,4041" size="100,100">[[over-&gt;TUE-0700X-(POLICE)-Ia-3-xxi]]</tw-passagedata><tw-passagedata pid="133" name="TUE-0700X-(POLICE)-Ia-3-xxi" tags="light" position="6385,4042" size="100,100">[[over-&gt;TUE-0700X-(POLICE)-Ia-3-xxii]]</tw-passagedata><tw-passagedata pid="134" name="TUE-0700X-(POLICE)-Ia-3-xxii" tags="light" position="6515,4045" size="100,100">[[over-&gt;TUE-0700X-(POLICE)-Ia-3-xxiii]]</tw-passagedata><tw-passagedata pid="135" name="TUE-0700X-(POLICE)-Ia-3-xxiii" tags="" position="6657,4042" size="100,100">Double-click this passage to edit it.</tw-passagedata><tw-passagedata pid="136" name="TUE-0730!-(KEEPERS)-I-TITLE" tags="" position="174,4513" size="100,100">&lt;h1&gt;
(transition: &quot;dissolve&quot;)+(transition-time: 2s)[ [[
7:30AM-&gt;TUE-0730!-(KEEPERS)-I-1-i]]]

&lt;/h1&gt;</tw-passagedata><tw-passagedata pid="137" name="TUE-0700X-(PATRICK)-Ib-1-ii" tags="light" position="485,4178" size="100,100">Christ! Patrick yells as his boot hits something slippery and he pitches forwards, before righting himself with a painful jerk. 
//Tweaked my bloody knee//, he thinks, wincing, though the pain isnt all that bad. 
//Whats that smell?// he wonders, and turns to see a [[streak of dog shit-&gt;TUE-0700X-(PATRICK)-Ib-1-iii]] behind him on the path.

</tw-passagedata><tw-passagedata pid="138" name="TUE-0700X-(PATRICK)-Ib-1-iii" tags="light" position="621,4186" size="100,100">//Well that just bloody tears it, doesnt it?// Patrick thinks. //Someone walking a dog in Wytham Wood? They should be bloody shot. They should be caught and fined and put in prison for a week and a half.// 
He lifts one foot after the other, grumbling. 
//Look at the mesh on my bloody Roclites! A hundred and eighty quid! Oh, what do I do? I cant put them in the washing machine, can I?//

He begins angrily [[swiping his feet-&gt;TUE-0700X-(PATRICK)-Ib-1-iv]] at the little tufts of grass that live at the edges of the path. A blackbird begins to sing nearby.
</tw-passagedata><tw-passagedata pid="139" name="TUE-0700X-(PATRICK)-Ib-1-iv" tags="light" position="746,4186" size="100,100">//Am I getting rid of this horrible stuff or just smearing it deeper into the fabric? // Patrick wonders. 
He stops and listens to the bird. A cloud briefly parts from sun, and warmth and light hits his face. 
//This is such a tranquil place//, he thinks. 
//Why must people ruin it, with their dogs and suicides? Why can things never be just simple, and nicethe way they should? Why cant I ever have something nice, without someone else ruining it?//

//Suppose it could be worse//, he tells himself. //I could be swinging from that tree.//

He starts walking again, as the beech begin to thin into the ancient woodland of oak and lime. He is [[halfway home-&gt;TUE-0700X-(PATRICK)-Ib-1-v]].
</tw-passagedata><tw-passagedata pid="140" name="TUE-0700X-(PATRICK)-Ib-1-v" tags="light" position="876,4189" size="100,100">//I wonder if Ill get back home before the Policemen? //he thinks.
Then he wonders, //what happened back there?_ Theyd taken the body down already, but, well, the little bit I saw looked like a horror movie.
//
Is Tim Rutherford the kind of man who would go off one day and kill himself like that? 
//Wellhow do you [[ever know?-&gt;TUE-0700X-(PATRICK)-Ib-1-vi]]? //he supposes.

</tw-passagedata><tw-passagedata pid="141" name="TUE-0700X-(PATRICK)-Ib-1-vi" tags="light" position="1014,4189" size="100,100">//When did I last see him? Was he different from normal? 
It would have been last weekWednesday or Thursday. I wish I was the kind of person who kept a diary. 
What happened? 
It was dark. He was taking shopping into the house, wasnt he? But he looked preoccupied.//

//Yes, I waved at him, and he only half-waved back, which annoyed me a little. Like I wasnt worth the full wave Id given him. 
He always made me feel like he thought he was better.//

Patrick [[kicks-&gt;TUE-0700X-(PATRICK)-Ib-1-vii]] a clump of beech nuts.
</tw-passagedata><tw-passagedata pid="142" name="TUE-0700X-(PATRICK)-Ib-1-vii" tags="light" position="1155,4185" size="100,100">//Poor Jo, though, //he thinks. 
//Joanne has always been very nice to us. Attractive woman. Always liked her. Never knew how happy they were together. 
I mean, who knows? 
But I would look across through the window, doing the washing up, and they would almost always be in other rooms. 
Not like me and Bets. Were... bloody inseparable. The woman wont leave me alone! Her or the kid. 
Sometimes Id look across and see him sitting there on his own in his swanky Eames chair and headphones and feel jealous. 
I suppose my life is a lot more stifled and noisy than his, I supposebut never lonely. I never feel like [[killing myself-&gt;TUE-0700X-(PATRICK)-Ib-1-viii]].//
</tw-passagedata><tw-passagedata pid="143" name="TUE-0700X-(PATRICK)-Ib-1-viii" tags="light" position="1294,4189" size="100,100">//Will there be press for a suicide?// Patrick wonders. 
//Bloody reporters and paparazzi, evening news trucks bunging up the street? 
No, you only get that with child kidnappings and when a TV star gets murdered. 
Nobody really [[cares about us-&gt;TUE-0700X-(PATRICK)-Ib-1-ix]], do they?//
</tw-passagedata><tw-passagedata pid="144" name="TUE-0700X-(PATRICK)-Ib-1-ix" tags="light" position="1425,4188" size="100,100">Patrick reaches the Oxford road and turns towards home. He listens for sirens, and checks each car that passes: but sees no sign of the police, and is quickly lost in thought once more.

//No, I didnt really know Timon,// he thinks. //Isnt that funny? 
Its been, whateight years? Ten? 
We spent all that time, fifteen yards away from where each of us slept and worked and lived our lives and knew nothing about each other. 
Is that bad?  Or just inevitable?
Was that my fault, or his, or just [[life in general-&gt;TUE-0700X-(PATRICK)-Ib-1-x]]?//

</tw-passagedata><tw-passagedata pid="145" name="TUE-0700X-(PATRICK)-Ib-1-x" tags="light" position="1547,4189" size="100,100">Patrick crosses over the old limestone Swinford bridge, and looks out at the slate-grey Thames, even in winter, both sides of the river nibbled into by the encroaching trees and thirsty shrubs, bare but defiant.

He passes the [[old sign-&gt;TUE-0700X-(PATRICK)-Ib-1-xi]] at the embossed into the centre of the bridge, with its painted letters of nearly 300 years ago.

Patrick looks ahead, at the [[little toll booth-&gt;TUE-0700X-(PATRICK)-Ib-1-xii]]. 

</tw-passagedata><tw-passagedata pid="146" name="TUE-0700X-(PATRICK)-Ib-1-xi" tags="light" position="1687,4315" size="100,100">SWINDFORD BRIDGE TOLL GATE.
By an act of the 7th of King George the 3rd, the following tolls are to be paid at the gate for every time of passing.
For every carriage with 4 wheels, 4 pence.
With less than 4 wheels, 2 pence.
For every horse, gelding, mare, mule or ass, laden or not laden, drawing or not drawing, 1 pence.
For every ox, bull, cow, steer, or heffer, half pence.
[[For every calf, swine, sheep or lamb, one quarter pence.-&gt;TUE-0700X-(PATRICK)-Ib-1-xii]].</tw-passagedata><tw-passagedata pid="147" name="TUE-0700X-(PATRICK)-Ib-1-xii" tags="light" position="1705,4160" size="100,100">Patrick waves at the man inside the toll booth in his hi-visibility jacket.
Hello, Harry, he says. Harry gives him a tired wave back, and a little grin.  If youre his friend, youre always good.  But woe betide anyone who becomes that mans enemy.
//Every single day I walk along here, and every single day he looks hungover, //Patrick thinks. //How does he manage it?//
//What a [[lovely place-&gt;TUE-0700X-(PATRICK)-Ib-1-xiii]] I live in//, Patrick thinks.// How lucky I am.//

</tw-passagedata><tw-passagedata pid="148" name="TUE-0700X-(PATRICK)-Ib-1-xiii" tags="light" position="1881,4192" size="100,100">He walks along the road, across the little bridge that fords the Wharf Stream, passes the Talbot Inn and then walks as fast as he can down the long, tree-lined road past the sporting fields and Pavilion, before he reaches the [[village of Eynsham-&gt;TUE-0700X-(PATRICK)-Ib-1-xiv]] itself, with its ancient cotswold stone walls and hamlets, hemmed in with giant chestnut trees.

</tw-passagedata><tw-passagedata pid="149" name="TUE-0700X-(PATRICK)-Ib-1-xiv" tags="light" position="2012,4193" size="100,100">//Bloody hell, Ive come a long way fast//, he thinks to himself. //Must be the adrenaline.//
Patrick turns down Queen street and in two minutes is walking up to the gates to the cottage at [[3 Tanners Lane-&gt;TUE-0700X-(PATRICK)-Ib-2-i]].

</tw-passagedata><tw-passagedata pid="150" name="TUE-0700X-(PATRICK)-Ib-2-i" tags="light" position="2314,4192" size="100,100">Patrick believes his house to be the most modest on the whole street, and is proud of it. 
It annoys him when somebody visiting one of the fatcats in the showy, near-mansions opposite parks their bmws or teslas in front of his gate, just like they have this morning.
//Youve got an eight car bloody garage, [[use it-&gt;TUE-0700X-(PATRICK)-Ib-2-ii]].//

</tw-passagedata><tw-passagedata pid="151" name="TUE-0700X-(PATRICK)-Ib-2-ii" tags="light" position="2449,4195" size="100,100">//Christ, they get a little bit of money and they all want to act like oligarchs, //he thinks, walking up to the front door and then suddenly remembering about his fouled shoes.

He pulls them off outside and [[opens the door-&gt;TUE-0700X-(PATRICK)-Ib-2-iii]].
</tw-passagedata><tw-passagedata pid="152" name="TUE-0700X-(PATRICK)-Ib-2-iii" tags="light" position="2592,4200" size="100,100">Daddy! Patricks little girl Evie exclaims from the kitchen. Ever since his operation, she has felt it her duty to give him encouragement both when he leaves for a walk and when he returns.

Hello, my treasure, Patrick shouts from the hallway. Then, in a more strained tone, Bets?

Hmmm? Bets responds from the kitchen. Her, Im doing some kind of chore, please dont bother me, voice.

Bets, can I have a word?

Im in the kitchen, Bets says.
//Oh, bloody hell, alright...// he thinks, and goes into the [[kitchen-&gt;TUE-0700X-(PATRICK)-Ib-2-iv]].

</tw-passagedata><tw-passagedata pid="153" name="TUE-0700X-(PATRICK)-Ib-2-iv" tags="light" position="2726,4202" size="100,100">Bets is washing up. Evie is playing on her ipad.
Evie, can you do something for me? he asks the little girl.
What?
Can you do me a drawing? Id like one ever so much!
On my ipad?
No, we cant put that on the fridge, can we? Go and get your paper and pencils.
Evie looks at him for a moment, calculating the risks and rewards.  She narrows her eyes.  Can we have ice cream later? she asks.
Oh Evie, no, Bets says, turning around exasperatedly, you cant have ice cream every time you do something. Especially not when you come into our room a thousand times in the night saying you cant sleep... Evie shoots an appealing look to her Dad who smiles with his eyes and then blinks at hera [[signal between them-&gt;TUE-0700X-(PATRICK)-Ib-2-v]].
</tw-passagedata><tw-passagedata pid="154" name="TUE-0700X-(PATRICK)-Ib-2-v" tags="light" position="2867,4210" size="100,100">&quot;Okay, she says, puts the ipad down and runs out of the room and up the stairs.
Bets is loudly doing the washing up, silent. Patrick thinks, //here we are. Another sulk over nothing//. 
Bets is thinking, //all you do is ignore her and then spoil her. And she bloody loves it, too. Its so unfair.//
Bets, Patrick says in a low voice, different, serious. Bets, look at me for a second, will you?
Bets stops and turns with an eyebrow pre-cocked.
Im tired today, Patrick. You just sleep through the eight million times she comes and says she cant sleep, but I dont...
Bets, I saw something terrible in the woods. There were a bunch of police. Tim from over the road. He [[hung himself-&gt;TUE-0700X-(PATRICK)-Ib-2-vi]] from a tree.
</tw-passagedata><tw-passagedata pid="155" name="TUE-0700X-(PATRICK)-Ib-2-vi" tags="light" position="3005,4215" size="100,100">What? Bets says, turning from the sink suddenly.
Theyd just cut him down.
No. Jesus Christ. Poor Jo!
Thats what I was thinking.
He killed himself?
He must have. I dont think theyve been to see her next. What do we do?
What do you mean?
Shouldnt Iwego over?
No, of course not!
But we know this terrible thing has happened and she doesnt, who knows when the police will arrive. If it was the other way around, wouldnt you want to know as soon as possible? Wouldnt you resent it if you found out that your neighbours knew and [[didnt tell you-&gt;TUE-0700X-(PATRICK)-Ib-2-vii]]?
</tw-passagedata><tw-passagedata pid="156" name="TUE-0700X-(PATRICK)-Ib-2-vii" tags="light" position="3151,4216" size="100,100">Its a police matter, Paddy. Here, sit down. What happened?
I just came across them in the woods. The Detective told me not to come near. But I saw him. I think an animal had got to his face.  His eyes were all. Bets, it was like out of a horror movie.
Oh, Paddy, she says, and she thinks about Tim from across the road. She always quite liked him. He was quite handsome for his age, and he helped children for a living. He always seemed a bit sad, a bit distant...
What do we do, Bets? I really think we should [[tell her-&gt;TUE-0700X-(PATRICK)-Ib-2-viii]].

</tw-passagedata><tw-passagedata pid="157" name="TUE-0700X-(PATRICK)-Ib-2-viii" tags="light" position="3310,4223" size="100,100">I dont think you should ever tell her that you were in the woods or that you saw him. Shell think were spreading all the gruesome details through the whole of Eynsham.
Patrick nods, saying nothing, actively pushing the resentment inside himself about how much he was going to enjoy telling everyone about his [[experience-&gt;TUE-0700X-(PATRICK)-Ib-2-ix]] with the police and the body in the woods.

</tw-passagedata><tw-passagedata pid="158" name="TUE-0700X-(PATRICK)-Ib-2-ix" tags="light" position="3458,4226" size="100,100">Patrick walks over to the window and looks across the lane to Keepers Cottage, over the fence and technically on the Queens Road. 
Tims car isnt there. 
The curtains are drawn, but he cant see any movement inside. 
[[No life at all.-&gt;TUE-0700X-(PATRICK)-Ib-2-x]]</tw-passagedata><tw-passagedata pid="159" name="TUE-0700X-(PATRICK)-Ib-2-x" tags="light" position="3598,4261" size="100,100">Daddy! Look what I drew! Evie says, running down the stairs and holding a piece of paper. Just six years old, she already knows this is theatre, and his playing her part. This drawing is the currency she will exchange later, for what she wants.
Its beautiful, Patrick says before hes even seen it. He takes the picture and looks at it. Look at that, he says.
This is my window, and this is the street, and thats the [[house on the other side-&gt;TUE-0700X-(PATRICK)-Ib-2-xi]], she says.
</tw-passagedata><tw-passagedata pid="160" name="TUE-0700X-(PATRICK)-Ib-2-xi" tags="light" position="3742,4256" size="100,100">Why did you draw the house on the other side? Did you hear what we were talking about?
No, Evie says, giggling. I just felt like it. Look! she says suddenly, pointing.
A small blue car pulls up outside Keepers Cottage.
Patrick instinctively takes a [[step back from the window-&gt;TUE-0700X-(PATRICK)-Ib-2-xii]], pulling Evie back with him.

</tw-passagedata><tw-passagedata pid="161" name="TUE-0700X-(PATRICK)-Ib-2-xii" tags="light" position="3885,4261" size="100,100">A man and a woman get out of the car slowly, grimly, and then gingerly approach the cottage. They stop, close together, and confer quietly. Almost on instinct, like he might be able to hear them if he was a little closer, Patrick takes a step forward, towards the window. The man looks back, gives a little headshake of recognition and looks straight at him.

Its the two detectives from the woods.  Theyve seen him.  Patrick flinches and [[shuffles back further-&gt;TUE-0700X-(PATRICK)-Ib-2-xiii]].
</tw-passagedata><tw-passagedata pid="162" name="TUE-0700X-(PATRICK)-Ib-2-xiii" tags="light" position="4018,4261" size="100,100">//Christ, hiding makes me look more stupid and guilty//, he thinks a moment later, //why did I do that?//

The male detective smiles like he just caught Patrick in the middle of a crime, and gives a big wave.
Hello Mister West, he yells loudly. 3 Tanners lane.
Patrick awkwardly [[raises his hand -&gt;TUE-0700X-(PATRICK)-Ib-2-xiv]] in response.

</tw-passagedata><tw-passagedata pid="163" name="TUE-0700X-(PATRICK)-Ib-2-xiv" tags="light" position="4154,4264" size="100,100">//That guys a little bastard, isnt he?// He thinks.
Daddy, how do they know your name? Evie asks.
Bets shushes her, coming over to the window.
See? Theyre here.
I [[didnt tell them-&gt;TUE-0700X-(PATRICK)-Ib-2-xv]] I knew him, that I was a neighbour Patrick says to Bets.
Oh, Patrick. That was stupid, she replies.

</tw-passagedata><tw-passagedata pid="164" name="TUE-0700X-(PATRICK)-Ib-2-xv" tags="light" position="4299,4271" size="100,100">Evie asks again how the police know his name.
She takes his hand, and looks at him with scared eyes.
Theyre my friends, Patrick says. Nothing to worry about, okay? I made friends with them this morning.
And Bets puts her hand on his shoulder and squeezes it, and any resentment he had, evaporates.
The detectives reach the door of Keepers Cottage opposite, to tell a woman she is a [[widow-&gt;TUE-0700X-(PATRICK)-Ib-2-xvi]].

</tw-passagedata><tw-passagedata pid="165" name="TUE-0700X-(PATRICK)-Ib-2-xvi" tags="light" position="4442,4274" size="100,100">//And here I am,// Patrick thinks, //in my house with my wife and my little girl.
God, Im glad to be alive,// he thinks.
And then Patrick shudders involuntarily, as he has a horrible thought.
//Oh God,// he thinks. //This doesnt have anything to do with [[the man I saw last night-&gt;TUE-0730!-(KEEPERS)-I-TITLE]], does it//?

</tw-passagedata><tw-passagedata pid="166" name="TUE-0730!-(KEEPERS)-I-1-i" tags="light" position="398,4512" size="100,100">Thom looks at the cast iron knocker, instinctively shuns it as being a bit effete for him, and raps on the door with his knuckles. 
A gruff, muffled bark replies instantly, then the pattering of dogs feet and then a [[series of barks-&gt;TUE-0730!-(KEEPERS)-I-1-ii]], each louder and more insistent, behind the thick oak door.

</tw-passagedata><tw-passagedata pid="167" name="TUE-0730!-(KEEPERS)-I-1-ii" tags="light" position="536,4513" size="100,100">Alright, alright, a womans voice says wearily, and the dogs bark turns into a whine of excitement to see whos behind the door. 
Slippered feet slowly shuffle to the door, then a bolt unlocks and it opens a little way. 
An old black Labrador with grey whiskers crowbars his head out through the gap, grins up at them and [[barks again-&gt;TUE-0730!-(KEEPERS)-I-1-iii]].

</tw-passagedata><tw-passagedata pid="168" name="TUE-0730!-(KEEPERS)-I-1-iii" tags="light" position="675,4516" size="100,100">Do get out of the way, Fred, the woman says, and opens the door a little wider.
Shes in her late forties or early fifties, with a pretty face worn to something harder and sharper through years of tiredness, and maybe of disappointment.  
She is uncomfortable having strangers see her like this: her dark hair still damp from the shower, a fleece dressing gown with a torn pocket thrown over sweatpants and a t-shirt.
Thom kneels down and rubs the dogs chin.
[[Mrs Rutherford-&gt;TUE-0730!-(KEEPERS)-I-1-iv]]? Rachel asks.
</tw-passagedata><tw-passagedata pid="169" name="TUE-0730!-(KEEPERS)-I-1-iv" tags="light" position="820,4524" size="100,100">Ms Isley-Rutherford, the woman replies.
Im Detective Sergeant Rachel Shaw, and this is Detective Constable Thom Clare, she says.
Hello, Thom says to her, still kneeling, then he strokes the dogs head gently and says, Hello Fred.
Is this... ah... she gives out a nervous laugh and the brittleness in her voice cracks as she asks, this isnt about Tim, is it? He [[didnt come back-&gt;TUE-0730!-(KEEPERS)-I-1-v]] last night.

</tw-passagedata><tw-passagedata pid="170" name="TUE-0730!-(KEEPERS)-I-1-v" tags="light" position="964,4524" size="100,100">May we come inside, Ms Isley-Rutherford? Rachel asks.
The woman looks at them, her expression unchanging. Then, suddenly, her eyebrows raise and her eyes widen, like she can see something terrible approaching. She takes a very deep breath, then raises her hand against the wall to [[support herself-&gt;TUE-0730!-(KEEPERS)-I-1-vi]].

</tw-passagedata><tw-passagedata pid="171" name="TUE-0730!-(KEEPERS)-I-1-vi" tags="light" position="1117,4528" size="100,100">She looks down at the floor, breathing deeply, her eyes glazed over.  Then she seems to remember shes in front of people. She straightens herself, turns back to them and tries to offer a weak smile.

Where are my manners?  Please [[come in-&gt;TUE-0730!-(KEEPERS)-I-2-i]]. Call me Joanne, she says.
</tw-passagedata><tw-passagedata pid="172" name="TUE-0730!-(KEEPERS)-I-2-i" tags="light" position="1375,4530" size="100,100">They arrange themselves in the front room. Beneath the low beamed-ceiling, in front of the large unvarnished Victorian kitchen table that dominates the room, its surface scratched and marked with a hundred and fifty years of use.

The four chairs around it are all Victorian too, all different woods and styles.
Beautiful table, Thom says.
Tim restored it, Joanne says. wooden things are his passion, really. Apparently the top is quarter sawn oak. I couldnt tell you what that means.
Shall we [[sit down-&gt;TUE-0730!-(KEEPERS)-I-2-ii]]? Rachel asks.

</tw-passagedata><tw-passagedata pid="173" name="TUE-0730!-(KEEPERS)-I-2-ii" tags="light" position="1513,4526" size="100,100">Joanne sits and breathes in very deeply.
Unless youre both very cruel, she says, youre here to tell me something pretty awful, arent you?
Im afraid so. Joanne, Im very sorry to tell you...
Joanne pushes back her chair and puts her hands to her mouth, staring at Rachel, her eyes glassy. Rachel stops.
Go on, Joanne says in a husky voice.
...that your husband, Mister Timon Rutherford, is [[dead-&gt;TUE-0730!-(KEEPERS)-I-2-iii]].</tw-passagedata><tw-passagedata pid="174" name="TUE-0730!-(KEEPERS)-I-2-iii" tags="light" position="1650,4531" size="100,100">Joanne nods, mute.
Im the Detective Sergeant in charge of the investigation into his death. I would like to tell you what we know at present: some of this isnt very nice stuff. Shall I go on?
Joanne [[nods again-&gt;TUE-0730!-(KEEPERS)-I-2-iv]].
</tw-passagedata><tw-passagedata pid="175" name="TUE-0730!-(KEEPERS)-I-2-iv" tags="light" position="1789,4536" size="100,100">&quot;Please stop me at any time, Rachel says. Interrupt me at any time. If Im going too fast. If you dont understand something. If you dont want to hear any more, just tell me. Most people choose to write things down. Do you need some paper or a pen?
Joanne stands up.
Ill go and get some, she says.
Rachel stands too,
We can do that... she says reassuringly.
No, no, Joanne says, walking out of the room . Just give me a second...
[[Joanne walks out-&gt;TUE-0730!-(KEEPERS)-I-2-v]] and the two detectives sit silently in the front room, observing the space.

</tw-passagedata><tw-passagedata pid="176" name="TUE-0730!-(KEEPERS)-I-2-v" tags="light" position="1930,4537" size="100,100">Joanne goes into the kitchen, looks around anxiously, and opens a drawer. 

In the drawer, a collection of different pens, wicker placemats and coasters, a notepad with the Chandos portrait of Shakespeare on the front, and a sealed envelope, turned over. She stares at the sealed envelope for a second, checks that the coast is clear, then hides it beneath the placemats, snatches up the pen and notepad, slams the drawer shut, and [[returns to the front room-&gt;TUE-0730!-(KEEPERS)-I-2-vi]].

</tw-passagedata><tw-passagedata pid="177" name="TUE-0730!-(KEEPERS)-I-2-vi" tags="light" position="2058,4542" size="100,100">The sun comes out for a moment in front of the clouds, and illuminates Joannes face.
Shes very dignified, very pretty, very sad, Thom thinks.
She sits down, opens the pad, pulls the lid off the pen.
[[Tell me about my husband-&gt;TUE-0730!-(KEEPERS)-I-2-vii]], she says.
</tw-passagedata><tw-passagedata pid="178" name="TUE-0730!-(KEEPERS)-I-2-vii" tags="light" position="2214,4549" size="100,100">Mister Rutherford was found this morning by a dogwalker in Wytham Wood, Rachel says.
Joanne writes this down, then stares at the words on the page.
Dogs arent allowed in Wytham Wood, Joanne says, almost by rote.
Apparently this one got away from his owner, ran off through the woods and happened upon your husbands body. He was found hanging from a tree by a piece of rope, away from any of the paths. A closer inspection revealed that his neck was broken and has body had been [[transported there from somewhere else-&gt;TUE-0730!-(KEEPERS)-I-2-viii]].
</tw-passagedata><tw-passagedata pid="179" name="TUE-0730!-(KEEPERS)-I-2-viii" tags="light" position="2347,4557" size="100,100">What do you mean?
Its too early to jump to conclusions, but the idea that your husband committed suicide is looking quite unlikely.
Someone killed him?
Someone moved his body. And his neck was broken, we think from a hit on the back of the head. Yes, its likely that someone killed him, though as you can hear, we have a lot of questions that need to be answered before we understand what happened.
Oh my God, Joanne says. Oh my God. Poor Tim. I cant believe this is happening.
She looks away, out of the window. Her expression is incredulous. The sun disappears behind the clouds again.
[[What else-&gt;TUE-0730!-(KEEPERS)-I-2-ix]]? she asks.
</tw-passagedata><tw-passagedata pid="180" name="TUE-0730!-(KEEPERS)-I-2-ix" tags="light" position="2504,4556" size="100,100">We found his car parked in a passing spot on the road up to the retirement home in Hill End. Thats really all we have, for now.
Joanne sits silently, looking out of the window. Then she stands, suddenly.
Im going to get a glass of water, she says, and [[walks out of the room-&gt;TUE-0730!-(KEEPERS)-I-2-x]], leaving the two detectives waiting, in silence, again.

</tw-passagedata><tw-passagedata pid="181" name="TUE-0730!-(KEEPERS)-I-2-x" tags="light" position="2648,4567" size="100,100">Joanne feels like shes never been so thirsty in her life. She opens one of the old, wall-mounted cabinets and grabs a Russian table glass, quickly filling it from the sink. She takes a few sips, and wipes her mouth with a shaking hand. Her throat feels hot and dry, the only thing that seems to [[feel anything-&gt;TUE-0730!-(KEEPERS)-I-2-xi]] at all.

</tw-passagedata><tw-passagedata pid="182" name="TUE-0730!-(KEEPERS)-I-2-xi" tags="light" position="2784,4568" size="100,100">Her thoughts are indistinct: just a hollow feeling, filled with pain and regret. 
//How can this be happening? //she wonders. 
She takes another sip of water and [[returns to the front room-&gt;TUE-0730!-(KEEPERS)-I-2-xii]].
</tw-passagedata><tw-passagedata pid="183" name="TUE-0730!-(KEEPERS)-I-2-xii" tags="light" position="2929,4568" size="100,100">Im sorry, Joanne says to the two detectives. Would either of you like a glass of water?
Were fine, Rachel says, annoying Thom who was quite thirsty. Are you ready to talk for a little longer?
Joanne nods and walks back around the table to her [[chair-&gt;TUE-0730!-(KEEPERS)-I-3-i]].</tw-passagedata><tw-passagedata pid="184" name="TUE-0730!-(KEEPERS)-I-3-i" tags="light" position="3157,4578" size="100,100">Joanne talks about Timon
I think I may need a little time, Joanne says, her voice shaking a little.
Of course, Rachel says. Were going to leave in about five minutes. A family liaison officer will be here soon.
Joanne nods, absent-mindedly.
Id like to come back and see you again tomorrow, Rachel says. Does late morning, maybe eleven oclock, suits you?
Joanne writes [[Tuesday, 11:00-&gt;TUE-0730!-(KEEPERS)-I-3-ii]] down in her notebook.
</tw-passagedata><tw-passagedata pid="185" name="TUE-0730!-(KEEPERS)-I-3-ii" tags="light" position="3313,4582" size="100,100">You will have a lot of information about your husband that will help us discover what happened, Joanne. Well go into that tomorrow, if youre ready for it. But right now, before we go, Id just like to see if you can help us work out where Tim was last night. Is that okay?
I dont know where he was last night, Joanne says blankly.
Okay then, when was the last time you heard from him?
Without answering, Joanne stands again, walks over to the credenza by the window where her phone is plugged into the wall. She unlocks it, taps the screen, brings it over and sets [[the phone-&gt;TUE-0730!-(KEEPERS)-I-3-iii]] down in front of the detectives.
</tw-passagedata><tw-passagedata pid="186" name="TUE-0730!-(KEEPERS)-I-3-iii" tags="light" position="3467,4577" size="100,100">Rachel and Thom look at the phone. Its on messages, under the name TIM.
The last messages was at nine forty-three last night.
Tim says: Will be late tonight. You at home?
Joanne replies, two minutes later, Yes. And then another message a minute later, Why?
The message was read, it says, at nine forty six. 
There are [[no further replies-&gt;TUE-0730!-(KEEPERS)-I-3-iv]].

</tw-passagedata><tw-passagedata pid="187" name="TUE-0730!-(KEEPERS)-I-3-iv" tags="light" position="3591,4585" size="100,100">Will be late tonight, Rachel reads out. Is that normal?
Yes, he worked late all the time, Joanne says.
And where does he work?
His Clinic, on the Abington Road in Town. Its called Get Well. The Get Well Clinic.  He was hoping to expand it. He and some others bought an old farm, wanted to turn it into a retreat for, you know, his specialty.
What was his specialty? Rachel asks.
[[Young disturbed violent men-&gt;TUE-0730!-(KEEPERS)-I-3-v]], she replies.

</tw-passagedata><tw-passagedata pid="188" name="TUE-0730!-(KEEPERS)-I-3-v" tags="light" position="3730,4589" size="100,100">Had Tim ever not come home before? Rachel asks.
Joanne shakes her head.
No, never, she said.
And, what did you do after you got his message?
I drank, and then I drank some more, and then I went to bed too late, Joanne says. She sways suddenly and [[lowers her head into her hands-&gt;TUE-0730!-(KEEPERS)-I-3-vi]]. I feel very, very tired, she says.

</tw-passagedata><tw-passagedata pid="189" name="TUE-0730!-(KEEPERS)-I-3-vi" tags="light" position="3884,4588" size="100,100">Of course, Rachel says, sensing that this is all shell get from Joanne this morning. Weve met under tragic circumstances, for which Im very sorry for. We will do everything in our power to bring whoever did this to justice.
Good. Yes. Thank you, Joanne says.
Theres a knock at the door, and Fred starts to [[bark again-&gt;TUE-0730!-(KEEPERS)-I-3-vii]].
Please Fred, Joanne says, exhaustedly.
</tw-passagedata><tw-passagedata pid="190" name="TUE-0730!-(KEEPERS)-I-3-vii" tags="light" position="4024,4587" size="100,100">Thatll be the family liaison officer, Thom says, standing up. Can I let them in for you?
Joanne nods, I suppose.
Come on, Fred, lets [[say hello-&gt;TUE-0730!-(KEEPERS)-I-4-CHOICE]].</tw-passagedata><tw-passagedata pid="191" name="TUE-0730!-(KEEPERS)-I-4-CHOICE" tags="light" position="4168,4597" size="100,100">
(transition: &quot;dissolve&quot;)+(transition-time: 2s)[ [[
JOANNE-&gt;TUE-0730!-(KEEPERS)-I-4a-1-i]]looks out the window.]
(transition: &quot;dissolve&quot;)+(transition-time: 2s)[ [[
THOM-&gt;TUE-0730!-(KEEPERS)-I-4b-1-i]]walks into the hall.]

</tw-passagedata><tw-passagedata pid="192" name="TUE-0730!-(KEEPERS)-I-4a-1-i" tags="light" position="4313,4539" size="100,100">Joanne looks out of the window.
I dont think Ive reacted the way I should have to this news, she says, quietly, to Rachel.
Joanne, I unfortunately have some experience in being with the families of people whove lost their lives. Theres no right way to react to bereavement. In my opnion, youre being [[very strong-&gt;TUE-0730!-(KEEPERS)-I-4a-1-ii]].
</tw-passagedata><tw-passagedata pid="193" name="TUE-0730!-(KEEPERS)-I-4b-1-i" tags="light" position="4312,4671" size="100,100">Fred trots through to the front door and barks again as Thom opens the door and nods at a uniformed officer, standing by the door with her cap under her arm.
Hi, Jess, Thom says in a low voice.
Hello, Thom, Jess replies, quietly. We all okay?
Thom nods. Yup. Me and the Skipper. Been speaking to wife, Joanne, he strokes the dog, and thisthis is [[Fred-&gt;TUE-0730!-(KEEPERS)-I-4b-1-ii]].
</tw-passagedata><tw-passagedata pid="194" name="TUE-0730!-(KEEPERS)-I-4a-1-ii" tags="light" position="4449,4536" size="100,100">Thank you, Joanne says hoarsely. I just cant stop thinking... Tim and I, werent really getting on. We argued before the weekend. And barely seen each other since. Those text messages, well, that was the only time wed communicated for several days. Its so petty and horrible. I dont think Im ever going to be able to forgive myself.
Can I ask [[what the argument was about-&gt;TUE-0730!-(KEEPERS)-I-4a-1-iii]]?
</tw-passagedata><tw-passagedata pid="195" name="TUE-0730!-(KEEPERS)-I-4a-1-iii" tags="light" position="4586,4540" size="100,100">Joanne doesnt reply for a little while. 
Then she says, hollowed-out,
He said that the way I acted, he didnt know [[if I loved him any more-&gt;TUE-0730!-(KEEPERS)-I-4a-1-iv]].
</tw-passagedata><tw-passagedata pid="196" name="TUE-0730!-(KEEPERS)-I-4a-1-iv" tags="light" position="4716,4539" size="100,100">Silence. 
//Bloody hell//, Rachel thinks. //How do I get out of this one?//
Nearly all families of victims blame themselves in some way or another, Rachel says, Its like a reflex to a tragedy. But Ive never yet found that blame to be well placed. Besides, we really dont know what happened yet to Tim, Joanne says. 
That sounds like a very personal argument, its unlikely that it had anything to do with what killed him. In fact, these messages might turn out to be the last time he communicated with anyone, which means no matter what argument you might have been having, he was [[thinking about you-&gt;TUE-0730!-(KEEPERS)-I-4a-1-v]] until the very end.


</tw-passagedata><tw-passagedata pid="197" name="TUE-0730!-(KEEPERS)-I-4a-1-v" tags="light" position="4867,4533" size="100,100">Joanne looks at Rachel with an almost puzzled expression. Then, in a spasm, her whole body shudders, she puts her head in her hands and starts to moan, quietly. Tears drip in sad little paths down the angles of her bare forearms.
//Oh, no. Oh, no, no,// she thinks. //Hes dead. Hes really dead. And its [[all my fault-&gt;TUE-0730!-(KEEPERS)-I-5-1-i]] .//
</tw-passagedata><tw-passagedata pid="198" name="TUE-0730!-(KEEPERS)-I-4b-1-ii" tags="light" position="4449,4671" size="100,100">Hello Fred, whos a good boy? Jess says.
Fred wags his tail.
Might need a rest soon, in there, Thom says.
Any areas Skip hasnt mentioned?
I dont know. Yeah. Media.
...think itll be a problem?
Dont know. This case might be completely ignored. Or journalists might hassle her every day and night for a month. Mild mannered psychiatrist lynched in Oxford woods could probably sell papers, right? Or they might not care at all. No clear idea, yet, [[either way-&gt;TUE-0730!-(KEEPERS)-I-4b-1-iii]].
</tw-passagedata><tw-passagedata pid="199" name="TUE-0730!-(KEEPERS)-I-4b-1-iii" tags="light" position="4589,4681" size="100,100">Rightwell, lets say hello, Jess says, notices a front door matt pushed off to the side and rubs her shoes on it, more out of politeness than anything else, before coming inside the house. 
Lovely place, isnt it?
Thom looks down at the doormat. 
Who pushes their doormat away from the front door? He wonders. Its incongruously dirty, compared to the rest of the house. He shuts the door and turns aroundpointing the way ahead for Jess. 
She repeats Lovely place, [[isnt it, Thom-&gt;TUE-0730!-(KEEPERS)-I-4b-1-iv]]?

</tw-passagedata><tw-passagedata pid="200" name="TUE-0730!-(KEEPERS)-I-4b-1-iv" tags="light" position="4720,4682" size="100,100">Oh, a dream house, Thom says without really meaning it, and they walk together back towards the front room, where he introduces the Family Liaison Officer to Joanne.

Meanwhile, Fred looks around the hall, into space, whines, and barks into the emptiness, into the thin air, as if he is [[waiting-&gt;TUE-0730!-(KEEPERS)-I-5-1-i]] for one more person to follow him into the lounge.

</tw-passagedata><tw-passagedata pid="201" name="TUE-0730!-(KEEPERS)-I-5-1-i" tags="light" position="5030,4608" size="100,100">This is the Family Liaison Officer, Thom says, walking into the room with respectful cheerfulness that evaporates when sees Joanne with her [[head in her hands, sobbing-&gt;TUE-0730!-(KEEPERS)-I-5-1-ii]].

</tw-passagedata><tw-passagedata pid="202" name="TUE-0730!-(KEEPERS)-I-5-1-ii" tags="light" position="5151,4608" size="100,100">Theres an awkward silence as Joanne cries. Then she wipes her eyes with her hands and looks up, bleary-eyed.
Can I have a tissue, please? she asks.
Im sorry to come at such a difficult time, Jess, the FLO, says, taking a packet of tissues from her handbag and stepping forwards with them.
They already said that, Joanne says, taking a tissue from the pack and blowing her nose with it.  Sorry, she says, blows her nose again, then [[wipes her eyes-&gt;TUE-0730!-(KEEPERS)-I-5-1-iii]].
</tw-passagedata><tw-passagedata pid="203" name="TUE-0730!-(KEEPERS)-I-5-1-iii" tags="light" position="5283,4608" size="100,100">I know our words might not provide much support right now, but we do mean them Jess says. May I call you Joanne? Joanne nods. Joanne, is there anyone I should call for you, right now? Either to tell them whats happened, or to ask someone to come here and give you a little support?
Joanne thinks for a moment.
Youre going to his [[work-&gt;TUE-0730!-(KEEPERS)-I-5-1-iv]]? Joanne asks the detectives huskily.
</tw-passagedata><tw-passagedata pid="204" name="TUE-0730!-(KEEPERS)-I-5-1-iv" tags="light" position="5417,4615" size="100,100">Rachel nods. We are, she says.
Then no, Joanne replies. Theres no-one else to tell. No support.
Theres a moments silence after this sad appraisal of a mans life.
//Either he was a very [[lonely man-&gt;TUE-0730!-(KEEPERS)-I-5-1-v]], or his wife doesnt know who his friends were,// Thom thinks, perhapy uncharitably. 
</tw-passagedata><tw-passagedata pid="205" name="TUE-0730!-(KEEPERS)-I-5-1-v" tags="light" position="5572,4615" size="100,100">Joanne, were going to go now, but well see you again tomorrow, Rachel says.
Eleven oclock. Yes. Thank you, Joanne says.
Rachel and Thom walk out of the room and towards the front door as Jess gives Joanne her card, and then a leaflet, and then an A4 photocopy of some helpful phone numbers. She starts to tell Joanne about what things are likely to happen next.
Joanne looks out of the window. She feels consumed with self-disgust.
[[//I should kill myself//-&gt;TUE-0730!-(KEEPERS)-I-6-1-i]], she thinks.

</tw-passagedata><tw-passagedata pid="206" name="TUE-0730!-(KEEPERS)-I-6-1-i" tags="light" position="5794,4623" size="100,100">Thom and Rachel walk to the front door. Fred follows them, having taken a shine to Thom, who keeps kneeling down and stroking his old head.
I think we take a little break before moving on, dont you? Rachel says. Thom nods, then says in a low voice,
Would you describe the house as pristine?
Rachel nods.
Check the [[outside doormat-&gt;TUE-0730!-(KEEPERS)-I-6-1-ii]].
</tw-passagedata><tw-passagedata pid="207" name="TUE-0730!-(KEEPERS)-I-6-1-ii" tags="light" position="5917,4628" size="100,100">There isnt a doormat, Rachel says.
Its not in front of the door, its been tucked round to the side, Thoms says quietly.
Rachel opens the front door, looks around it, and sees the doormat.
Fred steps forwards, hopefully, waggling his tail, looking outside like hes expecting to see someone.
No, Fred, Thom says, holding him by his back legs. Not this morning, Im afraid...
Rachel looks down at the outside doormat. 

(Doormat)
Its crusted with dirt and mud, clumped up, not all of it dry. No distinct boot or paw marks to give an [[identity-&gt;TUE-0730!-(KEEPERS)-I-6-1-iii]] to the mess.

</tw-passagedata><tw-passagedata pid="208" name="TUE-0730!-(KEEPERS)-I-6-1-iii" tags="light" position="6052,4627" size="100,100">She closes the door again, quietly.

Dogs are pretty filthy, she says in a low voice. Thom shrugs in response, then Rachel adds, We should take a quick look in her car, see how muddy the drivers footwell is.

I agree Thom says, before adding, What made her [[start crying-&gt;TUE-0730!-(KEEPERS)-I-6-1-iv]] in there?

</tw-passagedata><tw-passagedata pid="209" name="TUE-0730!-(KEEPERS)-I-6-1-iv" tags="light" position="6186,4628" size="100,100">She said theyd had an argument last week. Hadnt talked for a couple of days. She stayed up late last night drinking. Feels its all her fault.

What was the argument about? Thom asks.
Husband accused her of [[not loving him any more-&gt;TUE-0730!-(KEEPERS)-I-6-1-v]].
Oh, bloody hell, Thom says.

</tw-passagedata><tw-passagedata pid="210" name="TUE-0730!-(KEEPERS)-I-6-1-v" tags="light" position="6340,4632" size="100,100">Fred barks, suddenly, making Thom jump.
Christ mate, you nearly gave me a heart attack! Thom says, putting his hand to his chest.
Fred barks again, and again.
The dog is frustrated and growing puckish.
Shhhhh... Shush now, Thom says gently. But he barks again.
Fred! Joanne yells from the other room. Fred whines.
The dog is thinking, //where is he? This isnt fair. Why cant I see him?//
Then suddenly and very clearly, he looks up into the air and thinks.
//I can hear you, he thinks.  If youre here, youll follow me.//
Fred turns and runs up the stairs and [[out of sight-&gt;TUE-0730!-(KEEPERS)-I-6-1-vi]].

</tw-passagedata><tw-passagedata pid="211" name="TUE-0730!-(KEEPERS)-I-6-1-vi" tags="light" position="6483,4635" size="100,100">[[THOM-&gt;TUE-0730!-(KEEPERS)-I-7a-1-i]] starts after the runaway dog.
[[FRED-&gt;TUE-0730!-(KEEPERS)-I-7b-1-i]] runs upstairs into forbidden territory.</tw-passagedata><tw-passagedata pid="212" name="TUE-0730!-(KEEPERS)-I-7a-1-i" tags="light" position="6628,4559" size="100,100">Is he going upstairs? Joanna asks from the other room. Hes not allowed upstairs.
&quot;I&#39;ll go and get him? Thom asks, putting a foot on the stair.
No! Joanne shouts loudly through the door. 
The detectives hear a chair scrape as its pushed back angrily.
//[[Uh-ho-&gt;TUE-0730!-(KEEPERS)-I-7a-1-ii]]//, Rachel thinks

</tw-passagedata><tw-passagedata pid="213" name="TUE-0730!-(KEEPERS)-I-7b-1-i" tags="light" position="6633,4741" size="100,100">Fred can hear the muffled voices of Joanna in the hall, sounding more agitated and upset, and he knows what shell be saying with a pang of conscience. 
That hes a bad dog. 
That hes [[not allowed upstairs-&gt;TUE-0730!-(KEEPERS)-I-7b-1-ii]]. 
//She doesnt understand me,// he thinks. //Nobody understands what I try to do, Im always trying to be good and nobody understands, it hurts me so much.//

</tw-passagedata><tw-passagedata pid="214" name="TUE-0730!-(KEEPERS)-I-7a-1-ii" tags="light" position="6766,4562" size="100,100">Joanna walks quickly through into the hallway, with Jess, half-way through saying something soothing, trailing behind.
You know, I think I just need to be on my own for a while, she says. Is that okay? Please say thats okay.
Of course, Jess says, a little bit shocked that her steady and well-structured overview has been interrupted at the start, and how shell now have to do it all again at another time, and how she might get in trouble if she doesnt get through the basics today. 
Would you like me to [[come back in a few hours-&gt;TUE-0730!-(KEEPERS)-I-7a-1-iii]]? she asks.

</tw-passagedata><tw-passagedata pid="215" name="TUE-0730!-(KEEPERS)-I-7a-1-iii" tags="light" position="6920,4564" size="100,100">No.  Tomorrow, tomorrow, please.
Are you sure?
Joanne says nothing.
I think we should all [[come back tomorrow-&gt;TUE-0730!-(KEEPERS)-I-8-1-i]], Rachel says, gently. She smiles at Joanne and then at Jess, reassuringly.
Right you are, Sergeant, Jess says.

</tw-passagedata><tw-passagedata pid="216" name="TUE-0730!-(KEEPERS)-I-7b-1-ii" tags="light" position="6777,4756" size="100,100">He turns into a darkened bedroom.  
Fred looks up at the bed and feels something hes never felt before.  
Hes wound up by a presence he cant explain, cant see, and its making him fractuous.  
//Since Im already in trouble//... he thinks, and then, with a great rush of naughtiness, Fred jumps up onto the [[unmade King-size bed-&gt;TUE-0730!-(KEEPERS)-I-7b-1-iii]] . 
</tw-passagedata><tw-passagedata pid="217" name="TUE-0730!-(KEEPERS)-I-7b-1-iii" tags="light" position="6930,4752" size="100,100">The feather duvet feels like the greatest sensation to ever touch his fur. He stretches out in it and then rolls over, back and forth, until hes rolled himself up entirely inside the duvet, dark, and cosy.
Suddenly, a wave of great sadness rolls over him.

Under the blankets, he stares intently into the empty space ahead of him.

[[//Youre there, arent you? //-&gt;TUE-0730!-(KEEPERS)-I-7b-1-iv]] he thinks.
</tw-passagedata><tw-passagedata pid="218" name="TUE-0730!-(KEEPERS)-I-7b-1-iv" tags="light" position="7071,4761" size="100,100">[[//Hello, my boy//-&gt;TUE-0730!-(KEEPERS)-I-7b-2a-i]].
[[Silence-&gt;TUE-0730!-(KEEPERS)-I-7b-2b-i]].</tw-passagedata><tw-passagedata pid="219" name="TUE-0730!-(KEEPERS)-I-8-1-i" tags="light" position="8379,4599" size="100,100">Well see you tomorrow Joanne, Rachel says as Thom and Jess file past her outside the house. Again, dont hesitate to get in touch, please, whenever you need to.
I dont mean to be rude, Im sorry, my head is really hurting, I think I need to sleep... Joanne says.
Take your time, and do what you feel is best, Rachel says, stepping over the [[threshold-&gt;TUE-0730!-(KEEPERS)-I-8-1-ii]].

</tw-passagedata><tw-passagedata pid="220" name="TUE-0730!-(KEEPERS)-I-7b-2b-i" tags="light" position="7196,4856" size="100,100">Youre there. I can feel you. Why are you hiding? [[Say something-&gt;TUE-0730!-(KEEPERS)-I-7b-3-i]].

</tw-passagedata><tw-passagedata pid="221" name="TUE-0730!-(KEEPERS)-I-7b-2a-i" tags="light" position="7207,4706" size="100,100">Freds tail wags under the blankets.  He whines.  
I missed you last night. So much. [[Why didnt you come home-&gt;TUE-0730!-(KEEPERS)-I-7b-3-i]]?

</tw-passagedata><tw-passagedata pid="222" name="TUE-0730!-(KEEPERS)-I-7b-3-i" tags="light" position="7368,4772" size="100,100">Youre leaving, arent you?  Im never going to see you again he whines loudly, and [[curls up under the blankets-&gt;TUE-0730!-(KEEPERS)-I-7b-3-ii]].</tw-passagedata><tw-passagedata pid="223" name="TUE-0730!-(KEEPERS)-I-7b-3-ii" tags="light" position="7513,4775" size="100,100">[[//Don&#39;t worry.  You&#39;re a good boy.//-&gt;TUE-0730!-(KEEPERS)-I-7b-4a-i]].
[[Silence-&gt;TUE-0730!-(KEEPERS)-I-7b-4b-i]].</tw-passagedata><tw-passagedata pid="224" name="TUE-0730!-(KEEPERS)-I-7b-4b-i" tags="light" position="7682,4872" size="100,100">Maybe you cant talk, you can only let me [[know youre there-&gt;TUE-0730!-(KEEPERS)-I-7b-5-i]].
</tw-passagedata><tw-passagedata pid="225" name="TUE-0730!-(KEEPERS)-I-7b-4a-i" tags="light" position="7686,4740" size="100,100">I miss you.  I dont want to be here without you.  [[Why did you have to go?-&gt;TUE-0730!-(KEEPERS)-I-7b-5-i]]&quot;
</tw-passagedata><tw-passagedata pid="226" name="TUE-0730!-(KEEPERS)-I-7b-5-i" tags="light" position="7833,4793" size="100,100">Im old, Fred thinks. I wish you hadnt gone. I feel so tired now.
Fred closes his eyes, his breath slows, and begins to wobble a little.
Its lonely here, and she goes out all the time. [[Was she with you last night?-&gt;TUE-0730!-(KEEPERS)-I-7b-5-ii]]</tw-passagedata><tw-passagedata pid="227" name="TUE-0730!-(KEEPERS)-I-7b-5-ii" tags="light" position="7981,4790" size="100,100">[[//I don&#39;t know.//-&gt;TUE-0730!-(KEEPERS)-I-7b-6a-i]].
[[Silence-&gt;TUE-0730!-(KEEPERS)-I-7b-6b-i]].</tw-passagedata><tw-passagedata pid="228" name="TUE-0730!-(KEEPERS)-I-7b-6b-i" tags="light" position="8147,4864" size="100,100">&quot;Please talk to me.  When you can.  Its lonely here without you, he says. Then he whines again, disappears into an [[unhappy sleep-&gt;TUE-0730!-(KEEPERS)-I-8-1-i]].</tw-passagedata><tw-passagedata pid="229" name="TUE-0730!-(KEEPERS)-I-7b-6a-i" tags="light" position="8145,4734" size="100,100">&quot;Please come and see me soon.  Its lonely here without you.I love you. I miss you, he says. 
Then he whines again, disappears into an [[unhappy sleep-&gt;TUE-0730!-(KEEPERS)-I-8-1-i]].</tw-passagedata><tw-passagedata pid="230" name="TUE-0730!-(KEEPERS)-I-8-1-ii" tags="light" position="8510,4600" size="100,100">
Goodbye, Joanne, Rachel says.
Joanne closes the door absent-mindedly, without acknowledging them, and then leans forwards, rests her head on the door, and [[closes her eyes-&gt;TUE-0730!-(KEEPERS)-II-1-i]].

</tw-passagedata><tw-passagedata pid="231" name="TUE-0730!-(KEEPERS)-II-1-i" tags="light" position="8710,4608" size="100,100">The clouds now cover the sky in force, and its started to drizzle again. Thom pulls  up his jacket collar and steps out down the garden path. 
Cracking dog, that Fred, he says, and turns to Jess and asks more quietly. Is that normal, getting kicked out of the house within five minutes?
Its happened before, Jess says.
It was very specific, dont you think? I offered to get the dog from upstairs, and she [[kicked us all out-&gt;TUE-0730!-(KEEPERS)-II-1-ii]], he says.
</tw-passagedata><tw-passagedata pid="232" name="TUE-0730!-(KEEPERS)-II-1-ii" tags="light" position="8830,4609" size="100,100">I dont know, Rachel says, A lot of people dont want their privacy invaded by police. Shes just found out a loved one has died, we come barging in, she probably doesnt want us rummaging around upstairs, Rachel says.
Worth making a note of though, isnt it? he asks.
The three police officers walk through the garden and through the gate.
Does she have a car? Rachel asks. Jess nods.
Metallic Blue X3, she says.
Right there, Thom says, pointing out the gate at an SUV tucked in at the side of the lane. Lets [[check it out-&gt;TUE-0730!-(KEEPERS)-II-1-iii]]...

</tw-passagedata><tw-passagedata pid="233" name="TUE-0730!-(KEEPERS)-II-1-iii" tags="light" position="8956,4614" size="100,100">Inside the house, Joanne opens her eyes again and pushes herself off the door. She breathes very deeply, then [[goes up the stairs-&gt;TUE-0730!-(KEEPERS)-II-2-i]].
</tw-passagedata><tw-passagedata pid="234" name="TUE-0730!-(KEEPERS)-II-2-i" tags="light" position="9178,4615" size="100,100">Joanne tries to calm her breathing.  She turns away from the door and walks upstairs, slowly, into the bedroom and sees something shes never seen before in her life. Fred upstairs, under the covers of her bed.

You bad dog! she yells at Fred. Get out! She bangs her hand down on the bedcovers to a yelp from Fred. [[Out!-&gt;TUE-0730!-(KEEPERS)-II-2-ii]]

</tw-passagedata><tw-passagedata pid="235" name="TUE-0730!-(KEEPERS)-II-2-ii" tags="light" position="9302,4616" size="100,100">Fred whelps with fear, so surprised at hearing real anger from her, and he tries to jump down from the bed but is tangled in the bedcovers.

What are you doing there? Get out!! Joanne yells again and wrenches the bedclothes back, catching Freds back legs and sending him sprawling on his back. He rolls over, [[jumps off the bed-&gt;TUE-0730!-(KEEPERS)-II-2-iii]]. 
</tw-passagedata><tw-passagedata pid="236" name="TUE-0730!-(KEEPERS)-II-2-iii" tags="light" position="9438,4625" size="100,100">Joanne, enraged, stamps towards him, fully intending to kick him. 
Fred runs around her and she kicks out at the air, turning to see the old dog, ears flattened, miserable and filled with remorse, run out of the room. 
//Im sorry Im sorry Im sorry// he thinks as he runs down the stairs and into the front room where he [[hides under the table-&gt;TUE-0730!-(KEEPERS)-II-2-iv]].</tw-passagedata><tw-passagedata pid="237" name="TUE-0730!-(KEEPERS)-II-2-iv" tags="light" position="9575,4622" size="100,100">//Why did I do that?// Joanne asks herself, feeling suddenly ashamed. //Why did I want to kick him, hurt him? He didnt deserve that.//

She looks at her feet. //Because he was Tims dog. He always liked Tim better than me. And now Im stuck with him, just like I got stuck with all of Tims decisions.//
She looks outside the [[window-&gt;TUE-0730!-(KEEPERS)-II-2-v]].

</tw-passagedata><tw-passagedata pid="238" name="TUE-0730!-(KEEPERS)-II-2-v" tags="light" position="9698,4617" size="100,100">//God, I hope theyre gone soon,// she thinks, as the detectives walk from a perfunctory examination of her car to across the other side of the lane, where they knock on her [[neighbours door-&gt;TUE-0730!-(KEEPERS)-II-3-i]].</tw-passagedata><tw-passagedata pid="239" name="TUE-0730!-(KEEPERS)-II-3-i" tags="light" position="9962,4625" size="100,100">The police are at the door, Daddy! Evie shouts at her dad.
Thank you, darling, Patrick says, with a voice thats meant to be confident but doesnt sound it.
Evie opens the door ahead of him and [[looks up at the three officers-&gt;TUE-0730!-(KEEPERS)-II-3-ii]], wide-eyed. 
</tw-passagedata><tw-passagedata pid="240" name="TUE-0730!-(KEEPERS)-II-3-ii" tags="light" position="10086,4628" size="100,100">Thom steps forwards, taking lead. He kneels down, a little as he did with the dog, and smiles at her reassuringly.
Hello, whats your name? he says.
Evie, she says, suddenly feeling a lot less bold than she did before.
My names Thom. And I already know the name of your Dad, there, its [[Patrick-&gt;TUE-0730!-(KEEPERS)-II-3-iii]]!
</tw-passagedata><tw-passagedata pid="241" name="TUE-0730!-(KEEPERS)-II-3-iii" tags="light" position="10228,4626" size="100,100">Evie runs back behind her Dad, peeking out from behind him as cover.
Hello again, detectives Patrick says
Hello, Mister West... Thom says,
Call me, uh, Patrick, Patrick interrupts.
Okay. Patrick. Can we have a moment?
Mum doesnt want you in the house, Evie says, shy but mischievous, from behind her fathers legs.
Shush, treasure, Patrick says.
Oh.  [[I understand-&gt;TUE-0730!-(KEEPERS)-II-3-iv]], Thom says, smiling. 
</tw-passagedata><tw-passagedata pid="242" name="TUE-0730!-(KEEPERS)-II-3-iv" tags="light" position="10386,4634" size="100,100">We can talk on the doorstep for now, Thom says.  Patrick, we popped round because, well, theres more you could have said this morning.
Really? Patrick asks, his voice wavering.
You saw the body.  It was your next-door neighbour.  And you didnt tell us that.
I wasnt sure, Patrick stammers, I didnt get a good lookI didnt think it was my place to speculate. I dont want to be one of those, you know, well-meaning idiots who [[slows things down-&gt;TUE-0730!-(KEEPERS)-II-3-v]].
</tw-passagedata><tw-passagedata pid="243" name="TUE-0730!-(KEEPERS)-II-3-v" tags="light" position="10531,4629" size="100,100">&quot;Ah.  Okay, Thom says.  Well, Id love to chat another time, get some background to the neighbourhood, anything that might be useful to know about Mister Rutherford, so on, so forth,
Of course, Patrick says, wondering why hed need to be interviewed by the police about a neighbours suicide.
But for now I just wanted to ask you to be a good neighbour, and keep a watch out for Joanne. Normally in this circumstance, people really appreciate having a family and a support network.
Were not that close, Patrick says. Theres a reproachful knock through the wall from the kitchen, where Bets is listening in. But of course well [[keep an eye out-&gt;TUE-0730!-(KEEPERS)-II-3-vi]] for her.

</tw-passagedata><tw-passagedata pid="244" name="TUE-0730!-(KEEPERS)-II-3-vi" tags="light" position="10668,4628" size="100,100">The police officers arent as scary as Evie thought, and her Dad doesnt look in real fear of getting arrested, so she decides to run off back to the kitchen to see what Mums doing.

Thoms watches her go, amused, and then passes a card across to Patrick.

This is my number, this is the card of the family liaison officer. If you think Joanne might need any assistance, [[please call us-&gt;TUE-0730!-(KEEPERS)-II-3-vii]].

</tw-passagedata><tw-passagedata pid="245" name="TUE-0730!-(KEEPERS)-II-3-vii" tags="light" position="10810,4639" size="100,100">Id also like you to call the Liaison number there if you see anyone banging on the door, asking her questions, taking pictures, giving her hassle. Were trying to clamp down on the free press, we just want to make sure Joanne feels safe, if the media takes an interest.
Will there really be press? Patrick asks, confounded.
I dont know, Thom says, honestly. Finally.  Dont ever worry about slowing us down again.  We need all the facts we can get.  Okay?  Thom takes a step back.  
But Patrick has something more to ask.
Wait, Detective... Do you suspect [[foul play-&gt;TUE-0730!-(KEEPERS)-II-3-viii]]?

</tw-passagedata><tw-passagedata pid="246" name="TUE-0730!-(KEEPERS)-II-3-viii" tags="light" position="10938,4642" size="100,100">Thom looks at the man. //Oh, bugger,// he thinks, //what do I really say?// Thom shrugs at him, feigning nonchalance. Far too early to say, he responds.
//Bloody hell, Tim was murdered,// Patrick thinks.
Ill call by tomorrow, hopefully then we can have a proper interview,
[[Of course-&gt;TUE-0730!-(KEEPERS)-II-3-ix]], Patrick says, a nasty feeling in his chest, another forward moment in his life to dread.

</tw-passagedata><tw-passagedata pid="247" name="TUE-0730!-(KEEPERS)-II-3-ix" tags="light" position="11065,4639" size="100,100">//Tell him, now,// a voice inside Patrick says.
//No, Dont be an idiot. Its nothing, another piece of him says. Youll get in trouble for wasting police time.//
But now Thom has started walking away, and Patrick realises he has to close the door or look suspicious himself. [[// Too late again,// -&gt;TUE-0730!-(KEEPERS)-II-3-x]]Patrick thinks.

</tw-passagedata><tw-passagedata pid="248" name="TUE-0730!-(KEEPERS)-II-3-x" tags="light" position="11199,4646" size="100,100">If Im wrong, a word from me could ruin a mans life. If Im right, a man is [[getting away with murder-&gt;TUE-0730!-(KEEPERS)-II-4-i]]...</tw-passagedata><tw-passagedata pid="249" name="TUE-0730!-(KEEPERS)-II-4-i" tags="light" position="11482,4647" size="100,100">Joanne stands by the window, looking down at the male detective as he walks away from the cottage opposite towards his colleagues in the gentle drizzle.
What were they talking about to Pat, she wonders, and why arent they going?
Her head pounds. Shes so thirsty, she turns and walks into the upstairs bathroom, leans over the sink and starts drinking water straight out of the tap, gulp after gulp. The thirst feels incurable. It feels stiflingly hot inside. Joanne straightens up and [[looks at herself-&gt;TUE-0730!-(KEEPERS)-II-4-ii]] in the mirror.
</tw-passagedata><tw-passagedata pid="250" name="TUE-0730!-(KEEPERS)-II-4-ii" tags="light" position="11616,4648" size="100,100">//Look at this sad, red-eyed, severe, unhappy ghost// she thinks. //I look like the kind of woman Ive despised all my life.//  Joanne returns to the bedroom, to the window.

The detectives walking away, around the corner, behind the wall, where they parked their little blue car.

I have to get out, she says out loud, shocking herself slightly. //As soon as they leave//, she thinks, and [[goes back downstairs-&gt;TUE-0730!-(KEEPERS)-II-4-iii]].
</tw-passagedata><tw-passagedata pid="251" name="TUE-0730!-(KEEPERS)-II-4-iii" tags="light" position="11752,4651" size="100,100">Fred, still lying under the table in the front room, cringes, but Joanne ignores her. Everyones gone, everyones changed, the dog thinks as Joanne goes into the kitchen, opens the same drawer as earlier, and takes out a sealed envelope. 

(Envelope)
On the face is written, in a simple hand: To Joanne.

She turns it over in her hands and slips her finger under the seal flap, ready to tear it open, but then she pauses, and then takes the letter and puts it into her [[dressing gown-&gt;TUE-0730!-(KEEPERS)-II-4-iv]].

</tw-passagedata><tw-passagedata pid="252" name="TUE-0730!-(KEEPERS)-II-4-iv" tags="light" position="11887,4655" size="100,100">I have to get dressed, I have to go out, she thinks. She goes back upstairs to the bedroom, throws her dressing gown onto the bed and grabs a black v-neck that Fred had kicked onto the floor during his earlier escapade with the bedclothes. 
She replaces her pyjama bottoms with a pair of corduroys, stowing the envelope, folded in half, into the [[back trouser pocket-&gt;TUE-0730!-(KEEPERS)-II-4-v]].

</tw-passagedata><tw-passagedata pid="253" name="TUE-0730!-(KEEPERS)-II-4-v" tags="light" position="12045,4659" size="100,100">She looks out the window again, to see the two detectives get into their car.

[[//Finally//-&gt;TUE-0730!-(KEEPERS)-II-5-i]], she says to herself.

</tw-passagedata><tw-passagedata pid="254" name="TUE-0730!-(KEEPERS)-II-5-i" tags="light" position="12305,4660" size="100,100">I wish that her car had been all muddy, Thom says. That would have made this all a lot clearer, wouldnt it?

Rachel says nothing. She sits down in the passenger seat, feeling damp. The car is humid, [[uncomfortable-&gt;TUE-0730!-(KEEPERS)-II-5-ii]].

</tw-passagedata><tw-passagedata pid="255" name="TUE-0730!-(KEEPERS)-II-5-ii" tags="light" position="12456,4664" size="100,100">Thom makes himself comfy in the drivers seat. He looks at Rachel and suppresses a smug little grin. She doesnt like the rain, though shell never say it, because it would make her sound girly.

Love a good [[rainstorm-&gt;TUE-0730!-(KEEPERS)-II-5-iii]], Thom says.
Yeah, Rachel says, me too. Shes thinking, //take the piss out of me, you little bastard, Ill show you.//

</tw-passagedata><tw-passagedata pid="256" name="TUE-0730!-(KEEPERS)-II-5-iii" tags="light" position="12609,4662" size="100,100">Right. Do you want to spend all day talking about the weather, or do you want to solve a murder?
I say we choose the latter, Skip.
In that case, what do we know, and where do you want to go next? she asks Thom.
Thom starts the car.
Only [[one place-&gt;TUE-0830X-CHOICE]] that makes sense to me, he says, and pulls away.

</tw-passagedata><tw-passagedata pid="257" name="TUE-0830X-CHOICE" tags="light" position="175,4806" size="100,100">&lt;h1&gt;
(transition: &quot;dissolve&quot;)+(transition-time: 2s)[ [[
THE DETECTIVES-&gt;TUE-0830X-(POLICECAR)-Ia-1-i]]]
(transition: &quot;dissolve&quot;)+(transition-time: 2s)[ [[
JOANNE &amp; PATRICK-&gt;TUE-0830X-(EYNSHAM)-Ib-1-i]]]

&lt;/h1&gt;</tw-passagedata><tw-passagedata pid="258" name="TUE-0830X-(POLICECAR)-Ia-1-i" tags="light" position="370,4724" size="100,100">Get Well Clinic, Thom says, putting it into Google Maps. Opens at 8:30. Should be there in 25 minutes, depending on the traffic.
You can always pop the siren on and just drive along the pavement, [[get there quicker-&gt;TUE-0830X-(POLICECAR)-Ia-1-ii]], Rachel says to wind him up.
</tw-passagedata><tw-passagedata pid="259" name="TUE-0830X-(EYNSHAM)-Ib-1-i" tags="light" position="359,4872" size="100,100">Joanne takes the envelope from her pocket with a sudden thought. 
//Why dont I just burn it? //She thinks. 
Then she remembers the disaster of the candles at Christmas, with the smoke alarms going off just from when they blew them out. 
//Bloody timber-beamed house, smoke alarm in every corner,// she thinks. 
//Last thing I want is to explain why Im burning letters to the neighbours or to a [[fireman-&gt;TUE-0830X-(POLICECAR)-Ib-1-ii]].//

</tw-passagedata><tw-passagedata pid="260" name="TUE-0830X-(POLICECAR)-Ia-1-ii" tags="light" position="518,4726" size="100,100">Thom turns back onto the main road, and they drive back the same route past the bare trees and sports pavilion in silence. But as Thom approaches the roundabout by the Talbot Inn, he turns left and takes a new route towards the A road.
Why are you going the long way?
Oh-ho, Im not going over that bloody toll bridge again, Thom says.
For five p? Rachel asks.
For the principle of the thing. For saying I was trying to use police intimidation tactics.
You certainly hold a grudge, Rachel replies, remind me not to get on the [[wrong side of you-&gt;TUE-0830X-(POLICECAR)-Ia-1-iii]]!

</tw-passagedata><tw-passagedata pid="261" name="TUE-0830X-(POLICECAR)-Ia-1-iii" tags="light" position="657,4732" size="100,100">They drive along the tree-line edge of Eynsham all the way up to the roundabout that takes them onto old, crackled macadam of the A40.
This road is terrible, Thom says. Where do all our taxes go?
They approach a large petrol station.
Fancy a [[quick stop-&gt;TUE-0830X-(POLICECAR)-Ia-2-i]] and a crap coffee? Thom asks.

</tw-passagedata><tw-passagedata pid="262" name="TUE-0830X-(POLICECAR)-Ia-2-i" tags="light" position="962,4735" size="100,100">Thom pushes his way out the service station kiosk door with two steaming plastic cups in his hands, and walks over to the pumps, where Rachel is taking shelter from the drizzle, looking at her phone.
What is this meant to be? Rachel asks, inspecting the [[plastic cup-&gt;TUE-0830X-(POLICECAR)-Ia-2-ii]] that Thom hands her dubiously.
</tw-passagedata><tw-passagedata pid="263" name="TUE-0830X-(POLICECAR)-Ia-2-ii" tags="light" position="1099,4737" size="100,100">It said cappuccino.*
Rachel stares between him and the beverage with a raised eyebrow.
Hey, it was 40p, Thom says, what did you expect? He takes a sip from his own plastic cup and then pulls a face. Oh, Jesus Christ, thats awful, he says.
Uh-ho, Rachel says. Are you going to declare a fatwa on this place on top of the Eynsham Lock Toll Booth?
Quiet, you, Thom says, wincing as he tries another sip. Oh, thats [[pretty much undrinkable-&gt;TUE-0830X-(POLICECAR)-Ia-2-iii]], Rach. Tastes like cigarette ash mixed with white paint.
</tw-passagedata><tw-passagedata pid="264" name="TUE-0830X-(POLICECAR)-Ia-2-iii" tags="light" position="1251,4735" size="100,100">They stand, looking out at the uninspiring view of bare trees, muddy fields and the A40 in front of them. The air smells of decay, of wet ground, and a distant smell that must be muck spreading from a distant field. Itll be a long time till Spring, Thom thinks sadly.
What are you thinking? Rachel asks. Thom snaps out of his reverie.
In your opinion, was she normal? Thom asks.
No-ones normal, Rachel replies.
But I mean, there was some stuff there that was a little bit suspicious, right?
Rachel shakes her head.
Thom, she says, gently, youre [[jumping the gun-&gt;TUE-0830X-(POLICECAR)-Ia-2-iv]].
</tw-passagedata><tw-passagedata pid="265" name="TUE-0830X-(POLICECAR)-Ia-2-iv" tags="light" position="1397,4739" size="100,100">Dont tell me there isnt something a bit off with her, though?
From the five minutes worth of evidence weve assembled on morning one, she didnt do it Rachel says, suddenly sharp. I know it would be nice and easy on us if she had, but she didnt.
Wait a second, Rach, thats not fair Thom says.
Its the wrong mindset. Its mental laziness, Rachel says. Building evidence around a theory rather than the other way around. And [[whats the theory-&gt;TUE-0830X-(POLICECAR)-Ia-2-v]], Thom? That a high-strung fifty-year-old woman carried an eighty kilo man on her back for a kilometre through the woods?
</tw-passagedata><tw-passagedata pid="266" name="TUE-0830X-(POLICECAR)-Ia-2-v" tags="light" position="1546,4738" size="100,100">So youre saying she has nothing to do with it? She couldnt be an accomplice? She couldnt know a lot more than shes saying? Thom responds grumpily.
I have no idea about any of those things yet, Rachel says, and neither do you.
Thom grumpily throws his coffee out onto the grass verge in front of them, crumples up the plastic cup and throws it into the bin.
Im going back to the car he says, and [[walks off through the rain-&gt;TUE-0830X-(POLICECAR)-Ia-3-i]].
</tw-passagedata><tw-passagedata pid="267" name="TUE-0830X-(POLICECAR)-Ia-3-i" tags="light" position="1800,4746" size="100,100">Once back in the car, Thom and Rachel [[drive in silence-&gt;TUE-0830X-(POLICECAR)-Ia-3-ii]] for quite a while.

</tw-passagedata><tw-passagedata pid="268" name="TUE-0830X-(POLICECAR)-Ia-4-i" tags="light" position="3949,4829" size="100,100">Okay, Rachel says, scrolling quickly down the website. Right. The clinic is for young adults, teenagers and children. Its Directors are Timon Rutherford, Psychotherapist, MBACP Accredited,

What does MBACP Accredited mean? Thom asks.

Dont know, Rachel says, continuing: ...and Dr. Harriet Fielding, DCounsPsych, CPsychol. Dont know what any of that means either, though she sounds like she has [[more qualifications-&gt;TUE-0830X-(POLICECAR)-Ia-4-ii]], doesnt she?

</tw-passagedata><tw-passagedata pid="269" name="TUE-0830X-(POLICECAR)-Ia-3-ii" tags="light" position="1930,4744" size="100,100">Finally, they hit traffic on the turn off to the Western Bypass, and Rachel says,
I thought she wasa bit weird too, okay Thom? I just dont know if that weirdness has anything to do with the case.  She certainly doesnt fit whatever little we know about the crime so far, Rachel says.
Its not mentally lazy to [[observe that-&gt;TUE-0830X-(POLICECAR)-Ia-3-iii]], Thom says, a little petulantly, his eyes fixed on the road.
</tw-passagedata><tw-passagedata pid="270" name="TUE-0830X-(POLICECAR)-Ia-3-iii" tags="light" position="2058,4751" size="100,100">No. Its not. Its just... something Ive seen before, a lot, Thom. Leaning into what would be, I guess, cool. A good story. A murder mystery version of events, rather than the truth. Its just its never played out that way for me in other cases. And of all the people you can get in shit with for treating like suspects unjustifiably, the victims family is number one. Until we have a good reason to treat her like a suspect, we should be very canny with her.
[[Understood-&gt;TUE-0830X-(POLICECAR)-Ia-3-iv]], Thom says, a little less frostily.
</tw-passagedata><tw-passagedata pid="271" name="TUE-0830X-(POLICECAR)-Ia-3-iv" tags="light" position="2192,4759" size="100,100">Well get a statement from her tomorrow, Rachel says. Much easier to test her alibi without looking like were accusing her of anything. We might need her co-operation.
Fair enough, Thom says.
So, out with it, Rachel says.
What?
Dont be all huffy. I know you.  Its just like before: you only asked me what I thought of the wife so you could tell me what you think, Rachel says with a smile.
You... Thom says, You are something else.
Go on, Sherlock. Give me your [[great insights-&gt;TUE-0830X-(POLICECAR)-Ia-3-v]].
</tw-passagedata><tw-passagedata pid="272" name="TUE-0830X-(POLICECAR)-Ia-3-v" tags="light" position="2323,4758" size="100,100">I honestly dont have any yet. I just got an odd, prickly vibe, you know? Thom says.
Rachel waits for a second. Then responds.
Ah, she strikes me as the kind of woman who always has to be on the high status side of the equation, Rachel says. She sets the rules, she gets things her way or she doesnt play. Thats why she spends a lot of time at home. I imagine she works from home a lot.  And her home is where she always sets the rules. She said her husband worked late a lot. Thats often the case where a spouse finds they dont have a lot of control at home. Over their time. Over the space. They [[stay at work-&gt;TUE-0830X-(POLICECAR)-Ia-3-vi]] for as long as possible.
</tw-passagedata><tw-passagedata pid="273" name="TUE-0830X-(POLICECAR)-Ia-3-vi" tags="light" position="2456,4762" size="100,100">And so, Thom adds, when we come in there as police, asking her questions and poking her around, were putting her on the spot.
Exactly. Challenging her in the space where shes always in control. So even though shes upset, and grieving, and worried about whats going to happen next, her hackles come up. She has to reassert control, constantly changing the pace of the conversation, stopping us, going in and out of the kitchen, saying she doesnt want to do the things we asked, and in the end, basically [[kicking us out-&gt;TUE-0830X-(POLICECAR)-Ia-3-vii]].
</tw-passagedata><tw-passagedata pid="274" name="TUE-0830X-(POLICECAR)-Ia-3-vii" tags="light" position="2590,4761" size="100,100">You think shell be the same tomorrow? Thom asks.
No, so long as she gets to set the time and the tempo, shell acquiesce, because doing so will be her idea, you see?
Thom nods, silently. Then, after some thought, he says, A high status woman whos just has to set all the rules, he shakes his head in mock horror. Sounds like a nightmare. I feel sorry for anyone who has to work with someone like that.
You dont have a bloody [[clue-&gt;TUE-0830X-(POLICECAR)-Ia-3-viii]], you, Rachel says with a smile. 
</tw-passagedata><tw-passagedata pid="275" name="TUE-0830X-(POLICECAR)-Ia-3-viii" tags="light" position="2733,4764" size="100,100">What else did you notice, Thom? Rachel asks.
Oh, me? Nothing. I just make wild speculations, Thom says.
I thought we were over that. What is it?
Did you see any newspaper, or pens, or notepads anywhere around? Thom asks.
I didnt, Rachel says.
Me neither. She had an [[ink impression-&gt;TUE-0830X-(POLICECAR)-Ia-3-ix]] on the side of her right hand. Just a few letters, from leaning her hand on something she was writing. But what?
</tw-passagedata><tw-passagedata pid="276" name="TUE-0830X-(POLICECAR)-Ia-3-ix" tags="light" position="2893,4767" size="100,100">Could have been any time, right?
She smelt like shed had a shower, washed her hair, maybe half an hour before? Would have washed it off. No, I think she must have been writing something, then she hid it before coming to the door. Unless she strikes you as the kind who walks to the post box in her dressing gown.
Hmm, Rachel says.
Pear Tree Park and Ride! Thom says inanely, as they turn off the A40 and pass the huge, half-empty car park on the [[edge of the city-&gt;TUE-0830X-(POLICECAR)-Ia-3-x]].
</tw-passagedata><tw-passagedata pid="277" name="TUE-0830X-(POLICECAR)-Ia-3-x" tags="light" position="3056,4768" size="100,100">I cant believe you added ten minutes onto our journey to avoid that toll booth chap, Rachel says. Wait a second, you didnt have any change for the toll?
Told you that already.
Then how did you have change for the coffee machine at the service station?
The Girl Detective solves another case! Thom says, and grins.
My God, your lies are so convincing, you should be a lawyer, Rachel responds.
I thought seriously about the law when I was younger, Thom says, but I had this condition that meant I couldnt pursue it.
You had a heart? Rachel guesses.
Funny.  No, it was an actual medical condition, not a joke.
&quot;Really? Rachel asks.
&quot;Not really, you just [[stole my punchline-&gt;TUE-0830X-(POLICECAR)-Ia-3-xi]], Thom says. 

</tw-passagedata><tw-passagedata pid="278" name="TUE-0830X-(POLICECAR)-Ia-3-xi" tags="light" position="3197,4767" size="100,100">The traffic isnt too bad for rush hour, and soon theyve crossed the Southern Bypass, then turn North up the Abingdon road towards Oxford.
Allotments, Thom says, as they pass hundreds of little bare patches of ground to the right with dying sunflowers and a few last browning crops. To the left, they pass row after row of standard Postwar two-up two-downs with paved front gardens and mock tudor eaves that gradually give way to grander semi-detached Edwardian homes in [[red brick-&gt;TUE-0830X-(POLICECAR)-Ia-3-xii]].
</tw-passagedata><tw-passagedata pid="279" name="TUE-0830X-(POLICECAR)-Ia-3-xii" tags="light" position="3331,4769" size="100,100">Another nice looking pub, Thom says as they pass the Duke of Monmouth, and ahead, the homes change into wider, grander, Victorian houses in distinctive yellow brick that marks the outskirts of old, atmospheric, timeless, endlessly expensive [[Oxford-&gt;TUE-0830X-(POLICECAR)-Ia-3-xiii]].
</tw-passagedata><tw-passagedata pid="280" name="TUE-0830X-(POLICECAR)-Ia-3-xiii" tags="light" position="3470,4775" size="100,100">Coming up to my old ground, Thom says.
Exciting place? Rachel asks.
Not really, Thom. Close to Thames Valley though. Not sure why I cant remember seeing this place.
Must have been quieter than where you were before, though, hey? she asks.
Yeah. Different from that place in just about every way, Thom says, leaving off but implying, //and Im [[not going to talk-&gt;TUE-0830X-(POLICECAR)-Ia-3-xiv]] about any of those differences.//



</tw-passagedata><tw-passagedata pid="281" name="TUE-0830X-(POLICECAR)-Ia-3-xiv" tags="light" position="3609,4774" size="100,100">Three minutes out, Thom says.
Rachel takes out her phone.
The Getwell Clinic website, Rachel says, is better than the Thames Valley Polices.
What does it [[say-&gt;TUE-0830X-(POLICECAR)-Ia-4-i]]? Thom asks.
</tw-passagedata><tw-passagedata pid="282" name="TUE-0830X-(POLICECAR)-Ia-4-ii" tags="light" position="4076,4835" size="100,100">Rachel scrolls down.
ADHD assessment and treatment is a specialty for them, they do something called QB testing. And... here it is, Forensic Adolescent Psychiatry.
Thats the violent young men that Joanne was talking about, right? Thom asks. Rachel nods.
Theyve got a special little note here on the bottom of the main page that basically says that theyre on the NHS but theyd still rather you paid and they can shunt you off to someone else if they dont have the capacity.
The system works, Thom says, pointing up ahead. Think its tucked up around here on the left. Yes. [[Here we are-&gt;TUE-0830X-(POLICECAR)-Ia-4-iii]]...
</tw-passagedata><tw-passagedata pid="283" name="TUE-0830X-(POLICECAR)-Ia-4-iii" tags="light" position="4214,4833" size="100,100">On the corner of the Abingdon and Whitehouse Roads, a large yellow brick victorian house stands, a little shabby. Facing out towards the main road, it is a Kurdistan Barbers. Facing the other road, theres a reinforced door next to some bins, and a sign that says, [[Getwell Clinic-&gt;TUE-0900!-(GETWELL)-I-TITLE]]....
The reinforced door is ajar, and this morning, has been kicked in.
Bloody hell, Thom says.
It looks nicer on the website, Rachel says.

</tw-passagedata><tw-passagedata pid="284" name="TUE-0900!-(GETWELL)-I-TITLE" tags="light" position="181,5211" size="100,100">&lt;h1&gt;
(transition: &quot;dissolve&quot;)+(transition-time: 2s)[ [[
9:00AM-&gt;TUE-0900!-(GETWELL)-I-1-i]]]

&lt;/h1&gt;</tw-passagedata><tw-passagedata pid="285" name="TUE-0830X-(POLICECAR)-Ib-1-ii" tags="light" position="497,4874" size="100,100">//Ill go out,// she thinks. //Buy some aspirin at the shop. Get rid of this at the same time. //She pulls on her black padded coat and looks out the front door.
Fred, whod normally see this behaviour as the start of a walk, doesnt get out from under the table. Hes still wary, and he knows something is terribly wrong.
Joanne looks at her watch. //[[Five minutes-&gt;TUE-0830X-(POLICECAR)-Ib-2-i]]//, she thinks. //Five minutes and Ill go.//
</tw-passagedata><tw-passagedata pid="286" name="TUE-0830X-(POLICECAR)-Ib-2-i" tags="light" position="751,4877" size="100,100">Evie is upstairs, sitting in her bedroom, looking across the street at the cottage with the sad lady in it. She often comes upstairs when her parents are fighting. The muffled voices make no sense to her from downstairs. She thinks, maybe if she does another drawing, she can distract them with it, and so she takes her crayons and starts working on a fantastical menagerie of imaginary animals. 

Sheep-snake
Evie begins with a sheepsnake, with a slithery head and a long fluffy body. 

Chicken-Lion
She begins work on a chicken that has a lions head and mane. 

Soon, she is utterly absorbed, and no longer really hears the [[argument-&gt;TUE-0830X-(POLICECAR)-Ib-2-ii]] going on downstairs.

</tw-passagedata><tw-passagedata pid="287" name="TUE-0830X-(POLICECAR)-Ib-2-ii" tags="light" position="885,4878" size="100,100">Why are you being like this? Patrick asks. Why is any of this my fault?
Because I care about you. And something has happened to you since your time off, Patrick. I know youre in recovery. 
&quot;Im not trying to be a bitch. But why are you making things so difficult for yourself? Why dont you just [[tell the police-&gt;TUE-0830X-(POLICECAR)-Ib-2-iii]] what you know and walk away? 
&quot;What do you have to gain?
</tw-passagedata><tw-passagedata pid="288" name="TUE-0830X-(POLICECAR)-Ib-2-iii" tags="light" position="1018,4881" size="100,100">Because I dont know anything. I dont know what I saw. I dont want to get involved, okay? Patrick says, his voice breaking a little. Ive spend the last twelve years dealing with nothing but other peoples stress, other peoples bullshit, and it nearly killed me. 
&quot;And all that stressall my workmeant absolutely nothing to anyone. It didnt help a single person. 
&quot;All it meant was I needed a triple bypass, that I needed to leave my job. In the end of the day, nobody caredexcept for me. 
&quot;Im tired of being [[dragged into stuff-&gt;TUE-0830X-(POLICECAR)-Ib-2-iv]].
</tw-passagedata><tw-passagedata pid="289" name="TUE-0830X-(POLICECAR)-Ib-2-iv" tags="light" position="1144,4883" size="100,100">Patrick, Bets says a bit more gently, youll get dragged in anyway. Theyll just think you had something to hide.
Bets thinks, but doesnt say, do you have something to hide, Patrick? She always noticed how nice he was to Joanne. Hes always loved thinking of himself as a protector, even as he shuffles around the house in a bath robe.
Patrick walks out into the hall and grabs his coat.
Im going out for five, he says.
Patrick, we havent finished talking, Bets says, her voice a little quieter now.
I have, Patrick says, and he opens the front door and [[storms off into the street-&gt;TUE-0830X-(POLICECAR)-Ib-3-i]].

</tw-passagedata><tw-passagedata pid="290" name="TUE-0830X-(POLICECAR)-Ib-3-i" tags="light" position="1391,4891" size="100,100">Patrick walks out into the light rain, goes down the front path, across the lane and up Queens Street towards the [[local mini supermarket-&gt;TUE-0830X-(POLICECAR)-Ib-3-ii]].
</tw-passagedata><tw-passagedata pid="291" name="TUE-0830X-(POLICECAR)-Ib-3-ii" tags="light" position="1528,4894" size="100,100">He feels confused and annoyed, and a little bit hurt. 
//Shes always telling me to stay out of things,// Patrick thinks. //She doesnt even want the police in the bloody house. 
And then somehow, I still do the wrong thing. 
If Id told them everything, shed probably be bollocking me for getting involved! 
Its [[impossible to do anything right-&gt;TUE-0830X-(POLICECAR)-Ib-3-iii]] with her, it really is.//

</tw-passagedata><tw-passagedata pid="292" name="TUE-0830X-(POLICECAR)-Ib-3-iii" tags="light" position="1659,4896" size="100,100">Grumbling to himself like this, he walks through the rain and into the shop.
Morning Chloe, he says to the teenager behind the counter.
Hi, Pat, she replies, not looking up from her phone.
Patrick goes over to the [[fridge-&gt;TUE-0830X-(POLICECAR)-Ib-3-iv]].
</tw-passagedata><tw-passagedata pid="293" name="TUE-0830X-(POLICECAR)-Ib-3-iv" tags="light" position="1794,4900" size="100,100">For some reason, he always feels a sense of calm, standing in front of supermarket fridges. 
//All that plenty. All those choices. //
Anything he wants to get, he can just pick up. Its one of the few places in his life where he feels like he still gets to choose for himself, where hes still the [[master of his own destiny-&gt;TUE-0830X-(POLICECAR)-Ib-3-v]].
</tw-passagedata><tw-passagedata pid="294" name="TUE-0830X-(POLICECAR)-Ib-3-v" tags="light" position="1938,4906" size="100,100">//I think Im going to get a smoothie,// he thinks. He hasnt had one in a little while, because hes been told, by Bets, that most of them are actually full of crap and have as much sugar in them as a soda, but right now he doesnt care. 
//Im going to take that red one,// he thinks, picking up one that says it has twenty strawberries, a handful of cherries, three apples and and half a guava in it. //For Christs sake, [[how can that be bad for you-&gt;TUE-0830X-(POLICECAR)-Ib-3-vi]]?// he thinks. 
</tw-passagedata><tw-passagedata pid="295" name="TUE-0830X-(POLICECAR)-Ib-3-vi" tags="light" position="2082,4909" size="100,100">The smoothie feels cold and pleasant in his hand, and the tiny act of defiance makes him feel a bit bolder. 
//Bugger it, Ill buy a packet of crisps, too. The fancy Kettle ones. Salt and Vinegar. [[Life is short-&gt;TUE-0830X-(POLICECAR)-Ib-3-vii]]: I could die tomorrow and never get the chance to have another.//

</tw-passagedata><tw-passagedata pid="296" name="TUE-0830X-(POLICECAR)-Ib-3-vii" tags="light" position="2221,4910" size="100,100">Patrick turns away from the refrigerated sections and down to the snack aisle. 
//Look at all this stuff, //he thinks. 
He picks up a big blue packet of hand-crafted sea-salt and apple cider vinegar crisps, looks at it, feels a little bad, and puts it back on the shelf. 
//I probably shouldnt,// he thinks. //The smoothie is enough of a stand.  I dont want to end up in divorce court over a bloody snack. //  
Then he hears [[a voice by the till-&gt;TUE-0830X-(POLICECAR)-Ib-3-viii]].

</tw-passagedata><tw-passagedata pid="297" name="TUE-0830X-(POLICECAR)-Ib-3-viii" tags="light" position="2355,4914" size="100,100">Can I get aspirin and ibuprofen at the same time?
//Thats Joanne!// Patrick thinks.
He looks around the aisle, but only sees a wet, black coat with its hood up, and Chloe nodding, bored.
Bag?
The woman in the coat nods. Shes buying painkillers, San Pellegrino, a bottle of New Zealand Sauvignon Blanc.
Joanne taps her card and walks out.
Patrick follows her [[up to the till-&gt;TUE-0830X-(POLICECAR)-Ib-3-ix]], lost in thought.
</tw-passagedata><tw-passagedata pid="298" name="TUE-0830X-(POLICECAR)-Ib-3-ix" tags="light" position="2506,4916" size="100,100">Thats all? Chloe asks, nodding at the smoothie. Patrick nods.
I was going to get some crisps, he says, looking out and trying to see where Joanne has gone.
Didnt you just have, like, a heart attack? Chloe asks.
Thats why I put them back, Patrick says. He pays for his smoothie and [[hurries out into the rain-&gt;TUE-0830X-(POLICECAR)-Ib-3-x]].
</tw-passagedata><tw-passagedata pid="299" name="TUE-0830X-(POLICECAR)-Ib-3-x" tags="light" position="2643,4915" size="100,100">//Ill catch her up on the way home and just say that were there to help if she needs anything,// he thinks. 
But he cant see her ahead. He turns and, to his surprise, sees Joanne walking the other way. 
Not back towards home, but out, into the rain, towards the river and the woods.
//She wouldnt do something foolish, would she? //Patrick wonders.
Partly through voyeurism, and partly through concern, he starts to [[follow her-&gt;TUE-0830X-(POLICECAR)-Ib-4-i]].
</tw-passagedata><tw-passagedata pid="300" name="TUE-0830X-(POLICECAR)-Ib-4-i" tags="light" position="2867,4917" size="100,100">Joanne had waited another five minutes before she just couldnt stand it any longer. Shed let Fred into the back garden for a quick wee, drunk a little more water, and then decided to [[set off-&gt;TUE-0830X-(POLICECAR)-Ib-4-ii]].

</tw-passagedata><tw-passagedata pid="301" name="TUE-0830X-(POLICECAR)-Ib-4-ii" tags="light" position="3014,4921" size="100,100">Shed taken the side gate through the back garden that went straight onto Queens Street, as she didnt want the neighbours opposite to see her.  She walked fast, head down and heart pounding, all the way to [[the shops-&gt;TUE-0830X-(POLICECAR)-Ib-4-iii]].

</tw-passagedata><tw-passagedata pid="302" name="TUE-0830X-(POLICECAR)-Ib-4-iii" tags="light" position="3147,4925" size="100,100">Joanne got the painkillers, which she really needed, and some water and wine for as soon as she got back.  Then shed left the Spar and turned down towards [[Station Road-&gt;TUE-0830X-(POLICECAR)-Ib-4-iv]].
</tw-passagedata><tw-passagedata pid="303" name="TUE-0830X-(POLICECAR)-Ib-4-iv" tags="light" position="3289,4921" size="100,100">//Its like Im in a dream.  I can hardly feel myself,// she thinks.  
Her legs are weak, her feet cushioned, almost like shes floating above the ground. 
The bag with the bottles in it bang against her leg, again and again. 
//This is awful, //she thinks. //What an awful feeling this is.// She feels hot and cold all at once, the rain soaks her corduroys and her jacket, and she feels [[feverish-&gt;TUE-0830X-(POLICECAR)-Ib-4-v]].
</tw-passagedata><tw-passagedata pid="304" name="TUE-0830X-(POLICECAR)-Ib-4-v" tags="light" position="3448,4936" size="100,100">She reaches the Station Road and looks down it. Nobody is walking that way. She looks down Acre End Street, and sees only a car slowly driving away. 
She doesnt look behind her, yet, for fear of seeming suspicious. 
Instead, she crosses the road and walks on, past the high drystone walls of Station Road, [[as fast as she can-&gt;TUE-0830X-(POLICECAR)-Ib-4-vi]]. 

</tw-passagedata><tw-passagedata pid="305" name="TUE-0830X-(POLICECAR)-Ib-4-vi" tags="light" position="3599,4946" size="100,100">Within a couple of minutes, shes past the houses and up to the fields. 
She leans against a gate, takes out the bottled water and swallows down a couple of ibuprofen, using the opportunity to look around in all directions. 
She doesnt see anyone, and [[continues-&gt;TUE-0830X-(POLICECAR)-Ib-4-vii]] on as fast as she can.
</tw-passagedata><tw-passagedata pid="306" name="TUE-0830X-(POLICECAR)-Ib-4-vii" tags="light" position="3753,4948" size="100,100">The entrance to the old Abbey Fishponds arrives on her left, and she walks through the car park and into the nature reserve. Theres no-one here on a wet autumn day, as you would expect. Shes completely [[alone-&gt;TUE-0830X-(POLICECAR)-Ib-4-viii]].
</tw-passagedata><tw-passagedata pid="307" name="TUE-0830X-(POLICECAR)-Ib-4-viii" tags="light" position="3894,4951" size="100,100">Joanne walks through a bare patch of woodlands, and then to the water itself.
Joanne stops by the edge of the water. She looks around one more time, and then drops her back and pulls the [[envelope-&gt;TUE-0830X-(POLICECAR)-Ib-4-ix]] out of her back pocket.

</tw-passagedata><tw-passagedata pid="308" name="TUE-0830X-(POLICECAR)-Ib-4-ix" tags="light" position="4035,4959" size="100,100">She tears the envelope open, and then, after hesitation, unfolds the single letter page within and reads.
The leter is short, and in printed handwriting. It [[reads-&gt;TUE-0830X-(POLICECAR)-Ib-4-x]]:
</tw-passagedata><tw-passagedata pid="309" name="TUE-0830X-(POLICECAR)-Ib-4-x" tags="light" position="4177,4964" size="100,100">Dear Joanne.
I have reached a turning point in my life.
My work brings me no pleasure.
My biggest project and the culmination of my lifes work is set to fail.
You and I have not been happy together for many years.
I have decided to go away for a while.
This will come as a shock.  I will seem very selfish. To you, to my work. It is sudden, it is necessary, it is time to think about myself.
I will be in touch when the time comes.
Take care.
[[Tim-&gt;TUE-0830X-(POLICECAR)-Ib-4-xi]].
</tw-passagedata><tw-passagedata pid="310" name="TUE-0830X-(POLICECAR)-Ib-4-xi" tags="light" position="4313,4966" size="100,100">Joanne stares at the letter for a little while. And then suddenly, with anger, she tears a long strip off it. 
And then, another, and another tearing long vertical strips of the letter. 
Then she turns the strips the other way and starts tearing them into tiny squares, and throwing the [[paper scraps-&gt;TUE-0830X-(POLICECAR)-Ib-4-xii]] into the moving water.

</tw-passagedata><tw-passagedata pid="311" name="TUE-0830X-(POLICECAR)-Ib-4-xii" tags="light" position="4442,4968" size="100,100">In half a minute, the letter is gone, and all traces of it, save for a couple of scraps on the river bank, are gone.
//Go away, go away forever//, she thinks.
Joanne looks at the envelope that remains. To Joanne.
She scrunches it up and puts it in her jacket pocket, and [[turns away-&gt;TUE-0830X-(POLICECAR)-Ib-4-xiii]].

</tw-passagedata><tw-passagedata pid="312" name="TUE-0830X-(POLICECAR)-Ib-4-xiii" tags="light" position="4591,4971" size="100,100">She walks home, a restless feeling inside her. //I thought I would feel freer,// she thinks, //but I dont at all.//
She reaches the Abbey Walk car park and throws the envelope, wrinkled with the words running from the rain, into the bin.
//I should get back as quickly as possible,// she thinks, and walks down Station Road as [[quickly as she can-&gt;TUE-0830X-(POLICECAR)-Ib-4-xiv]].

</tw-passagedata><tw-passagedata pid="313" name="TUE-0830X-(POLICECAR)-Ib-4-xiv" tags="light" position="4733,4968" size="100,100">Joanne can feel her legs again. The first glimmering of a sense of purpose is returning to her. She still feels an indelible thirst and her head is poundingbut she feels better than she did earlier.
Soon, she in the village, and turning from the High Street down Queens Street once more.
Ill be home, Ill have a sleep, she thinks. As she turns towards the little gate, a voice shouts out behind her.
[[Joanne! Joanne!-&gt;TUE-0830X-(POLICECAR)-Ib-4-xv]]
</tw-passagedata><tw-passagedata pid="314" name="TUE-0830X-(POLICECAR)-Ib-4-xv" tags="light" position="4862,4973" size="100,100">Joanne turns.
Patrick West, the nobody from across the street, is running up behind her.
She says nothing.
Joanne, the police came around this morning. Im so sorry. I just wanted to say that anything that we can do to help, please let us know, alright?
Joanne looks at Patrick, [[expressionless-&gt;TUE-0830X-(POLICECAR)-Ib-4-xvi]].
</tw-passagedata><tw-passagedata pid="315" name="TUE-0830X-(POLICECAR)-Ib-4-xvi" tags="light" position="4998,4975" size="100,100">Okay, thank you, she says, and walks away, as if on automatic pilot.
She walks through her garden and through the back door, into the house.
Fred gets up from under the table and approaches her, ears back, tail swinging low, hoping to make amends.
Joanne walks past him and sits down by the table, lost in though.
[[//How long was he behind me?//-&gt;TUE-0830X-(POLICECAR)-Ib-5-i]] She thinks.
</tw-passagedata><tw-passagedata pid="316" name="TUE-0830X-(POLICECAR)-Ib-5-i" tags="light" position="5242,4984" size="100,100">Patrick slowly walks back to the cottage in a daze.
He opens the door and walks in, wipes his feet on the mat, and closes the door.
Bets comes into the hall, her face worried.
Pat, she says, the start of one of her short, pre-emptive apologies, Im sorry, I just dont want you to [[get in trouble-&gt;TUE-0830X-(POLICECAR)-Ib-5-ii]].
</tw-passagedata><tw-passagedata pid="317" name="TUE-0830X-(POLICECAR)-Ib-5-ii" tags="light" position="5367,4988" size="100,100">Patrick nods back at her.
I know, he says. Ive been an idiot, havent I?
Would you like a cup of tea? Bets asks.
Patrick nods.  Yes.  Yes I would, he says, and [[follows her-&gt;TUE-0830X-(POLICECAR)-Ib-5-iii]] into the kitchen.
</tw-passagedata><tw-passagedata pid="318" name="TUE-0830X-(POLICECAR)-Ib-5-iii" tags="light" position="5569,4994" size="100,100">Take off your coatyoure soaked! Where did you go? Bets asks.
I went down to the Abbey Fish Ponds, he says. He pulls his coat off and hangs it from a chair, before pulling a crumpled envelope from his pocket. The ink, run but still visible on its front, reads: To Joanne.
I need to tell you what I saw, Patrick says, Not just now.  Last night, [[on the way home-&gt;TUE-0900!-(GETWELL)-I-TITLE]].
</tw-passagedata><tw-passagedata pid="319" name="TUE-0900!-(GETWELL)-I-1-i" tags="light" position="367,5210" size="100,100">Rachel gets out in the rain as Thom goes up the Whitehouse road to find somewhere to park. 
Another of his quite endearing quirks, along with refusing to go above the speed limit, is his refusal to [[park-&gt;TUE-0900!-(GETWELL)-I-1-ii]] on double yellow lines when there isnt good reason to.
</tw-passagedata><tw-passagedata pid="320" name="TUE-0900!-(GETWELL)-I-1-ii" tags="light" position="496,5213" size="100,100">Rachel looks across the road at the Getwell Clinic. 
Perched on the very Southern edge of Oxford proper, where the old grand buildings start, but far enough away from the action to feel isolated, irrelevant in the grand scheme of things. 
A century ago, the Victorian building would have made a grand homebut this basement flat conversion, crowded by the bins and recycling is far sadder, drabber and shabbier than she expected. 
The kicked-in door makes it feel more like an addiction recovery clinic than the kind of tame, middle class institution she would have [[predicted-&gt;TUE-0900!-(GETWELL)-I-1-iii]] from the victims home life.

</tw-passagedata><tw-passagedata pid="321" name="TUE-0900!-(GETWELL)-I-1-iii" tags="light" position="627,5217" size="100,100">Rachel crosses the street, avoiding the growing puddles at the sides of the road, and approaches the clinic, getting a strong whiff of the bins. 

(The entrance)
to the clinic is laid out like a passage from the street, marked by two useless, knee high brick walls stem either side of the front door, across to the edge of the pavement. 

(lamps)
Millennium-style frosted glass lamps are mounted into the brickwork, either side of the door. 

(plaque)
A plaque, green writing over white, says, Getwell Clinic. 

(the door)
The door, black, with a thin long glass window above the lock, has either been kicked or crowbarred open. It is built to look more reinforced than it actually is, and a few painted-over dips and impacts in its surface suggest its been kicked in before. 

(Boot print)
A legible boot print, like a stamp, protected from the rain by the stone doorframe, is planted just below the lock.

*

Rachel [[peers through the little window inside-&gt;TUE-0900!-(GETWELL)-I-1-iv]]. 
</tw-passagedata><tw-passagedata pid="322" name="TUE-0900!-(GETWELL)-I-1-iv" tags="light" position="760,5215" size="100,100">A blank, white corridor is all she can see beyond it. A figure, impossible to make out clearly, looks out and starts walking towards the door.
Hello? a womans voice says. Can I help you?
Detective Sergeant Rachel Shaw, Rachel replies.
A detective! Glad to hear theyre taking this seriously, the woman says, reaching the door and [[opening it-&gt;TUE-0900!-(GETWELL)-I-1-v]].

</tw-passagedata><tw-passagedata pid="323" name="TUE-0900!-(GETWELL)-I-1-v" tags="light" position="902,5218" size="100,100">The woman is in her early thirties, glasses, black pullover with a peter pan collar and suit trousers.
Who am I speaking to? Rachel asks.
Mads. Receptionist, the woman says.
Well, Thom yells, running across the road after Rachel in the rain. This is an [[interesting development-&gt;TUE-0900!-(GETWELL)-I-1-vi]]. He sees Mads standing inside the door and his tone changes instantly.
</tw-passagedata><tw-passagedata pid="324" name="TUE-0900!-(GETWELL)-I-1-vi" tags="light" position="1039,5219" size="100,100">Good morning, he says. DC Thomas Clare.
Mads looks at the two of them.
Two detectives?  Youre not here because of the door, are you? she asks.
Im afraid not, Rachel says.
Do you know who did this? Thom asks, pointing to the damage.
Ah. Probably druggies.
Drug addicts did this? [[You carry medicines-&gt;TUE-0900!-(GETWELL)-I-1-vii]] in the clinic?
</tw-passagedata><tw-passagedata pid="325" name="TUE-0900!-(GETWELL)-I-1-vii" tags="light" position="1176,5222" size="100,100">Mads shakes her head.
We used to have prescription pads. Steal em and then write yourself out prescription whatever you want and go straight to the chemists. We gone all electronic to try to stop it, but this is the third break-in in a year.
[[Anything taken-&gt;TUE-0900!-(GETWELL)-I-1-viii]]? Thom asks.
</tw-passagedata><tw-passagedata pid="326" name="TUE-0900!-(GETWELL)-I-1-viii" tags="light" position="1311,5227" size="100,100">Dont think so.  She looks back and then around at them again and says, hushed and conspiratorial, at least they didnt poo inside this time.  They did that once.  On Tims desk.  Disgusting.
&quot;Some people, Thom says.
&quot;Come in. Ill go and get Harriet, she says and turns away.
They [[follow her inside-&gt;TUE-0900!-(GETWELL)-I-2-i]].

</tw-passagedata><tw-passagedata pid="327" name="TUE-0900!-(GETWELL)-I-2-i" tags="light" position="1541,5229" size="100,100">The Getwell Clinic begins in a short white painted corridor with cheap grey carpet. No paintings, no embellishments of any kind.
// Feels like the NHS//, Rachel thinks. 
The far door opens into a [[reception room-&gt;TUE-0900!-(GETWELL)-I-2-ii]]. 
</tw-passagedata><tw-passagedata pid="328" name="TUE-0900!-(GETWELL)-I-2-ii" tags="light" position="1666,5230" size="100,100">This is painted soothing neutral colours, has a few mid-century modern chairs placed beneath a frosted window hiding an uninspiring view of the outside bins. 
A series of paintings on the wall, ones that Thom immediately rates as minimalist travesties of blue and white with gold fudged in hang, in poor frames, at head height.  
There are also some willow branches in large silver vases, are leaned up against the wall. 
A cheaply made high desk stands in front of the receptionists area. 
Ever the aesthete, Thom finds it hard not to curl his lip. 
A door at the back of the room, ajar, leads to what looks like a [[therapists room-&gt;TUE-0900!-(GETWELL)-I-2-iii]].
</tw-passagedata><tw-passagedata pid="329" name="TUE-0900!-(GETWELL)-I-2-iii" tags="light" position="1817,5237" size="100,100">Mads follows the detectives eyes to the room at the back.
Thats Tims office. He isnt in yet. Let me just tell Harriet youre here... she adds, with a sidelong glance, Can I tell her what its about?
Rachel shakes her head. The two detectives wait as Mads leaves, and then they hear two muffled voices talking in hushed tones next door, followed by movement.
A bright-eyed woman in her early fifties walks into the room.
Good morning detectives, she says. Im Harriet Fielding. Shall we go to my [[office-&gt;TUE-0900!-(GETWELL)-I-3-i]]?
</tw-passagedata><tw-passagedata pid="330" name="TUE-0900!-(GETWELL)-I-3-i" tags="light" position="2080,5242" size="100,100">Harriets office looks like a doctors room, only ten percent cosier. She sits at her office chair and beckons them to sit.
Thom looks around.
There are two chairs, the same kind of mid-century modern ones that were in the reception, along with a green sofa pushed against the wall, beside a cherry coffee table with a large, conspicuous tissue box on it as well as a bowl with a few tangerines in it.
Behind Harriet, theres a desk with a computer monitor surrounded by loose papers, with a few [[print-outs-&gt;TUE-0900!-(GETWELL)-I-3-ii]] blu-tacked to the wall beside it.
</tw-passagedata><tw-passagedata pid="331" name="TUE-0900!-(GETWELL)-I-3-ii" tags="light" position="2207,5246" size="100,100">Harriet looks at Thom taking in the room with a little, amused smile.
Youre looking for the leather chaise longue and the venetian blinds?
Thom shrugs. Ive never been in a psychiatrists office before, he admits, and [[sits down-&gt;TUE-0900!-(GETWELL)-I-3-iii]].
</tw-passagedata><tw-passagedata pid="332" name="TUE-0900!-(GETWELL)-I-3-iii" tags="light" position="2331,5244" size="100,100">So, Harriet says, immediately taking charge. Call me Harriet. I presume this is about a patient. Whats happened?
Actually, no, Rachel replies. Its about your colleague, the other psychiatrist who works here.
Timon? Is he okay?
Im very sorry to tell you, Harriet. Mister Rutherford was found dead, early this morning.
Harriet looks at them both, and then frowns, confused, with a baffled half-smile you might give to someone who has said something that makes [[no sense whatsoever-&gt;TUE-0900!-(GETWELL)-I-3-iv]].
</tw-passagedata><tw-passagedata pid="333" name="TUE-0900!-(GETWELL)-I-3-iv" tags="light" position="2463,5247" size="100,100">Im sorry..? Harriet says, and tails off.
He was found dead in Wytham Wood, just a few miles from his home.
Harriet pulls herself back suddenly, like shes just smelt something bad, and then puts her hand to her mouth, and turns away from them both.
Were you two close? Rachel asks.
Harriets eyes, glassy and a little wet, do not look round.  She doesnt answer for a moment.  
Yes, she says, gaining control of the wavering in her breath and pre-emptively wiping away a single tear. Yes, we were good friends. What happened? Some kind of accident?
Im afraid that [[it doesnt look that way-&gt;TUE-0900!-(GETWELL)-I-3-v]], Rachel says.
</tw-passagedata><tw-passagedata pid="334" name="TUE-0900!-(GETWELL)-I-3-v" tags="light" position="2590,5254" size="100,100">Oh, God, Harriet says, and rubs her temples. He didnt suffer? He wasnt...
...he wasnt what, Harriet? Thom asks.  Silence.   Harriet breathes in deeply.
...he wasnt attacked by a patient, was he?
We dont know very much yet. Were hoping you can help us.
Harriet nods and stands.
Give me a second, she says, and [[walks out of the room-&gt;TUE-0900!-(GETWELL)-I-3-vi]], leaving Thom and Rachel to look at one another bemusedly.

</tw-passagedata><tw-passagedata pid="335" name="TUE-0900!-(GETWELL)-I-3-vi" tags="light" position="2724,5251" size="100,100">Outside, they hear Harriet telling Mads the receptionist that Timon has died, and that she must cancel all of the appointments for the day, both hers and Timons. Then she goes to the bathroom, and after a couple of minutes, returns to them, red-eyed, very sad and very serious.
[[What can I do to help?-&gt;TUE-0900!-(GETWELL)-I-4-i]] she asks.
</tw-passagedata><tw-passagedata pid="336" name="TUE-0900!-(GETWELL)-I-4-i" tags="light" position="3110,5260" size="100,100">First of all, Mister Rutherfords wife, Joanne, said that he was here last night working late. Can you confirm that?

Harriet shakes her head. He was here when I left, at around seven. I was going out to the Oxford Playhouse. I asked Timon if he wanted to join meI had a spare ticketbut he said that he couldnt. I called a girlfriend and [[we went together-&gt;TUE-0900!-(GETWELL)-I-4-ii]] instead. 
</tw-passagedata><tw-passagedata pid="337" name="TUE-0900!-(GETWELL)-I-4-ii" tags="light" position="3271,5261" size="100,100">Harrient then adds, I dont think Timon planned to stay late, though. Maybe he went out to the building site. Hed been doing that a fair bit, recently.
What building site? Rachel asks.
Hed been working with the council on a new facility outside Botley. Converting an old farm house into a safe house of sorts for young people. There have been a lot of delays in the building and funding. He might have gone out there.
You have the [[address-&gt;TUE-0900!-(GETWELL)-I-4-iii]]?
Mads will give it to you.

</tw-passagedata><tw-passagedata pid="338" name="TUE-0900!-(GETWELL)-I-4-iii" tags="light" position="3408,5265" size="100,100">What play did you go to see? Thom asks.
The Misanthrope, Harriet says.
&quot;Thats old, isnt it?  French?  Harriet nods in response.  Good?
Oh, it was a student production and translation. The boy who played Alceste was quite charismatic.
Then you went home?
No, we went for a [[drink-&gt;TUE-0900!-(GETWELL)-I-4-iv]]. 
</tw-passagedata><tw-passagedata pid="339" name="TUE-0900!-(GETWELL)-I-4-iv" tags="light" position="3544,5267" size="100,100">&quot;Where did you go? Thom asks.
&quot;The White Horse.
Now, thats a good pub, Thom says appreciatively. Though I havent been in ages. They still do, ah, Wayland Smithy?
I think so.
I can never work out if I like that beer or not, Thom says.
So, you went there with your friend, Rachel interrupts.
Yes, we hadnt caught up in a while, Harriet says. Her name is Miranda. You probably want her details?
Cant hurt, Thom says, then decides to [[change tack-&gt;TUE-0900!-(GETWELL)-I-4-v]].
</tw-passagedata><tw-passagedata pid="340" name="TUE-0900!-(GETWELL)-I-4-v" tags="light" position="3683,5270" size="100,100">Wheres home, by the way, Harriet?
Eynsham Lock, she says, by the canal. Visiting the Lock House is what inspired Timon to look in the area, I think.
So you were neighbours?
Not really.
What time did you get home?
Miranda and I stayed till last call. I maybe got back, half past twelve? she replies.
And then you come in this morning to find the place [[broken into-&gt;TUE-0900!-(GETWELL)-I-4-vi]]? Thom says.
</tw-passagedata><tw-passagedata pid="341" name="TUE-0900!-(GETWELL)-I-4-vi" tags="light" position="3818,5275" size="100,100">Yes, we were waiting for the police when you arrived. Not that they seem to have taken anything, but since we got rid of our prescription pads, theres not much to take, unless you want a seven year-old computer.
Youre sure nothing is missing?
No, we havent checked everything yet. But certainly nothing looks missing.
What time was the break in?
I dont know.
Well, when did the alarm go off?
[[It didnt.-&gt;TUE-0900!-(GETWELL)-I-4-vii]]
</tw-passagedata><tw-passagedata pid="342" name="TUE-0900!-(GETWELL)-I-4-vii" tags="light" position="3953,5277" size="100,100">Rachel and Thom look at one another.
Was it turned off, or was it never turned on?
Im afraid I dont know how to check.
Rachel looks at Thom and asks him quietly Whove we got whose good at that stuff?
Sam. Samll check that proper.
Lets get Sam down here later. The alarm not being on means the door could have been broken last night, while he was still here.  Lets go and look at Mister Rutherfords office before continuing... Rachel says, and they stand.
Should I come with you? Harriet asks.
Rachel [[nods-&gt;TUE-0900!-(GETWELL)-I-5-i]], sombrely.
</tw-passagedata><tw-passagedata pid="343" name="TUE-0900!-(GETWELL)-I-5-i" tags="light" position="4262,5277" size="100,100">The two detectives walk through the reception. Harriet puts a pair of latex gloves on, and pushes the door to Timons office open.

After pausing on the threshold, she walks carefully into the room.
I dont see any signs of a struggle, she says to Thom.

Thom enters the room behind her, scans the room briefly and nods assent.
Harriet stands at the door, watching them [[work-&gt;TUE-0900!-(GETWELL)-I-5-ii]].
</tw-passagedata><tw-passagedata pid="344" name="TUE-0900!-(GETWELL)-I-5-ii" tags="light" position="4399,5278" size="100,100">The room 
looks a little more like a GPs than Harriets. 

No sofa 
here, just a couple of chairs. 

Bookshelf
Against the wall, a bookshelf filled with psychiatry and sociology manuals, and a mess of old technology bits, dongles, old usb and phone chargers, arranged out on the top of bookshelf.

You dont notice anything missing, tampered with, theres nothing dented or damaged? Rachel asks Harriet.
[[No, Harriet replies.-&gt;TUE-0900!-(GETWELL)-I-5-iii]]
</tw-passagedata><tw-passagedata pid="345" name="TUE-0900!-(GETWELL)-I-5-iii" tags="light" position="4540,5284" size="100,100">Rachel walks around the desk and points at the bottom drawer, slightly open.
What did he keep in his desk?
Stationary, reports, nothing special, Harriet says.
Theres no monitor on his desk, Rachel says.
He had a laptop, Harriet says.
Laptop, Rachel and Thom both say at the same time, looking at one another.
We havent found a [[laptop-&gt;TUE-0900!-(GETWELL)-I-5-iv]], Thom tells Harriet.
</tw-passagedata><tw-passagedata pid="346" name="TUE-0900!-(GETWELL)-I-5-iv" tags="light" position="4680,5282" size="100,100">He kept it with him, most of the time, Harriet says. In a leather messenger bag.
Colour? Thom asks.
Brown, Harriet replies.
Like his wallet?
Yes, he went to Cape Town a few years ago. Came back very enthusiastic about some of the places he visited, including a tannery. I think he got some shoes and a wallet and a laptop bag. Brought me back a little cover for my phone out of ostrich leather.
Thats nice, Rachel says.
He was always, well, very thoughtful, Harriet says.
The three look at each other.
Do I need to shut down the clinic? Harriet asks. Could Timon have been taken from here?..
Rachel takes a breath and [[thinks-&gt;TUE-0900!-(GETWELL)-I-5-v]].
</tw-passagedata><tw-passagedata pid="347" name="TUE-0900!-(GETWELL)-I-5-v" tags="light" position="4801,5294" size="100,100">Were going to seal this room, get forensics in. Make sure. But as far as we understand, Mister Rutherford died in some kind of violent struggle. That doesnt seem consistent with what we see here, does it, Thom?
Its a very strange coincidence, Thom says. and well definitely want to print the room and check for damage, any blood. But it looks like a standard break-in, or even just a bit of mindless teenage vandalism. Well have to wait for the experts to step in.
In the meantime, lets go back to your [[office-&gt;TUE-0900!-(GETWELL)-I-6-i]], Rachel says.
</tw-passagedata><tw-passagedata pid="348" name="TUE-0900!-(GETWELL)-I-6-i" tags="light" position="5137,5298" size="100,100">Harriet and the two detectives walk back into her office. A few moments later, Mads, who looks very serious now, comes in with a tray and some cups of tea.
I thought you might like... she says, trailing off.

Thank you, Thom says. They wait for her to [[leave-&gt;TUE-0900!-(GETWELL)-I-6-ii]], which she does, a little reluctantly.
</tw-passagedata><tw-passagedata pid="349" name="TUE-0900!-(GETWELL)-I-6-ii" tags="light" position="5296,5301" size="100,100">Ive got a small detail to ask you, Thom says, maybe silly. Did Mister Rutherford go by Tim or by Timon?

Most people called him Tim, but I always called him Timon. Thats his name. He got teased a lot about it when he was at school, so he let people call him whatever they liked. But life it too short to go around under an [[alias-&gt;TUE-0900!-(GETWELL)-I-6-iii]], dont you think?
</tw-passagedata><tw-passagedata pid="350" name="TUE-0900!-(GETWELL)-I-6-iii" tags="light" position="5423,5298" size="100,100">And you both are adolescent forensic psychiatrists? Rachel asks, referring to her notes.

Were both psychiatrists who specialise in adolescent conditions that disrupt the ability of children and young adults to function healthily. I tend to concentrate on ADHD and OCD conditions, forensic psychiatry was what Timon leant into, though we crossed over somewhat.

Violent young men, was how his wife described it, Rachel says.

Harriets eyebrows raise involuntarily in disdain, as she thinks, //well, she would, [[wouldnt she?-&gt;TUE-0900!-(GETWELL)-I-6-iv]]//
</tw-passagedata><tw-passagedata pid="351" name="TUE-0900!-(GETWELL)-I-6-iv" tags="light" position="5550,5312" size="100,100">We founded this clinic, Harriet says, because we both saw the number of young people whose lives were being permanently ruined by treatable mental illness. It can take a single violent incident for a young person to be misdiagnosed, medicated, even sectioned. Sometimes that path is inevitable. Mostly it isnt.  Think about you, she says, nodding to Thom.
Did you get into any fights when you were fourteen?
[[One or two-&gt;TUE-0900!-(GETWELL)-I-6-v]], Thom says.
</tw-passagedata><tw-passagedata pid="352" name="TUE-0900!-(GETWELL)-I-6-v" tags="light" position="5692,5308" size="100,100">Imagine you hit a boy who was bullying you: and he falls over, breaks a wrist. Names you in the hospital. You get arrested. Sent to see a psychiatrist. 
The psychiatrist asks you about the things that make you angry. Teachers, your parents. He asks you about your most painful memory. Asks you if youve ever thought about hurting yourself or someone else. 
Youre honest with him, and next thing you know, hes diagnosed you as a potential antisocial personality disorder, and youve been prescribed thorazine and zanax  and weekly therapy sessions as a condition of going [[back to school-&gt;TUE-0900!-(GETWELL)-I-6-vi]].
</tw-passagedata><tw-passagedata pid="353" name="TUE-0900!-(GETWELL)-I-6-vi" tags="light" position="5825,5310" size="100,100">&quot;Because the drugs make you feel awful, you stop taking them, and when you get picked on at school for being crazy and fight back a second time, youre expelled from school, and sectioned to a mental health facility, all before your fifteenth birthday. If that happened to you, do you think you would be a police detective today?
Thom shrugs. Probably not, he says.
This happens, Harriet says. More than youd think.  [[We wanted to help-&gt;TUE-0900!-(GETWELL)-I-6-vii]].

</tw-passagedata><tw-passagedata pid="354" name="TUE-0900!-(GETWELL)-I-6-vii" tags="light" position="5955,5310" size="100,100">And how do you help, Harriet? Rachel asks.
By talking, mostly, Harriet says. By making these young people understand that most of what theyre feeling is okay. By reframing their suffering. Although its not very fashionable to say, we dont have a very healthy attitude towards suffering, and we teach our unhealthy attitude to our children, and it hurts them.
How do you [[mean-&gt;TUE-0900!-(GETWELL)-I-6-viii]]?
</tw-passagedata><tw-passagedata pid="355" name="TUE-0900!-(GETWELL)-I-6-viii" tags="light" position="6077,5315" size="100,100">Life is a process of scarring and healing. Scarring is more or less inevitable. There is no fairness or justice in suffering, it just is. 
&quot;It comes from people, it comes from circumstances, it comes from inanimate objects, sometimes it comes from within ourselves. 
&quot;Obsessing over the unfairness of things that caused you to suffer can easily become a form of mental illness in itself. 
&quot;Its horrible to say, but PTSD can be amplified and it can be created, if you want to be injured bad enough. 
&quot;When youre suffering, you can focus on the injury and who gave it to you, or you can focus on recovery, and how to get beyond suffering. Those are really your only [[two choices-&gt;TUE-0900!-(GETWELL)-I-6-ix]]. 
</tw-passagedata><tw-passagedata pid="356" name="TUE-0900!-(GETWELL)-I-6-ix" tags="light" position="6218,5315" size="100,100">&quot;Most of us, secretly, want to be hurt. We want to have enemies and be wronged. It makes our lives easier to understand, it makes our successes seem grander, it explains away all our own faults and misbehaviours. 
&quot;For most adults, the way you think about yourself and the world is more difficult to fight than a serious addiction. And young people, whose internal narratives are not yet set, whose thinking habits are still plastic, whose choices have mainly been set by other people, can still change to healthier patterns, can have [[better lives-&gt;TUE-0900!-(GETWELL)-I-6-x]].
The detectives say nothing. Outside, the rain grows heavier.
</tw-passagedata><tw-passagedata pid="357" name="TUE-0900!-(GETWELL)-I-6-x" tags="light" position="6352,5313" size="100,100">I dont know if Ill be able to do it all on my own, she says. Harriet looks away, outside the window into the rain, and her eyes begin to get wet again.
He was a very decent man, she says. He deserved better than this. Can you tell me how he died?
Thom is about to answer her, but Rachel shoots him a glance.
Were not sure yet, Rachel says, were waiting for a [[coroners report-&gt;TUE-0900!-(GETWELL)-I-6-xi]].
</tw-passagedata><tw-passagedata pid="358" name="TUE-0900!-(GETWELL)-I-6-xi" tags="light" position="6493,5318" size="100,100">Theres another moment of silence. Then Rachel says, I think its time to ask you, Harriet. When we told you the Timon had been killed, you asked whether it was one of his patients. That makes me wonder if there was someone you believe might be willing to hurt him. Can you tell me who?

Harriet [[sighs-&gt;TUE-0900!-(GETWELL)-I-6-xii]].
</tw-passagedata><tw-passagedata pid="359" name="TUE-0900!-(GETWELL)-I-6-xii" tags="light" position="6622,5319" size="100,100">I dont think anyone would try to kill Timon. Not intentionally. But to fight him? Physically hurt him? Yes. Him and me both. 
&quot;Were responsible for parents losing their children. Were responsible for young people going into care, into young offenders institutes, for assigning diagnoses that will affect them for the rest of their lives. 
&quot;We always try to do the right thing. And thats something some people will never forgive us for. But when it comes down to it, I can think of [[three people-&gt;TUE-0900!-(GETWELL)-I-6-xiii]] you should talk to.
</tw-passagedata><tw-passagedata pid="360" name="TUE-0900!-(GETWELL)-I-6-xiii" tags="light" position="6755,5319" size="100,100">Who are they? Rachel asks.
But there is a sudden knock at the door, and before any of them can respond, Mads has opened the door and peered her head through.
What is it, Mads, Harriet asks, as the detectives shoot her annoyed stares.
Im so sorry to interrupt, Mads says, but Elsa Sheppherd has arrived for her nine thirty and shes demanding to know why she cant see Mr Rutherford for their normal session. I dont know what to [[tell her-&gt;TUE-0900!-(GETWELL)-I-6-xiv]].

</tw-passagedata><tw-passagedata pid="361" name="TUE-0900!-(GETWELL)-I-6-xiv" tags="light" position="6885,5321" size="100,100">Harriet nods, and looks at the detectives.
Youll have to excuse me for a couple of minutes, she says, and then to Mads, tell her to come in.
Thom and Rachel stand as a girl of about twelve comes to the door with her chin high, looking like shes just about to tell the manager what she thinks of the place.
Hello, Thom says, but Elsa just nods back. She knows coppers when she sees them, and she [[doesnt like them-&gt;TUE-0900!-(GETWELL)-I-6-xv]].
</tw-passagedata><tw-passagedata pid="362" name="TUE-0900!-(GETWELL)-I-6-xv" tags="light" position="7012,5322" size="100,100">Rachel and Thom file out of the room, struck by the girl who has such assurance. Shes both quite childish and quite adult: with her bobbed hair and sharp eye, she gives the impression of a tomboy from an old-fashioned childrens story.
Hello Elsa, Harriet says. Please come in and shut the door.
Elsa turns, looks at both detectives, and [[shuts the door-&gt;TUE-0900!-(GETWELL)-I-6-xvi]] on them.
</tw-passagedata><tw-passagedata pid="363" name="TUE-0900!-(GETWELL)-I-6-xvi" tags="light" position="7144,5320" size="100,100">[[ELSA-&gt;TUE-0900!-(GETWELL)-IIa-i]] sits down.
[[THE DETECTIVES-&gt;TUE-0900!-(GETWELL)-IIb-i]] stand in the corridor, taking stock, talking quietly.</tw-passagedata><tw-passagedata pid="364" name="TUE-0900!-(GETWELL)-IIa-i" tags="light" position="7301,5268" size="100,100">Elsa sits down.
This doesnt feel good, she thinks. Already, the horrible tint of the day she doesnt ever like to think about comes back to her, as if the same feeling is hanging in the air. The day she came home to find her father in tears.
Wheres Timon? she asks.
Im very sorry, Elsa. Timon died last night.
What? Elsa says. No. No, thats wrong. Thats not true. He was here last week! [[What are you talking about?-&gt;TUE-0900!-(GETWELL)-IIa-ii]] 
</tw-passagedata><tw-passagedata pid="365" name="TUE-0900!-(GETWELL)-IIb-i" tags="light" position="7289,5397" size="100,100">Rachel and Thom stand in the corridor, taking stock, talking quietly.
What do you think? Thom asks.
No immediate connection between the death and the break-in here, she says, except that they both look so bloody fishy.
Maybe they were after the laptop.
Rachel shrugs, the way she always does when Thom begins to take flight into the aerial acrobatics of [[speculation-&gt;TUE-0900!-(GETWELL)-IIb-ii]] .
</tw-passagedata><tw-passagedata pid="366" name="TUE-0900!-(GETWELL)-IIa-ii" tags="light" position="7434,5272" size="100,100">I know this is very difficult to take in. I dont want to believe it either, but its true.
Youre lying! Elsa says. She stands up and kicks the coffee table as hard as she can. The bowl with the tangerines fall on the floor.
Please dont do that, Harriet asks sadly. Timon made that table, he wouldnt like you kicking it.
But I need him, Elsa says, turning to her, her eyes filling with tears. We had a plan so I could move back with my Dad.
Ill help you every way I can, I promise, Harriet replies.
Was it cancer? Elsa asks, choking back a sob.
Harriet shakes her head, her own eyes going watery once more.
He died in the woods, we dont know how or why yet.
The woods? Elsa asks. How would he [[die in the woods-&gt;TUE-0900!-(GETWELL)-IIa-iii]] ?
</tw-passagedata><tw-passagedata pid="367" name="TUE-0900!-(GETWELL)-IIa-iii" tags="light" position="7569,5272" size="100,100">Harriet says nothing, but in her eyes, Elsa sees that the answer cant be a good one.
Someone hurt him? Someone killed him? Who? Elsa shouts.
This is very upsetting, Elsa, but you have to stay calm.
No! Elsa shouts. She breathes heavily, angrily. She wants to break something. But then she thinks about what will happen if she does. Elsa steadies her breathing, sits back down and wipes her eyes.
Did they [[catch who did it-&gt;TUE-0900!-(GETWELL)-IIa-iv]]? she asks.
</tw-passagedata><tw-passagedata pid="368" name="TUE-0900!-(GETWELL)-IIa-iv" tags="light" position="7701,5274" size="100,100">We really dont know anything yet, Harriet says. It might have been an accident.
//Wasnt no accident, //Elsa thinks.
Lets book a new appointment for you to see me as soon as possible.
Elsa nods, thinking.
Harriet looks at her calendar. //Its full for the next two weeks. How on earth am I going to take on Timons patients?// she wonders.
Ill open the clinic on Saturday morning, Harriet says. And Ill see you then. In the meantime, has Timon asked you to do [[anything-&gt;TUE-0900!-(GETWELL)-IIa-v]]?
</tw-passagedata><tw-passagedata pid="369" name="TUE-0900!-(GETWELL)-IIa-v" tags="light" position="7850,5279" size="100,100">Elsa shrugs.
My Journal.
Can I see it?
Elsa shakes her head.
Didnt bring it, she lies.
Okay.  Well, please continue your journal.  And bring it, next time.
Elsa nods.
Elsa, maybe you should stay for a while.  We could talk after the detective have gone?
Elsa thinks for a moment.  She looks at Harriet and purses her lips.
I&#39;m okay.  I had people die before, she says.  Better get to school.  Inside, she thinks, //I hate it when they pretend to be my Mum.//
See you on [[Saturday-&gt;TUE-0900!-(GETWELL)-III-1-i]], Elsa says, and gets up to leave.

</tw-passagedata><tw-passagedata pid="370" name="TUE-0900!-(GETWELL)-IIb-ii" tags="light" position="7438,5401" size="100,100">Harriet. Seems more upset than the wife, dont you think? Thom says to Rachel.
Rachel nods absent-mindedly. Peoples reactions are different, she says.
They hear a thump and a crash through the door, and a girls voice yelling, No!
Rachel raises her eyebrows.
Bloody hell, Thom says.
What did you think about her little speech about young people and [[suffering-&gt;TUE-0900!-(GETWELL)-IIb-iii]] ? Rachel asks.
</tw-passagedata><tw-passagedata pid="371" name="TUE-0900!-(GETWELL)-IIb-iii" tags="light" position="7573,5404" size="100,100">I believed her. I think they do good work here. You?
Seemed a bit bleak to me, she says.  I dont know if Id want my kids being told that life sucks and theyve just got to get used to pain.
&quot;Yeah, but, Thom replies, its kind of true, isnt it?
&quot;Oh, Jesus, Rachel says.  You probably think we should tell Toddlers that Santa Claus isnt real.
&quot;Well, I mean, Thom says.  Technically, telling children that they have to be good to get presents from a magical old man who lives in the sky is basically a kind of fraud
Rachel shakes her head in mock disbelief.  They hear another [[angry yell-&gt;TUE-0900!-(GETWELL)-IIb-iv]]  behind Harriets door.
</tw-passagedata><tw-passagedata pid="372" name="TUE-0900!-(GETWELL)-IIb-iv" tags="light" position="7706,5410" size="100,100">Building site, Rachel says, suddenly.
What about it?
You know what Ive often seen on building sites?
Thom shakes his head, not following her drift.
Blue rope.
Bloody hell, skipper. Youre right. Shall we go there next?
Rachel nods.
Its the only link weve got to a possible [[murder location-&gt;TUE-0900!-(GETWELL)-IIb-v]] . And its raining. We should get there as soon as possible.
</tw-passagedata><tw-passagedata pid="373" name="TUE-0900!-(GETWELL)-IIb-v" tags="light" position="7857,5412" size="100,100">Ill get the address from the receptionist.
Oh. Mads? The one who keeps looking at you? Rachel asks.
Shut up, Thom says, and goes through into the reception area.
Rachel looks around, thinking. Theres a big hole in the victims timeline, which she doesnt like. Seven to midnight, unaccounted for. //Where did you go, Timon?// she wonders.

The door to Harriets office opens, and Rachel [[looks around-&gt;TUE-0900!-(GETWELL)-III-1-i]].

</tw-passagedata><tw-passagedata pid="374" name="TUE-0900!-(GETWELL)-III-1-i" tags="light" position="8043,5333" size="100,100">Elsa walks out, red-faced, wiping her eyes. This was the one place she could come to where there was a plan to make things better. 
And now, thats gone. 
She stops and [[looks up at Rachel-&gt;TUE-0900!-(GETWELL)-III-1-ii]].
</tw-passagedata><tw-passagedata pid="375" name="TUE-0900!-(GETWELL)-III-1-ii" tags="light" position="8172,5337" size="100,100">Youre in charge of the investigation, then? she asks, calmly but with a certain cockiness.
I am, Rachel says, amused by the unvarnished sureness of this little girl. Detective Sergeant Rachel Shaw.
Thom walks back from the reception with a piece of paper.
Introduce yourself, Thom, Rachel says.
Im DC Thomas Clare, he says. Whats your [[name-&gt;TUE-0900!-(GETWELL)-III-1-iii]]?
</tw-passagedata><tw-passagedata pid="376" name="TUE-0900!-(GETWELL)-III-1-iii" tags="light" position="8310,5338" size="100,100">Elsa Sheppherd, the girl says.
Mister Rutherford was your therapist?
Elsa shakes her head. He was my friend.
She looks at them both as Harriet comes back to the door.
Detectives? she says, and they walk back to her office.
Elsa watches them go. //Those two clowns better find out who killed Timon,// she thinks. //Or Ill go off and Ill do it myself.//
She [[walks out the front-&gt;TUE-0900!-(GETWELL)-III-1-iv]] and on her way to the bus.
</tw-passagedata><tw-passagedata pid="377" name="TUE-0900!-(GETWELL)-III-1-iv" tags="light" position="8470,5345" size="100,100">In Harriets office, the two detectives walk back in, to see Harriet crouching on the floor, picking up the tangerines and resetting the coffee table.
Scrappy young lady, Rachel says.
Harriet nods. Shes very smart. In different circumstances, shed already be planning how to get into University, not on how to get out of foster home.
The detectives sit down as Harriet walks around the re-ordered coffee table and to her desk.
You were about to tell us about any particular suspects? Rachel asks.
Yes, I was. Well, I suppose we should start with that girls [[father-&gt;TUE-0900!-(GETWELL)-III-2-i]], Harriet says.
</tw-passagedata><tw-passagedata pid="378" name="TUE-0900!-(GETWELL)-III-2-i" tags="light" position="8758,5346" size="100,100">Rachel and Thom both lean forward in their chairs.
Ben Sheppherd, works in constructiona decorator or carpenter or something. Widowed, an alcoholic, no support network. 
&quot;Not a bad man, just not a very strong one. He left his daughter for days on end to go on benders. Last year, Elsa started a fire in their home, trying to make beans on toast. 
&quot;Those long sleeves she wears conceals burn scarring, all the way up both her forearms. 
&quot;Social services decided that she wasnt safe at home, she was put into care, and Timon was assigned as her therapist. He believed that Elsa would be best served getting back to her father as soon as possible, once her family environment was stable. 
&quot;Six months after the court order, he was asked to make an evaluation on both Elsa and on Ben. Timon testified that he [[didnt see enough change-&gt;TUE-0900!-(GETWELL)-III-2-ii]] to recommend that Elsa go back to Ben.

</tw-passagedata><tw-passagedata pid="379" name="TUE-0900!-(GETWELL)-III-2-ii" tags="light" position="8891,5350" size="100,100">That was last year? Thom asks.
Harriet nods. Now, anyone in their right mind would smile and nod, wait six months and try again.
Not Ben, Im guessing, Thom says.
He got drunk. He waited outside the clinic in his van, followed Timon home, then smashed his front windows, and tried to crowbar open his front door, screaming that he was going to kill him. His neighbours [[called the police-&gt;TUE-0900!-(GETWELL)-III-2-iii]].
</tw-passagedata><tw-passagedata pid="380" name="TUE-0900!-(GETWELL)-III-2-iii" tags="light" position="9024,5351" size="100,100">Lucky not to go to prison, Thom says.
Timon wouldnt press charges, Harriet says, it would have ruined Bens life, and committed Elsa to foster home forever.
So Ben hated Timon, knew where he lived, and had threatened to kill him before, in front of witnesses.
Harriet nods. Then she says, I want to be clear. Ive only seen Ben Sheppherd a couple of times. I dont think hes a killer. Hes very loud and emotional and internally, quite weak.  But he comes to mind.
Silence.
You said, [[suspects-&gt;TUE-0900!-(GETWELL)-III-2-iv]], Harriet. Are there any more?
</tw-passagedata><tw-passagedata pid="381" name="TUE-0900!-(GETWELL)-III-2-iv" tags="light" position="9160,5354" size="100,100">Yes, Harriet says. 
A current patient and an ex-patient. 
&quot;We suspected the ex-patient of breaking into here previously. 
&quot;A boy called Gavin Cox, must be sixteen or seventeen, Timon believed he had Antisocial Personality Disorder, though Gavin was smart enough to subvert it. He broke into the place to try to steal prescription pads after Timon wouldnt prescribe him adderall.   
&quot;He defecated on Timons desk.  His friend was found with the pads and ended up getting a criminal record over it, but kept silent. 
&quot;We didnt press charges but banned Gavin from our practise. The boys parents are quite wealthy, he wasnt used to any kind of any kind of consequences. We got [[broken windows and grafitti-&gt;TUE-0900!-(GETWELL)-III-2-v]] after that for about six months.
</tw-passagedata><tw-passagedata pid="382" name="TUE-0900!-(GETWELL)-III-2-v" tags="light" position="9296,5358" size="100,100">Doesnt sound like a very nice lad, but do you think he would really hurt Timon over something so small?
He was sent to us after being cautioned for beating up a homeless woman. Youll have to meet him and [[decide for yourself-&gt;TUE-0900!-(GETWELL)-III-2-vi]].
</tw-passagedata><tw-passagedata pid="383" name="TUE-0900!-(GETWELL)-III-2-vi" tags="light" position="9420,5360" size="100,100">You said there was a current patient of Timons who we should talk to?
Yes. Yes, well I need to be a little more careful as to how I talk about him, because hes a current patient. We have a duty of care to our patients, but we also have exceptions to client patient confidentiality when they begin to talk about harming themselves and others. 
&quot;The patients name is George Pencey. 
&quot;At 24, hes our oldest patient, in fact hed been seeing Timon for more than half his life, I would say Timon acting as much in an evaluative capacity as a theraputic one. I believe Georges condition would be described as, whats called, PDD-NOS.
What is that, Thom asks, like, [[autism-&gt;TUE-0900!-(GETWELL)-III-2-vii]]?
</tw-passagedata><tw-passagedata pid="384" name="TUE-0900!-(GETWELL)-III-2-vii" tags="light" position="9549,5361" size="100,100">Theres a lot of stigma attached to the term, Harriet says. In the past, George would probably have been described as having late, atypical, mild autism. But PDD-NOS basically means, well, that you dont actually meet the criteria for an autistic disorder. If you met him in the street, youd probably think he was a bit weird, rather than he had developmental issues.
Why does he come to mind? Rachel asks.
Timon didnt want to be Georges therapist any more. Both because hes much older than the rest of our patients, and as I said, George had been starting to tell Timon about fantasies or ideas that brought him to the threshold of patient confidentiality. Timon has been a long and constant presence in Georges life, and he would have been [[very, very upset-&gt;TUE-0900!-(GETWELL)-III-2-viii]] by the idea of not seeing him any more.
</tw-passagedata><tw-passagedata pid="385" name="TUE-0900!-(GETWELL)-III-2-viii" tags="light" position="9679,5363" size="100,100">Rachel looks at Thom, then at her notes.
You have addresses and contact details for these three men?
Harriet nods. Theyre all on the computer. Mads can print them out for you.
Thank you for your time this morning, Harriet, Rachel says, getting up to go. She turns towards the door, and Thom follows.
Did Joanne talk about a funeral, yet? Harriet asks.
Rachel turns and shakes her head.
No, she was still processing it all.
And... Timon. Do you think well get the chance to see him... Harriet says, and tails off.
I dont think that will happen, Im afraid, Thom says.
So it was bad, then, Harriet asks.
Rachel and Thom say nothing.
Goodbye, now, Thom says gently, and [[closes the door-&gt;TUE-0900!-(GETWELL)-III-2-ix]] to Harriets office.

</tw-passagedata><tw-passagedata pid="386" name="TUE-0900!-(GETWELL)-III-2-ix" tags="light" position="9824,5362" size="100,100">Two minutes later, the detectives run from the entrance of the clinic, through the heavy rain, to the little Ford Fiesta.
Slamming the doors, soaking once again, Thom regards the wet printouts in his hands.
Jesus Christ. Im glad Im not a psychiatrist.
Me too, Rachel agrees.
So, weve got the angry father, the little sociopath, and the young unibomber. Where do we [[start-&gt;TUE-0900!-(GETWELL)-III-2-x]]?
</tw-passagedata><tw-passagedata pid="387" name="TUE-0900!-(GETWELL)-III-2-x" tags="light" position="9989,5373" size="100,100">At the probable murder scene, before the whole thing bloody washes away, Rachel says. Remember the blue rope.  Its the only connection we have to a possible murder location.  Where was that building site?
Godstow, Thom says, checking his piece of paper.
On we go, then, Rachel says.
Yes, Skip, Thom replies, and the car [[sets off in the rain-&gt;TUE-0930!-(FARM)-I-TITLE]].
</tw-passagedata><tw-passagedata pid="388" name="TUE-0930!-(FARM)-I-TITLE" tags="light" position="82,5423" size="100,100">(transition: &quot;dissolve&quot;)+(transition-time: 2s)[ This is the end of the text preview.

If you&#39;d like to navigate back to other parts of the story, here are shortcuts:

[[6:00AM-&gt;TUE-0600!-TITLE-CHOICE]]: //back to the start.//

&amp;emsp; &amp;emsp; &amp;emsp;[[Choice-&gt;TUE-0600!-(WOODS)-I-3-iv(AUDIO)]]: //watch the ravens closely, or discover the light above us? (audio version).//

[[6:30AM-&gt;TUE-0630!-TITLE]]: //the detectives examine the crime scene.//

[[7:00AM-&gt;TUE-0700!-(TITLE)]]: //choose to follow neighbour Patrick West back to Eynsham, or the Detectives along the clue trail.//

[[7:30AM-&gt;TUE-0730!-(KEEPERS)-I-TITLE]]: //the Detectives interview the victim&#39;s wife, Joanne.//

&amp;emsp; &amp;emsp; &amp;emsp;[[Choice-&gt;TUE-0730!-(KEEPERS)-I-4-CHOICE]]: //stay with Rachel and Joanne, or follow Thom as he brings in the family support officer?//

&amp;emsp; &amp;emsp; &amp;emsp;[[Choice-&gt;TUE-0730!-(KEEPERS)-I-6-1-vi]]: //stay with Thom and Rachel to hear the end of their conversation with Joanne, or go to discover that the narrator can communicate with our old dog, Fred?//

[[8:30AM-&gt;TUE-0830X-CHOICE]]: //follow the Detectives as they travel into Oxford, or stay with Joanne and see what she does next?//

[[9:30AM-&gt;TUE-0900!-(GETWELL)-I-TITLE]]: //the Detectives go to the victim&#39;s place of work, interview his colleague Harriet, and meet one of his young clients, Elsa.//

&amp;emsp; &amp;emsp; &amp;emsp;[[Choice-&gt;TUE-0900!-(GETWELL)-I-6-xvi]]: //watch Elsa and Harriet&#39;s session, or stay with the Detectives?//

]</tw-passagedata><tw-passagedata pid="389" name="TUE-0600!-TITLE" tags="light" position="234,3191" size="200,100">(set: $transCounter to 0)\
|sample1)[(transition: &quot;dissolve&quot;)+(transition-time: 2s)[#TUESDAY.]]
|sample2)[(transition: &quot;dissolve&quot;)+(transition-time: 2s)[ [[
#6:00AM-&gt;TUE-0600!-(WOODS)-I-1-i]] ]]

{
	(live: 1s)[
		(set: $transCounter to it + 1)

		(if: $transCounter is 1)[
			(show: ?sample1)
		]
		(else-if: $transCounter is 2)[
			(show: ?sample2)
		]
		(else:)[
			(stop:)
		]
	]
}

</tw-passagedata><tw-passagedata pid="390" name="TUE-0600!-TITLE(AUDIO)" tags="light" position="250,2785" size="200,100">[[&lt;img src=&quot;./images/600AM.png&quot; height=50% width=50%&gt;-&gt;TUE-0600!-(WOODS)-I-1-i(AUDIO)]] \
(transition: &quot;dissolve&quot;)+(transition-time: 2s)[ [[
#PROLOGUE-&gt;TUE-0600!-(WOODS)-I-1-i(AUDIO)]] ]
(track: &quot;600-I-TITLE-MUSIC&quot;, &quot;play&quot;)
(live:4s)[(stop:)(track: &quot;600-1-I-TITLE&quot;, &quot;play&quot;)]

	
</tw-passagedata><tw-passagedata pid="391" name="TUE-0600!-(WOODS)-I-1-i(AUDIO)" tags="dark" position="500,2790" size="100,100">{(track: &quot;600-I-1-i-MUSIC&quot;, &quot;play&quot;)}
{(live: 3s)[(stop:) (track: &quot;600-I-1-i&quot;, &quot;play&quot;)]}

&lt;!-- text --&gt;
(text-color: &quot;transparent&quot;)[We are born into darkness.  But, not the normal kind.]

(live: 5s)[(transition: &quot;dissolve&quot;)+(transition-time:2s)[(text-color: &quot;transparent&quot;)[Empty, black, absolute silence.  No warmth.  No feeling at all.  A vacuum of everything.](stop:)]]

(live: 36s)[(transition: &quot;dissolve&quot;)+(transition-time:2s)[(text-color: &quot;transparent&quot;)[What are we?  Where are we?  How long have we been here?

It was so hard to think, and what was there to remember?]

[[ Nothing.-&gt;TUE-0600!-(WOODS)-I-1-iia(AUDIO)]]

[[ Something...-&gt;TUE-0600!-(WOODS)-I-1-iib(AUDIO)]]](stop:)]

</tw-passagedata><tw-passagedata pid="392" name="TUE-0600!-(WOODS)-I-1-iia(AUDIO)" tags="dark" position="617,2793" size="100,100">{(track: &#39;600-I-1-i&#39;, &#39;stop&#39;) (track: &#39;600-I-1-i-MUSIC&#39;, &#39;fadeout&#39;, 5) (track: &quot;600-I-1-iia-MUSIC&quot;, &quot;play&quot;)}
{(live: 3s)[(stop:)(track: &quot;600-I-1-iia&quot;, &quot;play&quot;)]}
(set: $transCounter to 0) 
(text-color: &quot;transparent&quot;)[There was nothing to remember.]

|sample1)[(transition: &quot;dissolve&quot;)[(text-color: &quot;transparent&quot;)[In this place, no-one could see, or hear, or feel.]]] 
|sample2)[(transition: &quot;dissolve&quot;)[(text-color: &quot;transparent&quot;)[
Except for one single, inescapable sensation.]]] 
|sample3)[(transition: &quot;dissolve&quot;)[(text-color: &quot;transparent&quot;)[There is something so wrong here.]]] 
|sample4)[(transition: &quot;dissolve&quot;)[[[//There is something so wrong here //.-&gt;TUE-0600!-(WOODS)-I-1-iii(AUDIO)]]]]

{ (live: 5s)
[(set: $transCounter to it + 1)
	(if: $transCounter is 1)[
		(show: ?sample1)
	]
	(else-if: $transCounter is 2)[
		(show: ?sample2)
	]
	(else-if: $transCounter is 3)[
		(show: ?sample3)
	]
	(else-if: $transCounter is 4)[
		(show: ?sample4)
	]
	(else:)[
		(stop:)
	]
]
}</tw-passagedata><tw-passagedata pid="393" name="TUE-0600!-(WOODS)-I-1-iii(AUDIO)" tags="dark" position="739,2785" size="100,100">{(track: &#39;600-I-1-iia&#39;, &#39;stop&#39;) (track: &#39;600-I-1-iib&#39;, &#39;stop&#39;) (track: &quot;600-I-1-iii-MUSIC&quot;, &quot;play&quot;)}
{(live: 3s)[(stop:)(track: &quot;600-I-1-iii&quot;, &quot;play&quot;)]}
(set: $transCounter to 0) 
(text-color: &quot;transparent&quot;)[What are we being hidden from?]
|sample1)[(transition: &quot;dissolve&quot;)[(text-color: &quot;transparent&quot;)[ What is behind the darkness?]]] 
|sample2)[(transition: &quot;dissolve&quot;)[(text-color: &quot;transparent&quot;)[What is creating and containing these thoughts?  This indeterminate need to understand?]]] 
|sample3)[(transition: &quot;dissolve&quot;)[(text-color: &quot;transparent&quot;)[This fear that ][[//something terrible has happened?//-&gt;TUE-0600!-(WOODS)-I-1-iv(AUDIO)]]]] 

{ (live: 6.5s)[ (set: $transCounter to it + 1)
(if: $transCounter is 1)[
		(show: ?sample1)
	]
	(else-if: $transCounter is 2)[
		(show: ?sample2)
	]
	(else-if: $transCounter is 3)[
		(show: ?sample3)
	]

	(else:)[
		(stop:)
	]
]
}
</tw-passagedata><tw-passagedata pid="394" name="TUE-0600!-(WOODS)-I-1-iv(AUDIO)" tags="dark" position="865,2792" size="100,100">{(track: &#39;600-I-1-iii&#39;, &#39;stop&#39;) (track: &quot;600-I-1-iii-MUSIC&quot;, &quot;fadeout&quot;, 5)
(track: &quot;600-I-1-iv-MUSIC&quot;, &quot;play&quot;)(track: &quot;600-I-1-iv&quot;, &quot;play&quot;)}

(text-color: &quot;transparent&quot;)[This hollowness of space and time is not a place for things that are, is it?]

(live: 2s)[(transition: &quot;dissolve&quot;)+(transition-time:2s)[(text-color: &quot;transparent&quot;)[Its a terminal for things that //were//.](stop:)]] 

(live: 4s)[(transition: &quot;dissolve&quot;)+(transition-time:2s)[(text-color: &quot;transparent&quot;)[That //used to be//.  Whatever this is, comes further on.](stop:)]]

(live: 6s)[(transition: &quot;dissolve&quot;)+(transition-time:2s)[(text-color: &quot;transparent&quot;)[Beyond the experience of every happy, sad, joyful, painful thing.] (stop:)]]

(live: 25s)[(transition: &quot;dissolve&quot;)+(transition-time:2s)[(text-color: &quot;transparent&quot;)[ ] [[//After// life -&gt;TUE-0600!-(WOODS)-I-1-v(AUDIO)]]itself.] (stop:)]</tw-passagedata><tw-passagedata pid="395" name="TUE-0600!-(WOODS)-I-1-v(AUDIO)" tags="dark" position="992,2791" size="100,100">{(track: &#39;600-I-1-iv&#39;, &#39;stop&#39;) (track: &#39;600-I-1-iv-MUSIC&#39;, &#39;fadeout&#39;, 5)
(track: &quot;600-I-1-v-01-MUSIC&quot;, &quot;play&quot;)(track: &quot;600-I-1-v-01&quot;, &quot;play&quot;)}
	
(live: 4s)[(transition: &quot;dissolve&quot;)+(transition-time:2s)[(text-color: &quot;transparent&quot;)[Oh, my God.]
[What happened to us?]&lt;c1|
[Are we alone here?]&lt;c1|
[Who were we?]&lt;c1|
[Are we being punished?]&lt;c1|
(stop:)]]

(click: ?c1)[{
	(track: &#39;600-I-1-v-01&#39;, &#39;stop&#39;)
	(track: &quot;600-I-1-v-01-MUSIC&quot;, &quot;fadeout&quot;, 5)
	(track: &quot;600-I-1-v-02(CLICK1)-MUSIC&quot;, &quot;play&quot;)	
	(track: &quot;600-I-1-v-02(CLICK1)&quot;, &quot;play&quot;)
}[(live: 20s)[(transition: &quot;dissolve&quot;)+(transition-time:2s)[(text-color: &quot;transparent&quot;)[We dont know the answer to any of these questions.
But we understand, maybe this place isnt so dark.

This isnt a vacuum that were in.  The space no longer seems empty: it is, in fact, infinitely high, infinitely deep.  

And there are ][[things in here with us.-&gt;TUE-0600!-(WOODS)-I-1-vi(AUDIO)]]]]]] 

</tw-passagedata><tw-passagedata pid="396" name="TUE-0600!-(WOODS)-I-1-vi(AUDIO)" tags="dark" position="1118,2795" size="100,100">{(track: &#39;600-I-1-v-02(CLICK1)&#39;, &#39;stop&#39;) (track: &quot;600-I-1-vi-01&quot;, &quot;play&quot;)}
{(track: &#39;600-I-1-vi-01-to-04-MUSIC&#39;, &#39;play&#39;)}

(live: 11s)[(stop:) (transition: &quot;dissolve&quot;)+(transition-time:2s)[(text-color: &quot;transparent&quot;)[They are very, very difficult to sense.  Like they are so far away, not just in distance, but also in time.]

[Something ahead.]&lt;c1|

[Is there a light?]&lt;c2|

[What is beneath?]&lt;c3|


[Then, like magic...]&lt;c4|

]]
(click: ?c4)[{(track: &#39;600-I-1-vi-01-to-04-MUSIC&#39;, &#39;fadeout&#39;, 5)(track: &#39;600-I-1-vi-05(CLICK4)-MUSIC&amp;FOLEY&#39;, &#39;play&#39;) (track: &quot;600-I-1-vi-02(CLICK1)&quot;, &quot;stop&quot;) (track: &quot;600-I-1-vi-03(CLICK2)&quot;, &quot;stop&quot;) (track: &quot;600-I-1-vi-04(CLICK3)&quot;, &quot;stop&quot;) (track: &quot;600-I-1-vi-05(CLICK4)&quot;, &quot;play&quot;)}[(live: 2s)[(transition: &quot;dissolve&quot;)+(transition-time:2s)[(text-color: &quot;transparent&quot;)[and then, like magic, a gentle] [[//breeze//-&gt;TUE-0600!-(WOODS)-I-1-vii(AUDIO)]] (text-color: &quot;transparent&quot;)[rushes through the emptiness.]]]](stop:)]
	
(click: ?c1)[{(track: &quot;600-I-1-vi-03(CLICK2)&quot;, &quot;stop&quot;) (track: &quot;600-I-1-vi-04(CLICK3)&quot;, &quot;stop&quot;)(track: &quot;600-I-1-vi-02(CLICK1)&quot;, &quot;play&quot;)}[(transition: &quot;dissolve&quot;)+(transition-time:2s)[(text-color: &quot;transparent&quot;)[There is something ahead of us.
Tall and unmoving.  Thats all to know]]]]

(click: ?c2)[{(track: &quot;600-I-1-vi-02(CLICK1)&quot;, &quot;stop&quot;) (track: &quot;600-I-1-vi-04(CLICK3)&quot;, &quot;stop&quot;) (track: &quot;600-I-1-vi-03(CLICK2)&quot;, &quot;play&quot;)}(transition: &quot;dissolve&quot;)+(transition-time:2s)[(text-color: &quot;transparent&quot;)[Is there a light above us?  A glimmer, so faint it might be imagined?  Is this what the sun looks like, from the distance of heaven?]]]

(click: ?c3)[{(track: &quot;600-I-1-vi-02(CLICK1)&quot;, &quot;stop&quot;) (track: &quot;600-I-1-vi-03(CLICK2)&quot;, &quot;stop&quot;) (track: &quot;600-I-1-vi-04(CLICK3)&quot;, &quot;play&quot;)}[(transition: &quot;dissolve&quot;)+(transition-time:2s)[(text-color: &quot;transparent&quot;)[Although we dont know how to move, the space around us feels like air, and the space beneath us feels like ground.]]]]

</tw-passagedata><tw-passagedata pid="397" name="TUE-0600!-(WOODS)-I-1-vii(AUDIO)" tags="dark" position="1239,2796" size="100,100">{(track: &#39;600-I-1-vi-05(CLICK4)-MUSIC&amp;FOLEY&#39;, &#39;fadeout&#39;, 5) (track: &#39;600-I-1-vii-ALL-MUSIC&amp;FOLEY&#39;, &#39;play&#39;) (track: &#39;600-I-LOOP-WIND&#39;, &#39;loop&#39;, &#39;true&#39;) 	(track: &#39;600-I-LOOP-WIND&#39;, &#39;fadein&#39;, 5) (track: &quot;600-I-1-vii-01&quot;, &quot;play&quot;)
}\
(set: $clicked to false) \
(set: $transCounter to 0)\
(transition: &quot;dissolve&quot;)[(text-color: &quot;transparent&quot;)[It is real, and present, and we can feel it: , ]|hidden1)[moving through us] [ moving through us]&lt;c1|(click: ?c1)[(set: $clicked to true)[(text-color: &quot;transparent&quot;)[revealing the landscape, bringing back a rush of familiar feelings..][{(track: &quot;600-I-1-vii-02(BREEZE)&quot;, &quot;play&quot;)}[(live: 8s)[(set: $clicked to false)]]]]]]

|sample1)[(transition: &quot;dissolve&quot;)[{(track: &quot;600-I-1-vii-03&quot;, &quot;play&quot;)}[|hidden2)[We can hear it...] [ We can hear it...]&lt;c2| (click: ?c2)[(set: $clicked to true)[(set: $transCounter to it - 1)[(text-color: &quot;transparent&quot;)[caressing smooth, bare tree trunks and weaving through high branches.][{(track: &quot;600-I-1-vii-04(HEAR)&quot;, &quot;play&quot;)}[(live: 2s)[(set: $clicked to false)]]]]]]]]]

|sample2)[(transition: &quot;dissolve&quot;)[{(track: &quot;600-I-1-vii-05&quot;, &quot;play&quot;)} [(text-color: &quot;transparent&quot;)[All at once, a] |hidden3)[gust] [ gust]&lt;c3|] (click: ?c3)[(set: $clicked to true)[(set: $transCounter to it - 2)[(text-color: &quot;transparent&quot;)[and ten thousand leaves catch on the ground, lifting and encircling us in a sudden swarm of nimble, crisp-sounding movement.  The breeze has made us understand... [{(track: &quot;600-I-1-vii-06(GUST)&quot;, &quot;play&quot;)}[(live: 18s)[(set: $clicked to false)]]]]]]]]]

|sample3)[(transition: &quot;dissolve&quot;)[{(track: &quot;600-I-1-vii-07&quot;, &quot;play&quot;)}](text-color: &quot;transparent&quot;)[Were among trees.  Its the ] |hidden4)[autumn. ] [ autumn. ]&lt;c4|] (click: ?c4)[(set: $clicked to true)[(set: $transCounter to it - 2)[&lt;!-- We feel the air, smell the barest trace of earth: rotting leaves, the last wild garlic bloom from wet ground nearby.
 --&gt;][{(track: &quot;600-I-1-vii-08(AUTUMN)&quot;, &quot;play&quot;)}[(live: 20s)[(set: $clicked to false)]]]]]

|sample4)[(transition: &quot;dissolve&quot;)[(text-color: &quot;transparent&quot;)[The world is still around us.  It is just so difficult to see it without eyes, hear it without ears.  Then, we begin to notice ]][{(track: &quot;600-I-1-vii-09&quot;, &quot;play&quot;)}]

|sample5)[(transition: &quot;dissolve&quot;)+(transition-time:12s)[ [[outlines in the darkness-&gt;TUE-0600!-(WOODS)-I-3-i(AUDIO)]].]]]

{

		(live: 6.5s)[
	(if: $clicked is false)[
		(set: $transCounter to it + 1)[	
		(if: $transCounter is 1)[
			(show: ?sample1)
			(replace: ?c1)[]
			(show: ?hidden1)	
		]
		(else-if: $transCounter is 2 and $clicked is false)[
			(show: ?sample2)
			(replace: ?c2)[]
			(show: ?hidden2)
		]
		(else-if: $transCounter is 3 and $clicked is false)[ 
			(show: ?sample3)
			(replace: ?c3)[]
			(show: ?hidden3)
		]
		(else-if: $transCounter is 4 and $clicked is false)[ 
			(show: ?sample4)
			(replace: ?c4)[]
			(show: ?hidden4)
		]
		(else-if: $transCounter is 5)[ 
			(show: ?sample5)
		]
		(else:)[
			(stop:)
		]]]]
}
</tw-passagedata><tw-passagedata pid="398" name="TUE-0600!-(WOODS)-I-3-i(AUDIO)" tags="dark" position="1405,2797" size="100,100">{
	(track: &#39;600-I-1-vii-ALL-MUSIC&amp;FOLEY&#39;, &#39;fadeout&#39;, 3)
	(track: &quot;600-I-1-vii-09&quot;, &quot;stop&quot;)
	(track: &#39;600-I-3-i-MUSIC&amp;FOLEY&#39;, &quot;play&quot;)	
	(track: &#39;600-I-3-i&#39;, &quot;play&quot;)
}
(text-color: &quot;transparent&quot;)[Vague and glittering, like faint sketch marks.]

(set: $transCounter to 0)
|sample1)[(transition: &quot;dissolve&quot;)[(text-color: &quot;transparent&quot;)[Great tree trunks, forking into branches that fan above us like ceiling of a grand Cathedral.]]]
|sample2)[(transition: &quot;dissolve&quot;)[(text-color: &quot;transparent&quot;)[The glimmering trace-lines attenuate outwards into the high-up air, dancing and swaying in the breeze.]]]
|sample3)[(transition: &quot;dissolve&quot;)+(transition-time: 2s)[(text-color: &quot;transparent&quot;)[Then, we feel the presence of something else. Something alive.. It is looking through the darkness, waiting, watching us with ] [[shining eyes-&gt;TUE-0600!-(WOODS)-I-3-iii(AUDIO)]].]]
{
	(live: 11.5s)[
		(set: $transCounter to it + 1)

		(if: $transCounter is 1)[
			(show: ?sample1)
		]
		(else-if: $transCounter is 2)[
			(show: ?sample2)
		]
		(else-if: $transCounter is 3)[
			(show: ?sample3)
		]
		(else:)[
			(stop:)
		]
	]
}</tw-passagedata><tw-passagedata pid="399" name="TUE-0600!-(WOODS)-I-3-iii(AUDIO)" tags="dark" position="1593,2796" size="100,100">{
(track: &quot;600-I-3-i&quot;, &quot;stop&quot;)
(track: &#39;600-I-3-i-MUSIC&amp;FOLEY&#39;, &#39;fadeout&#39;, 3)
(track: &quot;600-I-3-iii-01-MUSIC&amp;FOLEY&quot;, &quot;play&quot;)
(track: &quot;600-I-3-iii-01&quot;, &quot;play&quot;)
}
(live: 14s)[(transition: &quot;dissolve&quot;)+(transition-time: 2s)[(text-color: &quot;transparent&quot;)[It jumps forwards and shrieks into the forest.  Hops, flaps, launches into the air with a choking, screaming sound.  It sounds like a cry of fear and a scream of rage merged together.  A ] [chorus]&lt;c1| grows behind it.(stop:)]]
(click: ?c1)[{
(track: &quot;600-I-3-iii-01&quot;, &quot;stop&quot;)
(track: &quot;600-I-3-iii-02(CLICK1)-MUSIC&amp;FOLEY&quot;, &quot;play&quot;)
(track: &quot;600-I-3-iii-02(CLICK1)&quot;, &quot;play&quot;)
}
[(live: 18s)[(transition: &quot;dissolve&quot;)+(transition-time: 2s)[(text-color: &quot;transparent&quot;)[A conspiracy of ravens.  Circling above, around a high and heavy shape in the air.  The cheiftan bird lands on the swinging thing, and turns back towards us, consciously shooting a complete impression of its ] [thoughts:]&lt;c2| (text-color: &quot;transparent&quot;)[ our way.]]](stop:)]]
(click: ?c2)[{
(track: &quot;600-I-3-iii-02(CLICK1)-MUSIC&amp;FOLEY&quot;, &quot;fadeout&quot;, 4)
(track: &#39;600-I-3-iii-03(CLICK2)-MUSIC&amp;FOLEY&#39;, &#39;play&#39;)
(track: &quot;600-I-3-iii-02(CLICK1)&quot;, &quot;stop&quot;)
(track: &quot;600-I-3-iii-03(CLICK2)&quot;, &quot;play&quot;)
}[(live: 7s)[(text-color: &quot;transparent&quot;)[I can feel you watching, it thinks.  This is not the first time.  And I dont care, because ](transition: &quot;dissolve&quot;)+(transition-time: 4s)[ [[//&quot;you cant stop me.&quot;//-&gt;TUE-0600!-(WOODS)-I-3-iv(AUDIO)]].]]]]</tw-passagedata><tw-passagedata pid="400" name="TUE-0600!-(WOODS)-I-3-iv(AUDIO)" tags="dark" position="1726,2799" size="100,100">{
(track: &quot;600-I-3-iii-03(CLICK2)&quot;, &quot;stop&quot;)
(track: &#39;600-I-3-iii-03(CLICK2)-MUSIC&amp;FOLEY&#39;, &#39;fadeout&#39;, 5)
(track: &#39;600-I-3-iv-ALL-MUSIC&amp;FOLEY&#39;, &#39;play&#39;)
(track: &quot;600-I-3-iv-01&quot;, &quot;play&quot;)
}
(live: 16s)[(transition: &quot;dissolve&quot;)+(transition-time: 3s)[(text-color: &quot;transparent&quot;)[Then it turns and barks at its cohort.  Listen up, it says.  If found this.  I eat and finish before any of you start. ] [Do not test me]&lt;c1|](stop:)]

(click: ?c1)[{
(track: &quot;600-I-3-iv-01&quot;, &quot;stop&quot;)
(track: &quot;600-I-3-iv-02(CLICK1)&quot;, &quot;play&quot;)
}[(live: 14s)[(transition: &quot;dissolve&quot;)+(transition-time: 2s)[(text-color: &quot;transparent&quot;)[The other ravens call back, yes, yes, hurry.  But resentfully.  The cheiftan bird examines the floating bulk beneath him, picks a site, and begins to ] [tearing it apart:]&lt;c2|]](stop:)]]

(click: ?c2)[{
(track: &quot;600-I-3-iv-02(CLICK1)&quot;, &quot;stop&quot;)
(track: &quot;600-I-3-iv-03(CLICK2)&quot;, &quot;play&quot;)
}[(live: 6s)[(transition: &quot;dissolve&quot;)+(transition-time: 6s)[(text-color: &quot;transparent&quot;)[Slurping and groaning with cruel pleasure as the sharp point of its beak disects the soft parts and hits against the hard.

The skin, the fat is delicious.] 

[[ Move closer-&gt;TUE-0600!-(WOODS)-I-3-v-a(AUDIO)]]]

[[ Move away-&gt;TUE-0600!-(WOODS)-I-3-v-b-i(AUDIO)]]]
(stop:)]]</tw-passagedata><tw-passagedata pid="401" name="TUE-0600!-(WOODS)-I-3-v-a(AUDIO)" tags="dark" position="1858,2889" size="100,100">{(track: &quot;600-I-3-iv-03(CLICK2)&quot;, &quot;stop&quot;)
(track: &quot;600-I-3-va-01(CLICK1)-MUSIC&amp;FOLEY&quot;, &quot;play&quot;)
(track: &quot;600-I-3-v-a-01&quot;, &quot;play&quot;)}

(live: 8s)[(transition: &quot;dissolve&quot;)+(transition-time: 2s)[ The chieftan bird]&lt;c1| (stop:)[(text-color: &quot;transparent&quot;)[is in his element: lithe, strong, quick to think and to anger.]]]

(click: ?c1)[[{
(track: &quot;600-I-3-v-a-01&quot;, &quot;stop&quot;)
(track: &quot;600-I-3-v-a-02(CLICK1)&quot;, &quot;play&quot;)}]

(live: 14s)[(transition: &quot;dissolve&quot;)+(transition-time: 2s)[(text-color: &quot;transparent&quot;)[His hunger gnaws from the inside, parasites have left him permanently ravenous and cruel.][ ravenous and cruel:]&lt;c2| (stop:)]]]

(click: ?c2)[[{
(track: &quot;600-I-3-v-a-02(CLICK1)&quot;, &quot;stop&quot;)
(track: &quot;600-I-3-va-03(CLICK3)-MUSIC&amp;FOLEY&quot;, &quot;play&quot;)
(track: &quot;600-I-3-v-a-03(CLICK2)&quot;, &quot;play&quot;)}]

(live: 10s)[(transition: &quot;dissolve&quot;)+(transition-time: 2s)[(text-color: &quot;transparent&quot;)[The small, sensitive pads under his talons shift and curl on the hard, dead thing he balances off, and he enjoys] [ curling his talons:]&lt;c3| (stop:)]]]

(click: ?c3)[{
(track: &quot;600-I-3-v-a-03(CLICK2)&quot;, &quot;stop&quot;)
(track: &#39;600-I-3-va-04(CLICK4)-MUSIC&amp;FOLEY&#39;, &#39;play&#39;)
(track: &quot;600-I-3-v-a-04(CLICK3)&quot;, &quot;play&quot;)}]

[(transition: &quot;dissolve&quot;)+(transition-time: 8s)[[[//(Get it over with)//-&gt;TUE-0600!-(WOODS)-I-5-1-i(AUDIO)]]]]

	</tw-passagedata><tw-passagedata pid="402" name="TUE-0600!-(WOODS)-I-5-1-i(AUDIO)" tags="dark" position="1996,2800" size="100,100">{
(track: &quot;600-I-5-i&quot;, &quot;play&quot;)
(track: &#39;600-I-5-i-MUSIC&amp;FOLEY&#39;, &#39;play&#39;)
}
(text-color: &quot;transparent&quot;)[The chieftan bird triumphantly pulls out his prize from the body and cranes his neck up to swallow it whole.  But the other ravens beneath him are losing their patience.]
(set: $transCounter to 0)\
|sample1)[(transition: &quot;dissolve&quot;)[(text-color: &quot;transparent&quot;)[Enough!  Enough!  They bark up at him.  Then the biggest of them flies up towards him, the chieftan bird ascends hastily into the air, shrieking as best he can with his mouth full, conceding his spot to save what he has not yet swallowed. ]]] |sample2)[(transition: &quot;dissolve&quot;)[(text-color: &quot;transparent&quot;)[ The big raven circles round, but the others, flapping and screeching in a maelstrom have already supplanted it, all aim for the swinging mass above the forest floor.]  ]] |sample3)[(transition: &quot;dissolve&quot;)[(text-color: &quot;transparent&quot;)[ And as they concentrate on this thing, its trace lines and shape becomes clear.]]] 
|sample4)[(transition: &quot;dissolve&quot;)[(text-color: &quot;transparent&quot;)[But we already knew what it is, didnt we?]  

[[It was obvious.-&gt;TUE-0600!-(WOODS)-I-5-1-iv(AUDIO)]]
[[It was horrifying.-&gt;TUE-0600!-(WOODS)-I-5-1-iv(AUDIO)]]]]

{ (live: 12s)[ (set: $transCounter to it + 1)
(if: $transCounter is 1)[
		(show: ?sample1)
	]
	(else-if: $transCounter is 2)[
		(show: ?sample2)
	]
	(else-if: $transCounter is 3)[
		(show: ?sample3)
	]
	(else-if: $transCounter is 4)[
		(show: ?sample4)
	]

	(else:)[
		(stop:)
	]
]
}
</tw-passagedata><tw-passagedata pid="403" name="TUE-0600!-(WOODS)-I-5-1-iv(AUDIO)" tags="dark" position="2143,2804" size="100,100">{
(track: &quot;600-I-5-i&quot;, &quot;stop&quot;)
(track: &#39;600-I-5-i-MUSIC&amp;FOLEY&#39;, &#39;fadeout&#39;, 5)
(track: &#39;600-I-5-iv-MUSIC&amp;FOLEY&#39;, &#39;play&#39;)
(track: &quot;600-I-5-iv&quot;, &quot;play&quot;)
}
(text-color: &quot;transparent&quot;)[It is a man.  ]
(set: $transCounter to 0)\
|sample1)[(transition: &quot;dissolve&quot;)[(text-color: &quot;transparent&quot;)[Rigid, swinging slowly forwards and backwards in the breeze.  His head unnaturally bent.  He pivots from a rope, looped around his neck, that reaches up towards a huge  beech tree..]]] 
|sample2)[(transition: &quot;dissolve&quot;)[(text-color: &quot;transparent&quot;)[What does he look like?  Difficult to tell as trace lines in the dark.  Tall, medium-build, middle-aged, untidy and thinning hair.  His features arent clear, and thanks to the ravens, never will be again.] [[never will be again.-&gt;TUE-0600!-(WOODS)-I-5-1-v(AUDIO)]]]] 

{ (live: 18s)[ (set: $transCounter to it + 1)
(if: $transCounter is 1)[
		(show: ?sample1)
	]
	(else-if: $transCounter is 2)[
		(show: ?sample2)
	]
	(else:)[
		(stop:)
	]
]
}



</tw-passagedata><tw-passagedata pid="404" name="TUE-0600!-(WOODS)-I-5-1-v(AUDIO)" tags="dark" position="2287,2805" size="100,100">{
(track: &quot;600-I-5-iv&quot;, &quot;stop&quot;)
(track: &#39;600-I-5-iv-MUSIC&amp;FOLEY&#39;, &#39;fadeout&#39;, 5)
(track: &#39;600-I-5-v-MUSIC&amp;FOLEY&#39;, &#39;play&#39;)
(track: &quot;600-I-5-v&quot;, &quot;play&quot;)
}
(text-color: &quot;transparent&quot;)[The ravens continue to fight over who gets to dig out the other eye, who gets prime position on top of the head, who gets to tear at the rest of this sad, elevated feast for birds.]

(set: $transCounter to 0)\
|sample1)[(transition: &quot;dissolve&quot;)[(text-color: &quot;transparent&quot;)[And we wonder...] 
[[Who was this man?-&gt;TUE-0600!-(WOODS)-I-5-1-vi(AUDIO)]]

[[Why don&#39;t we recognise this man?-&gt;TUE-0600!-(WOODS)-I-5-1-vi(AUDIO)]]]]

{ (live: 18s)[ 
(set: $transCounter to it + 1)
(if: $transCounter is 1)[
		(show: ?sample1)
]
	(else:)[
		(stop:)
	]
]
}</tw-passagedata><tw-passagedata pid="405" name="TUE-0600!-(WOODS)-I-5-1-4 OLD(AUDIO)" tags="light" position="2441,2681" size="100,100">{
(track: &quot;600-I-5-1-iii&quot;, &quot;stop&quot;)
(track: &quot;600-I-5-1-iv&quot;, &quot;play&quot;)
}
(set: $transCounter to 0)\
(text-color: &quot;transparent&quot;)[A man.] 

|sample1)[(transition:&quot;dissolve&quot;)[(text-color: &quot;transparent&quot;)[As rigid as if he were a model, carved out of wood. His head, bowed forwards, at a strange angle. His body swings slowly forwards and backwards in the breeze, pivoting along a rope, looped around his neck and reaching upwards towards the branches on the nearest beech tree.]]]

|sample2)[(transition: &quot;dissolve&quot;)[(text-color: &quot;transparent&quot;)[He was tall, medium weight, not young.  His features arent clear, and thanks to the] [[crows-&gt;TUE-0600!-(WOODS)-I-5-1-5 OLD(AUDIO)]], (text-color: &quot;transparent&quot;)[never will be again.]]]

{ (live: 14s)[ 
(set: $transCounter to it + 1)
(if: $transCounter is 1)[
		(show: ?sample1)
]
(else-if: $transCounter is 2)[
		(show: ?sample2)
]
	(else:)[
		(stop:)
	]
]
}</tw-passagedata><tw-passagedata pid="406" name="TUE-0600!-(WOODS)-I-5-1-5 OLD(AUDIO)" tags="light" position="2575,2680" size="100,100">{
(track: &quot;600-I-5-1-iv&quot;, &quot;stop&quot;)
(track: &quot;600-I-5-1-v&quot;, &quot;play&quot;)
}
(set: $transCounter to 0)\
(text-color: &quot;transparent&quot;)[The ravens continue to fight and shriek over who gets the chance at the other eye, at the head, at the rest of this sad, dead piece of bird food: this heavy carcass, swinging like on a butchers hook, a display for the wild animals of the forest, swinging sadly forwards and backwards.]
|sample1)[(transition:&quot;dissolve&quot;)[(text-color: &quot;transparent&quot;)[We look at the outline of a corpse and feel no sense of recognition.]]]
|sample2)[(transition: &quot;dissolve&quot;)[ [[Who was this man?-&gt;TUE-0600!-(WOODS)-I-5-1-vi(AUDIO)]] ]]

{ (live: 11s)[ 
(set: $transCounter to it + 1)
(if: $transCounter is 1)[
		(show: ?sample1)
]
(else-if: $transCounter is 2)[
		(show: ?sample2)
]
	(else:)[
		(stop:)
	]
]
}</tw-passagedata><tw-passagedata pid="407" name="TUE-0600!-(WOODS)-I-5-1-vi(AUDIO)" tags="dark" position="2750,2810" size="100,100">{(track: &quot;600-I-5-v&quot;, &quot;stop&quot;) (track: &#39;600-I-5-v-MUSIC&amp;FOLEY&#39;, &#39;fadeout&#39;, 5) (track: &#39;600-I-5-vi-MUSIC&amp;FOLEY&#39;, &#39;play&#39;) (track: &quot;600-I-5-vi&quot;, &quot;play&quot;)}\
(set: $transCounter to 0)\
(text-color: &quot;transparent&quot;)[His faint outlines contain nothing, nothing at all to remind us of a past life or former time.  Looking at him is like looking at a worn-down statue without a name, an eerie monument to how mortal and forgettable we are.  

]
|sample1)[(transition:&quot;dissolve&quot;)[(text-color: &quot;transparent&quot;)[//What was his name?//]]]
|sample2)[(transition: &quot;dissolve&quot;)[(text-color: &quot;transparent&quot;)[Can a man be so unmemorable that even] [[[his ghost-&gt;TUE-0600!-(WOODS)-I-5-1-vii(AUDIO)]]]]]

{ (live: 9s)[ 
(set: $transCounter to it + 1)
(if: $transCounter is 1)[
		(show: ?sample1)
]
(else-if: $transCounter is 2)[
		(show: ?sample2)
]
	(else:)[
		(stop:)
	]
]
}</tw-passagedata><tw-passagedata pid="408" name="TUE-0600!-(WOODS)-I-5-1-vii(AUDIO)" tags="dark" position="2941,2835" size="100,100">(newgroup: &#39;I-5-vii&#39;, &#39;600-I-5-vii-01&#39;, &#39;600-I-5-vii-02(CLICK1)&#39;, &#39;600-I-5-vii-03(CLICK2)&#39;, &#39;600-I-5-vii-04(CLICK3)&#39;, &#39;600-I-5-vii-05(CLICK4)&#39;)\

{(track: &quot;600-I-5-vi&quot;, &quot;stop&quot;) (track: &quot;600-I-5-vii-01&quot;, &quot;play&quot;) (track: &#39;600-I-5-vi-MUSIC&amp;FOLEY&#39;, &#39;fadeout&#39;, 5) (track: &#39;600-I-5-vii-01-MUSIC&amp;FOLEY&#39;, &#39;play&#39;)}\
(text-color: &quot;transparent&quot;)[Is that what we are?  And is this what we were?  Swinging, as if on a butchers hook, with nothing but shreds and patches:]
(transition: &quot;dissolve&quot;)+(transition-time: 7s)[[Coat]&lt;c1|] (click: ?c1)+(replace: ?c1)[(transition: &quot;dissolve&quot;)+(transition-time: 2s)[(text-color: &quot;transparent&quot;)[His long coat billows forwards and backwards with the wind. It seems strange, theatrical][{(track: &quot;600-I-5-vii-01&quot;, &quot;stop&quot;)(track: &#39;600-I-5-vii-03(CLICK2)&#39;, &#39;stop&#39;) (track: &#39;600-I-5-vii-04(CLICK3)&#39;, &#39;stop&#39;) (track: &#39;600-I-5-vii-05(CLICK4)&#39;, &#39;stop&#39;) (track: &quot;600-I-5-vii-02(CLICK1)&quot;, &quot;play&quot;) (track: &#39;600-I-5-vii-02(CLICK1)-MUSIC&amp;FOLEY&#39;, &#39;play&#39;)}]]]
(transition: &quot;dissolve&quot;)+(transition-time: 9s)[[Hands]&lt;c2|] (click: ?c2)+(replace: ?c2)[(transition: &quot;dissolve&quot;)+(transition-time: 2s)[(text-color: &quot;transparent&quot;)[The hands are clenched tightly. On the right, the hand is balled into a fist, on the left.][{(track: &#39;600-I-5-vii-01&#39;, &#39;stop&#39;) (track: &#39;600-I-5-vii-02(CLICK1)&#39;, &#39;stop&#39;) (track: &#39;600-I-5-vii-04(CLICK3)&#39;, &#39;stop&#39;) (track: &#39;600-I-5-vii-05(CLICK4)&#39;, &#39;stop&#39;) (track: &#39;600-I-5-vii-03(CLICK2)&#39;, &quot;play&quot;) (track: &#39;600-I-5-vii-03(CLICK2)-MUSIC&amp;FOLEY&#39;, &#39;play&#39;)}]]]
(transition: &quot;dissolve&quot;)+(transition-time: 11s)[[Head]&lt;c3|] (click: ?c3)+(replace: ?c3)[(transition: &quot;dissolve&quot;)+(transition-time: 2s)[(text-color: &quot;transparent&quot;)[Head bowed over, at a strange angle, revealing the hair thinning around the whorl at the top of the head.][{(track: &#39;600-I-5-vii-01&#39;, &#39;stop&#39;) (track: &#39;600-I-5-vii-02(CLICK1)&#39;, &#39;stop&#39;) (track: &#39;600-I-5-vii-03(CLICK2)&#39;, &#39;stop&#39;) (track: &#39;600-I-5-vii-05(CLICK4)&#39;, &#39;stop&#39;) (track: &#39;600-I-5-vii-05(CLICK4)-MUSIC&amp;FOLEY&#39;, &#39;play&#39;) (track: &#39;600-I-5-vii-04(CLICK3)&#39;, &quot;play&quot;)}]]]
(transition: &quot;dissolve&quot;)+(transition-time: 13s)[[Shoes]&lt;c4|] (click: ?c4)+(replace: ?c4)[(transition: &quot;dissolve&quot;)+(transition-time: 2s)[(text-color: &quot;transparent&quot;)[Well made and comfortable, probably.][{(track: &#39;600-I-5-vii-01&#39;, &#39;stop&#39;) (track: &#39;600-I-5-vii-02(CLICK1)&#39;, &#39;stop&#39;) (track: &#39;600-I-5-vii-03(CLICK2)&#39;, &#39;stop&#39;) (track: &#39;600-I-5-vii-04(CLICK3)&#39;, &#39;stop&#39;) (track: &quot;600-I-5-vii-05(CLICK4)&quot;, &quot;play&quot;) (track: &#39;600-I-5-vii-05(CLICK4)-MUSIC&amp;FOLEY&#39;, &#39;play&#39;)}]]]

(more:)[(live:14s)[(track: &quot;600-I-5-vii-06(CLICK5)&quot;, &quot;play&quot;) (track: &#39;600-I-5-vii-05(CLICK4)-MUSIC&amp;FOLEY&#39;, &#39;fadeout&#39;, 5) (track: &#39;600-I-5-vii-06(CLICK5)-MUSIC&amp;FOLEY&#39;, &#39;play&#39;)](stop:)]

(more:)[(live:28s)[(transition: &quot;dissolve&quot;)+(transition-time: 4s)[[[far off noise-&gt;TUE-0600!-(WOODS)-I-5-1-ix(AUDIO)]]]](stop:)]</tw-passagedata><tw-passagedata pid="409" name="TUE-0600!-(WOODS)-I-5-1-ix(AUDIO)" tags="dark" position="3170,2809" size="100,100">(newgroup: &#39;I-5-ix&#39;, &#39;600-I-5-ix-01(CLICK1)&#39;, &#39;600-I-5-ix-02(CLICK2)&#39;, &#39;600-I-5-ix-03(CLICK3)&#39;, &#39;600-I-5-ix-04(CLICK4)&#39;, &#39;600-I-5-ix-05(CLICK5)&#39;)
 A flight of [pigeons]&lt;c1|(click: ?c1)[(transition: &quot;dissolve&quot;)+(transition-time: 2s)[(text-color: &quot;transparent&quot;)[ start into the air.][{(group: &quot;I-5-ix&quot;, &quot;stop&quot;) (track: &quot;600-I-5-ix-01(CLICK1)&quot;, &quot;play&quot;) (track: &#39;600-I-5-ix-01(CLICK1)-MUSIC&amp;FOLEY&#39;, &#39;play&#39;)}]]] 

 Other nearby [birds]&lt;c2|(click: ?c2)[(transition: &quot;dissolve&quot;)+(transition-time: 2s)[(text-color: &quot;transparent&quot;)[start to chirrup, wary and agitated.][{(group: &quot;I-5-ix&quot;, &quot;stop&quot;) (track: &#39;600-I-5-ix-02(CLICK2)-MUSIC&amp;FOLEY&#39;, &#39;play&#39;) (track: &quot;600-I-5-ix-02(CLICK2)&quot;, &quot;play&quot;)}]]] 

 The woodpeckers [rattle]&lt;c3|(click: ?c3)[(transition: &quot;dissolve&quot;)+(transition-time: 2s)[(text-color: &quot;transparent&quot;)[ goes silent.][{(group: &quot;I-5-ix&quot;, &quot;stop&quot;) (track: &#39;600-I-5-ix-03(CLICK3)-MUSIC&amp;FOLEY&#39;, &#39;play&#39;) (track: &quot;600-I-5-ix-03(CLICK3) - RECUT LINE&quot;, &quot;play&quot;)}]]] 

 A [hooded crow]&lt;c4|(click: ?c4)[(transition: &quot;dissolve&quot;)+(transition-time: 2s)[(text-color: &quot;transparent&quot;)[ flies up into the sky, crying out.][{(group: &quot;I-5-ix&quot;, &quot;stop&quot;) (track: &#39;600-I-5-ix-04(CLICK4)-MUSIC&amp;FOLEY&#39;, &#39;play&#39;) (track: &quot;600-I-5-ix-04(CLICK4)&quot;, &quot;play&quot;)}]]]

Meanwhile, [[the ravens...-&gt;TUE-0600!-(WOODS)-I-5-1-x(AUDIO)]] 

</tw-passagedata><tw-passagedata pid="410" name="TUE-0600!-(WOODS)-II-1-i(AUDIO)" tags="dark" position="240,2917" size="100,100">{(track: &quot;600-II-1-i&quot;, &quot;play&quot;) (track: &#39;600-I-5-ix-05(CLICK5)-MUSIC&amp;FOLEY&#39;, &#39;fadeout&#39;, 5) (track: &#39;600-II-1-i-MUSIC&amp;FOLEY&#39;, &#39;play&#39;)}

(text-color: &quot;transparent&quot;)[The body bobs and swings more as the ravens begin to tear more frantically at the face and exposed hands.  And the extra movement guides the dog towards them.]  

|sample1)[(transition: &quot;dissolve&quot;)+(transition-time: 2s)[(text-color: &quot;transparent&quot;)[It is a medium-sized hunting doga Viszla, who courses through the brush towards the distinctive, exciting, anxious ] [[scent of meat.-&gt;TUE-0600!-(WOODS)-II-1-ii(AUDIO)]]]]

{ (live: 22s)[ (set: $transCounter to it + 1)
(if: $transCounter is 1)[
		(show: ?sample1)
]
	(else:)[
		(stop:)
	]
]
}</tw-passagedata><tw-passagedata pid="411" name="TUE-0600!-(WOODS)-II-1-ii(AUDIO)" tags="dark" position="369,2914" size="100,100">{(track: &#39;600-II-1-i-MUSIC&amp;FOLEY&#39;, &#39;fadeout&#39;, 5) (track: &#39;600-II-1-ii-MUSIC&amp;FOLEY&#39;, &#39;play&#39;) (track: &quot;600-II-1-i&quot;, &quot;stop&quot;) (track: &quot;600-II-1-ii&quot;, &quot;play&quot;)}
(set: $transCounter to 0)
(text-color: &quot;transparent&quot;)[Behind her, desperate whistles and yells do nothing to turn her head.]

|sample1)[(transition: &quot;dissolve&quot;)[(text-color: &quot;transparent&quot;)[The Viszla runs around the tree and stamps to a halt indignantly.  She raises a paw as her head tracks the bird-covered object swinging above her.]]]

|sample2)[(transition: &quot;dissolve&quot;)+(transition-time: 2s)[(text-color: &quot;transparent&quot;)[Then she jumps forwards and barks savagely, sending the ravens ] [[scattering into the air-&gt;TUE-0600!-(WOODS)-II-1-iii(AUDIO)]]]] 

{ (live: 10s)[ (set: $transCounter to it + 1)
(if: $transCounter is 1)[
		(show: ?sample1)
	]
	(else-if: $transCounter is 2)[
		(show: ?sample2)
	]


	(else:)[
		(stop:)
	]
]
}</tw-passagedata><tw-passagedata pid="412" name="TUE-0600!-(WOODS)-II-1-iii(AUDIO)" tags="dark" position="491,2917" size="100,100">{(track: &#39;600-II-1-ii-MUSIC&amp;FOLEY&#39;, &#39;fadeout&#39;, 5) (track: &#39;600-II-1-iii-MUSIC&amp;FOLEY&#39;, &#39;play&#39;) (track: &quot;600-II-1-ii&quot;, &quot;stop&quot;) (track: &quot;600-II-1-iii&quot;, &quot;play&quot;)}
(set: $transCounter to 0)\
(text-color: &quot;transparent&quot;)[The bird circle, cursing and screaming, and the dog launches itself up at them, herself higher than you could imagine. ]

|sample1)[(transition: &quot;dissolve&quot;)[(text-color: &quot;transparent&quot;)[Her blood up, she jumps as high as the corpses feet and grabs one of them in her mouth, swinging with the body for a moment before dropping and landing awkwardly on the ground.]]]

|sample2)[(transition: &quot;dissolve&quot;)+(transition-time: 2s)[(text-color: &quot;transparent&quot;)[The body above her torques and rocks in a ][[hangmans dance,-&gt;TUE-0600!-(WOODS)-II-1-v(AUDIO)]] [(text-color: &quot;transparent&quot;)[and the ravens, who displace unhappily, flying up to the nearest trees, baying and crowing all the more.]]]]

{ (live: 12s)[ (set: $transCounter to it + 1)
(if: $transCounter is 1)[
		(show: ?sample1)
	]
	(else-if: $transCounter is 2)[
		(show: ?sample2)
	]

	(else:)[
		(stop:)
	]
]
}</tw-passagedata><tw-passagedata pid="413" name="TUE-0600!-(WOODS)-II-1-v(AUDIO)" tags="dark" position="741,2917" size="100,100">{(track: &#39;600-II-1-iii-MUSIC&amp;FOLEY&#39;, &#39;fadeout&#39;, 5) (track: &#39;600-II-1-v-MUSIC&amp;FOLEY&#39;, &#39;play&#39;) (track: &quot;600-II-1-iii&quot;, &quot;stop&quot;) (track: &quot;600-II-1-v&quot;, &quot;play&quot;)}
(set: $transCounter to 0)\
(text-color: &quot;transparent&quot;)[Behind the melee, more whistles and yells from the forest.  Unhappy, flustered, embarrassed.  A woman is moving through the bracken, as fast as she can, shouting, Bella!  BELLE!  Her name is Charlotte.]

|sample1)[(transition: &quot;dissolve&quot;)[(text-color: &quot;transparent&quot;)[As if coming from a trance, the Vizsla suddenly remembers she has an owner, and she turns and runs towards the sound.]]]

|sample2)[(transition: &quot;dissolve&quot;)[(text-color: &quot;transparent&quot;)[Charlotte sees the Vizsla lolloping towards her, and she shouts, BELLE! Youre in real trouble, come here!! Come here!]]] 

|sample3)[(transition: &quot;dissolve&quot;)+(transition-time: 2s)[(text-color: &quot;transparent&quot;)[But Bella wails at her, turns and ] [[runs off again.-&gt;TUE-0600!-(WOODS)-II-1-vii(AUDIO)]]]] 
{ (live: 10s)[ (set: $transCounter to it + 1)
(if: $transCounter is 1)[
		(show: ?sample1)
	]
	(else-if: $transCounter is 2)[
		(show: ?sample2)
	]
	(else-if: $transCounter is 3)[
		(show: ?sample3)
	]

	(else:)[
		(stop:)
	]
]
}



</tw-passagedata><tw-passagedata pid="414" name="TUE-0600!-(WOODS)-II-1-vii(AUDIO)" tags="dark" position="1012,2922" size="100,100">{(track: &#39;600-II-1-v-MUSIC&amp;FOLEY&#39;, &#39;fadeout&#39;, 5) (track: &#39;600-II-1-vi-to-ix-MUSIC&#39;, &#39;play&#39;) (track: &#39;600-II-1-vi-FOLEY&#39;, &#39;play&#39;) (track: &quot;600-II-1-v&quot;, &quot;stop&quot;) (track: &quot;600-II-1-vii&quot;, &quot;play&quot;)}\
(set: $transCounter to 0)\
(text-color: &quot;transparent&quot;)[Oh, you little bitch, the owner thinks.  Brian wanted a hunting dog, I wanted a cockapoo.  Which of us is at home on his phone, and which of us is chasing this menace through the woods?  When I get home today, things are going to change.]

|sample1)[(transition: &quot;dissolve&quot;)[(text-color: &quot;transparent&quot;)[Fine!  You stay here!, Charlotte yells.  But, with a frustrated sigh, she continues walking in the direction of the Vizsla. ]]]

|sample2)[(transition: &quot;dissolve&quot;)+(transition-time: 2s)[(text-color: &quot;transparent&quot;)[She tramps through the low scrub in her broken wellington boots, around the trunk of a big beech tree, following the dogs  ][[fresh, muddy prints.-&gt;TUE-0600!-(WOODS)-II-1-viii(AUDIO)]]]] 
{ (live: 9s)[ (set: $transCounter to it + 1)
(if: $transCounter is 1)[
		(show: ?sample1)
	]
	(else-if: $transCounter is 2)[
		(show: ?sample2)
	]

	(else:)[
		(stop:)
	]
]
}




</tw-passagedata><tw-passagedata pid="415" name="TUE-0600!-(WOODS)-II-1-viii(AUDIO)" tags="dark" position="1142,2927" size="100,100">{(track: &quot;600-II-1-vii&quot;, &quot;stop&quot;) (track: &#39;600-II-1-viii-FOLEY&#39;, &#39;play&#39;) (track: &quot;600-II-1-viii&quot;, &quot;play&quot;)}
(text-color: &quot;transparent&quot;)[And then Charlotte notices something raised into the air, with Bella jumping up beneath it, trying to grab it for a second time, like shes showing off a new game.]
(set: $transCounter to 0)\

|sample1)[(transition: &quot;dissolve&quot;)[(text-color: &quot;transparent&quot;)[
For a moment, Charlotte doesnt understand what she&#39;s looking at, at all.]]] 

|sample2)[(transition: &quot;dissolve&quot;)[(text-color: &quot;transparent&quot;)[Later, shell distinctly remember having thought, what a weird Halloween display. ]]]

|sample3)[(transition: &quot;dissolve&quot;)+(transition-time: 2s)[(text-color: &quot;transparent&quot;)[Then, without any conscious change, she starts to ] [[laugh.  Uncontrollably.-&gt;TUE-0600!-(WOODS)-II-1-ix(AUDIO)]]]] 
{ (live: 9s)[ (set: $transCounter to it + 1)
(if: $transCounter is 1)[
		(show: ?sample1)
	]
	(else-if: $transCounter is 2)[
		(show: ?sample2)
	]
	(else-if: $transCounter is 3)[
		(show: ?sample3)
	]

	(else:)[
		(stop:)
	]
]
}</tw-passagedata><tw-passagedata pid="416" name="TUE-0600!-(WOODS)-II-1-ix(AUDIO)" tags="dark" position="1271,2928" size="100,100">{(track: &quot;600-II-1-viii&quot;, &quot;stop&quot;) (track: &#39;600-II-1-ix-FOLEY&#39;, &#39;play&#39;) (track: &quot;600-II-1-ix&quot;, &quot;play&quot;)}


|fade-out&gt;[Charlotte stumbles forwards after the dog, but her legs give way and she falls to her knees.

(live: 8s)[(stop:)|fade-out&gt;[She is overwhelmed with a sense of embarassment.]]

(live:11s)[(stop:)|fade-out&gt;[She looks up at the body.  Her shock turns to revulsion.  What a disgusting thing to do to yourself, she thinks.  And at that moment, Bella prances up to her, and begins rapturously licking her face.]]


(live:27s)[(goto: &quot;TUE-0600!-(WOODS)-II-1-x(END-OF-AUDIO)&quot;)]</tw-passagedata><tw-passagedata pid="417" name="TUE-0600!-(WOODS)-II-1-xi(END-OF-AUDIO)" tags="light" position="1541,2933" size="100,100">This is the end of the audiobook preview.
Please play on further in [[text-&gt;TUE-0630!-TITLE]]</tw-passagedata><tw-passagedata pid="418" name="hal.tracks" tags="" position="89,2719" size="100,100">600-1-I-TITLE: ./audio/600/600-I-1-TITLE.mp3
600-I-1-i: ./audio/600/600-I-1-i.mp3 
600-I-1-iia: ./audio/600/600-I-1-iia.mp3
600-I-1-iib: ./audio/600/600-I-1-iib.mp3
600-I-1-iii: ./audio/600/600-I-1-iii.mp3
600-I-1-iv: ./audio/600/600-I-1-iv.mp3
600-I-1-v-01: ./audio/600/600-I-1-v-01.mp3
600-I-1-v-02(CLICK1): ./audio/600/600-I-1-v-02(CLICK1).mp3
600-I-1-vi-01: ./audio/600/600-I-1-vi-01.mp3
600-I-1-vi-02(CLICK1): ./audio/600/600-I-1-vi-02(CLICK1).mp3
600-I-1-vi-03(CLICK2): ./audio/600/600-I-1-vi-03(CLICK2).mp3
600-I-1-vi-04(CLICK3): ./audio/600/600-I-1-vi-04(CLICK3).mp3
600-I-1-vi-05(CLICK4): ./audio/600/600-I-1-vi-05(CLICK4).mp3
600-I-1-vii-01: ./audio/600/600-I-1-vii-01.mp3
600-I-1-vii-02(BREEZE): ./audio/600/600-I-1-vii-02(BREEZE).mp3
600-I-1-vii-03: ./audio/600/600-I-1-vii-03.mp3
600-I-1-vii-04(HEAR): ./audio/600/600-I-1-vii-04(HEAR).mp3
600-I-1-vii-05: ./audio/600/600-I-1-vii-05.mp3
600-I-1-vii-06(GUST): ./audio/600/600-I-1-vii-06(GUST).mp3
600-I-1-vii-07: ./audio/600/600-I-1-vii-07.mp3
600-I-1-vii-08(AUTUMN): ./audio/600/600-I-1-vii-08(AUTUMN).mp3
600-I-1-vii-09: ./audio/600/600-I-1-vii-09.mp3
600-I-3-i: ./audio/600/600-I-3-i.mp3
600-I-3-iii-01: ./audio/600/600-I-3-iii-01.mp3
600-I-3-iii-02(CLICK1): ./audio/600/600-I-3-iii-02(CLICK1).mp3
600-I-3-iii-03(CLICK2): ./audio/600/600-I-3-iii-03(CLICK2).mp3
600-I-3-iv-01: ./audio/600/600-I-3-iv-01.mp3
600-I-3-iv-02(CLICK1): ./audio/600/600-I-3-iv-02(CLICK1).mp3
600-I-3-iv-03(CLICK2): ./audio/600/600-I-3-iv-03(CLICK2).mp3
600-I-3-v-b-i: ./audio/600/600-I-3-v-b-i.mp3
600-I-3-v-b-ii: ./audio/600/600-I-3-v-b-ii.mp3
600-I-3-v-b-iii-a: ./audio/600/600-I-3-v-b-iii-a.mp3
600-I-3-v-b-iii-b: ./audio/600/600-I-3-v-b-iii-b.mp3
600-I-3-v-b-iv-a: ./audio/600/600-I-3-v-b-iv-a.mp3
600-I-3-v-b-iv-b: ./audio/600/600-I-3-v-b-iv-b.mp3
600-I-3-v-b-v-a: ./audio/600/600-I-3-v-b-v-a.mp3
600-I-3-v-b-v-b: ./audio/600/600-I-3-v-b-v-b.mp3
600-I-3-v-a-01: ./audio/600/600-I-3-v-a-01.mp3
600-I-3-v-a-02(CLICK1): ./audio/600/600-I-3-v-a-02(CLICK1).mp3
600-I-3-v-a-03(CLICK2): ./audio/600/600-I-3-v-a-03(CLICK2).mp3
600-I-3-v-a-04(CLICK3): ./audio/600/600-I-3-v-a-04(CLICK3).mp3
600-I-5-i: ./audio/600/600-I-5-i.mp3
600-I-5-iv: ./audio/600/600-I-5-iv.mp3
600-I-5-v: ./audio/600/600-I-5-v.mp3
600-I-5-vi: ./audio/600/600-I-5-vi.mp3
600-I-5-vii-01: ./audio/600/600-I-5-vii-01.mp3
600-I-5-vii-02(CLICK1): ./audio/600/600-I-5-vii-02(CLICK1).mp3
600-I-5-vii-03(CLICK2): ./audio/600/600-I-5-vii-03(CLICK2).mp3
600-I-5-vii-04(CLICK3): ./audio/600/600-I-5-vii-04(CLICK3).mp3
600-I-5-vii-05(CLICK4): ./audio/600/600-I-5-vii-05(CLICK4).mp3
600-I-5-vii-06(CLICK5): ./audio/600/600-I-5-vii-06(CLICK5).mp3
600-I-5-ix-01(CLICK1): ./audio/600/600-I-5-ix-01(CLICK1).mp3
600-I-5-ix-02(CLICK2): ./audio/600/600-I-5-ix-02(CLICK2).mp3
600-I-5-ix-03(CLICK3): ./audio/600/600-I-5-ix-03(CLICK3).mp3
600-I-5-ix-04(CLICK4): ./audio/600/600-I-5-ix-04(CLICK4).mp3
600-I-5-ix-05(CLICK5): ./audio/600/600-I-5-ix-05(CLICK5).mp3
600-II-1-i: ./audio/600/600-II-1-i.mp3
600-II-1-ii: ./audio/600/600-II-1-ii.mp3
600-II-1-iii: ./audio/600/600-II-1-iii.mp3
600-II-1-v: ./audio/600/600-II-1-v.mp3
600-II-1-vii: ./audio/600/600-II-1-vii.mp3
600-II-1-viii: ./audio/600/600-II-1-viii.mp3
600-II-1-ix: ./audio/600/600-II-1-ix.mp3
600-I-1-i-MUSIC: ./audio/600MUSIC/600-I-1-i-MUSIC.mp3
600-I-1-iia-MUSIC: ./audio/600MUSIC/600-I-1-iia-MUSIC.mp3
600-I-1-iib-MUSIC: ./audio/600MUSIC/600-I-1-iib-MUSIC.mp3
600-I-1-iii-MUSIC: ./audio/600MUSIC/600-I-1-iii-MUSIC.mp3
600-I-1-iv-MUSIC: ./audio/600MUSIC/600-I-1-iv-MUSIC.mp3
600-I-1-v-01-MUSIC: ./audio/600MUSIC/600-I-1-v-01-MUSIC.mp3
600-I-1-v-02(CLICK1)-MUSIC: ./audio/600MUSIC/600-I-1-v-02(CLICK1)-MUSIC.mp3
600-I-1-vi-01-to-04-MUSIC: ./audio/600MUSIC/600-I-1-vi-01-to-04-MUSIC.mp3
600-I-1-vi-05(CLICK4)-MUSIC&amp;FOLEY: ./audio/600MUSIC/600-I-1-vi-05(CLICK4)-MUSIC&amp;FOLEY.mp3
600-I-1-vii-ALL-MUSIC&amp;FOLEY: ./audio/600MUSIC/600-I-1-vii-ALL-MUSIC&amp;FOLEY.mp3
600-I-3-i-MUSIC&amp;FOLEY: ./audio/600MUSIC/600-I-3-i-MUSIC&amp;FOLEY.mp3
600-I-3-iii-01-MUSIC&amp;FOLEY: ./audio/600MUSIC/600-I-3-iii-01-MUSIC&amp;FOLEY.mp3
600-I-3-iii-02(CLICK1)-MUSIC&amp;FOLEY: ./audio/600MUSIC/600-I-3-iii-02(CLICK1)-MUSIC&amp;FOLEY.mp3
600-I-3-iii-03(CLICK2)-MUSIC&amp;FOLEY: ./audio/600MUSIC/600-I-3-iii-03(CLICK2)-MUSIC&amp;FOLEY.mp3
600-I-3-iv-ALL-MUSIC&amp;FOLEY: ./audio/600MUSIC/600-I-3-iv-ALL-MUSIC&amp;FOLEY.mp3
600-I-3-iv-b-i-FOLEY: ./audio/600MUSIC/600-I-3-iv-b-i-FOLEY.mp3
600-I-3-iv-b-i-MUSIC: ./audio/600MUSIC/600-I-3-iv-b-i-MUSIC.mp3
600-I-3-iv-b-i-MUSIC&amp;FOLEY: ./audio/600MUSIC/600-I-3-iv-b-i-MUSIC&amp;FOLEY.mp3
600-I-3-iv-b-ii-MUSIC: ./audio/600MUSIC/600-I-3-iv-b-ii-MUSIC.mp3
600-I-3-iv-b-iii-a-MUSIC: ./audio/600MUSIC/600-I-3-iv-b-iii-a-MUSIC.mp3
600-I-3-iv-b-iii-b-MUSIC&amp;FOLEY: ./audio/600MUSIC/600-I-3-iv-b-iii-b-MUSIC&amp;FOLEY.mp3
600-I-3-iv-b-iv-a-MUSIC: ./audio/600MUSIC/600-I-3-iv-b-iv-a-MUSIC.mp3
600-I-3-iv-b-iv-b-MUSIC&amp;FOLEY: ./audio/600MUSIC/600-I-3-iv-b-iv-b-MUSIC&amp;FOLEY.mp3
600-I-3-iv-b-v-a-MUSIC: ./audio/600MUSIC/600-I-3-iv-b-v-a-MUSIC.mp3
600-I-3-iv-b-v-b-MUSIC: ./audio/600MUSIC/600-I-3-iv-b-v-b-MUSIC.mp3
600-I-3-va-01(CLICK1)-FOLEY: ./audio/600MUSIC/600-I-3-va-01(CLICK1)-FOLEY.mp3
600-I-3-va-01(CLICK1)-MUSIC: ./audio/600MUSIC/600-I-3-va-01(CLICK1)-MUSIC.mp3
600-I-3-va-01(CLICK1)-MUSIC&amp;FOLEY: ./audio/600MUSIC/600-I-3-va-01(CLICK1)-MUSIC&amp;FOLEY.mp3
600-I-3-va-03(CLICK3)-FOLEY: ./audio/600MUSIC/600-I-3-va-03(CLICK3)-FOLEY.mp3
600-I-3-va-03(CLICK3)-MUSIC: ./audio/600MUSIC/600-I-3-va-03(CLICK3)-MUSIC.mp3
600-I-3-va-03(CLICK3)-MUSIC&amp;FOLEY: ./audio/600MUSIC/600-I-3-va-03(CLICK3)-MUSIC&amp;FOLEY.mp3
600-I-3-va-04(CLICK4)-FOLEY: ./audio/600MUSIC/600-I-3-va-04(CLICK4)-FOLEY.mp3
600-I-3-va-04(CLICK4)-MUSIC: ./audio/600MUSIC/600-I-3-va-04(CLICK4)-MUSIC.mp3
600-I-3-va-04(CLICK4)-MUSIC&amp;FOLEY: ./audio/600MUSIC/600-I-3-va-04(CLICK4)-MUSIC&amp;FOLEY.mp3
600-I-5-i-FOLEY: ./audio/600MUSIC/600-I-5-i-FOLEY.mp3
600-I-5-i-MUSIC: ./audio/600MUSIC/600-I-5-i-MUSIC.mp3
600-I-5-i-MUSIC&amp;FOLEY: ./audio/600MUSIC/600-I-5-i-MUSIC&amp;FOLEY.mp3
600-I-5-iv-MUSIC&amp;FOLEY: ./audio/600MUSIC/600-I-5-iv-MUSIC&amp;FOLEY.mp3
600-I-5-v-FOLEY: ./audio/600MUSIC/600-I-5-v-FOLEY.mp3
600-I-5-v-MUSIC: ./audio/600MUSIC/600-I-5-v-MUSIC.mp3
600-I-5-v-MUSIC&amp;FOLEY: ./audio/600MUSIC/600-I-5-v-MUSIC&amp;FOLEY.mp3
600-I-5-vi-FOLEY: ./audio/600MUSIC/600-I-5-vi-FOLEY.mp3
600-I-5-vi-MUSIC: ./audio/600MUSIC/600-I-5-vi-MUSIC.mp3
600-I-5-vi-MUSIC&amp;FOLEY: ./audio/600MUSIC/600-I-5-vi-MUSIC&amp;FOLEY.mp3
600-I-5-vii-01-FOLEY: ./audio/600MUSIC/600-I-5-vii-01-FOLEY.mp3
600-I-5-vii-01-MUSIC: ./audio/600MUSIC/600-I-5-vii-01-MUSIC.mp3
600-I-5-vii-01-MUSIC&amp;FOLEY: ./audio/600MUSIC/600-I-5-vii-01-MUSIC&amp;FOLEY.mp3
600-I-5-vii-02(CLICK1)-FOLEY: ./audio/600MUSIC/600-I-5-vii-02(CLICK1)-FOLEY.mp3
600-I-5-vii-02(CLICK1)-MUSIC: ./audio/600MUSIC/600-I-5-vii-02(CLICK1)-MUSIC.mp3
600-I-5-vii-02(CLICK1)-MUSIC&amp;FOLEY: ./audio/600MUSIC/600-I-5-vii-02(CLICK1)-MUSIC&amp;FOLEY.mp3
600-I-5-vii-03(CLICK2)-FOLEY: ./audio/600MUSIC/600-I-5-vii-03(CLICK2)-FOLEY.mp3
600-I-5-vii-03(CLICK2)-MUSIC: ./audio/600MUSIC/600-I-5-vii-03(CLICK2)-MUSIC.mp3
600-I-5-vii-03(CLICK2)-MUSIC&amp;FOLEY: ./audio/600MUSIC/600-I-5-vii-03(CLICK2)-MUSIC&amp;FOLEY.mp3
600-I-5-vii-04(CLICK3)-FOLEY: ./audio/600MUSIC/600-I-5-vii-04(CLICK3)-FOLEY.mp3
600-I-5-vii-04(CLICK3)-MUSIC: ./audio/600MUSIC/600-I-5-vii-04(CLICK3)-MUSIC.mp3
600-I-5-vii-04(CLICK3)-MUSIC&amp;FOLEY: ./audio/600MUSIC/600-I-5-vii-04(CLICK3)-MUSIC&amp;FOLEY.mp3
600-I-5-vii-05(CLICK4)-MUSIC&amp;FOLEY: ./audio/600MUSIC/600-I-5-vii-05(CLICK4)-MUSIC&amp;FOLEY.mp3
600-I-5-vii-06(CLICK5)-FOLEY: ./audio/600MUSIC/600-I-5-vii-06(CLICK5)-FOLEY.mp3
600-I-5-vii-06(CLICK5)-MUSIC: ./audio/600MUSIC/600-I-5-vii-06(CLICK5)-MUSIC.mp3
600-I-5-vii-06(CLICK5)-MUSIC&amp;FOLEY: ./audio/600MUSIC/600-I-5-vii-06(CLICK5)-MUSIC&amp;FOLEY.mp3
600-I-5-ix-01(CLICK1)-MUSIC&amp;FOLEY: ./audio/600MUSIC/600-I-5-ix-01(CLICK1)-MUSIC&amp;FOLEY.mp3
600-I-5-ix-02(CLICK2)-MUSIC&amp;FOLEY: ./audio/600MUSIC/600-I-5-ix-02(CLICK2)-MUSIC&amp;FOLEY.mp3
600-I-5-ix-03(CLICK3) - RECUT LINE: ./audio/600MUSIC/600-I-5-ix-03(CLICK3) - RECUT LINE.mp3
600-I-5-ix-03(CLICK3)-MUSIC&amp;FOLEY: ./audio/600MUSIC/600-I-5-ix-03(CLICK3)-MUSIC&amp;FOLEY.mp3
600-I-5-ix-04(CLICK4)-MUSIC&amp;FOLEY: ./audio/600MUSIC/600-I-5-ix-04(CLICK4)-MUSIC&amp;FOLEY.mp3
600-I-5-ix-05(CLICK5)-FOLEY: ./audio/600MUSIC/600-I-5-ix-05(CLICK5)-FOLEY.mp3
600-I-5-ix-05(CLICK5)-MUSIC: ./audio/600MUSIC/600-I-5-ix-05(CLICK5)-MUSIC.mp3
600-I-5-ix-05(CLICK5)-MUSIC&amp;FOLEY: ./audio/600MUSIC/600-I-5-ix-05(CLICK5)-MUSIC&amp;FOLEY.mp3
600-II-1-i-MUSIC&amp;FOLEY: ./audio/600MUSIC/600-II-1-i-MUSIC&amp;FOLEY.mp3
600-II-1-ii-MUSIC&amp;FOLEY: ./audio/600MUSIC/600-II-1-ii-MUSIC&amp;FOLEY.mp3
600-II-1-iii-MUSIC&amp;FOLEY: ./audio/600MUSIC/600-II-1-iii-MUSIC&amp;FOLEY.mp3
600-II-1-ix-FOLEY: ./audio/600MUSIC/600-II-1-ix-FOLEY.mp3
600-II-1-v-MUSIC&amp;FOLEY: ./audio/600MUSIC/600-II-1-v-MUSIC&amp;FOLEY.mp3
600-II-1-vi-FOLEY: ./audio/600MUSIC/600-II-1-vi-FOLEY.mp3
600-II-1-vi-to-ix-MUSIC: ./audio/600MUSIC/600-II-1-vi-to-ix-MUSIC.mp3
600-II-1-viii-FOLEY: ./audio/600MUSIC/600-II-1-viii-FOLEY.mp3
600-I-TITLE-MUSIC: ./audio/600MUSIC/600-I-TITLE-MUSIC.mp3
600-I-LOOP-WIND: ./audio/600/600-I-LOOP-WIND.mp3</tw-passagedata><tw-passagedata pid="419" name="DISCLAIMER" tags="light" position="81,2854" size="100,100">&#39;&#39;DISCLAIMER&#39;&#39;

This is a rough concept for the Prologue of Forevermore, created in twine, to experiment with story flow, narration, music and effects.  Ideas for mechanics:

 a consequential choice
 a timed optional choice
 a choice to reveal extra information

There&#39;s also the ability to undo from page to page.

Everything here is first pass and should be taken for the experiment that it is.

[[Click here to begin-&gt;TUE-0600!-TITLE(AUDIO)]]

P.S. The end of the prototype unlocks a [[table of contents-&gt;TUE-0930!-(FARM)-I-TITLE]] so that you can explore parts of the story you skipped.  If you want access, </tw-passagedata><tw-passagedata pid="420" name="TUE-0600!-(WOODS)-I-1-iib(AUDIO)" tags="dark" position="612,2662" size="100,100">{(track: &#39;600-I-1-i&#39;, &#39;stop&#39;) (track: &#39;600-I-1-i-MUSIC&#39;, &#39;fadeout&#39;, 5) (track: &quot;600-I-1-iib-MUSIC&quot;, &quot;play&quot;)}
{(live: 3s)[(stop:) (track: &quot;600-I-1-iib&quot;, &quot;play&quot;)]}
(set: $transCounter to 0) 
(text-color: &quot;transparent&quot;)[There was just one thing to remember.  From long ago in another world.  Out of reach to us in this place without sight, or sound, or logic, or feeling.]

|sample1)[(transition: &quot;dissolve&quot;)[(text-color: &quot;transparent&quot;)[This inaccessible expanse contains nothing at all.]]] 
|sample2)[(transition: &quot;dissolve&quot;)[(text-color: &quot;transparent&quot;)[Except except for a single, unchanging truth.]]] 
|sample3)[(transition: &quot;dissolve&quot;)[(text-color: &quot;transparent&quot;)[This cant be right.]]] 
|sample4)[(transition: &quot;dissolve&quot;)[[[//This cant be right//.-&gt;TUE-0600!-(WOODS)-I-1-iii(AUDIO)]]]]

{ (live: 7.8s)
[(set: $transCounter to it + 1)
	(if: $transCounter is 1)[
		(show: ?sample1)
	]
	(else-if: $transCounter is 2)[
		(show: ?sample2)
	]
	(else-if: $transCounter is 3)[
		(show: ?sample3)
	]
	(else-if: $transCounter is 4)[
		(show: ?sample4)
	]
	(else:)[
		(stop:)
	]
]
}</tw-passagedata><tw-passagedata pid="421" name="TUE-0600!-(WOODS)-I-3-v-b-i(AUDIO)" tags="dark" position="1726,2643" size="100,100">{
	(track: &quot;600-I-3-iv-03(CLICK2)&quot;, &quot;stop&quot;)
	(track: &#39;600-I-3-iv-b-i-MUSIC&amp;FOLEY&#39;, &#39;play&#39;)
	(track: &#39;600-I-LOOP-WIND&#39;, &#39;fadeout&#39;, 5)
	(track: &#39;600-I-3-v-b-i&#39;, &quot;play&quot;)
}

(text-color: &quot;transparent&quot;)[We push away into the darkness.  But there is nothing else to see.  As if we were being pulled by a magnetic force, this raven and its vicious attention are the only things that illuminate our world.]

(live: 11s)[(transition: &quot;dissolve&quot;)+(transition-time:2s)[
[[ But further still...-&gt;TUE-0600!-(WOODS)-I-3-v-b-ii(AUDIO)]]

[[ Back at the ravens...-&gt;TUE-0600!-(WOODS)-I-3-v-b-vi-b(AUDIO)]]
] (stop:)]</tw-passagedata><tw-passagedata pid="422" name="TUE-0600!-(WOODS)-I-3-v-b-ii(AUDIO)" tags="dark" position="1726,2517" size="100,100">{
	(track: &quot;600-I-3-v-b-i&quot;, &quot;stop&quot;)
	(track: &#39;600-I-3-iv-b-ii-MUSIC&#39;, &#39;play&#39;)
	(track: &#39;600-I-3-v-b-ii&#39;, &quot;play&quot;)
}

(text-color: &quot;transparent&quot;)[But further still, though the slurping and ripping of the ravens beak is still audible, the birds are too far off to see.  

And, against these disgusting sounds, a dim light appears above us.

It is so far away, but we can feel its warmth.  Its Magnetism.]

(live: 17s)[(transition: &quot;dissolve&quot;)+(transition-time:2s)[
[[ The light-&gt;TUE-0600!-(WOODS)-I-3-v-b-iii-a(AUDIO)]]
[[ The ravens-&gt;TUE-0600!-(WOODS)-I-3-v-b-iii-b(AUDIO)]] ](stop:)]</tw-passagedata><tw-passagedata pid="423" name="TUE-0600!-(WOODS)-I-3-v-b-iii-a(AUDIO)" tags="light" position="1730,2373" size="100,100">{
	(track: &quot;600-I-3-v-b-ii&quot;, &quot;stop&quot;)
	(track: &#39;600-I-3-iv-b-iii-a-MUSIC&#39;, &#39;play&#39;)
	(track: &#39;600-I-3-v-b-iii-a&#39;, &quot;play&quot;)
}


(text-color: &quot;transparent&quot;)[Itgrowsbrighter, and begins to illuminatethedarkness.  Beamsradiatefromitsedges. Thousandsoftiny,dancingparticles illuminate around us,glittering likedustmotesbyasunlitwindow.
Forthefirsttime,wedonotfeelalone.]

(live: 20s)[(transition: &quot;dissolve&quot;)+(transition-time:2s)[
[[ Looking into the light -&gt;TUE-0600!-(WOODS)-I-3-v-b-iv-a(AUDIO)]]
[[ Looking away from the light -&gt;TUE-0600!-(WOODS)-I-3-v-b-vi-b(AUDIO)]] ](stop:)]</tw-passagedata><tw-passagedata pid="424" name="TUE-0600!-(WOODS)-I-3-v-b-vi-b(AUDIO)" tags="dark" position="1993,2652" size="100,100">{
	(track: &#39;600-I-3-iv-b-v-b-MUSIC&#39;, &#39;play&#39;)
	(track: &#39;600-I-LOOP-WIND&#39;, &#39;fadein&#39;, 5)
	(track: &#39;600-I-3-v-b-v-b&#39;, &quot;play&quot;)
}

(live: 9s)[(transition: &quot;dissolve&quot;)+(transition-time:2s)[(text-color: &quot;transparent&quot;)[
Our attention turns back to the cursing ravens, an we cross the darkness in an instant, are] [[suddenly close again.-&gt;TUE-0600!-(WOODS)-I-5-1-i(AUDIO)]] ](stop:)]
</tw-passagedata><tw-passagedata pid="425" name="TUE-0600!-(WOODS)-I-3-v-b-iv-a(AUDIO)" tags="light" position="1740,2244" size="100,100">{
	(track: &quot;600-I-3-v-b-iii-a&quot;, &quot;stop&quot;)
	(track: &#39;600-I-3-iv-b-iv-a-MUSIC&#39;, &#39;play&#39;)
	(track: &#39;600-I-3-v-b-iv-a&#39;, &quot;play&quot;)
}


(text-color: &quot;transparent&quot;)[The light saysnothing,but it can beunderstood and trusted.
Itwantsus toknowthereisaplacefor us.
Aplacewherethereisnotime, nosuffering.
Allthethingsthatcauseustobe us,withour love and hate and striving andpain,willcease forever.
Andallweneedtodotogothereisletgo.
We are floating upwards and the light is getting stronger.
Welookbackdownintothedarkness.
Isthereanythinglefttherefor us?]

(live: 35s)[(transition: &quot;dissolve&quot;)+(transition-time:2s)[
[[ Letting go of time and space-&gt;TUE-0600!-(WOODS)-I-3-v-b-v-a(AUDIO)]]
[[ It is not the right time to go-&gt;TUE-0600!-(WOODS)-I-3-v-b-iv-b(AUDIO)]] ](stop:)]
</tw-passagedata><tw-passagedata pid="426" name="TUE-0600!-(WOODS)-I-3-v-b-v-a(AUDIO)" tags="light" position="1736,2107" size="100,100">{
	(track: &quot;600-I-3-v-b-iv-a&quot;, &quot;stop&quot;)
	(track: &#39;600-I-3-iv-b-v-a-MUSIC&#39;, &#39;play&#39;)
	(track: &#39;600-I-3-v-b-v-a&#39;, &quot;play&quot;)
}

(text-color: &quot;transparent&quot;)[Weraisehigher.Thelightbrightens.
We feelwarm.
Andpeaceful.
Webecomethelight.
Thelightwasright,wethink,
Aswe becomenothingatall.]

(live: 18s)[(transition: &quot;dissolve&quot;)+(transition-time:2s)[
[[End-&gt;DISCLAIMER]]
[[Undo back to last choice point-&gt;TUE-0600!-(WOODS)-I-3-iv(AUDIO)]] ](stop:)]</tw-passagedata><tw-passagedata pid="427" name="TUE-0600!-(WOODS)-I-3-v-b-iv-b(AUDIO)" tags="dark" position="1963,2246" size="100,100">{
	(track: &quot;600-I-3-v-b-iv-a&quot;, &quot;stop&quot;)
	(track: &#39;600-I-3-iv-b-iv-b-MUSIC&amp;FOLEY&#39;, &#39;play&#39;)
	(track: &#39;600-I-3-v-b-iv-b&#39;, &quot;play&quot;)
}

(live: 30s)[(transition: &quot;dissolve&quot;)+(transition-time:2s)[(text-color: &quot;transparent&quot;)[It is not the right time to go.  We feel a sense of pity from a far off source, and feel a sudden pull backwards,backintothedark.
We werentready.
Thelightfades, theglitteringdustmotesdisappear, and we are left once more in darkness.
But thelight, far off,understands.  Itwantsustoknowitwillbeherefor us,nowandforever.  Waiting untilweare][[ready.-&gt;TUE-0600!-(WOODS)-I-3-v-b-vi-b(AUDIO)]] ](stop:)]</tw-passagedata><tw-passagedata pid="428" name="TUE-0600!-(WOODS)-I-3-v-b-iii-b(AUDIO)" tags="dark" position="2005,2514" size="100,100">{
	(track: &quot;600-I-3-v-b-ii&quot;, &quot;stop&quot;)
	(track: &#39;600-I-LOOP-WIND&#39;, &#39;fadein&#39;, 5)
	(track: &#39;600-I-3-iv-b-iii-b-MUSIC&amp;FOLEY&#39;, &#39;play&#39;)
	(track: &#39;600-I-3-v-b-iii-b&#39;, &quot;play&quot;)
}


(live: 15s)[(transition: &quot;dissolve&quot;)+(transition-time:2s)[(text-color: &quot;transparent&quot;)[We aren&#39;t ready for the light.  We shy away from it, and it retreats far into the heavens.   

Our attention turns back to the cursing ravens, an we cross the darkness in an instant, are] [[suddenly close again.-&gt;TUE-0600!-(WOODS)-I-5-1-i(AUDIO)]] ](stop:)]
</tw-passagedata><tw-passagedata pid="429" name="TUE-0600!-(WOODS)-I-5-1-x(AUDIO)" tags="dark" position="3328,2819" size="100,100">[{(track: &quot;600-I-5-ix-05(CLICK5)&quot;, &quot;play&quot;) (track: &#39;600-I-5-ix-05(CLICK5)-MUSIC&amp;FOLEY&#39;, &#39;play&#39;)}[(live:17s)[(transition: &quot;dissolve&quot;)+(transition-time: 30s)[(text-color: &quot;transparent&quot;)[continue to picnic on the swinging body, but anxious now, turning their heads after every bite.  When you are a raven or a crow, you know your good times never last for long.  And they dont.  They come to an end instantly, in the form of a ] [[large dog,-&gt;TUE-0600!-(WOODS)-II-1-i(AUDIO)]] [(text-color: &quot;transparent&quot;)[bolting through the woods, with its owner shreking and whistling behind it.](stop:)]]]]]</tw-passagedata><tw-passagedata pid="430" name="TUE-0600!-(WOODS)-II-1-x(END-OF-AUDIO)" tags="light" position="1417,2932" size="100,100">#END OF PROLOGUE
Play on further in [[text-&gt;TUE-0630!-TITLE]]
(track: &#39;600-I-LOOP-WIND&#39;, &#39;fadeout&#39;, 5)</tw-passagedata></tw-storydata>
<script title="Twine engine code" data-main="harlowe">"use strict";var _slicedToArray=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}!function(){
/**
 * @license almond 0.3.3 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/almond/LICENSE
 */var requirejs,require,define,root,factory;!function(e){var t,n,r,a,i={},o={},s={},c={},u=Object.prototype.hasOwnProperty,l=[].slice,p=/\.js$/;function f(e,t){return u.call(e,t)}function d(e,t){var n,r,a,i,o,c,u,l,f,d,h,y=t&&t.split("/"),m=s.map,g=m&&m["*"]||{};if(e){for(o=(e=e.split("/")).length-1,s.nodeIdCompat&&p.test(e[o])&&(e[o]=e[o].replace(p,"")),"."===e[0].charAt(0)&&y&&(e=y.slice(0,y.length-1).concat(e)),f=0;f<e.length;f++)if("."===(h=e[f]))e.splice(f,1),f-=1;else if(".."===h){if(0===f||1===f&&".."===e[2]||".."===e[f-1])continue;f>0&&(e.splice(f-1,2),f-=2)}e=e.join("/")}if((y||g)&&m){for(f=(n=e.split("/")).length;f>0;f-=1){if(r=n.slice(0,f).join("/"),y)for(d=y.length;d>0;d-=1)if((a=m[y.slice(0,d).join("/")])&&(a=a[r])){i=a,c=f;break}if(i)break;!u&&g&&g[r]&&(u=g[r],l=f)}!i&&u&&(i=u,c=l),i&&(n.splice(0,c,i),e=n.join("/"))}return e}function h(t,r){return function(){var a=l.call(arguments,0);return"string"!=typeof a[0]&&1===a.length&&a.push(null),n.apply(e,a.concat([t,r]))}}function y(e){return function(t){i[e]=t}}function m(n){if(f(o,n)){var r=o[n];delete o[n],c[n]=!0,t.apply(e,r)}if(!f(i,n)&&!f(c,n))throw new Error("No "+n);return i[n]}function g(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function v(e){return e?g(e):[]}r=function(e,t){var n,r,a=g(e),i=a[0],o=t[1];return e=a[1],i&&(n=m(i=d(i,o))),i?e=n&&n.normalize?n.normalize(e,(r=o,function(e){return d(e,r)})):d(e,o):(i=(a=g(e=d(e,o)))[0],e=a[1],i&&(n=m(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},a={require:function(e){return h(e)},exports:function(e){var t=i[e];return void 0!==t?t:i[e]={}},module:function(e){return{id:e,uri:"",exports:i[e],config:function(e){return function(){return s&&s.config&&s.config[e]||{}}}(e)}}},t=function(t,n,s,u){var l,p,d,g,b,w,T,S=[],x=void 0===s?"undefined":_typeof(s);if(w=v(u=u||t),"undefined"===x||"function"===x){for(n=!n.length&&s.length?["require","exports","module"]:n,b=0;b<n.length;b+=1)if("require"===(p=(g=r(n[b],w)).f))S[b]=a.require(t);else if("exports"===p)S[b]=a.exports(t),T=!0;else if("module"===p)l=S[b]=a.module(t);else if(f(i,p)||f(o,p)||f(c,p))S[b]=m(p);else{if(!g.p)throw new Error(t+" missing "+p);g.p.load(g.n,h(u,!0),y(p),{}),S[b]=i[p]}d=s?s.apply(i[t],S):void 0,t&&(l&&l.exports!==e&&l.exports!==i[t]?i[t]=l.exports:d===e&&T||(i[t]=d))}else t&&(i[t]=s)},requirejs=require=n=function(i,o,c,u,l){if("string"==typeof i)return a[i]?a[i](o):m(r(i,v(o)).f);if(!i.splice){if((s=i).deps&&n(s.deps,s.callback),!o)return;o.splice?(i=o,o=c,c=null):i=e}return o=o||function(){},"function"==typeof c&&(c=u,u=l),u?t(e,i,o,c):setTimeout(function(){t(e,i,o,c)},4),n},n.config=function(e){return n(e)},requirejs._defined=i,(define=function(e,t,n){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(n=t,t=[]),f(i,e)||f(o,e)||(o[e]=[e,t,n])}).amd={jQuery:!0}}(),define("almond",function(){}),
/*!
 * https://github.com/paulmillr/es6-shim
 * @license es6-shim Copyright 2013-2016 by Paul Miller (http://paulmillr.com)
 *   and contributors,  MIT License
 * es6-shim: v0.35.4
 * see https://github.com/paulmillr/es6-shim/blob/0.35.3/LICENSE
 * Details and documentation:
 * https://github.com/paulmillr/es6-shim/
 */
root=this,factory=function(){var e,t,n=Function.call.bind(Function.apply),r=Function.call.bind(Function.call),a=Array.isArray,i=Object.keys,o=function(e){try{return e(),!1}catch(e){return!0}},s=function(e){try{return e()}catch(e){return!1}},c=(e=o,function(){return!n(e,this,arguments)}),u=!!Object.defineProperty&&!o(function(){return Object.defineProperty({},"x",{get:function(){}})}),l="foo"===function(){}.name,p=Function.call.bind(Array.prototype.forEach),f=Function.call.bind(Array.prototype.reduce),d=Function.call.bind(Array.prototype.filter),h=Function.call.bind(Array.prototype.some),y=function(e,t,n,r){!r&&t in e||(u?Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n}):e[t]=n)},m=function(e,t,n){p(i(t),function(r){var a=t[r];y(e,r,a,!!n)})},g=Function.call.bind(Object.prototype.toString),v="function"==typeof/abc/?function(e){return"function"==typeof e&&"[object Function]"===g(e)}:function(e){return"function"==typeof e},b=function(e,t,n){if(!u)throw new TypeError("getters require true ES5 support");Object.defineProperty(e,t,{configurable:!0,enumerable:!1,get:n})},w=function(e,t,n){if(!u)throw new TypeError("getters require true ES5 support");var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,{configurable:r.configurable,enumerable:r.enumerable,get:function(){return e[t]},set:function(n){e[t]=n}})},T=function(e,t,n){if(u){var r=Object.getOwnPropertyDescriptor(e,t);r.value=n,Object.defineProperty(e,t,r)}else e[t]=n},S=function(e,t,n){u?Object.defineProperty(e,t,n):"value"in n&&(e[t]=n.value)},x=function(e,t){t&&v(t.toString)&&y(e,"toString",t.toString.bind(t),!0)},k=Object.create||function(e,t){var n=function(){};n.prototype=e;var r=new n;return void 0!==t&&i(t).forEach(function(e){S(r,e,t[e])}),r},O=function(e,t){return!!Object.setPrototypeOf&&s(function(){var n=function t(n){var r=new e(n);return Object.setPrototypeOf(r,t.prototype),r};return Object.setPrototypeOf(n,e),n.prototype=k(e.prototype,{constructor:{value:n}}),t(n)})},j=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}(),A=j.isFinite,C=Function.call.bind(String.prototype.indexOf),E=Function.apply.bind(Array.prototype.indexOf),_=Function.call.bind(Array.prototype.concat),N=Function.call.bind(String.prototype.slice),P=Function.call.bind(Array.prototype.push),I=Function.apply.bind(Array.prototype.push),M=Function.call.bind(Array.prototype.shift),D=Math.max,R=Math.min,L=Math.floor,F=Math.abs,q=Math.exp,V=Math.log,H=Math.sqrt,z=Function.call.bind(Object.prototype.hasOwnProperty),W=function(){},$=j.Map,B=$&&$.prototype.delete,U=$&&$.prototype.get,G=$&&$.prototype.has,X=$&&$.prototype.set,J=j.Symbol||{},Y=J.species||"@@species",K=Number.isNaN||function(e){return e!=e},Z=Number.isFinite||function(e){return"number"==typeof e&&A(e)},Q=v(Math.sign)?Math.sign:function(e){var t=Number(e);return 0===t?t:K(t)?t:t<0?-1:1},ee=function(e){var t=Number(e);return t<-1||K(t)?NaN:0===t||t===1/0?t:-1===t?-1/0:1+t-1==0?t:t*(V(1+t)/(1+t-1))},te=function(e){return"[object Arguments]"===g(e)},ne=te(arguments)?te:function(e){return null!==e&&"object"===(void 0===e?"undefined":_typeof(e))&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==g(e)&&"[object Function]"===g(e.callee)},re=function(e){return null===e||"function"!=typeof e&&"object"!==(void 0===e?"undefined":_typeof(e))},ae=function(e){return"[object String]"===g(e)},ie=function(e){return"[object RegExp]"===g(e)},oe=function(e){return"function"==typeof j.Symbol&&"symbol"===(void 0===e?"undefined":_typeof(e))},se=function(e,t,n){var r=e[t];y(e,t,n,!0),x(e[t],r)},ce="function"==typeof J&&"function"==typeof J.for&&oe(J()),ue=oe(J.iterator)?J.iterator:"_es6-shim iterator_";j.Set&&"function"==typeof(new j.Set)["@@iterator"]&&(ue="@@iterator"),j.Reflect||y(j,"Reflect",{},!0);var le,pe=j.Reflect,fe=String,de="undefined"!=typeof document&&document?document.all:null,he=null==de?function(e){return null==e}:function(e){return null==e&&e!==de},ye={Call:function(e,t){var r=arguments.length>2?arguments[2]:[];if(!ye.IsCallable(e))throw new TypeError(e+" is not a function");return n(e,t,r)},RequireObjectCoercible:function(e,t){if(he(e))throw new TypeError(t||"Cannot call method on "+e);return e},TypeIsObject:function(e){return null!=e&&!0!==e&&!1!==e&&("function"==typeof e||"object"===(void 0===e?"undefined":_typeof(e))||e===de)},ToObject:function(e,t){return Object(ye.RequireObjectCoercible(e,t))},IsCallable:v,IsConstructor:function(e){return ye.IsCallable(e)},ToInt32:function(e){return ye.ToNumber(e)>>0},ToUint32:function(e){return ye.ToNumber(e)>>>0},ToNumber:function(e){if("[object Symbol]"===g(e))throw new TypeError("Cannot convert a Symbol value to a number");return+e},ToInteger:function(e){var t=ye.ToNumber(e);return K(t)?0:0!==t&&Z(t)?(t>0?1:-1)*L(F(t)):t},ToLength:function(e){var t=ye.ToInteger(e);return t<=0?0:t>Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t},SameValue:function(e,t){return e===t?0!==e||1/e==1/t:K(e)&&K(t)},SameValueZero:function(e,t){return e===t||K(e)&&K(t)},IsIterable:function(e){return ye.TypeIsObject(e)&&(void 0!==e[ue]||ne(e))},GetIterator:function(e){if(ne(e))return new t(e,"value");var n=ye.GetMethod(e,ue);if(!ye.IsCallable(n))throw new TypeError("value is not an iterable");var r=ye.Call(n,e);if(!ye.TypeIsObject(r))throw new TypeError("bad iterator");return r},GetMethod:function(e,t){var n=ye.ToObject(e)[t];if(!he(n)){if(!ye.IsCallable(n))throw new TypeError("Method not callable: "+t);return n}},IteratorComplete:function(e){return!!e.done},IteratorClose:function(e,t){var n=ye.GetMethod(e,"return");if(void 0!==n){var r,a;try{r=ye.Call(n,e)}catch(e){a=e}if(!t){if(a)throw a;if(!ye.TypeIsObject(r))throw new TypeError("Iterator's return method returned a non-object.")}}},IteratorNext:function(e){var t=arguments.length>1?e.next(arguments[1]):e.next();if(!ye.TypeIsObject(t))throw new TypeError("bad iterator");return t},IteratorStep:function(e){var t=ye.IteratorNext(e);return!ye.IteratorComplete(t)&&t},Construct:function(e,t,n,r){var a=void 0===n?e:n;if(!r&&pe.construct)return pe.construct(e,t,a);var i=a.prototype;ye.TypeIsObject(i)||(i=Object.prototype);var o=k(i),s=ye.Call(e,o,t);return ye.TypeIsObject(s)?s:o},SpeciesConstructor:function(e,t){var n=e.constructor;if(void 0===n)return t;if(!ye.TypeIsObject(n))throw new TypeError("Bad constructor");var r=n[Y];if(he(r))return t;if(!ye.IsConstructor(r))throw new TypeError("Bad @@species");return r},CreateHTML:function(e,t,n,r){var a=ye.ToString(e),i="<"+t;""!==n&&(i+=" "+n+'="'+ye.ToString(r).replace(/"/g,"&quot;")+'"');return i+">"+a+"</"+t+">"},IsRegExp:function(e){if(!ye.TypeIsObject(e))return!1;var t=e[J.match];return void 0!==t?!!t:ie(e)},ToString:function(e){return fe(e)}};if(u&&ce){var me=function(e){if(oe(J[e]))return J[e];var t=J.for("Symbol."+e);return Object.defineProperty(J,e,{configurable:!1,enumerable:!1,writable:!1,value:t}),t};if(!oe(J.search)){var ge=me("search"),ve=String.prototype.search;y(RegExp.prototype,ge,function(e){return ye.Call(ve,e,[this])});se(String.prototype,"search",function(e){var t=ye.RequireObjectCoercible(this);if(!he(e)){var n=ye.GetMethod(e,ge);if(void 0!==n)return ye.Call(n,e,[t])}return ye.Call(ve,t,[ye.ToString(e)])})}if(!oe(J.replace)){var be=me("replace"),we=String.prototype.replace;y(RegExp.prototype,be,function(e,t){return ye.Call(we,e,[this,t])});se(String.prototype,"replace",function(e,t){var n=ye.RequireObjectCoercible(this);if(!he(e)){var r=ye.GetMethod(e,be);if(void 0!==r)return ye.Call(r,e,[n,t])}return ye.Call(we,n,[ye.ToString(e),t])})}if(!oe(J.split)){var Te=me("split"),Se=String.prototype.split;y(RegExp.prototype,Te,function(e,t){return ye.Call(Se,e,[this,t])});se(String.prototype,"split",function(e,t){var n=ye.RequireObjectCoercible(this);if(!he(e)){var r=ye.GetMethod(e,Te);if(void 0!==r)return ye.Call(r,e,[n,t])}return ye.Call(Se,n,[ye.ToString(e),t])})}var xe=oe(J.match),ke=xe&&((le={})[J.match]=function(){return 42},42!=="a".match(le));if(!xe||ke){var Oe=me("match"),je=String.prototype.match;y(RegExp.prototype,Oe,function(e){return ye.Call(je,e,[this])});se(String.prototype,"match",function(e){var t=ye.RequireObjectCoercible(this);if(!he(e)){var n=ye.GetMethod(e,Oe);if(void 0!==n)return ye.Call(n,e,[t])}return ye.Call(je,t,[ye.ToString(e)])})}}var Ae=function(e,t,n){x(t,e),Object.setPrototypeOf&&Object.setPrototypeOf(e,t),u?p(Object.getOwnPropertyNames(e),function(r){r in W||n[r]||w(e,r,t)}):p(Object.keys(e),function(r){r in W||n[r]||(t[r]=e[r])}),t.prototype=e.prototype,T(e.prototype,"constructor",t)},Ce=function(){return this},Ee=function(e){u&&!z(e,Y)&&b(e,Y,Ce)},_e=function(e,t){var n=t||function(){return this};y(e,ue,n),!e[ue]&&oe(ue)&&(e[ue]=n)},Ne=function(e,t,n){if(function(e,t,n){u?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,writable:!0,value:n}):e[t]=n}(e,t,n),!ye.SameValue(e[t],n))throw new TypeError("property is nonconfigurable")},Pe=function(e,t,n,r){if(!ye.TypeIsObject(e))throw new TypeError("Constructor requires `new`: "+t.name);var a=t.prototype;ye.TypeIsObject(a)||(a=n);var i=k(a);for(var o in r)if(z(r,o)){var s=r[o];y(i,o,s,!0)}return i};if(String.fromCodePoint&&1!==String.fromCodePoint.length){var Ie=String.fromCodePoint;se(String,"fromCodePoint",function(e){return ye.Call(Ie,this,arguments)})}var Me={fromCodePoint:function(e){for(var t,n=[],r=0,a=arguments.length;r<a;r++){if(t=Number(arguments[r]),!ye.SameValue(t,ye.ToInteger(t))||t<0||t>1114111)throw new RangeError("Invalid code point "+t);t<65536?P(n,String.fromCharCode(t)):(t-=65536,P(n,String.fromCharCode(55296+(t>>10))),P(n,String.fromCharCode(t%1024+56320)))}return n.join("")},raw:function(e){var t=ye.ToObject(e,"bad callSite"),n=ye.ToObject(t.raw,"bad raw value"),r=n.length,a=ye.ToLength(r);if(a<=0)return"";for(var i,o,s,c,u=[],l=0;l<a&&(i=ye.ToString(l),s=ye.ToString(n[i]),P(u,s),!(l+1>=a));)o=l+1<arguments.length?arguments[l+1]:"",c=ye.ToString(o),P(u,c),l+=1;return u.join("")}};String.raw&&"xy"!==String.raw({raw:{0:"x",1:"y",length:2}})&&se(String,"raw",Me.raw),m(String,Me);var De={repeat:function(e){var t=ye.ToString(ye.RequireObjectCoercible(this)),n=ye.ToInteger(e);if(n<0||n>=1/0)throw new RangeError("repeat count must be less than infinity and not overflow maximum string size");return function e(t,n){if(n<1)return"";if(n%2)return e(t,n-1)+t;var r=e(t,n/2);return r+r}(t,n)},startsWith:function(e){var t=ye.ToString(ye.RequireObjectCoercible(this));if(ye.IsRegExp(e))throw new TypeError('Cannot call method "startsWith" with a regex');var n,r=ye.ToString(e);arguments.length>1&&(n=arguments[1]);var a=D(ye.ToInteger(n),0);return N(t,a,a+r.length)===r},endsWith:function(e){var t=ye.ToString(ye.RequireObjectCoercible(this));if(ye.IsRegExp(e))throw new TypeError('Cannot call method "endsWith" with a regex');var n,r=ye.ToString(e),a=t.length;arguments.length>1&&(n=arguments[1]);var i=void 0===n?a:ye.ToInteger(n),o=R(D(i,0),a);return N(t,o-r.length,o)===r},includes:function(e){if(ye.IsRegExp(e))throw new TypeError('"includes" does not accept a RegExp');var t,n=ye.ToString(e);return arguments.length>1&&(t=arguments[1]),-1!==C(this,n,t)},codePointAt:function(e){var t=ye.ToString(ye.RequireObjectCoercible(this)),n=ye.ToInteger(e),r=t.length;if(n>=0&&n<r){var a=t.charCodeAt(n);if(a<55296||a>56319||n+1===r)return a;var i=t.charCodeAt(n+1);return i<56320||i>57343?a:1024*(a-55296)+(i-56320)+65536}}};if(String.prototype.includes&&!1!=="a".includes("a",1/0)&&se(String.prototype,"includes",De.includes),String.prototype.startsWith&&String.prototype.endsWith){var Re=o(function(){return"/a/".startsWith(/a/)}),Le=s(function(){return!1==="abc".startsWith("a",1/0)});Re&&Le||(se(String.prototype,"startsWith",De.startsWith),se(String.prototype,"endsWith",De.endsWith))}ce&&(s(function(){var e=/a/;return e[J.match]=!1,"/a/".startsWith(e)})||se(String.prototype,"startsWith",De.startsWith),s(function(){var e=/a/;return e[J.match]=!1,"/a/".endsWith(e)})||se(String.prototype,"endsWith",De.endsWith),s(function(){var e=/a/;return e[J.match]=!1,"/a/".includes(e)})||se(String.prototype,"includes",De.includes));m(String.prototype,De);var Fe=["\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003","\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028","\u2029\ufeff"].join(""),qe=new RegExp("(^["+Fe+"]+)|(["+Fe+"]+$)","g"),Ve=function(){return ye.ToString(ye.RequireObjectCoercible(this)).replace(qe,"")},He=["\x85","\u200b","\ufffe"].join(""),ze=new RegExp("["+He+"]","g"),We=/^[-+]0x[0-9a-f]+$/i,$e=He.trim().length!==He.length;y(String.prototype,"trim",Ve,$e);var Be=function(e){return{value:e,done:0===arguments.length}},Ue=function(e){ye.RequireObjectCoercible(e),this._s=ye.ToString(e),this._i=0};Ue.prototype.next=function(){var e=this._s,t=this._i;if(void 0===e||t>=e.length)return this._s=void 0,Be();var n,r,a=e.charCodeAt(t);return r=a<55296||a>56319||t+1===e.length?1:(n=e.charCodeAt(t+1))<56320||n>57343?1:2,this._i=t+r,Be(e.substr(t,r))},_e(Ue.prototype),_e(String.prototype,function(){return new Ue(this)});var Ge={from:function(e){var t,n,a,i,o,s,c=this;if(arguments.length>1&&(t=arguments[1]),void 0===t)n=!1;else{if(!ye.IsCallable(t))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(a=arguments[2]),n=!0}if(void 0!==(ne(e)||ye.GetMethod(e,ue))){o=ye.IsConstructor(c)?Object(new c):[];var u,l,p=ye.GetIterator(e);for(s=0;!1!==(u=ye.IteratorStep(p));){l=u.value;try{n&&(l=void 0===a?t(l,s):r(t,a,l,s)),o[s]=l}catch(e){throw ye.IteratorClose(p,!0),e}s+=1}i=s}else{var f,d=ye.ToObject(e);for(i=ye.ToLength(d.length),o=ye.IsConstructor(c)?Object(new c(i)):new Array(i),s=0;s<i;++s)f=d[s],n&&(f=void 0===a?t(f,s):r(t,a,f,s)),Ne(o,s,f)}return o.length=i,o},of:function(){for(var e=arguments.length,t=this,n=a(t)||!ye.IsCallable(t)?new Array(e):ye.Construct(t,[e]),r=0;r<e;++r)Ne(n,r,arguments[r]);return n.length=e,n}};m(Array,Ge),Ee(Array),m((t=function(e,t){this.i=0,this.array=e,this.kind=t}).prototype,{next:function(){var e=this.i,n=this.array;if(!(this instanceof t))throw new TypeError("Not an ArrayIterator");if(void 0!==n)for(var r=ye.ToLength(n.length);e<r;e++){var a,i=this.kind;return"key"===i?a=e:"value"===i?a=n[e]:"entry"===i&&(a=[e,n[e]]),this.i=e+1,Be(a)}return this.array=void 0,Be()}}),_e(t.prototype),Array.of===Ge.of||function(){var e=function(e){this.length=e};e.prototype=[];var t=Array.of.apply(e,[1,2]);return t instanceof e&&2===t.length}()||se(Array,"of",Ge.of);var Xe={copyWithin:function(e,t){var n,r=ye.ToObject(this),a=ye.ToLength(r.length),i=ye.ToInteger(e),o=ye.ToInteger(t),s=i<0?D(a+i,0):R(i,a),c=o<0?D(a+o,0):R(o,a);arguments.length>2&&(n=arguments[2]);var u=void 0===n?a:ye.ToInteger(n),l=u<0?D(a+u,0):R(u,a),p=R(l-c,a-s),f=1;for(c<s&&s<c+p&&(f=-1,c+=p-1,s+=p-1);p>0;)c in r?r[s]=r[c]:delete r[s],c+=f,s+=f,p-=1;return r},fill:function(e){var t,n;arguments.length>1&&(t=arguments[1]),arguments.length>2&&(n=arguments[2]);var r=ye.ToObject(this),a=ye.ToLength(r.length);t=ye.ToInteger(void 0===t?0:t);for(var i=(n=ye.ToInteger(void 0===n?a:n))<0?a+n:n,o=t<0?D(a+t,0):R(t,a);o<a&&o<i;++o)r[o]=e;return r},find:function(e){var t=ye.ToObject(this),n=ye.ToLength(t.length);if(!ye.IsCallable(e))throw new TypeError("Array#find: predicate must be a function");for(var a,i=arguments.length>1?arguments[1]:null,o=0;o<n;o++)if(a=t[o],i){if(r(e,i,a,o,t))return a}else if(e(a,o,t))return a},findIndex:function(e){var t=ye.ToObject(this),n=ye.ToLength(t.length);if(!ye.IsCallable(e))throw new TypeError("Array#findIndex: predicate must be a function");for(var a=arguments.length>1?arguments[1]:null,i=0;i<n;i++)if(a){if(r(e,a,t[i],i,t))return i}else if(e(t[i],i,t))return i;return-1},keys:function(){return new t(this,"key")},values:function(){return new t(this,"value")},entries:function(){return new t(this,"entry")}};if(Array.prototype.keys&&!ye.IsCallable([1].keys().next)&&delete Array.prototype.keys,Array.prototype.entries&&!ye.IsCallable([1].entries().next)&&delete Array.prototype.entries,Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&Array.prototype[ue]&&(m(Array.prototype,{values:Array.prototype[ue]}),oe(J.unscopables)&&(Array.prototype[J.unscopables].values=!0)),l&&Array.prototype.values&&"values"!==Array.prototype.values.name){var Je=Array.prototype.values;se(Array.prototype,"values",function(){return ye.Call(Je,this,arguments)}),y(Array.prototype,ue,Array.prototype.values,!0)}m(Array.prototype,Xe),1/[!0].indexOf(!0,-0)<0&&y(Array.prototype,"indexOf",function(e){var t=E(this,arguments);return 0===t&&1/t<0?0:t},!0),_e(Array.prototype,function(){return this.values()}),Object.getPrototypeOf&&_e(Object.getPrototypeOf([].values()));var Ye,Ke=s(function(){return 0===Array.from({length:-1}).length}),Ze=1===(Ye=Array.from([0].entries())).length&&a(Ye[0])&&0===Ye[0][0]&&0===Ye[0][1];if(Ke&&Ze||se(Array,"from",Ge.from),!s(function(){return Array.from([0],void 0)})){var Qe=Array.from;se(Array,"from",function(e){return arguments.length>1&&void 0!==arguments[1]?ye.Call(Qe,this,arguments):r(Qe,this,e)})}var et=-(Math.pow(2,32)-1),tt=function(e,t){var n={length:et};return n[t?(n.length>>>0)-1:0]=!0,s(function(){return r(e,n,function(){throw new RangeError("should not reach here")},[]),!0})};if(!tt(Array.prototype.forEach)){var nt=Array.prototype.forEach;se(Array.prototype,"forEach",function(e){return ye.Call(nt,this.length>=0?this:[],arguments)})}if(!tt(Array.prototype.map)){var rt=Array.prototype.map;se(Array.prototype,"map",function(e){return ye.Call(rt,this.length>=0?this:[],arguments)})}if(!tt(Array.prototype.filter)){var at=Array.prototype.filter;se(Array.prototype,"filter",function(e){return ye.Call(at,this.length>=0?this:[],arguments)})}if(!tt(Array.prototype.some)){var it=Array.prototype.some;se(Array.prototype,"some",function(e){return ye.Call(it,this.length>=0?this:[],arguments)})}if(!tt(Array.prototype.every)){var ot=Array.prototype.every;se(Array.prototype,"every",function(e){return ye.Call(ot,this.length>=0?this:[],arguments)})}if(!tt(Array.prototype.reduce)){var st=Array.prototype.reduce;se(Array.prototype,"reduce",function(e){return ye.Call(st,this.length>=0?this:[],arguments)})}if(!tt(Array.prototype.reduceRight,!0)){var ct=Array.prototype.reduceRight;se(Array.prototype,"reduceRight",function(e){return ye.Call(ct,this.length>=0?this:[],arguments)})}var ut=8!==Number("0o10"),lt=2!==Number("0b10"),pt=h(He,function(e){return 0===Number(e+0+e)});if(ut||lt||pt){var ft=Number,dt=/^0b[01]+$/i,ht=/^0o[0-7]+$/i,yt=dt.test.bind(dt),mt=ht.test.bind(ht),gt=ze.test.bind(ze),vt=We.test.bind(We),bt=function(){var e=function(t){var n;"string"==typeof(n=arguments.length>0?re(t)?t:function(e){var t;if("function"==typeof e.valueOf&&(t=e.valueOf(),re(t)))return t;if("function"==typeof e.toString&&(t=e.toString(),re(t)))return t;throw new TypeError("No default value")}(t):0)&&(n=ye.Call(Ve,n),yt(n)?n=parseInt(N(n,2),2):mt(n)?n=parseInt(N(n,2),8):(gt(n)||vt(n))&&(n=NaN));var r=this,a=s(function(){return ft.prototype.valueOf.call(r),!0});return r instanceof e&&!a?new ft(n):ft(n)};return e}();Ae(ft,bt,{}),m(bt,{NaN:ft.NaN,MAX_VALUE:ft.MAX_VALUE,MIN_VALUE:ft.MIN_VALUE,NEGATIVE_INFINITY:ft.NEGATIVE_INFINITY,POSITIVE_INFINITY:ft.POSITIVE_INFINITY}),Number=bt,T(j,"Number",bt)}var wt=Math.pow(2,53)-1;m(Number,{MAX_SAFE_INTEGER:wt,MIN_SAFE_INTEGER:-wt,EPSILON:2.220446049250313e-16,parseInt:j.parseInt,parseFloat:j.parseFloat,isFinite:Z,isInteger:function(e){return Z(e)&&ye.ToInteger(e)===e},isSafeInteger:function(e){return Number.isInteger(e)&&F(e)<=Number.MAX_SAFE_INTEGER},isNaN:K}),y(Number,"parseInt",j.parseInt,Number.parseInt!==j.parseInt),1===[,1].find(function(){return!0})&&se(Array.prototype,"find",Xe.find),0!==[,1].findIndex(function(){return!0})&&se(Array.prototype,"findIndex",Xe.findIndex);var Tt,St,xt,kt=Function.bind.call(Function.bind,Object.prototype.propertyIsEnumerable),Ot=function(e,t){u&&kt(e,t)&&Object.defineProperty(e,t,{enumerable:!1})},jt=function(){for(var e=Number(this),t=arguments.length,n=t-e,r=new Array(n<0?0:n),a=e;a<t;++a)r[a-e]=arguments[a];return r},At=function(e){return function(t,n){return t[n]=e[n],t}},Ct=function(e,t){var n,r=i(Object(t));return ye.IsCallable(Object.getOwnPropertySymbols)&&(n=d(Object.getOwnPropertySymbols(Object(t)),kt(t))),f(_(r,n||[]),At(t),e)},Et={assign:function(e,t){var n=ye.ToObject(e,"Cannot convert undefined or null to object");return f(ye.Call(jt,1,arguments),Ct,n)},is:function(e,t){return ye.SameValue(e,t)}};if(Object.assign&&Object.preventExtensions&&function(){var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch(t){return"y"===e[1]}}()&&se(Object,"assign",Et.assign),m(Object,Et),u){var _t={setPrototypeOf:function(e,t){var n,a=function(e,t){return function(e,t){if(!ye.TypeIsObject(e))throw new TypeError("cannot set prototype on a non-object");if(null!==t&&!ye.TypeIsObject(t))throw new TypeError("can only set prototype to an object or null"+t)}(e,t),r(n,e,t),e};try{n=e.getOwnPropertyDescriptor(e.prototype,"__proto__").set,r(n,{},null)}catch(t){if(e.prototype!=={}.__proto__)return;n=function(e){this.__proto__=e},a.polyfill=a(a({},null),e.prototype)instanceof e}return a}(Object)};m(Object,_t)}if(Object.setPrototypeOf&&Object.getPrototypeOf&&null!==Object.getPrototypeOf(Object.setPrototypeOf({},null))&&null===Object.getPrototypeOf(Object.create(null))&&(Tt=Object.create(null),St=Object.getPrototypeOf,xt=Object.setPrototypeOf,Object.getPrototypeOf=function(e){var t=St(e);return t===Tt?null:t},Object.setPrototypeOf=function(e,t){return xt(e,null===t?Tt:t)},Object.setPrototypeOf.polyfill=!1),!!o(function(){return Object.keys("foo")})){var Nt=Object.keys;se(Object,"keys",function(e){return Nt(ye.ToObject(e))}),i=Object.keys}if(o(function(){return Object.keys(/a/g)})){var Pt=Object.keys;se(Object,"keys",function(e){if(ie(e)){var t=[];for(var n in e)z(e,n)&&P(t,n);return t}return Pt(e)}),i=Object.keys}if(Object.getOwnPropertyNames&&!!o(function(){return Object.getOwnPropertyNames("foo")})){var It="object"===("undefined"==typeof window?"undefined":_typeof(window))?Object.getOwnPropertyNames(window):[],Mt=Object.getOwnPropertyNames;se(Object,"getOwnPropertyNames",function(e){var t=ye.ToObject(e);if("[object Window]"===g(t))try{return Mt(t)}catch(e){return _([],It)}return Mt(t)})}if(Object.getOwnPropertyDescriptor&&!!o(function(){return Object.getOwnPropertyDescriptor("foo","bar")})){var Dt=Object.getOwnPropertyDescriptor;se(Object,"getOwnPropertyDescriptor",function(e,t){return Dt(ye.ToObject(e),t)})}if(Object.seal&&!!o(function(){return Object.seal("foo")})){var Rt=Object.seal;se(Object,"seal",function(e){return ye.TypeIsObject(e)?Rt(e):e})}if(Object.isSealed&&!!o(function(){return Object.isSealed("foo")})){var Lt=Object.isSealed;se(Object,"isSealed",function(e){return!ye.TypeIsObject(e)||Lt(e)})}if(Object.freeze&&!!o(function(){return Object.freeze("foo")})){var Ft=Object.freeze;se(Object,"freeze",function(e){return ye.TypeIsObject(e)?Ft(e):e})}if(Object.isFrozen&&!!o(function(){return Object.isFrozen("foo")})){var qt=Object.isFrozen;se(Object,"isFrozen",function(e){return!ye.TypeIsObject(e)||qt(e)})}if(Object.preventExtensions&&!!o(function(){return Object.preventExtensions("foo")})){var Vt=Object.preventExtensions;se(Object,"preventExtensions",function(e){return ye.TypeIsObject(e)?Vt(e):e})}if(Object.isExtensible&&!!o(function(){return Object.isExtensible("foo")})){var Ht=Object.isExtensible;se(Object,"isExtensible",function(e){return!!ye.TypeIsObject(e)&&Ht(e)})}if(Object.getPrototypeOf&&!!o(function(){return Object.getPrototypeOf("foo")})){var zt=Object.getPrototypeOf;se(Object,"getPrototypeOf",function(e){return zt(ye.ToObject(e))})}var Wt,$t=u&&((Wt=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags"))&&ye.IsCallable(Wt.get));if(u&&!$t){b(RegExp.prototype,"flags",function(){if(!ye.TypeIsObject(this))throw new TypeError("Method called on incompatible type: must be an object.");var e="";return this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),this.unicode&&(e+="u"),this.sticky&&(e+="y"),e})}var Bt,Ut=u&&s(function(){return"/a/i"===String(new RegExp(/a/g,"i"))}),Gt=ce&&u&&((Bt=/./)[J.match]=!1,RegExp(Bt)===Bt),Xt=s(function(){return"/abc/"===RegExp.prototype.toString.call({source:"abc"})}),Jt=Xt&&s(function(){return"/a/b"===RegExp.prototype.toString.call({source:"a",flags:"b"})});if(!Xt||!Jt){var Yt=RegExp.prototype.toString;y(RegExp.prototype,"toString",function(){var e=ye.RequireObjectCoercible(this);return ie(e)?r(Yt,e):"/"+fe(e.source)+"/"+fe(e.flags)},!0),x(RegExp.prototype.toString,Yt)}if(u&&(!Ut||Gt)){var Kt=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get,Zt=Object.getOwnPropertyDescriptor(RegExp.prototype,"source")||{},Qt=ye.IsCallable(Zt.get)?Zt.get:function(){return this.source},en=RegExp,tn=function e(t,n){var r=ye.IsRegExp(t);return this instanceof e||!r||void 0!==n||t.constructor!==e?ie(t)?new e(ye.Call(Qt,t),void 0===n?ye.Call(Kt,t):n):(r&&(t.source,void 0===n&&t.flags),new en(t,n)):t};Ae(en,tn,{$input:!0}),RegExp=tn,T(j,"RegExp",tn)}if(u){var nn={input:"$_",lastMatch:"$&",lastParen:"$+",leftContext:"$`",rightContext:"$'"};p(i(nn),function(e){e in RegExp&&!(nn[e]in RegExp)&&b(RegExp,nn[e],function(){return RegExp[e]})})}Ee(RegExp);var rn=1/Number.EPSILON,an=Math.pow(2,-23),on=Math.pow(2,127)*(2-an),sn=Math.pow(2,-126),cn=Math.E,un=Math.LOG2E,ln=Math.LOG10E,pn=Number.prototype.clz;delete Number.prototype.clz;var fn={acosh:function(e){var t=Number(e);if(K(t)||e<1)return NaN;if(1===t)return 0;if(t===1/0)return t;var n=1/(t*t);if(t<2)return ee(t-1+H(1-n)*t);var r=t/2;return ee(r+H(1-n)*r-1)+1/un},asinh:function(e){var t=Number(e);if(0===t||!A(t))return t;var n=F(t),r=n*n,a=Q(t);return n<1?a*ee(n+r/(H(r+1)+1)):a*(ee(n/2+H(1+1/r)*n/2-1)+1/un)},atanh:function(e){var t=Number(e);if(0===t)return t;if(-1===t)return-1/0;if(1===t)return 1/0;if(K(t)||t<-1||t>1)return NaN;var n=F(t);return Q(t)*ee(2*n/(1-n))/2},cbrt:function(e){var t=Number(e);if(0===t)return t;var n,r=t<0;return r&&(t=-t),n=t===1/0?1/0:(t/((n=q(V(t)/3))*n)+2*n)/3,r?-n:n},clz32:function(e){var t=Number(e),n=ye.ToUint32(t);return 0===n?32:pn?ye.Call(pn,n):31-L(V(n+.5)*un)},cosh:function(e){var t=Number(e);if(0===t)return 1;if(K(t))return NaN;if(!A(t))return 1/0;var n=q(F(t)-1);return(n+1/(n*cn*cn))*(cn/2)},expm1:function(e){var t=Number(e);if(t===-1/0)return-1;if(!A(t)||0===t)return t;if(F(t)>.5)return q(t)-1;for(var n=t,r=0,a=1;r+n!==r;)r+=n,n*=t/(a+=1);return r},hypot:function(e,t){for(var n=0,r=0,a=0;a<arguments.length;++a){var i=F(Number(arguments[a]));r<i?(n*=r/i*(r/i),n+=1,r=i):n+=i>0?i/r*(i/r):i}return r===1/0?1/0:r*H(n)},log2:function(e){return V(e)*un},log10:function(e){return V(e)*ln},log1p:ee,sign:Q,sinh:function(e){var t=Number(e);if(!A(t)||0===t)return t;var n=F(t);if(n<1){var r=Math.expm1(n);return Q(t)*r*(1+1/(r+1))/2}var a=q(n-1);return Q(t)*(a-1/(a*cn*cn))*(cn/2)},tanh:function(e){var t=Number(e);return K(t)||0===t?t:t>=20?1:t<=-20?-1:(Math.expm1(t)-Math.expm1(-t))/(q(t)+q(-t))},trunc:function(e){var t=Number(e);return t<0?-L(-t):L(t)},imul:function(e,t){var n=ye.ToUint32(e),r=ye.ToUint32(t),a=65535&n,i=65535&r;return a*i+((n>>>16&65535)*i+a*(r>>>16&65535)<<16>>>0)|0},fround:function(e){var t=Number(e);if(0===t||t===1/0||t===-1/0||K(t))return t;var n=Q(t),r=F(t);if(r<sn)return n*(r/sn/an+rn-rn)*sn*an;var a=(1+an/Number.EPSILON)*r,i=a-(a-r);return i>on||K(i)?n*(1/0):n*i}},dn=function(e,t,n){return F(1-e/t)/Number.EPSILON<(n||8)};m(Math,fn),y(Math,"sinh",fn.sinh,Math.sinh(710)===1/0),y(Math,"cosh",fn.cosh,Math.cosh(710)===1/0),y(Math,"log1p",fn.log1p,-1e-17!==Math.log1p(-1e-17)),y(Math,"asinh",fn.asinh,Math.asinh(-1e7)!==-Math.asinh(1e7)),y(Math,"asinh",fn.asinh,Math.asinh(1e300)===1/0),y(Math,"atanh",fn.atanh,0===Math.atanh(1e-300)),y(Math,"tanh",fn.tanh,-2e-17!==Math.tanh(-2e-17)),y(Math,"acosh",fn.acosh,Math.acosh(Number.MAX_VALUE)===1/0),y(Math,"acosh",fn.acosh,!dn(Math.acosh(1+Number.EPSILON),Math.sqrt(2*Number.EPSILON))),y(Math,"cbrt",fn.cbrt,!dn(Math.cbrt(1e-300),1e-100)),y(Math,"sinh",fn.sinh,-2e-17!==Math.sinh(-2e-17));var hn=Math.expm1(10);y(Math,"expm1",fn.expm1,hn>22025.465794806718||hn<22025.465794806718);var yn=Math.round,mn=0===Math.round(.5-Number.EPSILON/4)&&1===Math.round(Number.EPSILON/3.99-.5),gn=[rn+1,2*rn-1].every(function(e){return Math.round(e)===e});y(Math,"round",function(e){var t=L(e);return e-t<.5?t:-1===t?-0:t+1},!mn||!gn),x(Math.round,yn);var vn=Math.imul;-5!==Math.imul(4294967295,5)&&(Math.imul=fn.imul,x(Math.imul,vn)),2!==Math.imul.length&&se(Math,"imul",function(e,t){return ye.Call(vn,Math,arguments)});var bn,wn,Tn=function(){var e=j.setTimeout;if("function"==typeof e||"object"===(void 0===e?"undefined":_typeof(e))){ye.IsPromise=function(e){return!!ye.TypeIsObject(e)&&void 0!==e._promise};var t,n=function(e){if(!ye.IsConstructor(e))throw new TypeError("Bad promise constructor");var t=this;if(t.resolve=void 0,t.reject=void 0,t.promise=new e(function(e,n){if(void 0!==t.resolve||void 0!==t.reject)throw new TypeError("Bad Promise implementation!");t.resolve=e,t.reject=n}),!ye.IsCallable(t.resolve)||!ye.IsCallable(t.reject))throw new TypeError("Bad promise constructor")};"undefined"!=typeof window&&ye.IsCallable(window.postMessage)&&(t=function(){var e=[];return window.addEventListener("message",function(t){if(t.source===window&&"zero-timeout-message"===t.data){if(t.stopPropagation(),0===e.length)return;M(e)()}},!0),function(t){P(e,t),window.postMessage("zero-timeout-message","*")}});var a,i,o,s,c,u=ye.IsCallable(j.setImmediate)?j.setImmediate:"object"===("undefined"==typeof process?"undefined":_typeof(process))&&process.nextTick?process.nextTick:(a=j.Promise,(i=a&&a.resolve&&a.resolve())&&function(e){return i.then(e)}||(ye.IsCallable(t)?t():function(t){e(t,0)})),l=function(e){return e},p=function(e){throw e},f={},d=function(e,t,n){u(function(){h(e,t,n)})},h=function(e,t,n){var r,a;if(t===f)return e(n);try{r=e(n),a=t.resolve}catch(e){r=e,a=t.reject}a(r)},y=function(e,t){var n=e._promise,r=n.reactionLength;if(r>0&&(d(n.fulfillReactionHandler0,n.reactionCapability0,t),n.fulfillReactionHandler0=void 0,n.rejectReactions0=void 0,n.reactionCapability0=void 0,r>1))for(var a=1,i=0;a<r;a++,i+=3)d(n[i+0],n[i+2],t),e[i+0]=void 0,e[i+1]=void 0,e[i+2]=void 0;n.result=t,n.state=1,n.reactionLength=0},g=function(e,t){var n=e._promise,r=n.reactionLength;if(r>0&&(d(n.rejectReactionHandler0,n.reactionCapability0,t),n.fulfillReactionHandler0=void 0,n.rejectReactions0=void 0,n.reactionCapability0=void 0,r>1))for(var a=1,i=0;a<r;a++,i+=3)d(n[i+1],n[i+2],t),e[i+0]=void 0,e[i+1]=void 0,e[i+2]=void 0;n.result=t,n.state=2,n.reactionLength=0},v=function(e){var t=!1;return{resolve:function(n){var r;if(!t){if(t=!0,n===e)return g(e,new TypeError("Self resolution"));if(!ye.TypeIsObject(n))return y(e,n);try{r=n.then}catch(t){return g(e,t)}if(!ye.IsCallable(r))return y(e,n);u(function(){w(e,n,r)})}},reject:function(n){if(!t)return t=!0,g(e,n)}}},b=function(e,t,n,a){e===s?r(e,t,n,a,f):r(e,t,n,a)},w=function(e,t,n){var r=v(e),a=r.resolve,i=r.reject;try{b(n,t,a,i)}catch(e){i(e)}},T=c=function(e){if(!(this instanceof c))throw new TypeError('Constructor Promise requires "new"');if(this&&this._promise)throw new TypeError("Bad construction");if(!ye.IsCallable(e))throw new TypeError("not a valid resolver");var t=Pe(this,c,o,{_promise:{result:void 0,state:0,reactionLength:0,fulfillReactionHandler0:void 0,rejectReactionHandler0:void 0,reactionCapability0:void 0}}),n=v(t),r=n.reject;try{e(n.resolve,r)}catch(e){r(e)}return t};o=T.prototype;var S=function(e,t,n,r){var a=!1;return function(i){a||(a=!0,t[e]=i,0==--r.count&&(0,n.resolve)(t))}};return m(T,{all:function(e){var t=this;if(!ye.TypeIsObject(t))throw new TypeError("Promise is not object");var r,a,i=new n(t);try{return function(e,t,n){for(var r,a,i=e.iterator,o=[],s={count:1},c=0;;){try{if(!1===(r=ye.IteratorStep(i))){e.done=!0;break}a=r.value}catch(t){throw e.done=!0,t}o[c]=void 0;var u=t.resolve(a),l=S(c,o,n,s);s.count+=1,b(u.then,u,l,n.reject),c+=1}0==--s.count&&(0,n.resolve)(o);return n.promise}(a={iterator:r=ye.GetIterator(e),done:!1},t,i)}catch(e){var o=e;if(a&&!a.done)try{ye.IteratorClose(r,!0)}catch(e){o=e}return(0,i.reject)(o),i.promise}},race:function(e){var t=this;if(!ye.TypeIsObject(t))throw new TypeError("Promise is not object");var r,a,i=new n(t);try{return function(e,t,n){for(var r,a,i,o=e.iterator;;){try{if(!1===(r=ye.IteratorStep(o))){e.done=!0;break}a=r.value}catch(t){throw e.done=!0,t}i=t.resolve(a),b(i.then,i,n.resolve,n.reject)}return n.promise}(a={iterator:r=ye.GetIterator(e),done:!1},t,i)}catch(e){var o=e;if(a&&!a.done)try{ye.IteratorClose(r,!0)}catch(e){o=e}return(0,i.reject)(o),i.promise}},reject:function(e){if(!ye.TypeIsObject(this))throw new TypeError("Bad promise constructor");var t=new n(this);return(0,t.reject)(e),t.promise},resolve:function(e){var t=this;if(!ye.TypeIsObject(t))throw new TypeError("Bad promise constructor");if(ye.IsPromise(e)&&e.constructor===t)return e;var r=new n(t);return(0,r.resolve)(e),r.promise}}),m(o,{catch:function(e){return this.then(null,e)},then:function(e,t){if(!ye.IsPromise(this))throw new TypeError("not a promise");var r,a=ye.SpeciesConstructor(this,T);r=arguments.length>2&&arguments[2]===f&&a===T?f:new n(a);var i,o=ye.IsCallable(e)?e:l,s=ye.IsCallable(t)?t:p,c=this._promise;if(0===c.state){if(0===c.reactionLength)c.fulfillReactionHandler0=o,c.rejectReactionHandler0=s,c.reactionCapability0=r;else{var u=3*(c.reactionLength-1);c[u+0]=o,c[u+1]=s,c[u+2]=r}c.reactionLength+=1}else if(1===c.state)i=c.result,d(o,r,i);else{if(2!==c.state)throw new TypeError("unexpected Promise state");i=c.result,d(s,r,i)}return r.promise}}),f=new n(T),s=o.then,T}}();if(j.Promise&&(delete j.Promise.accept,delete j.Promise.defer,delete j.Promise.prototype.chain),"function"==typeof Tn){m(j,{Promise:Tn});var Sn=O(j.Promise,function(e){return e.resolve(42).then(function(){})instanceof e}),xn=!o(function(){return j.Promise.reject(42).then(null,5).then(null,W)}),kn=o(function(){return j.Promise.call(3,W)}),On=function(e){var t=e.resolve(5);t.constructor={};var n=e.resolve(t);try{n.then(null,W).then(null,W)}catch(e){return!0}return t===n}(j.Promise),jn=u&&(bn=0,wn=Object.defineProperty({},"then",{get:function(){bn+=1}}),Promise.resolve(wn),1===bn),An=function e(t){var n=new Promise(t);t(3,function(){}),this.then=n.then,this.constructor=e};An.prototype=Promise.prototype,An.all=Promise.all;var Cn=s(function(){return!!An.all([1,2])});if(Sn&&xn&&kn&&!On&&jn&&!Cn||(Promise=Tn,se(j,"Promise",Tn)),1!==Promise.all.length){var En=Promise.all;se(Promise,"all",function(e){return ye.Call(En,this,arguments)})}if(1!==Promise.race.length){var _n=Promise.race;se(Promise,"race",function(e){return ye.Call(_n,this,arguments)})}if(1!==Promise.resolve.length){var Nn=Promise.resolve;se(Promise,"resolve",function(e){return ye.Call(Nn,this,arguments)})}if(1!==Promise.reject.length){var Pn=Promise.reject;se(Promise,"reject",function(e){return ye.Call(Pn,this,arguments)})}Ot(Promise,"all"),Ot(Promise,"race"),Ot(Promise,"resolve"),Ot(Promise,"reject"),Ee(Promise)}var In,Mn,Dn=function(e){var t=i(f(e,function(e,t){return e[t]=!0,e},{}));return e.join(":")===t.join(":")},Rn=Dn(["z","a","bb"]),Ln=Dn(["z",1,"a","3",2]);if(u){var Fn=function(e,t){return t||Rn?he(e)?"^"+ye.ToString(e):"string"==typeof e?"$"+e:"number"==typeof e?Ln?e:"n"+e:"boolean"==typeof e?"b"+e:null:null},qn=function(){return Object.create?Object.create(null):{}},Vn=function(e,t,n){if(a(n)||ae(n))p(n,function(e){if(!ye.TypeIsObject(e))throw new TypeError("Iterator value "+e+" is not an entry object");t.set(e[0],e[1])});else if(n instanceof e)r(e.prototype.forEach,n,function(e,n){t.set(n,e)});else{var i,o;if(!he(n)){if(o=t.set,!ye.IsCallable(o))throw new TypeError("bad map");i=ye.GetIterator(n)}if(void 0!==i)for(;;){var s=ye.IteratorStep(i);if(!1===s)break;var c=s.value;try{if(!ye.TypeIsObject(c))throw new TypeError("Iterator value "+c+" is not an entry object");r(o,t,c[0],c[1])}catch(e){throw ye.IteratorClose(i,!0),e}}}},Hn=function(e,t,n){if(a(n)||ae(n))p(n,function(e){t.add(e)});else if(n instanceof e)r(e.prototype.forEach,n,function(e){t.add(e)});else{var i,o;if(!he(n)){if(o=t.add,!ye.IsCallable(o))throw new TypeError("bad set");i=ye.GetIterator(n)}if(void 0!==i)for(;;){var s=ye.IteratorStep(i);if(!1===s)break;var c=s.value;try{r(o,t,c)}catch(e){throw ye.IteratorClose(i,!0),e}}}},zn={Map:function(){var e={},t=function(e,t){this.key=e,this.value=t,this.next=null,this.prev=null};t.prototype.isRemoved=function(){return this.key===e};var n,a=function(e,t){if(!ye.TypeIsObject(e)||!function(e){return!!e._es6map}(e))throw new TypeError("Method Map.prototype."+t+" called on incompatible receiver "+ye.ToString(e))},i=function(e,t){a(e,"[[MapIterator]]"),this.head=e._head,this.i=this.head,this.kind=t};_e(i.prototype={isMapIterator:!0,next:function(){if(!this.isMapIterator)throw new TypeError("Not a MapIterator");var e,t=this.i,n=this.kind,r=this.head;if(void 0===this.i)return Be();for(;t.isRemoved()&&t!==r;)t=t.prev;for(;t.next!==r;)if(!(t=t.next).isRemoved())return e="key"===n?t.key:"value"===n?t.value:[t.key,t.value],this.i=t,Be(e);return this.i=void 0,Be()}});var o=function e(){if(!(this instanceof e))throw new TypeError('Constructor Map requires "new"');if(this&&this._es6map)throw new TypeError("Bad construction");var r=Pe(this,e,n,{_es6map:!0,_head:null,_map:$?new $:null,_size:0,_storage:qn()}),a=new t(null,null);return a.next=a.prev=a,r._head=a,arguments.length>0&&Vn(e,r,arguments[0]),r};return b(n=o.prototype,"size",function(){if(void 0===this._size)throw new TypeError("size method called on incompatible Map");return this._size}),m(n,{get:function(e){var t;a(this,"get");var n=Fn(e,!0);if(null!==n)return(t=this._storage[n])?t.value:void 0;if(this._map)return(t=U.call(this._map,e))?t.value:void 0;for(var r=this._head,i=r;(i=i.next)!==r;)if(ye.SameValueZero(i.key,e))return i.value},has:function(e){a(this,"has");var t=Fn(e,!0);if(null!==t)return void 0!==this._storage[t];if(this._map)return G.call(this._map,e);for(var n=this._head,r=n;(r=r.next)!==n;)if(ye.SameValueZero(r.key,e))return!0;return!1},set:function(e,n){a(this,"set");var r,i=this._head,o=i,s=Fn(e,!0);if(null!==s){if(void 0!==this._storage[s])return this._storage[s].value=n,this;r=this._storage[s]=new t(e,n),o=i.prev}else this._map&&(G.call(this._map,e)?U.call(this._map,e).value=n:(r=new t(e,n),X.call(this._map,e,r),o=i.prev));for(;(o=o.next)!==i;)if(ye.SameValueZero(o.key,e))return o.value=n,this;return r=r||new t(e,n),ye.SameValue(-0,e)&&(r.key=0),r.next=this._head,r.prev=this._head.prev,r.prev.next=r,r.next.prev=r,this._size+=1,this},delete:function(t){a(this,"delete");var n=this._head,r=n,i=Fn(t,!0);if(null!==i){if(void 0===this._storage[i])return!1;r=this._storage[i].prev,delete this._storage[i]}else if(this._map){if(!G.call(this._map,t))return!1;r=U.call(this._map,t).prev,B.call(this._map,t)}for(;(r=r.next)!==n;)if(ye.SameValueZero(r.key,t))return r.key=e,r.value=e,r.prev.next=r.next,r.next.prev=r.prev,this._size-=1,!0;return!1},clear:function(){a(this,"clear"),this._map=$?new $:null,this._size=0,this._storage=qn();for(var t=this._head,n=t,r=n.next;(n=r)!==t;)n.key=e,n.value=e,r=n.next,n.next=n.prev=t;t.next=t.prev=t},keys:function(){return a(this,"keys"),new i(this,"key")},values:function(){return a(this,"values"),new i(this,"value")},entries:function(){return a(this,"entries"),new i(this,"key+value")},forEach:function(e){a(this,"forEach");for(var t=arguments.length>1?arguments[1]:null,n=this.entries(),i=n.next();!i.done;i=n.next())t?r(e,t,i.value[1],i.value[0],this):e(i.value[1],i.value[0],this)}}),_e(n,n.entries),o}(),Set:function(){var e,t=function(e,t){if(!ye.TypeIsObject(e)||!function(e){return e._es6set&&void 0!==e._storage}(e))throw new TypeError("Set.prototype."+t+" called on incompatible receiver "+ye.ToString(e))},n=function t(){if(!(this instanceof t))throw new TypeError('Constructor Set requires "new"');if(this&&this._es6set)throw new TypeError("Bad construction");var n=Pe(this,t,e,{_es6set:!0,"[[SetData]]":null,_storage:qn()});if(!n._es6set)throw new TypeError("bad set");return arguments.length>0&&Hn(t,n,arguments[0]),n};e=n.prototype;var a=function(e){if(!e["[[SetData]]"]){var t=new zn.Map;e["[[SetData]]"]=t,p(i(e._storage),function(e){var n=function(e){var t=e;if("^null"===t)return null;if("^undefined"!==t){var n=t.charAt(0);return"$"===n?N(t,1):"n"===n?+N(t,1):"b"===n?"btrue"===t:+t}}(e);t.set(n,n)}),e["[[SetData]]"]=t}e._storage=null};b(n.prototype,"size",function(){return t(this,"size"),this._storage?i(this._storage).length:(a(this),this["[[SetData]]"].size)}),m(n.prototype,{has:function(e){var n;return t(this,"has"),this._storage&&null!==(n=Fn(e))?!!this._storage[n]:(a(this),this["[[SetData]]"].has(e))},add:function(e){var n;return t(this,"add"),this._storage&&null!==(n=Fn(e))?(this._storage[n]=!0,this):(a(this),this["[[SetData]]"].set(e,e),this)},delete:function(e){var n;if(t(this,"delete"),this._storage&&null!==(n=Fn(e))){var r=z(this._storage,n);return delete this._storage[n]&&r}return a(this),this["[[SetData]]"].delete(e)},clear:function(){t(this,"clear"),this._storage&&(this._storage=qn()),this["[[SetData]]"]&&this["[[SetData]]"].clear()},values:function(){return t(this,"values"),a(this),new o(this["[[SetData]]"].values())},entries:function(){return t(this,"entries"),a(this),new o(this["[[SetData]]"].entries())},forEach:function(e){t(this,"forEach");var n=arguments.length>1?arguments[1]:null,i=this;a(i),this["[[SetData]]"].forEach(function(t,a){n?r(e,n,a,a,i):e(a,a,i)})}}),y(n.prototype,"keys",n.prototype.values,!0),_e(n.prototype,n.prototype.values);var o=function(e){this.it=e};return o.prototype={isSetIterator:!0,next:function(){if(!this.isSetIterator)throw new TypeError("Not a SetIterator");return this.it.next()}},_e(o.prototype),n}()};if(j.Set&&!Set.prototype.delete&&Set.prototype.remove&&Set.prototype.items&&Set.prototype.map&&Array.isArray((new Set).keys)&&(j.Set=zn.Set),j.Map||j.Set){s(function(){return 2===new Map([[1,2]]).get(1)})||(j.Map=function e(){if(!(this instanceof e))throw new TypeError('Constructor Map requires "new"');var t=new $;return arguments.length>0&&Vn(e,t,arguments[0]),delete t.constructor,Object.setPrototypeOf(t,j.Map.prototype),t},j.Map.prototype=k($.prototype),y(j.Map.prototype,"constructor",j.Map,!0),x(j.Map,$));var Wn=new Map,$n=((Mn=new Map([[1,0],[2,0],[3,0],[4,0]])).set(-0,Mn),Mn.get(0)===Mn&&Mn.get(-0)===Mn&&Mn.has(0)&&Mn.has(-0)),Bn=Wn.set(1,2)===Wn;$n&&Bn||se(Map.prototype,"set",function(e,t){return r(X,this,0===e?0:e,t),this}),$n||(m(Map.prototype,{get:function(e){return r(U,this,0===e?0:e)},has:function(e){return r(G,this,0===e?0:e)}},!0),x(Map.prototype.get,U),x(Map.prototype.has,G));var Un=new Set,Gn=Set.prototype.delete&&Set.prototype.add&&Set.prototype.has&&((In=Un).delete(0),In.add(-0),!In.has(0)),Xn=Un.add(1)===Un;if(!Gn||!Xn){var Jn=Set.prototype.add;Set.prototype.add=function(e){return r(Jn,this,0===e?0:e),this},x(Set.prototype.add,Jn)}if(!Gn){var Yn=Set.prototype.has;Set.prototype.has=function(e){return r(Yn,this,0===e?0:e)},x(Set.prototype.has,Yn);var Kn=Set.prototype.delete;Set.prototype.delete=function(e){return r(Kn,this,0===e?0:e)},x(Set.prototype.delete,Kn)}var Zn=O(j.Map,function(e){var t=new e([]);return t.set(42,42),t instanceof e}),Qn=Object.setPrototypeOf&&!Zn,er=function(){try{return!(j.Map()instanceof j.Map)}catch(e){return e instanceof TypeError}}();0===j.Map.length&&!Qn&&er||(j.Map=function e(){if(!(this instanceof e))throw new TypeError('Constructor Map requires "new"');var t=new $;return arguments.length>0&&Vn(e,t,arguments[0]),delete t.constructor,Object.setPrototypeOf(t,e.prototype),t},j.Map.prototype=$.prototype,y(j.Map.prototype,"constructor",j.Map,!0),x(j.Map,$));var tr=O(j.Set,function(e){var t=new e([]);return t.add(42,42),t instanceof e}),nr=Object.setPrototypeOf&&!tr,rr=function(){try{return!(j.Set()instanceof j.Set)}catch(e){return e instanceof TypeError}}();if(0!==j.Set.length||nr||!rr){var ar=j.Set;j.Set=function e(){if(!(this instanceof e))throw new TypeError('Constructor Set requires "new"');var t=new ar;return arguments.length>0&&Hn(e,t,arguments[0]),delete t.constructor,Object.setPrototypeOf(t,e.prototype),t},j.Set.prototype=ar.prototype,y(j.Set.prototype,"constructor",j.Set,!0),x(j.Set,ar)}var ir=new j.Map,or=!s(function(){return ir.keys().next().done});if(("function"!=typeof j.Map.prototype.clear||0!==(new j.Set).size||0!==ir.size||"function"!=typeof j.Map.prototype.keys||"function"!=typeof j.Set.prototype.keys||"function"!=typeof j.Map.prototype.forEach||"function"!=typeof j.Set.prototype.forEach||c(j.Map)||c(j.Set)||"function"!=typeof ir.keys().next||or||!Zn)&&m(j,{Map:zn.Map,Set:zn.Set},!0),j.Set.prototype.keys!==j.Set.prototype.values&&y(j.Set.prototype,"keys",j.Set.prototype.values,!0),_e(Object.getPrototypeOf((new j.Map).keys())),_e(Object.getPrototypeOf((new j.Set).keys())),l&&"has"!==j.Set.prototype.has.name){var sr=j.Set.prototype.has;se(j.Set.prototype,"has",function(e){return r(sr,this,e)})}}m(j,zn),Ee(j.Map),Ee(j.Set)}var cr=function(e){if(!ye.TypeIsObject(e))throw new TypeError("target must be an object")},ur={apply:function(){return ye.Call(ye.Call,null,arguments)},construct:function(e,t){if(!ye.IsConstructor(e))throw new TypeError("First argument must be a constructor.");var n=arguments.length>2?arguments[2]:e;if(!ye.IsConstructor(n))throw new TypeError("new.target must be a constructor.");return ye.Construct(e,t,n,"internal")},deleteProperty:function(e,t){if(cr(e),u){var n=Object.getOwnPropertyDescriptor(e,t);if(n&&!n.configurable)return!1}return delete e[t]},has:function(e,t){return cr(e),t in e}};Object.getOwnPropertyNames&&Object.assign(ur,{ownKeys:function(e){cr(e);var t=Object.getOwnPropertyNames(e);return ye.IsCallable(Object.getOwnPropertySymbols)&&I(t,Object.getOwnPropertySymbols(e)),t}});var lr=function(e){return!o(e)};if(Object.preventExtensions&&Object.assign(ur,{isExtensible:function(e){return cr(e),Object.isExtensible(e)},preventExtensions:function(e){return cr(e),lr(function(){return Object.preventExtensions(e)})}}),u){var pr=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e,t);if(!r){var a=Object.getPrototypeOf(e);if(null===a)return;return pr(a,t,n)}return"value"in r?r.value:r.get?ye.Call(r.get,n):void 0},fr=function(e,t,n,a){var i=Object.getOwnPropertyDescriptor(e,t);if(!i){var o=Object.getPrototypeOf(e);if(null!==o)return fr(o,t,n,a);i={value:void 0,writable:!0,enumerable:!0,configurable:!0}}return"value"in i?!!i.writable&&(!!ye.TypeIsObject(a)&&(Object.getOwnPropertyDescriptor(a,t)?pe.defineProperty(a,t,{value:n}):pe.defineProperty(a,t,{value:n,writable:!0,enumerable:!0,configurable:!0}))):!!i.set&&(r(i.set,a,n),!0)};Object.assign(ur,{defineProperty:function(e,t,n){return cr(e),lr(function(){return Object.defineProperty(e,t,n)})},getOwnPropertyDescriptor:function(e,t){return cr(e),Object.getOwnPropertyDescriptor(e,t)},get:function(e,t){cr(e);var n=arguments.length>2?arguments[2]:e;return pr(e,t,n)},set:function(e,t,n){cr(e);var r=arguments.length>3?arguments[3]:e;return fr(e,t,n,r)}})}if(Object.getPrototypeOf){var dr=Object.getPrototypeOf;ur.getPrototypeOf=function(e){return cr(e),dr(e)}}if(Object.setPrototypeOf&&ur.getPrototypeOf){Object.assign(ur,{setPrototypeOf:function(e,t){if(cr(e),null!==t&&!ye.TypeIsObject(t))throw new TypeError("proto must be an object or null");return t===pe.getPrototypeOf(e)||!(pe.isExtensible&&!pe.isExtensible(e))&&(!function(e,t){for(var n=t;n;){if(e===n)return!0;n=ur.getPrototypeOf(n)}return!1}(e,t)&&(Object.setPrototypeOf(e,t),!0))}})}Object.keys(ur).forEach(function(e){!function(e,t){ye.IsCallable(j.Reflect[e])?s(function(){return j.Reflect[e](1),j.Reflect[e](NaN),j.Reflect[e](!0),!0})&&se(j.Reflect,e,t):y(j.Reflect,e,t)}(e,ur[e])});var hr=j.Reflect.getPrototypeOf;if(l&&hr&&"getPrototypeOf"!==hr.name&&se(j.Reflect,"getPrototypeOf",function(e){return r(hr,j.Reflect,e)}),j.Reflect.setPrototypeOf&&s(function(){return j.Reflect.setPrototypeOf(1,{}),!0})&&se(j.Reflect,"setPrototypeOf",ur.setPrototypeOf),j.Reflect.defineProperty&&(s(function(){var e=!j.Reflect.defineProperty(1,"test",{value:1}),t="function"!=typeof Object.preventExtensions||!j.Reflect.defineProperty(Object.preventExtensions({}),"test",{});return e&&t})||se(j.Reflect,"defineProperty",ur.defineProperty)),j.Reflect.construct&&(s(function(){var e=function(){};return j.Reflect.construct(function(){},[],e)instanceof e})||se(j.Reflect,"construct",ur.construct)),"Invalid Date"!==String(new Date(NaN))){var yr=Date.prototype.toString;se(Date.prototype,"toString",function(){var e=+this;return e!=e?"Invalid Date":ye.Call(yr,this)})}var mr={anchor:function(e){return ye.CreateHTML(this,"a","name",e)},big:function(){return ye.CreateHTML(this,"big","","")},blink:function(){return ye.CreateHTML(this,"blink","","")},bold:function(){return ye.CreateHTML(this,"b","","")},fixed:function(){return ye.CreateHTML(this,"tt","","")},fontcolor:function(e){return ye.CreateHTML(this,"font","color",e)},fontsize:function(e){return ye.CreateHTML(this,"font","size",e)},italics:function(){return ye.CreateHTML(this,"i","","")},link:function(e){return ye.CreateHTML(this,"a","href",e)},small:function(){return ye.CreateHTML(this,"small","","")},strike:function(){return ye.CreateHTML(this,"strike","","")},sub:function(){return ye.CreateHTML(this,"sub","","")},sup:function(){return ye.CreateHTML(this,"sup","","")}};p(Object.keys(mr),function(e){var t=String.prototype[e],n=!1;if(ye.IsCallable(t)){var a=r(t,"",' " '),i=_([],a.match(/"/g)).length;n=a!==a.toLowerCase()||i>2}else n=!0;n&&se(String.prototype,e,mr[e])});var gr=function(){if(!ce)return!1;var e="object"===("undefined"==typeof JSON?"undefined":_typeof(JSON))&&"function"==typeof JSON.stringify?JSON.stringify:null;if(!e)return!1;if(void 0!==e(J()))return!0;if("[null]"!==e([J()]))return!0;var t={a:J()};return t[J()]=!0,"{}"!==e(t)}(),vr=s(function(){return!ce||"{}"===JSON.stringify(Object(J()))&&"[{}]"===JSON.stringify([Object(J())])});if(gr||!vr){var br=JSON.stringify;se(JSON,"stringify",function(e){if("symbol"!==(void 0===e?"undefined":_typeof(e))){var t;arguments.length>1&&(t=arguments[1]);var n=[e];if(a(t))n.push(t);else{var i=ye.IsCallable(t)?t:null;n.push(function(e,t){var n=i?r(i,this,e,t):t;if("symbol"!==(void 0===n?"undefined":_typeof(n)))return oe(n)?At({})(n):n})}return arguments.length>2&&n.push(arguments[2]),br.apply(this,n)}})}return j},"function"==typeof define&&define.amd?define("es6-shim",factory):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=factory():root.returnExports=factory(),function(e,t){"object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports)?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){var n=[],r=Object.getPrototypeOf,a=n.slice,i=n.flat?function(e){return n.flat.call(e)}:function(e){return n.concat.apply([],e)},o=n.push,s=n.indexOf,c={},u=c.toString,l=c.hasOwnProperty,p=l.toString,f=p.call(Object),d={},h=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},y=function(e){return null!=e&&e===e.window},m=e.document,g={type:!0,src:!0,nonce:!0,noModule:!0};function v(e,t,n){var r,a,i=(n=n||m).createElement("script");if(i.text=e,t)for(r in g)(a=t[r]||t.getAttribute&&t.getAttribute(r))&&i.setAttribute(r,a);n.head.appendChild(i).parentNode.removeChild(i)}function b(e){return null==e?e+"":"object"===(void 0===e?"undefined":_typeof(e))||"function"==typeof e?c[u.call(e)]||"object":void 0===e?"undefined":_typeof(e)}var w=function e(t,n){return new e.fn.init(t,n)};function T(e){var t=!!e&&"length"in e&&e.length,n=b(e);return!h(e)&&!y(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}w.fn=w.prototype={jquery:"3.5.1",constructor:w,length:0,toArray:function(){return a.call(this)},get:function(e){return null==e?a.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=w.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return w.each(this,e)},map:function(e){return this.pushStack(w.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(w.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(w.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:o,sort:n.sort,splice:n.splice},w.extend=w.fn.extend=function(){var e,t,n,r,a,i,o=arguments[0]||{},s=1,c=arguments.length,u=!1;for("boolean"==typeof o&&(u=o,o=arguments[s]||{},s++),"object"===(void 0===o?"undefined":_typeof(o))||h(o)||(o={}),s===c&&(o=this,s--);s<c;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&o!==r&&(u&&r&&(w.isPlainObject(r)||(a=Array.isArray(r)))?(n=o[t],i=a&&!Array.isArray(n)?[]:a||w.isPlainObject(n)?n:{},a=!1,o[t]=w.extend(u,i,r)):void 0!==r&&(o[t]=r));return o},w.extend({expando:"jQuery"+("3.5.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==u.call(e))&&(!(t=r(e))||"function"==typeof(n=l.call(t,"constructor")&&t.constructor)&&p.call(n)===f)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){v(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(T(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(T(Object(e))?w.merge(n,"string"==typeof e?[e]:e):o.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:s.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,a=e.length;r<n;r++)e[a++]=t[r];return e.length=a,e},grep:function(e,t,n){for(var r=[],a=0,i=e.length,o=!n;a<i;a++)!t(e[a],a)!==o&&r.push(e[a]);return r},map:function(e,t,n){var r,a,o=0,s=[];if(T(e))for(r=e.length;o<r;o++)null!=(a=t(e[o],o,n))&&s.push(a);else for(o in e)null!=(a=t(e[o],o,n))&&s.push(a);return i(s)},guid:1,support:d}),"function"==typeof Symbol&&(w.fn[Symbol.iterator]=n[Symbol.iterator]),w.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){c["[object "+t+"]"]=t.toLowerCase()});var S=function(e){var t,n,r,a,i,o,s,c,u,l,p,f,d,h,y,m,g,v,b,w="sizzle"+1*new Date,T=e.document,S=0,x=0,k=ce(),O=ce(),j=ce(),A=ce(),C=function(e,t){return e===t&&(p=!0),0},E={}.hasOwnProperty,_=[],N=_.pop,P=_.push,I=_.push,M=_.slice,D=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",F="(?:\\\\[\\da-fA-F]{1,6}"+L+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",q="\\["+L+"*("+F+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+F+"))|)"+L+"*\\]",V=":("+F+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+q+")*)|.*)\\)|)",H=new RegExp(L+"+","g"),z=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),W=new RegExp("^"+L+"*,"+L+"*"),$=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),B=new RegExp(L+"|>"),U=new RegExp(V),G=new RegExp("^"+F+"$"),X={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F+"|[*])"),ATTR:new RegExp("^"+q),PSEUDO:new RegExp("^"+V),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},J=/HTML$/i,Y=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+L+"?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ae=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ie=function(){f()},oe=we(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{I.apply(_=M.call(T.childNodes),T.childNodes),_[T.childNodes.length].nodeType}catch(e){I={apply:_.length?function(e,t){P.apply(e,M.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function se(e,t,r,a){var i,s,u,l,p,h,g,v=t&&t.ownerDocument,T=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==T&&9!==T&&11!==T)return r;if(!a&&(f(t),t=t||d,y)){if(11!==T&&(p=Q.exec(e)))if(i=p[1]){if(9===T){if(!(u=t.getElementById(i)))return r;if(u.id===i)return r.push(u),r}else if(v&&(u=v.getElementById(i))&&b(t,u)&&u.id===i)return r.push(u),r}else{if(p[2])return I.apply(r,t.getElementsByTagName(e)),r;if((i=p[3])&&n.getElementsByClassName&&t.getElementsByClassName)return I.apply(r,t.getElementsByClassName(i)),r}if(n.qsa&&!A[e+" "]&&(!m||!m.test(e))&&(1!==T||"object"!==t.nodeName.toLowerCase())){if(g=e,v=t,1===T&&(B.test(e)||$.test(e))){for((v=ee.test(e)&&ge(t.parentNode)||t)===t&&n.scope||((l=t.getAttribute("id"))?l=l.replace(re,ae):t.setAttribute("id",l=w)),s=(h=o(e)).length;s--;)h[s]=(l?"#"+l:":scope")+" "+be(h[s]);g=h.join(",")}try{return I.apply(r,v.querySelectorAll(g)),r}catch(t){A(e,!0)}finally{l===w&&t.removeAttribute("id")}}}return c(e.replace(z,"$1"),t,r,a)}function ce(){var e=[];return function t(n,a){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=a}}function ue(e){return e[w]=!0,e}function le(e){var t=d.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function pe(e,t){for(var n=e.split("|"),a=n.length;a--;)r.attrHandle[n[a]]=t}function fe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function de(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function he(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function ye(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&oe(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function me(e){return ue(function(t){return t=+t,ue(function(n,r){for(var a,i=e([],n.length,t),o=i.length;o--;)n[a=i[o]]&&(n[a]=!(r[a]=n[a]))})})}function ge(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=se.support={},i=se.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!J.test(t||n&&n.nodeName||"HTML")},f=se.setDocument=function(e){var t,a,o=e?e.ownerDocument||e:T;return o!=d&&9===o.nodeType&&o.documentElement?(h=(d=o).documentElement,y=!i(d),T!=d&&(a=d.defaultView)&&a.top!==a&&(a.addEventListener?a.addEventListener("unload",ie,!1):a.attachEvent&&a.attachEvent("onunload",ie)),n.scope=le(function(e){return h.appendChild(e).appendChild(d.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),n.attributes=le(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=le(function(e){return e.appendChild(d.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=Z.test(d.getElementsByClassName),n.getById=le(function(e){return h.appendChild(e).id=w,!d.getElementsByName||!d.getElementsByName(w).length}),n.getById?(r.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&y){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(te,ne);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&y){var n,r,a,i=t.getElementById(e);if(i){if((n=i.getAttributeNode("id"))&&n.value===e)return[i];for(a=t.getElementsByName(e),r=0;i=a[r++];)if((n=i.getAttributeNode("id"))&&n.value===e)return[i]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],a=0,i=t.getElementsByTagName(e);if("*"===e){for(;n=i[a++];)1===n.nodeType&&r.push(n);return r}return i},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&y)return t.getElementsByClassName(e)},g=[],m=[],(n.qsa=Z.test(d.querySelectorAll))&&(le(function(e){var t;h.appendChild(e).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+L+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+L+"*(?:value|"+R+")"),e.querySelectorAll("[id~="+w+"-]").length||m.push("~="),(t=d.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||m.push("\\["+L+"*name"+L+"*="+L+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+w+"+*").length||m.push(".#.+[+~]"),e.querySelectorAll("\\\f"),m.push("[\\r\\n\\f]")}),le(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=d.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+L+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),h.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")})),(n.matchesSelector=Z.test(v=h.matches||h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&le(function(e){n.disconnectedMatch=v.call(e,"*"),v.call(e,"[s!='']:x"),g.push("!=",V)}),m=m.length&&new RegExp(m.join("|")),g=g.length&&new RegExp(g.join("|")),t=Z.test(h.compareDocumentPosition),b=t||Z.test(h.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},C=t?function(e,t){if(e===t)return p=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e==d||e.ownerDocument==T&&b(T,e)?-1:t==d||t.ownerDocument==T&&b(T,t)?1:l?D(l,e)-D(l,t):0:4&r?-1:1)}:function(e,t){if(e===t)return p=!0,0;var n,r=0,a=e.parentNode,i=t.parentNode,o=[e],s=[t];if(!a||!i)return e==d?-1:t==d?1:a?-1:i?1:l?D(l,e)-D(l,t):0;if(a===i)return fe(e,t);for(n=e;n=n.parentNode;)o.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;o[r]===s[r];)r++;return r?fe(o[r],s[r]):o[r]==T?-1:s[r]==T?1:0},d):d},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(f(e),n.matchesSelector&&y&&!A[t+" "]&&(!g||!g.test(t))&&(!m||!m.test(t)))try{var r=v.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){A(t,!0)}return se(t,d,null,[e]).length>0},se.contains=function(e,t){return(e.ownerDocument||e)!=d&&f(e),b(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=d&&f(e);var a=r.attrHandle[t.toLowerCase()],i=a&&E.call(r.attrHandle,t.toLowerCase())?a(e,t,!y):void 0;return void 0!==i?i:n.attributes||!y?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},se.escape=function(e){return(e+"").replace(re,ae)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,r=[],a=0,i=0;if(p=!n.detectDuplicates,l=!n.sortStable&&e.slice(0),e.sort(C),p){for(;t=e[i++];)t===e[i]&&(a=r.push(i));for(;a--;)e.splice(r[a],1)}return l=null,e},a=se.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=a(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=a(t);return n},(r=se.selectors={cacheLength:50,createPseudo:ue,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return X.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&U.test(n)&&(t=o(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=k[e+" "];return t||(t=new RegExp("(^|"+L+")"+e+"("+L+"|$)"))&&k(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var a=se.attr(r,e);return null==a?"!="===t:!t||(a+="","="===t?a===n:"!="===t?a!==n:"^="===t?n&&0===a.indexOf(n):"*="===t?n&&a.indexOf(n)>-1:"$="===t?n&&a.slice(-n.length)===n:"~="===t?(" "+a.replace(H," ")+" ").indexOf(n)>-1:"|="===t&&(a===n||a.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,a){var i="nth"!==e.slice(0,3),o="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===a?function(e){return!!e.parentNode}:function(t,n,c){var u,l,p,f,d,h,y=i!==o?"nextSibling":"previousSibling",m=t.parentNode,g=s&&t.nodeName.toLowerCase(),v=!c&&!s,b=!1;if(m){if(i){for(;y;){for(f=t;f=f[y];)if(s?f.nodeName.toLowerCase()===g:1===f.nodeType)return!1;h=y="only"===e&&!h&&"nextSibling"}return!0}if(h=[o?m.firstChild:m.lastChild],o&&v){for(b=(d=(u=(l=(p=(f=m)[w]||(f[w]={}))[f.uniqueID]||(p[f.uniqueID]={}))[e]||[])[0]===S&&u[1])&&u[2],f=d&&m.childNodes[d];f=++d&&f&&f[y]||(b=d=0)||h.pop();)if(1===f.nodeType&&++b&&f===t){l[e]=[S,d,b];break}}else if(v&&(b=d=(u=(l=(p=(f=t)[w]||(f[w]={}))[f.uniqueID]||(p[f.uniqueID]={}))[e]||[])[0]===S&&u[1]),!1===b)for(;(f=++d&&f&&f[y]||(b=d=0)||h.pop())&&((s?f.nodeName.toLowerCase()!==g:1!==f.nodeType)||!++b||(v&&((l=(p=f[w]||(f[w]={}))[f.uniqueID]||(p[f.uniqueID]={}))[e]=[S,b]),f!==t)););return(b-=a)===r||b%r==0&&b/r>=0}}},PSEUDO:function(e,t){var n,a=r.pseudos[e]||r.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return a[w]?a(t):a.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?ue(function(e,n){for(var r,i=a(e,t),o=i.length;o--;)e[r=D(e,i[o])]=!(n[r]=i[o])}):function(e){return a(e,0,n)}):a}},pseudos:{not:ue(function(e){var t=[],n=[],r=s(e.replace(z,"$1"));return r[w]?ue(function(e,t,n,a){for(var i,o=r(e,null,a,[]),s=e.length;s--;)(i=o[s])&&(e[s]=!(t[s]=i))}):function(e,a,i){return t[0]=e,r(t,null,i,n),t[0]=null,!n.pop()}}),has:ue(function(e){return function(t){return se(e,t).length>0}}),contains:ue(function(e){return e=e.replace(te,ne),function(t){return(t.textContent||a(t)).indexOf(e)>-1}}),lang:ue(function(e){return G.test(e||"")||se.error("unsupported lang: "+e),e=e.replace(te,ne).toLowerCase(),function(t){var n;do{if(n=y?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ye(!1),disabled:ye(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return K.test(e.nodeName)},input:function(e){return Y.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:me(function(){return[0]}),last:me(function(e,t){return[t-1]}),eq:me(function(e,t,n){return[n<0?n+t:n]}),even:me(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:me(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:me(function(e,t,n){for(var r=n<0?n+t:n>t?t:n;--r>=0;)e.push(r);return e}),gt:me(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=de(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=he(t);function ve(){}function be(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function we(e,t,n){var r=t.dir,a=t.next,i=a||r,o=n&&"parentNode"===i,s=x++;return t.first?function(t,n,a){for(;t=t[r];)if(1===t.nodeType||o)return e(t,n,a);return!1}:function(t,n,c){var u,l,p,f=[S,s];if(c){for(;t=t[r];)if((1===t.nodeType||o)&&e(t,n,c))return!0}else for(;t=t[r];)if(1===t.nodeType||o)if(l=(p=t[w]||(t[w]={}))[t.uniqueID]||(p[t.uniqueID]={}),a&&a===t.nodeName.toLowerCase())t=t[r]||t;else{if((u=l[i])&&u[0]===S&&u[1]===s)return f[2]=u[2];if(l[i]=f,f[2]=e(t,n,c))return!0}return!1}}function Te(e){return e.length>1?function(t,n,r){for(var a=e.length;a--;)if(!e[a](t,n,r))return!1;return!0}:e[0]}function Se(e,t,n,r,a){for(var i,o=[],s=0,c=e.length,u=null!=t;s<c;s++)(i=e[s])&&(n&&!n(i,r,a)||(o.push(i),u&&t.push(s)));return o}function xe(e,t,n,r,a,i){return r&&!r[w]&&(r=xe(r)),a&&!a[w]&&(a=xe(a,i)),ue(function(i,o,s,c){var u,l,p,f=[],d=[],h=o.length,y=i||function(e,t,n){for(var r=0,a=t.length;r<a;r++)se(e,t[r],n);return n}(t||"*",s.nodeType?[s]:s,[]),m=!e||!i&&t?y:Se(y,f,e,s,c),g=n?a||(i?e:h||r)?[]:o:m;if(n&&n(m,g,s,c),r)for(u=Se(g,d),r(u,[],s,c),l=u.length;l--;)(p=u[l])&&(g[d[l]]=!(m[d[l]]=p));if(i){if(a||e){if(a){for(u=[],l=g.length;l--;)(p=g[l])&&u.push(m[l]=p);a(null,g=[],u,c)}for(l=g.length;l--;)(p=g[l])&&(u=a?D(i,p):f[l])>-1&&(i[u]=!(o[u]=p))}}else g=Se(g===o?g.splice(h,g.length):g),a?a(null,o,g,c):I.apply(o,g)})}function ke(e){for(var t,n,a,i=e.length,o=r.relative[e[0].type],s=o||r.relative[" "],c=o?1:0,l=we(function(e){return e===t},s,!0),p=we(function(e){return D(t,e)>-1},s,!0),f=[function(e,n,r){var a=!o&&(r||n!==u)||((t=n).nodeType?l(e,n,r):p(e,n,r));return t=null,a}];c<i;c++)if(n=r.relative[e[c].type])f=[we(Te(f),n)];else{if((n=r.filter[e[c].type].apply(null,e[c].matches))[w]){for(a=++c;a<i&&!r.relative[e[a].type];a++);return xe(c>1&&Te(f),c>1&&be(e.slice(0,c-1).concat({value:" "===e[c-2].type?"*":""})).replace(z,"$1"),n,c<a&&ke(e.slice(c,a)),a<i&&ke(e=e.slice(a)),a<i&&be(e))}f.push(n)}return Te(f)}return ve.prototype=r.filters=r.pseudos,r.setFilters=new ve,o=se.tokenize=function(e,t){var n,a,i,o,s,c,u,l=O[e+" "];if(l)return t?0:l.slice(0);for(s=e,c=[],u=r.preFilter;s;){for(o in n&&!(a=W.exec(s))||(a&&(s=s.slice(a[0].length)||s),c.push(i=[])),n=!1,(a=$.exec(s))&&(n=a.shift(),i.push({value:n,type:a[0].replace(z," ")}),s=s.slice(n.length)),r.filter)!(a=X[o].exec(s))||u[o]&&!(a=u[o](a))||(n=a.shift(),i.push({value:n,type:o,matches:a}),s=s.slice(n.length));if(!n)break}return t?s.length:s?se.error(e):O(e,c).slice(0)},s=se.compile=function(e,t){var n,a=[],i=[],s=j[e+" "];if(!s){for(t||(t=o(e)),n=t.length;n--;)(s=ke(t[n]))[w]?a.push(s):i.push(s);(s=j(e,function(e,t){var n=t.length>0,a=e.length>0,i=function(i,o,s,c,l){var p,h,m,g=0,v="0",b=i&&[],w=[],T=u,x=i||a&&r.find.TAG("*",l),k=S+=null==T?1:Math.random()||.1,O=x.length;for(l&&(u=o==d||o||l);v!==O&&null!=(p=x[v]);v++){if(a&&p){for(h=0,o||p.ownerDocument==d||(f(p),s=!y);m=e[h++];)if(m(p,o||d,s)){c.push(p);break}l&&(S=k)}n&&((p=!m&&p)&&g--,i&&b.push(p))}if(g+=v,n&&v!==g){for(h=0;m=t[h++];)m(b,w,o,s);if(i){if(g>0)for(;v--;)b[v]||w[v]||(w[v]=N.call(c));w=Se(w)}I.apply(c,w),l&&!i&&w.length>0&&g+t.length>1&&se.uniqueSort(c)}return l&&(S=k,u=T),b};return n?ue(i):i}(i,a))).selector=e}return s},c=se.select=function(e,t,n,a){var i,c,u,l,p,f="function"==typeof e&&e,d=!a&&o(e=f.selector||e);if(n=n||[],1===d.length){if((c=d[0]=d[0].slice(0)).length>2&&"ID"===(u=c[0]).type&&9===t.nodeType&&y&&r.relative[c[1].type]){if(!(t=(r.find.ID(u.matches[0].replace(te,ne),t)||[])[0]))return n;f&&(t=t.parentNode),e=e.slice(c.shift().value.length)}for(i=X.needsContext.test(e)?0:c.length;i--&&(u=c[i],!r.relative[l=u.type]);)if((p=r.find[l])&&(a=p(u.matches[0].replace(te,ne),ee.test(c[0].type)&&ge(t.parentNode)||t))){if(c.splice(i,1),!(e=a.length&&be(c)))return I.apply(n,a),n;break}}return(f||s(e,d))(a,t,!y,n,!t||ee.test(e)&&ge(t.parentNode)||t),n},n.sortStable=w.split("").sort(C).join("")===w,n.detectDuplicates=!!p,f(),n.sortDetached=le(function(e){return 1&e.compareDocumentPosition(d.createElement("fieldset"))}),le(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||pe("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&le(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||pe("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),le(function(e){return null==e.getAttribute("disabled")})||pe(R,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),se}(e);w.find=S,w.expr=S.selectors,w.expr[":"]=w.expr.pseudos,w.uniqueSort=w.unique=S.uniqueSort,w.text=S.getText,w.isXMLDoc=S.isXML,w.contains=S.contains,w.escapeSelector=S.escape;var x=function(e,t,n){for(var r=[],a=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(a&&w(e).is(n))break;r.push(e)}return r},k=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},O=w.expr.match.needsContext;function j(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var A=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function C(e,t,n){return h(t)?w.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?w.grep(e,function(e){return e===t!==n}):"string"!=typeof t?w.grep(e,function(e){return s.call(t,e)>-1!==n}):w.filter(t,e,n)}w.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?w.find.matchesSelector(r,e)?[r]:[]:w.find.matches(e,w.grep(t,function(e){return 1===e.nodeType}))},w.fn.extend({find:function(e){var t,n,r=this.length,a=this;if("string"!=typeof e)return this.pushStack(w(e).filter(function(){for(t=0;t<r;t++)if(w.contains(a[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)w.find(e,a[t],n);return r>1?w.uniqueSort(n):n},filter:function(e){return this.pushStack(C(this,e||[],!1))},not:function(e){return this.pushStack(C(this,e||[],!0))},is:function(e){return!!C(this,"string"==typeof e&&O.test(e)?w(e):e||[],!1).length}});var E,_=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(w.fn.init=function(e,t,n){var r,a;if(!e)return this;if(n=n||E,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:_.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof w?t[0]:t,w.merge(this,w.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:m,!0)),A.test(r[1])&&w.isPlainObject(t))for(r in t)h(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(a=m.getElementById(r[2]))&&(this[0]=a,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):h(e)?void 0!==n.ready?n.ready(e):e(w):w.makeArray(e,this)}).prototype=w.fn,E=w(m);var N=/^(?:parents|prev(?:Until|All))/,P={children:!0,contents:!0,next:!0,prev:!0};function I(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}w.fn.extend({has:function(e){var t=w(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(w.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,a=this.length,i=[],o="string"!=typeof e&&w(e);if(!O.test(e))for(;r<a;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&w.find.matchesSelector(n,e))){i.push(n);break}return this.pushStack(i.length>1?w.uniqueSort(i):i)},index:function(e){return e?"string"==typeof e?s.call(w(e),this[0]):s.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(w.uniqueSort(w.merge(this.get(),w(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),w.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return x(e,"parentNode")},parentsUntil:function(e,t,n){return x(e,"parentNode",n)},next:function(e){return I(e,"nextSibling")},prev:function(e){return I(e,"previousSibling")},nextAll:function(e){return x(e,"nextSibling")},prevAll:function(e){return x(e,"previousSibling")},nextUntil:function(e,t,n){return x(e,"nextSibling",n)},prevUntil:function(e,t,n){return x(e,"previousSibling",n)},siblings:function(e){return k((e.parentNode||{}).firstChild,e)},children:function(e){return k(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(j(e,"template")&&(e=e.content||e),w.merge([],e.childNodes))}},function(e,t){w.fn[e]=function(n,r){var a=w.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(a=w.filter(r,a)),this.length>1&&(P[e]||w.uniqueSort(a),N.test(e)&&a.reverse()),this.pushStack(a)}});var M=/[^\x20\t\r\n\f]+/g;function D(e){return e}function R(e){throw e}function L(e,t,n,r){var a;try{e&&h(a=e.promise)?a.call(e).done(t).fail(n):e&&h(a=e.then)?a.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}w.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return w.each(e.match(M)||[],function(e,n){t[n]=!0}),t}(e):w.extend({},e);var t,n,r,a,i=[],o=[],s=-1,c=function(){for(a=a||e.once,r=t=!0;o.length;s=-1)for(n=o.shift();++s<i.length;)!1===i[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=i.length,n=!1);e.memory||(n=!1),t=!1,a&&(i=n?[]:"")},u={add:function(){return i&&(n&&!t&&(s=i.length-1,o.push(n)),function t(n){w.each(n,function(n,r){h(r)?e.unique&&u.has(r)||i.push(r):r&&r.length&&"string"!==b(r)&&t(r)})}(arguments),n&&!t&&c()),this},remove:function(){return w.each(arguments,function(e,t){for(var n;(n=w.inArray(t,i,n))>-1;)i.splice(n,1),n<=s&&s--}),this},has:function(e){return e?w.inArray(e,i)>-1:i.length>0},empty:function(){return i&&(i=[]),this},disable:function(){return a=o=[],i=n="",this},disabled:function(){return!i},lock:function(){return a=o=[],n||t||(i=n=""),this},locked:function(){return!!a},fireWith:function(e,n){return a||(n=[e,(n=n||[]).slice?n.slice():n],o.push(n),t||c()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!r}};return u},w.extend({Deferred:function(t){var n=[["notify","progress",w.Callbacks("memory"),w.Callbacks("memory"),2],["resolve","done",w.Callbacks("once memory"),w.Callbacks("once memory"),0,"resolved"],["reject","fail",w.Callbacks("once memory"),w.Callbacks("once memory"),1,"rejected"]],r="pending",a={state:function(){return r},always:function(){return i.done(arguments).fail(arguments),this},catch:function(e){return a.then(null,e)},pipe:function(){var e=arguments;return w.Deferred(function(t){w.each(n,function(n,r){var a=h(e[r[4]])&&e[r[4]];i[r[1]](function(){var e=a&&a.apply(this,arguments);e&&h(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[r[0]+"With"](this,a?[e]:arguments)})}),e=null}).promise()},then:function(t,r,a){var i=0;function o(t,n,r,a){return function(){var s=this,c=arguments,u=function(){var e,u;if(!(t<i)){if((e=r.apply(s,c))===n.promise())throw new TypeError("Thenable self-resolution");u=e&&("object"===(void 0===e?"undefined":_typeof(e))||"function"==typeof e)&&e.then,h(u)?a?u.call(e,o(i,n,D,a),o(i,n,R,a)):(i++,u.call(e,o(i,n,D,a),o(i,n,R,a),o(i,n,D,n.notifyWith))):(r!==D&&(s=void 0,c=[e]),(a||n.resolveWith)(s,c))}},l=a?u:function(){try{u()}catch(e){w.Deferred.exceptionHook&&w.Deferred.exceptionHook(e,l.stackTrace),t+1>=i&&(r!==R&&(s=void 0,c=[e]),n.rejectWith(s,c))}};t?l():(w.Deferred.getStackHook&&(l.stackTrace=w.Deferred.getStackHook()),e.setTimeout(l))}}return w.Deferred(function(e){n[0][3].add(o(0,e,h(a)?a:D,e.notifyWith)),n[1][3].add(o(0,e,h(t)?t:D)),n[2][3].add(o(0,e,h(r)?r:R))}).promise()},promise:function(e){return null!=e?w.extend(e,a):a}},i={};return w.each(n,function(e,t){var o=t[2],s=t[5];a[t[1]]=o.add,s&&o.add(function(){r=s},n[3-e][2].disable,n[3-e][3].disable,n[0][2].lock,n[0][3].lock),o.add(t[3].fire),i[t[0]]=function(){return i[t[0]+"With"](this===i?void 0:this,arguments),this},i[t[0]+"With"]=o.fireWith}),a.promise(i),t&&t.call(i,i),i},when:function(e){var t=arguments.length,n=t,r=Array(n),i=a.call(arguments),o=w.Deferred(),s=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?a.call(arguments):n,--t||o.resolveWith(r,i)}};if(t<=1&&(L(e,o.done(s(n)).resolve,o.reject,!t),"pending"===o.state()||h(i[n]&&i[n].then)))return o.then();for(;n--;)L(i[n],s(n),o.reject);return o.promise()}});var F=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;w.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&F.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},w.readyException=function(t){e.setTimeout(function(){throw t})};var q=w.Deferred();function V(){m.removeEventListener("DOMContentLoaded",V),e.removeEventListener("load",V),w.ready()}w.fn.ready=function(e){return q.then(e).catch(function(e){w.readyException(e)}),this},w.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--w.readyWait:w.isReady)||(w.isReady=!0,!0!==e&&--w.readyWait>0||q.resolveWith(m,[w]))}}),w.ready.then=q.then,"complete"===m.readyState||"loading"!==m.readyState&&!m.documentElement.doScroll?e.setTimeout(w.ready):(m.addEventListener("DOMContentLoaded",V),e.addEventListener("load",V));var H=function e(t,n,r,a,i,o,s){var c=0,u=t.length,l=null==r;if("object"===b(r))for(c in i=!0,r)e(t,n,c,r[c],!0,o,s);else if(void 0!==a&&(i=!0,h(a)||(s=!0),l&&(s?(n.call(t,a),n=null):(l=n,n=function(e,t,n){return l.call(w(e),n)})),n))for(;c<u;c++)n(t[c],r,s?a:a.call(t[c],c,n(t[c],r)));return i?t:l?n.call(t):u?n(t[0],r):o},z=/^-ms-/,W=/-([a-z])/g;function $(e,t){return t.toUpperCase()}function B(e){return e.replace(z,"ms-").replace(W,$)}var U=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function G(){this.expando=w.expando+G.uid++}G.uid=1,G.prototype={cache:function(e){var t=e[this.expando];return t||(t={},U(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,a=this.cache(e);if("string"==typeof t)a[B(t)]=n;else for(r in t)a[B(r)]=t[r];return a},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][B(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(B):(t=B(t))in r?[t]:t.match(M)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||w.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!w.isEmptyObject(t)}};var X=new G,J=new G,Y=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,K=/[A-Z]/g;function Z(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(K,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:Y.test(e)?JSON.parse(e):e)}(n)}catch(e){}J.set(e,t,n)}else n=void 0;return n}w.extend({hasData:function(e){return J.hasData(e)||X.hasData(e)},data:function(e,t,n){return J.access(e,t,n)},removeData:function(e,t){J.remove(e,t)},_data:function(e,t,n){return X.access(e,t,n)},_removeData:function(e,t){X.remove(e,t)}}),w.fn.extend({data:function(e,t){var n,r,a,i=this[0],o=i&&i.attributes;if(void 0===e){if(this.length&&(a=J.get(i),1===i.nodeType&&!X.get(i,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&0===(r=o[n].name).indexOf("data-")&&(r=B(r.slice(5)),Z(i,r,a[r]));X.set(i,"hasDataAttrs",!0)}return a}return"object"===(void 0===e?"undefined":_typeof(e))?this.each(function(){J.set(this,e)}):H(this,function(t){var n;if(i&&void 0===t)return void 0!==(n=J.get(i,e))?n:void 0!==(n=Z(i,e))?n:void 0;this.each(function(){J.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){J.remove(this,e)})}}),w.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=X.get(e,t),n&&(!r||Array.isArray(n)?r=X.access(e,t,w.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=w.queue(e,t),r=n.length,a=n.shift(),i=w._queueHooks(e,t);"inprogress"===a&&(a=n.shift(),r--),a&&("fx"===t&&n.unshift("inprogress"),delete i.stop,a.call(e,function(){w.dequeue(e,t)},i)),!r&&i&&i.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return X.get(e,n)||X.access(e,n,{empty:w.Callbacks("once memory").add(function(){X.remove(e,[t+"queue",n])})})}}),w.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?w.queue(this[0],e):void 0===t?this:this.each(function(){var n=w.queue(this,e,t);w._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&w.dequeue(this,e)})},dequeue:function(e){return this.each(function(){w.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,a=w.Deferred(),i=this,o=this.length,s=function(){--r||a.resolveWith(i,[i])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(n=X.get(i[o],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),a.promise(t)}});var Q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ee=new RegExp("^(?:([+-])=|)("+Q+")([a-z%]*)$","i"),te=["Top","Right","Bottom","Left"],ne=m.documentElement,re=function(e){return w.contains(e.ownerDocument,e)},ae={composed:!0};ne.getRootNode&&(re=function(e){return w.contains(e.ownerDocument,e)||e.getRootNode(ae)===e.ownerDocument});var ie=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&re(e)&&"none"===w.css(e,"display")};function oe(e,t,n,r){var a,i,o=20,s=r?function(){return r.cur()}:function(){return w.css(e,t,"")},c=s(),u=n&&n[3]||(w.cssNumber[t]?"":"px"),l=e.nodeType&&(w.cssNumber[t]||"px"!==u&&+c)&&ee.exec(w.css(e,t));if(l&&l[3]!==u){for(c/=2,u=u||l[3],l=+c||1;o--;)w.style(e,t,l+u),(1-i)*(1-(i=s()/c||.5))<=0&&(o=0),l/=i;l*=2,w.style(e,t,l+u),n=n||[]}return n&&(l=+l||+c||0,a=n[1]?l+(n[1]+1)*n[2]:+n[2],r&&(r.unit=u,r.start=l,r.end=a)),a}var se={};function ce(e){var t,n=e.ownerDocument,r=e.nodeName,a=se[r];return a||(t=n.body.appendChild(n.createElement(r)),a=w.css(t,"display"),t.parentNode.removeChild(t),"none"===a&&(a="block"),se[r]=a,a)}function ue(e,t){for(var n,r,a=[],i=0,o=e.length;i<o;i++)(r=e[i]).style&&(n=r.style.display,t?("none"===n&&(a[i]=X.get(r,"display")||null,a[i]||(r.style.display="")),""===r.style.display&&ie(r)&&(a[i]=ce(r))):"none"!==n&&(a[i]="none",X.set(r,"display",n)));for(i=0;i<o;i++)null!=a[i]&&(e[i].style.display=a[i]);return e}w.fn.extend({show:function(){return ue(this,!0)},hide:function(){return ue(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ie(this)?w(this).show():w(this).hide()})}});var le,pe,fe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,he=/^$|^module$|\/(?:java|ecma)script/i;le=m.createDocumentFragment().appendChild(m.createElement("div")),(pe=m.createElement("input")).setAttribute("type","radio"),pe.setAttribute("checked","checked"),pe.setAttribute("name","t"),le.appendChild(pe),d.checkClone=le.cloneNode(!0).cloneNode(!0).lastChild.checked,le.innerHTML="<textarea>x</textarea>",d.noCloneChecked=!!le.cloneNode(!0).lastChild.defaultValue,le.innerHTML="<option></option>",d.option=!!le.lastChild;var ye={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function me(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&j(e,t)?w.merge([e],n):n}function ge(e,t){for(var n=0,r=e.length;n<r;n++)X.set(e[n],"globalEval",!t||X.get(t[n],"globalEval"))}ye.tbody=ye.tfoot=ye.colgroup=ye.caption=ye.thead,ye.th=ye.td,d.option||(ye.optgroup=ye.option=[1,"<select multiple='multiple'>","</select>"]);var ve=/<|&#?\w+;/;function be(e,t,n,r,a){for(var i,o,s,c,u,l,p=t.createDocumentFragment(),f=[],d=0,h=e.length;d<h;d++)if((i=e[d])||0===i)if("object"===b(i))w.merge(f,i.nodeType?[i]:i);else if(ve.test(i)){for(o=o||p.appendChild(t.createElement("div")),s=(de.exec(i)||["",""])[1].toLowerCase(),c=ye[s]||ye._default,o.innerHTML=c[1]+w.htmlPrefilter(i)+c[2],l=c[0];l--;)o=o.lastChild;w.merge(f,o.childNodes),(o=p.firstChild).textContent=""}else f.push(t.createTextNode(i));for(p.textContent="",d=0;i=f[d++];)if(r&&w.inArray(i,r)>-1)a&&a.push(i);else if(u=re(i),o=me(p.appendChild(i),"script"),u&&ge(o),n)for(l=0;i=o[l++];)he.test(i.type||"")&&n.push(i);return p}var we=/^key/,Te=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Se=/^([^.]*)(?:\.(.+)|)/;function xe(){return!0}function ke(){return!1}function Oe(e,t){return e===function(){try{return m.activeElement}catch(e){}}()==("focus"===t)}function je(e,t,n,r,a,i){var o,s;if("object"===(void 0===t?"undefined":_typeof(t))){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)je(e,s,n,r,t[s],i);return e}if(null==r&&null==a?(a=n,r=n=void 0):null==a&&("string"==typeof n?(a=r,r=void 0):(a=r,r=n,n=void 0)),!1===a)a=ke;else if(!a)return e;return 1===i&&(o=a,(a=function(e){return w().off(e),o.apply(this,arguments)}).guid=o.guid||(o.guid=w.guid++)),e.each(function(){w.event.add(this,t,a,r,n)})}function Ae(e,t,n){n?(X.set(e,t,!1),w.event.add(e,t,{namespace:!1,handler:function(e){var r,i,o=X.get(this,t);if(1&e.isTrigger&&this[t]){if(o.length)(w.event.special[t]||{}).delegateType&&e.stopPropagation();else if(o=a.call(arguments),X.set(this,t,o),r=n(this,t),this[t](),o!==(i=X.get(this,t))||r?X.set(this,t,!1):i={},o!==i)return e.stopImmediatePropagation(),e.preventDefault(),i.value}else o.length&&(X.set(this,t,{value:w.event.trigger(w.extend(o[0],w.Event.prototype),o.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===X.get(e,t)&&w.event.add(e,t,xe)}w.event={global:{},add:function(e,t,n,r,a){var i,o,s,c,u,l,p,f,d,h,y,m=X.get(e);if(U(e))for(n.handler&&(n=(i=n).handler,a=i.selector),a&&w.find.matchesSelector(ne,a),n.guid||(n.guid=w.guid++),(c=m.events)||(c=m.events=Object.create(null)),(o=m.handle)||(o=m.handle=function(t){return void 0!==w&&w.event.triggered!==t.type?w.event.dispatch.apply(e,arguments):void 0}),u=(t=(t||"").match(M)||[""]).length;u--;)d=y=(s=Se.exec(t[u])||[])[1],h=(s[2]||"").split(".").sort(),d&&(p=w.event.special[d]||{},d=(a?p.delegateType:p.bindType)||d,p=w.event.special[d]||{},l=w.extend({type:d,origType:y,data:r,handler:n,guid:n.guid,selector:a,needsContext:a&&w.expr.match.needsContext.test(a),namespace:h.join(".")},i),(f=c[d])||((f=c[d]=[]).delegateCount=0,p.setup&&!1!==p.setup.call(e,r,h,o)||e.addEventListener&&e.addEventListener(d,o)),p.add&&(p.add.call(e,l),l.handler.guid||(l.handler.guid=n.guid)),a?f.splice(f.delegateCount++,0,l):f.push(l),w.event.global[d]=!0)},remove:function(e,t,n,r,a){var i,o,s,c,u,l,p,f,d,h,y,m=X.hasData(e)&&X.get(e);if(m&&(c=m.events)){for(u=(t=(t||"").match(M)||[""]).length;u--;)if(d=y=(s=Se.exec(t[u])||[])[1],h=(s[2]||"").split(".").sort(),d){for(p=w.event.special[d]||{},f=c[d=(r?p.delegateType:p.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=i=f.length;i--;)l=f[i],!a&&y!==l.origType||n&&n.guid!==l.guid||s&&!s.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(f.splice(i,1),l.selector&&f.delegateCount--,p.remove&&p.remove.call(e,l));o&&!f.length&&(p.teardown&&!1!==p.teardown.call(e,h,m.handle)||w.removeEvent(e,d,m.handle),delete c[d])}else for(d in c)w.event.remove(e,d+t[u],n,r,!0);w.isEmptyObject(c)&&X.remove(e,"handle events")}},dispatch:function(e){var t,n,r,a,i,o,s=new Array(arguments.length),c=w.event.fix(e),u=(X.get(this,"events")||Object.create(null))[c.type]||[],l=w.event.special[c.type]||{};for(s[0]=c,t=1;t<arguments.length;t++)s[t]=arguments[t];if(c.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,c)){for(o=w.event.handlers.call(this,c,u),t=0;(a=o[t++])&&!c.isPropagationStopped();)for(c.currentTarget=a.elem,n=0;(i=a.handlers[n++])&&!c.isImmediatePropagationStopped();)c.rnamespace&&!1!==i.namespace&&!c.rnamespace.test(i.namespace)||(c.handleObj=i,c.data=i.data,void 0!==(r=((w.event.special[i.origType]||{}).handle||i.handler).apply(a.elem,s))&&!1===(c.result=r)&&(c.preventDefault(),c.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,c),c.result}},handlers:function(e,t){var n,r,a,i,o,s=[],c=t.delegateCount,u=e.target;if(c&&u.nodeType&&!("click"===e.type&&e.button>=1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==e.type||!0!==u.disabled)){for(i=[],o={},n=0;n<c;n++)void 0===o[a=(r=t[n]).selector+" "]&&(o[a]=r.needsContext?w(a,this).index(u)>-1:w.find(a,this,null,[u]).length),o[a]&&i.push(r);i.length&&s.push({elem:u,handlers:i})}return u=this,c<t.length&&s.push({elem:u,handlers:t.slice(c)}),s},addProp:function(e,t){Object.defineProperty(w.Event.prototype,e,{enumerable:!0,configurable:!0,get:h(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[w.expando]?e:new w.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return fe.test(t.type)&&t.click&&j(t,"input")&&Ae(t,"click",xe),!1},trigger:function(e){var t=this||e;return fe.test(t.type)&&t.click&&j(t,"input")&&Ae(t,"click"),!0},_default:function(e){var t=e.target;return fe.test(t.type)&&t.click&&j(t,"input")&&X.get(t,"click")||j(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},w.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},w.Event=function(e,t){if(!(this instanceof w.Event))return new w.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?xe:ke,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&w.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[w.expando]=!0},w.Event.prototype={constructor:w.Event,isDefaultPrevented:ke,isPropagationStopped:ke,isImmediatePropagationStopped:ke,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=xe,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=xe,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=xe,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},w.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&we.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Te.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},w.event.addProp),w.each({focus:"focusin",blur:"focusout"},function(e,t){w.event.special[e]={setup:function(){return Ae(this,e,Oe),!1},trigger:function(){return Ae(this,e),!0},delegateType:t}}),w.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){w.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=e.relatedTarget,a=e.handleObj;return r&&(r===this||w.contains(this,r))||(e.type=a.origType,n=a.handler.apply(this,arguments),e.type=t),n}}}),w.fn.extend({on:function(e,t,n,r){return je(this,e,t,n,r)},one:function(e,t,n,r){return je(this,e,t,n,r,1)},off:function(e,t,n){var r,a;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,w(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"===(void 0===e?"undefined":_typeof(e))){for(a in e)this.off(a,t,e[a]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=ke),this.each(function(){w.event.remove(this,e,n,t)})}});var Ce=/<script|<style|<link/i,Ee=/checked\s*(?:[^=]|=\s*.checked.)/i,_e=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ne(e,t){return j(e,"table")&&j(11!==t.nodeType?t:t.firstChild,"tr")&&w(e).children("tbody")[0]||e}function Pe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Ie(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Me(e,t){var n,r,a,i,o,s;if(1===t.nodeType){if(X.hasData(e)&&(s=X.get(e).events))for(a in X.remove(t,"handle events"),s)for(n=0,r=s[a].length;n<r;n++)w.event.add(t,a,s[a][n]);J.hasData(e)&&(i=J.access(e),o=w.extend({},i),J.set(t,o))}}function De(e,t,n,r){t=i(t);var a,o,s,c,u,l,p=0,f=e.length,y=f-1,m=t[0],g=h(m);if(g||f>1&&"string"==typeof m&&!d.checkClone&&Ee.test(m))return e.each(function(a){var i=e.eq(a);g&&(t[0]=m.call(this,a,i.html())),De(i,t,n,r)});if(f&&(o=(a=be(t,e[0].ownerDocument,!1,e,r)).firstChild,1===a.childNodes.length&&(a=o),o||r)){for(c=(s=w.map(me(a,"script"),Pe)).length;p<f;p++)u=a,p!==y&&(u=w.clone(u,!0,!0),c&&w.merge(s,me(u,"script"))),n.call(e[p],u,p);if(c)for(l=s[s.length-1].ownerDocument,w.map(s,Ie),p=0;p<c;p++)u=s[p],he.test(u.type||"")&&!X.access(u,"globalEval")&&w.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?w._evalUrl&&!u.noModule&&w._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},l):v(u.textContent.replace(_e,""),u,l))}return e}function Re(e,t,n){for(var r,a=t?w.filter(t,e):e,i=0;null!=(r=a[i]);i++)n||1!==r.nodeType||w.cleanData(me(r)),r.parentNode&&(n&&re(r)&&ge(me(r,"script")),r.parentNode.removeChild(r));return e}w.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,a,i,o,s,c,u,l=e.cloneNode(!0),p=re(e);if(!(d.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||w.isXMLDoc(e)))for(o=me(l),r=0,a=(i=me(e)).length;r<a;r++)s=i[r],c=o[r],void 0,"input"===(u=c.nodeName.toLowerCase())&&fe.test(s.type)?c.checked=s.checked:"input"!==u&&"textarea"!==u||(c.defaultValue=s.defaultValue);if(t)if(n)for(i=i||me(e),o=o||me(l),r=0,a=i.length;r<a;r++)Me(i[r],o[r]);else Me(e,l);return(o=me(l,"script")).length>0&&ge(o,!p&&me(e,"script")),l},cleanData:function(e){for(var t,n,r,a=w.event.special,i=0;void 0!==(n=e[i]);i++)if(U(n)){if(t=n[X.expando]){if(t.events)for(r in t.events)a[r]?w.event.remove(n,r):w.removeEvent(n,r,t.handle);n[X.expando]=void 0}n[J.expando]&&(n[J.expando]=void 0)}}}),w.fn.extend({detach:function(e){return Re(this,e,!0)},remove:function(e){return Re(this,e)},text:function(e){return H(this,function(e){return void 0===e?w.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return De(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ne(this,e).appendChild(e)})},prepend:function(){return De(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ne(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return De(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return De(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(w.cleanData(me(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return w.clone(this,e,t)})},html:function(e){return H(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ce.test(e)&&!ye[(de.exec(e)||["",""])[1].toLowerCase()]){e=w.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(w.cleanData(me(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return De(this,arguments,function(t){var n=this.parentNode;w.inArray(this,e)<0&&(w.cleanData(me(this)),n&&n.replaceChild(t,this))},e)}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){w.fn[e]=function(e){for(var n,r=[],a=w(e),i=a.length-1,s=0;s<=i;s++)n=s===i?this:this.clone(!0),w(a[s])[t](n),o.apply(r,n.get());return this.pushStack(r)}});var Le=new RegExp("^("+Q+")(?!px)[a-z%]+$","i"),Fe=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},qe=function(e,t,n){var r,a,i={};for(a in t)i[a]=e.style[a],e.style[a]=t[a];for(a in r=n.call(e),t)e.style[a]=i[a];return r},Ve=new RegExp(te.join("|"),"i");function He(e,t,n){var r,a,i,o,s=e.style;return(n=n||Fe(e))&&(""!==(o=n.getPropertyValue(t)||n[t])||re(e)||(o=w.style(e,t)),!d.pixelBoxStyles()&&Le.test(o)&&Ve.test(t)&&(r=s.width,a=s.minWidth,i=s.maxWidth,s.minWidth=s.maxWidth=s.width=o,o=n.width,s.width=r,s.minWidth=a,s.maxWidth=i)),void 0!==o?o+"":o}function ze(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function t(){if(l){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ne.appendChild(u).appendChild(l);var t=e.getComputedStyle(l);r="1%"!==t.top,c=12===n(t.marginLeft),l.style.right="60%",o=36===n(t.right),a=36===n(t.width),l.style.position="absolute",i=12===n(l.offsetWidth/3),ne.removeChild(u),l=null}}function n(e){return Math.round(parseFloat(e))}var r,a,i,o,s,c,u=m.createElement("div"),l=m.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",d.clearCloneStyle="content-box"===l.style.backgroundClip,w.extend(d,{boxSizingReliable:function(){return t(),a},pixelBoxStyles:function(){return t(),o},pixelPosition:function(){return t(),r},reliableMarginLeft:function(){return t(),c},scrollboxSize:function(){return t(),i},reliableTrDimensions:function(){var t,n,r,a;return null==s&&(t=m.createElement("table"),n=m.createElement("tr"),r=m.createElement("div"),t.style.cssText="position:absolute;left:-11111px",n.style.height="1px",r.style.height="9px",ne.appendChild(t).appendChild(n).appendChild(r),a=e.getComputedStyle(n),s=parseInt(a.height)>3,ne.removeChild(t)),s}}))}();var We=["Webkit","Moz","ms"],$e=m.createElement("div").style,Be={};function Ue(e){var t=w.cssProps[e]||Be[e];return t||(e in $e?e:Be[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=We.length;n--;)if((e=We[n]+t)in $e)return e}(e)||e)}var Ge=/^(none|table(?!-c[ea]).+)/,Xe=/^--/,Je={position:"absolute",visibility:"hidden",display:"block"},Ye={letterSpacing:"0",fontWeight:"400"};function Ke(e,t,n){var r=ee.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Ze(e,t,n,r,a,i){var o="width"===t?1:0,s=0,c=0;if(n===(r?"border":"content"))return 0;for(;o<4;o+=2)"margin"===n&&(c+=w.css(e,n+te[o],!0,a)),r?("content"===n&&(c-=w.css(e,"padding"+te[o],!0,a)),"margin"!==n&&(c-=w.css(e,"border"+te[o]+"Width",!0,a))):(c+=w.css(e,"padding"+te[o],!0,a),"padding"!==n?c+=w.css(e,"border"+te[o]+"Width",!0,a):s+=w.css(e,"border"+te[o]+"Width",!0,a));return!r&&i>=0&&(c+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-i-c-s-.5))||0),c}function Qe(e,t,n){var r=Fe(e),a=(!d.boxSizingReliable()||n)&&"border-box"===w.css(e,"boxSizing",!1,r),i=a,o=He(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(Le.test(o)){if(!n)return o;o="auto"}return(!d.boxSizingReliable()&&a||!d.reliableTrDimensions()&&j(e,"tr")||"auto"===o||!parseFloat(o)&&"inline"===w.css(e,"display",!1,r))&&e.getClientRects().length&&(a="border-box"===w.css(e,"boxSizing",!1,r),(i=s in e)&&(o=e[s])),(o=parseFloat(o)||0)+Ze(e,t,n||(a?"border":"content"),i,r,o)+"px"}function et(e,t,n,r,a){return new et.prototype.init(e,t,n,r,a)}w.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=He(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,i,o,s=B(t),c=Xe.test(t),u=e.style;if(c||(t=Ue(s)),o=w.cssHooks[t]||w.cssHooks[s],void 0===n)return o&&"get"in o&&void 0!==(a=o.get(e,!1,r))?a:u[t];"string"===(i=void 0===n?"undefined":_typeof(n))&&(a=ee.exec(n))&&a[1]&&(n=oe(e,t,a),i="number"),null!=n&&n==n&&("number"!==i||c||(n+=a&&a[3]||(w.cssNumber[s]?"":"px")),d.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),o&&"set"in o&&void 0===(n=o.set(e,n,r))||(c?u.setProperty(t,n):u[t]=n))}},css:function(e,t,n,r){var a,i,o,s=B(t);return Xe.test(t)||(t=Ue(s)),(o=w.cssHooks[t]||w.cssHooks[s])&&"get"in o&&(a=o.get(e,!0,n)),void 0===a&&(a=He(e,t,r)),"normal"===a&&t in Ye&&(a=Ye[t]),""===n||n?(i=parseFloat(a),!0===n||isFinite(i)?i||0:a):a}}),w.each(["height","width"],function(e,t){w.cssHooks[t]={get:function(e,n,r){if(n)return!Ge.test(w.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Qe(e,t,r):qe(e,Je,function(){return Qe(e,t,r)})},set:function(e,n,r){var a,i=Fe(e),o=!d.scrollboxSize()&&"absolute"===i.position,s=(o||r)&&"border-box"===w.css(e,"boxSizing",!1,i),c=r?Ze(e,t,r,s,i):0;return s&&o&&(c-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(i[t])-Ze(e,t,"border",!1,i)-.5)),c&&(a=ee.exec(n))&&"px"!==(a[3]||"px")&&(e.style[t]=n,n=w.css(e,t)),Ke(0,n,c)}}}),w.cssHooks.marginLeft=ze(d.reliableMarginLeft,function(e,t){if(t)return(parseFloat(He(e,"marginLeft"))||e.getBoundingClientRect().left-qe(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),w.each({margin:"",padding:"",border:"Width"},function(e,t){w.cssHooks[e+t]={expand:function(n){for(var r=0,a={},i="string"==typeof n?n.split(" "):[n];r<4;r++)a[e+te[r]+t]=i[r]||i[r-2]||i[0];return a}},"margin"!==e&&(w.cssHooks[e+t].set=Ke)}),w.fn.extend({css:function(e,t){return H(this,function(e,t,n){var r,a,i={},o=0;if(Array.isArray(t)){for(r=Fe(e),a=t.length;o<a;o++)i[t[o]]=w.css(e,t[o],!1,r);return i}return void 0!==n?w.style(e,t,n):w.css(e,t)},e,t,arguments.length>1)}}),w.Tween=et,et.prototype={constructor:et,init:function(e,t,n,r,a,i){this.elem=e,this.prop=n,this.easing=a||w.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=i||(w.cssNumber[n]?"":"px")},cur:function(){var e=et.propHooks[this.prop];return e&&e.get?e.get(this):et.propHooks._default.get(this)},run:function(e){var t,n=et.propHooks[this.prop];return this.options.duration?this.pos=t=w.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):et.propHooks._default.set(this),this}},et.prototype.init.prototype=et.prototype,et.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=w.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){w.fx.step[e.prop]?w.fx.step[e.prop](e):1!==e.elem.nodeType||!w.cssHooks[e.prop]&&null==e.elem.style[Ue(e.prop)]?e.elem[e.prop]=e.now:w.style(e.elem,e.prop,e.now+e.unit)}}},et.propHooks.scrollTop=et.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},w.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},w.fx=et.prototype.init,w.fx.step={};var tt,nt,rt=/^(?:toggle|show|hide)$/,at=/queueHooks$/;function it(){nt&&(!1===m.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(it):e.setTimeout(it,w.fx.interval),w.fx.tick())}function ot(){return e.setTimeout(function(){tt=void 0}),tt=Date.now()}function st(e,t){var n,r=0,a={height:e};for(t=t?1:0;r<4;r+=2-t)a["margin"+(n=te[r])]=a["padding"+n]=e;return t&&(a.opacity=a.width=e),a}function ct(e,t,n){for(var r,a=(ut.tweeners[t]||[]).concat(ut.tweeners["*"]),i=0,o=a.length;i<o;i++)if(r=a[i].call(n,t,e))return r}function ut(e,t,n){var r,a,i=0,o=ut.prefilters.length,s=w.Deferred().always(function(){delete c.elem}),c=function(){if(a)return!1;for(var t=tt||ot(),n=Math.max(0,u.startTime+u.duration-t),r=1-(n/u.duration||0),i=0,o=u.tweens.length;i<o;i++)u.tweens[i].run(r);return s.notifyWith(e,[u,r,n]),r<1&&o?n:(o||s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:w.extend({},t),opts:w.extend(!0,{specialEasing:{},easing:w.easing._default},n),originalProperties:t,originalOptions:n,startTime:tt||ot(),duration:n.duration,tweens:[],createTween:function(t,n){var r=w.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(r),r},stop:function(t){var n=0,r=t?u.tweens.length:0;if(a)return this;for(a=!0;n<r;n++)u.tweens[n].run(1);return t?(s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u,t])):s.rejectWith(e,[u,t]),this}}),l=u.props;for(!function(e,t){var n,r,a,i,o;for(n in e)if(a=t[r=B(n)],i=e[n],Array.isArray(i)&&(a=i[1],i=e[n]=i[0]),n!==r&&(e[r]=i,delete e[n]),(o=w.cssHooks[r])&&"expand"in o)for(n in i=o.expand(i),delete e[r],i)n in e||(e[n]=i[n],t[n]=a);else t[r]=a}(l,u.opts.specialEasing);i<o;i++)if(r=ut.prefilters[i].call(u,e,l,u.opts))return h(r.stop)&&(w._queueHooks(u.elem,u.opts.queue).stop=r.stop.bind(r)),r;return w.map(l,ct,u),h(u.opts.start)&&u.opts.start.call(e,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),w.fx.timer(w.extend(c,{elem:e,anim:u,queue:u.opts.queue})),u}w.Animation=w.extend(ut,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return oe(n.elem,e,ee.exec(t),n),n}]},tweener:function(e,t){h(e)?(t=e,e=["*"]):e=e.match(M);for(var n,r=0,a=e.length;r<a;r++)n=e[r],ut.tweeners[n]=ut.tweeners[n]||[],ut.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,a,i,o,s,c,u,l,p="width"in t||"height"in t,f=this,d={},h=e.style,y=e.nodeType&&ie(e),m=X.get(e,"fxshow");for(r in n.queue||(null==(o=w._queueHooks(e,"fx")).unqueued&&(o.unqueued=0,s=o.empty.fire,o.empty.fire=function(){o.unqueued||s()}),o.unqueued++,f.always(function(){f.always(function(){o.unqueued--,w.queue(e,"fx").length||o.empty.fire()})})),t)if(a=t[r],rt.test(a)){if(delete t[r],i=i||"toggle"===a,a===(y?"hide":"show")){if("show"!==a||!m||void 0===m[r])continue;y=!0}d[r]=m&&m[r]||w.style(e,r)}if((c=!w.isEmptyObject(t))||!w.isEmptyObject(d))for(r in p&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(u=m&&m.display)&&(u=X.get(e,"display")),"none"===(l=w.css(e,"display"))&&(u?l=u:(ue([e],!0),u=e.style.display||u,l=w.css(e,"display"),ue([e]))),("inline"===l||"inline-block"===l&&null!=u)&&"none"===w.css(e,"float")&&(c||(f.done(function(){h.display=u}),null==u&&(l=h.display,u="none"===l?"":l)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",f.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),c=!1,d)c||(m?"hidden"in m&&(y=m.hidden):m=X.access(e,"fxshow",{display:u}),i&&(m.hidden=!y),y&&ue([e],!0),f.done(function(){for(r in y||ue([e]),X.remove(e,"fxshow"),d)w.style(e,r,d[r])})),c=ct(y?m[r]:0,r,f),r in m||(m[r]=c.start,y&&(c.end=c.start,c.start=0))}],prefilter:function(e,t){t?ut.prefilters.unshift(e):ut.prefilters.push(e)}}),w.speed=function(e,t,n){var r=e&&"object"===(void 0===e?"undefined":_typeof(e))?w.extend({},e):{complete:n||!n&&t||h(e)&&e,duration:e,easing:n&&t||t&&!h(t)&&t};return w.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in w.fx.speeds?r.duration=w.fx.speeds[r.duration]:r.duration=w.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){h(r.old)&&r.old.call(this),r.queue&&w.dequeue(this,r.queue)},r},w.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ie).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var a=w.isEmptyObject(e),i=w.speed(t,n,r),o=function(){var t=ut(this,w.extend({},e),i);(a||X.get(this,"finish"))&&t.stop(!0)};return o.finish=o,a||!1===i.queue?this.each(o):this.queue(i.queue,o)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each(function(){var t=!0,a=null!=e&&e+"queueHooks",i=w.timers,o=X.get(this);if(a)o[a]&&o[a].stop&&r(o[a]);else for(a in o)o[a]&&o[a].stop&&at.test(a)&&r(o[a]);for(a=i.length;a--;)i[a].elem!==this||null!=e&&i[a].queue!==e||(i[a].anim.stop(n),t=!1,i.splice(a,1));!t&&n||w.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=X.get(this),r=n[e+"queue"],a=n[e+"queueHooks"],i=w.timers,o=r?r.length:0;for(n.finish=!0,w.queue(this,e,[]),a&&a.stop&&a.stop.call(this,!0),t=i.length;t--;)i[t].elem===this&&i[t].queue===e&&(i[t].anim.stop(!0),i.splice(t,1));for(t=0;t<o;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),w.each(["toggle","show","hide"],function(e,t){var n=w.fn[t];w.fn[t]=function(e,r,a){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(st(t,!0),e,r,a)}}),w.each({slideDown:st("show"),slideUp:st("hide"),slideToggle:st("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){w.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),w.timers=[],w.fx.tick=function(){var e,t=0,n=w.timers;for(tt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||w.fx.stop(),tt=void 0},w.fx.timer=function(e){w.timers.push(e),w.fx.start()},w.fx.interval=13,w.fx.start=function(){nt||(nt=!0,it())},w.fx.stop=function(){nt=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fn.delay=function(t,n){return t=w.fx&&w.fx.speeds[t]||t,n=n||"fx",this.queue(n,function(n,r){var a=e.setTimeout(n,t);r.stop=function(){e.clearTimeout(a)}})},function(){var e=m.createElement("input"),t=m.createElement("select").appendChild(m.createElement("option"));e.type="checkbox",d.checkOn=""!==e.value,d.optSelected=t.selected,(e=m.createElement("input")).value="t",e.type="radio",d.radioValue="t"===e.value}();var lt,pt=w.expr.attrHandle;w.fn.extend({attr:function(e,t){return H(this,w.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){w.removeAttr(this,e)})}}),w.extend({attr:function(e,t,n){var r,a,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return void 0===e.getAttribute?w.prop(e,t,n):(1===i&&w.isXMLDoc(e)||(a=w.attrHooks[t.toLowerCase()]||(w.expr.match.bool.test(t)?lt:void 0)),void 0!==n?null===n?void w.removeAttr(e,t):a&&"set"in a&&void 0!==(r=a.set(e,n,t))?r:(e.setAttribute(t,n+""),n):a&&"get"in a&&null!==(r=a.get(e,t))?r:null==(r=w.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!d.radioValue&&"radio"===t&&j(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,a=t&&t.match(M);if(a&&1===e.nodeType)for(;n=a[r++];)e.removeAttribute(n)}}),lt={set:function(e,t,n){return!1===t?w.removeAttr(e,n):e.setAttribute(n,n),n}},w.each(w.expr.match.bool.source.match(/\w+/g),function(e,t){var n=pt[t]||w.find.attr;pt[t]=function(e,t,r){var a,i,o=t.toLowerCase();return r||(i=pt[o],pt[o]=a,a=null!=n(e,t,r)?o:null,pt[o]=i),a}});var ft=/^(?:input|select|textarea|button)$/i,dt=/^(?:a|area)$/i;function ht(e){return(e.match(M)||[]).join(" ")}function yt(e){return e.getAttribute&&e.getAttribute("class")||""}function mt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(M)||[]}w.fn.extend({prop:function(e,t){return H(this,w.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[w.propFix[e]||e]})}}),w.extend({prop:function(e,t,n){var r,a,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return 1===i&&w.isXMLDoc(e)||(t=w.propFix[t]||t,a=w.propHooks[t]),void 0!==n?a&&"set"in a&&void 0!==(r=a.set(e,n,t))?r:e[t]=n:a&&"get"in a&&null!==(r=a.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=w.find.attr(e,"tabindex");return t?parseInt(t,10):ft.test(e.nodeName)||dt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),d.optSelected||(w.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){w.propFix[this.toLowerCase()]=this}),w.fn.extend({addClass:function(e){var t,n,r,a,i,o,s,c=0;if(h(e))return this.each(function(t){w(this).addClass(e.call(this,t,yt(this)))});if((t=mt(e)).length)for(;n=this[c++];)if(a=yt(n),r=1===n.nodeType&&" "+ht(a)+" "){for(o=0;i=t[o++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");a!==(s=ht(r))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,a,i,o,s,c=0;if(h(e))return this.each(function(t){w(this).removeClass(e.call(this,t,yt(this)))});if(!arguments.length)return this.attr("class","");if((t=mt(e)).length)for(;n=this[c++];)if(a=yt(n),r=1===n.nodeType&&" "+ht(a)+" "){for(o=0;i=t[o++];)for(;r.indexOf(" "+i+" ")>-1;)r=r.replace(" "+i+" "," ");a!==(s=ht(r))&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=void 0===e?"undefined":_typeof(e),r="string"===n||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):h(e)?this.each(function(n){w(this).toggleClass(e.call(this,n,yt(this),t),t)}):this.each(function(){var t,a,i,o;if(r)for(a=0,i=w(this),o=mt(e);t=o[a++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else void 0!==e&&"boolean"!==n||((t=yt(this))&&X.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":X.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+ht(yt(n))+" ").indexOf(t)>-1)return!0;return!1}});var gt=/\r/g;w.fn.extend({val:function(e){var t,n,r,a=this[0];return arguments.length?(r=h(e),this.each(function(n){var a;1===this.nodeType&&(null==(a=r?e.call(this,n,w(this).val()):e)?a="":"number"==typeof a?a+="":Array.isArray(a)&&(a=w.map(a,function(e){return null==e?"":e+""})),(t=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,a,"value")||(this.value=a))})):a?(t=w.valHooks[a.type]||w.valHooks[a.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(a,"value"))?n:"string"==typeof(n=a.value)?n.replace(gt,""):null==n?"":n:void 0}}),w.extend({valHooks:{option:{get:function(e){var t=w.find.attr(e,"value");return null!=t?t:ht(w.text(e))}},select:{get:function(e){var t,n,r,a=e.options,i=e.selectedIndex,o="select-one"===e.type,s=o?null:[],c=o?i+1:a.length;for(r=i<0?c:o?i:0;r<c;r++)if(((n=a[r]).selected||r===i)&&!n.disabled&&(!n.parentNode.disabled||!j(n.parentNode,"optgroup"))){if(t=w(n).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var n,r,a=e.options,i=w.makeArray(t),o=a.length;o--;)((r=a[o]).selected=w.inArray(w.valHooks.option.get(r),i)>-1)&&(n=!0);return n||(e.selectedIndex=-1),i}}}}),w.each(["radio","checkbox"],function(){w.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=w.inArray(w(e).val(),t)>-1}},d.checkOn||(w.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),d.focusin="onfocusin"in e;var vt=/^(?:focusinfocus|focusoutblur)$/,bt=function(e){e.stopPropagation()};w.extend(w.event,{trigger:function(t,n,r,a){var i,o,s,c,u,p,f,d,g=[r||m],v=l.call(t,"type")?t.type:t,b=l.call(t,"namespace")?t.namespace.split("."):[];if(o=d=s=r=r||m,3!==r.nodeType&&8!==r.nodeType&&!vt.test(v+w.event.triggered)&&(v.indexOf(".")>-1&&(v=(b=v.split(".")).shift(),b.sort()),u=v.indexOf(":")<0&&"on"+v,(t=t[w.expando]?t:new w.Event(v,"object"===(void 0===t?"undefined":_typeof(t))&&t)).isTrigger=a?2:3,t.namespace=b.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:w.makeArray(n,[t]),f=w.event.special[v]||{},a||!f.trigger||!1!==f.trigger.apply(r,n))){if(!a&&!f.noBubble&&!y(r)){for(c=f.delegateType||v,vt.test(c+v)||(o=o.parentNode);o;o=o.parentNode)g.push(o),s=o;s===(r.ownerDocument||m)&&g.push(s.defaultView||s.parentWindow||e)}for(i=0;(o=g[i++])&&!t.isPropagationStopped();)d=o,t.type=i>1?c:f.bindType||v,(p=(X.get(o,"events")||Object.create(null))[t.type]&&X.get(o,"handle"))&&p.apply(o,n),(p=u&&o[u])&&p.apply&&U(o)&&(t.result=p.apply(o,n),!1===t.result&&t.preventDefault());return t.type=v,a||t.isDefaultPrevented()||f._default&&!1!==f._default.apply(g.pop(),n)||!U(r)||u&&h(r[v])&&!y(r)&&((s=r[u])&&(r[u]=null),w.event.triggered=v,t.isPropagationStopped()&&d.addEventListener(v,bt),r[v](),t.isPropagationStopped()&&d.removeEventListener(v,bt),w.event.triggered=void 0,s&&(r[u]=s)),t.result}},simulate:function(e,t,n){var r=w.extend(new w.Event,n,{type:e,isSimulated:!0});w.event.trigger(r,null,t)}}),w.fn.extend({trigger:function(e,t){return this.each(function(){w.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return w.event.trigger(e,t,n,!0)}}),d.focusin||w.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){w.event.simulate(t,e.target,w.event.fix(e))};w.event.special[t]={setup:function(){var r=this.ownerDocument||this.document||this,a=X.access(r,t);a||r.addEventListener(e,n,!0),X.access(r,t,(a||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,a=X.access(r,t)-1;a?X.access(r,t,a):(r.removeEventListener(e,n,!0),X.remove(r,t))}}});var wt=e.location,Tt={guid:Date.now()},St=/\?/;w.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||w.error("Invalid XML: "+t),n};var xt=/\[\]$/,kt=/\r?\n/g,Ot=/^(?:submit|button|image|reset|file)$/i,jt=/^(?:input|select|textarea|keygen)/i;function At(e,t,n,r){var a;if(Array.isArray(t))w.each(t,function(t,a){n||xt.test(e)?r(e,a):At(e+"["+("object"===(void 0===a?"undefined":_typeof(a))&&null!=a?t:"")+"]",a,n,r)});else if(n||"object"!==b(t))r(e,t);else for(a in t)At(e+"["+a+"]",t[a],n,r)}w.param=function(e,t){var n,r=[],a=function(e,t){var n=h(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!w.isPlainObject(e))w.each(e,function(){a(this.name,this.value)});else for(n in e)At(n,e[n],t,a);return r.join("&")},w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=w.prop(this,"elements");return e?w.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!w(this).is(":disabled")&&jt.test(this.nodeName)&&!Ot.test(e)&&(this.checked||!fe.test(e))}).map(function(e,t){var n=w(this).val();return null==n?null:Array.isArray(n)?w.map(n,function(e){return{name:t.name,value:e.replace(kt,"\r\n")}}):{name:t.name,value:n.replace(kt,"\r\n")}}).get()}});var Ct=/%20/g,Et=/#.*$/,_t=/([?&])_=[^&]*/,Nt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Pt=/^(?:GET|HEAD)$/,It=/^\/\//,Mt={},Dt={},Rt="*/".concat("*"),Lt=m.createElement("a");function Ft(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,a=0,i=t.toLowerCase().match(M)||[];if(h(n))for(;r=i[a++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function qt(e,t,n,r){var a={},i=e===Dt;function o(s){var c;return a[s]=!0,w.each(e[s]||[],function(e,s){var u=s(t,n,r);return"string"!=typeof u||i||a[u]?i?!(c=u):void 0:(t.dataTypes.unshift(u),o(u),!1)}),c}return o(t.dataTypes[0])||!a["*"]&&o("*")}function Vt(e,t){var n,r,a=w.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((a[n]?e:r||(r={}))[n]=t[n]);return r&&w.extend(!0,e,r),e}Lt.href=wt.href,w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:wt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(wt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Rt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Vt(Vt(e,w.ajaxSettings),t):Vt(w.ajaxSettings,e)},ajaxPrefilter:Ft(Mt),ajaxTransport:Ft(Dt),ajax:function(t,n){"object"===(void 0===t?"undefined":_typeof(t))&&(n=t,t=void 0),n=n||{};var r,a,i,o,s,c,u,l,p,f,d=w.ajaxSetup({},n),h=d.context||d,y=d.context&&(h.nodeType||h.jquery)?w(h):w.event,g=w.Deferred(),v=w.Callbacks("once memory"),b=d.statusCode||{},T={},S={},x="canceled",k={readyState:0,getResponseHeader:function(e){var t;if(u){if(!o)for(o={};t=Nt.exec(i);)o[t[1].toLowerCase()+" "]=(o[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=o[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return u?i:null},setRequestHeader:function(e,t){return null==u&&(e=S[e.toLowerCase()]=S[e.toLowerCase()]||e,T[e]=t),this},overrideMimeType:function(e){return null==u&&(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(u)k.always(e[k.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||x;return r&&r.abort(t),O(0,t),this}};if(g.promise(k),d.url=((t||d.url||wt.href)+"").replace(It,wt.protocol+"//"),d.type=n.method||n.type||d.method||d.type,d.dataTypes=(d.dataType||"*").toLowerCase().match(M)||[""],null==d.crossDomain){c=m.createElement("a");try{c.href=d.url,c.href=c.href,d.crossDomain=Lt.protocol+"//"+Lt.host!=c.protocol+"//"+c.host}catch(e){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!=typeof d.data&&(d.data=w.param(d.data,d.traditional)),qt(Mt,d,n,k),u)return k;for(p in(l=w.event&&d.global)&&0==w.active++&&w.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Pt.test(d.type),a=d.url.replace(Et,""),d.hasContent?d.data&&d.processData&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&(d.data=d.data.replace(Ct,"+")):(f=d.url.slice(a.length),d.data&&(d.processData||"string"==typeof d.data)&&(a+=(St.test(a)?"&":"?")+d.data,delete d.data),!1===d.cache&&(a=a.replace(_t,"$1"),f=(St.test(a)?"&":"?")+"_="+Tt.guid+++f),d.url=a+f),d.ifModified&&(w.lastModified[a]&&k.setRequestHeader("If-Modified-Since",w.lastModified[a]),w.etag[a]&&k.setRequestHeader("If-None-Match",w.etag[a])),(d.data&&d.hasContent&&!1!==d.contentType||n.contentType)&&k.setRequestHeader("Content-Type",d.contentType),k.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Rt+"; q=0.01":""):d.accepts["*"]),d.headers)k.setRequestHeader(p,d.headers[p]);if(d.beforeSend&&(!1===d.beforeSend.call(h,k,d)||u))return k.abort();if(x="abort",v.add(d.complete),k.done(d.success),k.fail(d.error),r=qt(Dt,d,n,k)){if(k.readyState=1,l&&y.trigger("ajaxSend",[k,d]),u)return k;d.async&&d.timeout>0&&(s=e.setTimeout(function(){k.abort("timeout")},d.timeout));try{u=!1,r.send(T,O)}catch(e){if(u)throw e;O(-1,e)}}else O(-1,"No Transport");function O(t,n,o,c){var p,f,m,T,S,x=n;u||(u=!0,s&&e.clearTimeout(s),r=void 0,i=c||"",k.readyState=t>0?4:0,p=t>=200&&t<300||304===t,o&&(T=function(e,t,n){for(var r,a,i,o,s=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(a in s)if(s[a]&&s[a].test(r)){c.unshift(a);break}if(c[0]in n)i=c[0];else{for(a in n){if(!c[0]||e.converters[a+" "+c[0]]){i=a;break}o||(o=a)}i=i||o}if(i)return i!==c[0]&&c.unshift(i),n[i]}(d,k,o)),!p&&w.inArray("script",d.dataTypes)>-1&&(d.converters["text script"]=function(){}),T=function(e,t,n,r){var a,i,o,s,c,u={},l=e.dataTypes.slice();if(l[1])for(o in e.converters)u[o.toLowerCase()]=e.converters[o];for(i=l.shift();i;)if(e.responseFields[i]&&(n[e.responseFields[i]]=t),!c&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=i,i=l.shift())if("*"===i)i=c;else if("*"!==c&&c!==i){if(!(o=u[c+" "+i]||u["* "+i]))for(a in u)if((s=a.split(" "))[1]===i&&(o=u[c+" "+s[0]]||u["* "+s[0]])){!0===o?o=u[a]:!0!==u[a]&&(i=s[0],l.unshift(s[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+c+" to "+i}}}return{state:"success",data:t}}(d,T,k,p),p?(d.ifModified&&((S=k.getResponseHeader("Last-Modified"))&&(w.lastModified[a]=S),(S=k.getResponseHeader("etag"))&&(w.etag[a]=S)),204===t||"HEAD"===d.type?x="nocontent":304===t?x="notmodified":(x=T.state,f=T.data,p=!(m=T.error))):(m=x,!t&&x||(x="error",t<0&&(t=0))),k.status=t,k.statusText=(n||x)+"",p?g.resolveWith(h,[f,x,k]):g.rejectWith(h,[k,x,m]),k.statusCode(b),b=void 0,l&&y.trigger(p?"ajaxSuccess":"ajaxError",[k,d,p?f:m]),v.fireWith(h,[k,x]),l&&(y.trigger("ajaxComplete",[k,d]),--w.active||w.event.trigger("ajaxStop")))}return k},getJSON:function(e,t,n){return w.get(e,t,n,"json")},getScript:function(e,t){return w.get(e,void 0,t,"script")}}),w.each(["get","post"],function(e,t){w[t]=function(e,n,r,a){return h(n)&&(a=a||r,r=n,n=void 0),w.ajax(w.extend({url:e,type:t,dataType:a,data:n,success:r},w.isPlainObject(e)&&e))}}),w.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),w._evalUrl=function(e,t,n){return w.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){w.globalEval(e,t,n)}})},w.fn.extend({wrapAll:function(e){var t;return this[0]&&(h(e)&&(e=e.call(this[0])),t=w(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return h(e)?this.each(function(t){w(this).wrapInner(e.call(this,t))}):this.each(function(){var t=w(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=h(e);return this.each(function(n){w(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){w(this).replaceWith(this.childNodes)}),this}}),w.expr.pseudos.hidden=function(e){return!w.expr.pseudos.visible(e)},w.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},w.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Ht={0:200,1223:204},zt=w.ajaxSettings.xhr();d.cors=!!zt&&"withCredentials"in zt,d.ajax=zt=!!zt,w.ajaxTransport(function(t){var n,r;if(d.cors||zt&&!t.crossDomain)return{send:function(a,i){var o,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)s[o]=t.xhrFields[o];for(o in t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||a["X-Requested-With"]||(a["X-Requested-With"]="XMLHttpRequest"),a)s.setRequestHeader(o,a[o]);n=function(e){return function(){n&&(n=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?i(0,"error"):i(s.status,s.statusText):i(Ht[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),r=s.onerror=s.ontimeout=n("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){n&&r()})},n=n("abort");try{s.send(t.hasContent&&t.data||null)}catch(e){if(n)throw e}},abort:function(){n&&n()}}}),w.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return w.globalEval(e),e}}}),w.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),w.ajaxTransport("script",function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(r,a){t=w("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&a("error"===e.type?404:200,e.type)}),m.head.appendChild(t[0])},abort:function(){n&&n()}}});var Wt,$t=[],Bt=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=$t.pop()||w.expando+"_"+Tt.guid++;return this[e]=!0,e}}),w.ajaxPrefilter("json jsonp",function(t,n,r){var a,i,o,s=!1!==t.jsonp&&(Bt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Bt.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return a=t.jsonpCallback=h(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Bt,"$1"+a):!1!==t.jsonp&&(t.url+=(St.test(t.url)?"&":"?")+t.jsonp+"="+a),t.converters["script json"]=function(){return o||w.error(a+" was not called"),o[0]},t.dataTypes[0]="json",i=e[a],e[a]=function(){o=arguments},r.always(function(){void 0===i?w(e).removeProp(a):e[a]=i,t[a]&&(t.jsonpCallback=n.jsonpCallback,$t.push(a)),o&&h(i)&&i(o[0]),o=i=void 0}),"script"}),d.createHTMLDocument=((Wt=m.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Wt.childNodes.length),w.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(d.createHTMLDocument?((r=(t=m.implementation.createHTMLDocument("")).createElement("base")).href=m.location.href,t.head.appendChild(r)):t=m),i=!n&&[],(a=A.exec(e))?[t.createElement(a[1])]:(a=be([e],t,i),i&&i.length&&w(i).remove(),w.merge([],a.childNodes)));var r,a,i},w.fn.load=function(e,t,n){var r,a,i,o=this,s=e.indexOf(" ");return s>-1&&(r=ht(e.slice(s)),e=e.slice(0,s)),h(t)?(n=t,t=void 0):t&&"object"===(void 0===t?"undefined":_typeof(t))&&(a="POST"),o.length>0&&w.ajax({url:e,type:a||"GET",dataType:"html",data:t}).done(function(e){i=arguments,o.html(r?w("<div>").append(w.parseHTML(e)).find(r):e)}).always(n&&function(e,t){o.each(function(){n.apply(this,i||[e.responseText,t,e])})}),this},w.expr.pseudos.animated=function(e){return w.grep(w.timers,function(t){return e===t.elem}).length},w.offset={setOffset:function(e,t,n){var r,a,i,o,s,c,u=w.css(e,"position"),l=w(e),p={};"static"===u&&(e.style.position="relative"),s=l.offset(),i=w.css(e,"top"),c=w.css(e,"left"),("absolute"===u||"fixed"===u)&&(i+c).indexOf("auto")>-1?(o=(r=l.position()).top,a=r.left):(o=parseFloat(i)||0,a=parseFloat(c)||0),h(t)&&(t=t.call(e,n,w.extend({},s))),null!=t.top&&(p.top=t.top-s.top+o),null!=t.left&&(p.left=t.left-s.left+a),"using"in t?t.using.call(e,p):("number"==typeof p.top&&(p.top+="px"),"number"==typeof p.left&&(p.left+="px"),l.css(p))}},w.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){w.offset.setOffset(this,e,t)});var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],a={top:0,left:0};if("fixed"===w.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===w.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((a=w(e).offset()).top+=w.css(e,"borderTopWidth",!0),a.left+=w.css(e,"borderLeftWidth",!0))}return{top:t.top-a.top-w.css(r,"marginTop",!0),left:t.left-a.left-w.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===w.css(e,"position");)e=e.offsetParent;return e||ne})}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;w.fn[e]=function(r){return H(this,function(e,r,a){var i;if(y(e)?i=e:9===e.nodeType&&(i=e.defaultView),void 0===a)return i?i[t]:e[r];i?i.scrollTo(n?i.pageXOffset:a,n?a:i.pageYOffset):e[r]=a},e,r,arguments.length)}}),w.each(["top","left"],function(e,t){w.cssHooks[t]=ze(d.pixelPosition,function(e,n){if(n)return n=He(e,t),Le.test(n)?w(e).position()[t]+"px":n})}),w.each({Height:"height",Width:"width"},function(e,t){w.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){w.fn[r]=function(a,i){var o=arguments.length&&(n||"boolean"!=typeof a),s=n||(!0===a||!0===i?"margin":"border");return H(this,function(t,n,a){var i;return y(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===a?w.css(t,n,s):w.style(t,n,a,s)},t,o?a:void 0,o)}})}),w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){w.fn[t]=function(e){return this.on(t,e)}}),w.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),w.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){w.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}});var Ut=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;w.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),h(e))return r=a.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(a.call(arguments)))}).guid=e.guid=e.guid||w.guid++,i},w.holdReady=function(e){e?w.readyWait++:w.ready(!0)},w.isArray=Array.isArray,w.parseJSON=JSON.parse,w.nodeName=j,w.isFunction=h,w.isWindow=y,w.camelCase=B,w.type=b,w.now=Date.now,w.isNumeric=function(e){var t=w.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},w.trim=function(e){return null==e?"":(e+"").replace(Ut,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return w});var Gt=e.jQuery,Xt=e.$;return w.noConflict=function(t){return e.$===w&&(e.$=Xt),t&&e.jQuery===w&&(e.jQuery=Gt),w},void 0===t&&(e.jQuery=e.$=w),w}),define("jqueryplugins",["jquery"],function(e){e.prototype.extend({popAttr:function(e){var t=this.attr(e);return this.removeAttr(e),t},popData:function(e){var t=this.data(e);return this.removeData(e),t},tag:function(){return this[0]&&this[0].tagName&&this[0].tagName.toLowerCase()},textNodes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"*";return 1===this.length&&this[0]instanceof Text?[this[0]]:this.get().concat(this.contents().get(),this.find(e).contents().get()).filter(function(e,t,n){return e instanceof Text&&n.indexOf(e)===t}).sort(function(e,t){return 2&e.compareDocumentPosition(t)?1:-1})},findAndFilter:function(e){return this.filter(e).add(this.find(e))}})}),function(){var e=void 0,t={};function n(){for(var e=0;e<arguments.length;e++)for(var t in arguments[e])this[t]=arguments[e][t]}function r(e,t){e.childAt=e.childAt||{};for(var n=t.start;n<t.end;n+=1)e.childAt[n]=t}function a(e,t,n,r){return!(e.canFollow&&!(e.canFollow.indexOf(n&&n.type)>-1)||e.cannotFollow&&(-1!==e.cannotFollow.indexOf(n&&n.type)||e.cannotFollow.indexOf("text")>-1&&r)||e.peek&&e.peek.toLowerCase()!==t.slice(0,e.peek.length).toLowerCase())}function i(e){for(var n=e.innerText,r=[],i=0,s=i,c=n.length,u=null;i<c;){for(var l=n.slice(i),p=(r.length?r[0]:e).innerMode,f=0,d=p.length;f<d;f+=1){var h=t[p[f]];if(a(h,l,u,s<i)&&h.pattern.test(l)){var y=h.pattern.exec(l),m=h.fn(y),g=!1,v=0;if(m.matches){for(;v<r.length;v+=1){var b=r[v].type;if(b in m.matches){g=!0;break}0===b.indexOf("verbatim")&&(b="verbatimOpener"),m.cannotCross&&m.cannotCross.indexOf(b)>-1&&(v=r.length-1)}if(v>=r.length&&!m.isFront)continue}s<i&&e.addChild({type:"text",text:n.slice(s,i),innerMode:p}),s=i+=(u=e.addChild(m)).text.length,g&&(o(e,u,r[v]),r=r.slice(v+1)),u.isFrontToken()&&r.unshift(u);break}}f===d&&(i+=1,null===u&&(u={type:"text"}))}for(s<i&&e.addChild({type:"text",text:n.slice(s,i),innerMode:(r.length?r[0]:e).innerMode});r.length>0;)r.shift().demote();return e}function o(e,t,n){var a=e.children.indexOf(t),i=e.children.indexOf(n);t.children=e.children.splice(i+1,a-(i+1)),t.children.forEach(function(e){r(t,e)}),t.type=t.matches[n.type],t.innerText="";for(var o=0,s=t.children.length;o<s;o++)t.innerText+=t.children[o].text;t.start=n.start,t.text=n.text+t.innerText+t.text,Object.keys(n).forEach(function(e){Object.hasOwnProperty.call(t,e)||(t[e]=n[e])}),t.isFront&&(t.isFront=!1),e.children.splice(i,1),r(e,t)}n.prototype={constructor:n,addChild:function(e){var t=this.lastChildEnd(),a=new n({start:t,end:e.text&&t+e.text.length,children:[]},e);return a.innerText&&i(a),this.children.push(a),r(this,a),a},firstChild:function(){return this.children&&this.children[0]||null},lastChild:function(){return this.children&&this.children[this.children.length-1]||null},lastChildEnd:function(){var e=this.lastChild();return e?e.end:this.start+Math.max(0,this.text.indexOf(this.innerText))},tokenAt:function(e){if(e<this.start||e>=this.end)return null;if(this.childAt)return this.childAt[e]&&this.childAt[e].tokenAt(e)||this;if(this.children.length)for(var t=0;t<this.children.length;t+=1){var n=this.children[t].tokenAt(e);if(n)return n}return this},pathAt:function(e){if(e<this.start||e>=this.end)return[];if(this.childAt)return(this.childAt[e]&&this.childAt[e].pathAt(e)||[]).concat(this);var t=[];if(this.children.length)for(var n=0;n<this.children.length;n+=1){var r=this.children[n].pathAt(e);if(r.length){t.concat(r);break}}return t.concat(this)},nearestTokenAt:function(e){return e<this.start||e>=this.end?null:this.children?this.children.reduce(function(t,n){return t||(e>=n.start&&e<n.end?n:null)},null):this},everyLeaf:function(e){return this.children&&0!==this.children.length?this.children.reduce(function(t,n){return t&&n.everyLeaf(e)},!0):!!e(this)},isWhitespace:function(){return this.everyLeaf(function(e){return"whitespace"===e.type||!e.text.trim()})},isFrontToken:function(){return this.isFront},isBackToken:function(){return"matches"in this},demote:function(){this.type="text"},error:function(e){this.type="error",this.message=e},toString:function(){var e=this.type+"("+this.start+"\u2192"+this.end+")";return this.children&&this.children.length>0&&(e+="["+this.children+"]"),e}},e={lex:function(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"start";return i(new n({type:"root",start:r||0,end:t.length,text:t,innerText:t,children:[],childAt:{},innerMode:e.modes[a]}))},rules:t,modes:{}},"object"===("undefined"==typeof module?"undefined":_typeof(module))?module.exports=e:"function"==typeof define&&define.amd?define("lexer",[],function(){return e}):this&&this.loaded?(this.modules||(this.modules={}),this.modules.Lexer=e):this.TwineLexer=e}.call(eval("this")||("undefined"!=typeof global?global:window)),function(){var e;function t(e){return e&&"object"===(void 0===e?"undefined":_typeof(e))?(Object.keys(e).forEach(function(n){e[n]=t(e[n])}),e):(e+"").replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function n(e){return function(){return"("+e+Array.apply(0,arguments).join("|")+")"}}var r=n("?:"),a=n("?!"),i=n("?="),o="[ \\f\\t\\v\\u00a0\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000]*",s=o.replace("*","+"),c="\\b",u="[\\w\\-\\u00c0-\\u00de\\u00df-\\u00ff\\u0150\\u0170\\u0151\\u0171\\uD800-\\uDFFF]",l=u.replace("\\-",""),p=r("\\n","$"),f=o+"(\\*+)"+s,d=o+"((?:0\\.)+)"+s,h=o+"-{3,}"+o+p,y=o+"(==+>|<=+|=+><=+|<==+>)"+o+p,m=o+"(=+\\|+|\\|+=+|=+\\|+=+|\\|=+\\|)"+o+p,g={opener:"\\[\\[(?!\\[)",text:"("+function(){return"[^"+Array.apply(0,arguments).map(t).join("")+"]*"}("]")+")",rightSeparator:r("\\->","\\|"),leftSeparator:"<\\-",closer:"\\]\\]",legacySeparator:"\\|",legacyText:"("+r("[^\\|\\]]","\\]"+a("\\]"))+"+)"},v=l+"*"+l.replace("\\w","a-zA-Z")+l+"*",b="\\$("+v+")",w="_("+v+")",T="'s"+s+"("+v+")",S="("+v+")"+s+"of"+c+a("it\\b"),x="'s"+s,k=r("it","time","visits?","exits?","pos")+c,O="its"+s+"("+v+")",j="its"+s,A="("+v+")"+s+"of"+s+"it"+c,C="of\\b"+s+"it"+c,E={opener:"\\(",name:"("+r("\\$","_")+"?"+u+"+):"+a("\\/"),closer:"\\)"},_=r("=<","=>","[gl]te?\\b","n?eq\\b","isnot\\b","are\\b","x\\b","isa\\b","or"+s+"a"+c),N="[a-zA-Z][\\w\\-]*",P="(?:\"[^\"]*\"|'[^']*'|[^'\">])*?",I="\\|("+u+"+)(>|\\))",M="(<|\\()("+u+"+)\\|",D="\\b(\\d+(?:\\.\\d+)?(?:[eE][+\\-]?\\d+)?)"+a("m?s")+c;g.main=g.opener+r(g.text+g.rightSeparator,g.text.replace("*","*?")+g.leftSeparator)+g.text,e={upperLetter:"[A-Z\\u00c0-\\u00de\\u0150\\u0170]",lowerLetter:"[a-z0-9_\\-\\u00df-\\u00ff\\u0151\\u0171]",anyLetter:u,anyLetterStrict:l,whitespace:s.replace("[","[\\n\\r"),escapedLine:"\\\\\\n\\\\?|\\n\\\\",br:"\\n(?!\\\\)",commentFront:"\x3c!--",commentBack:"--\x3e",tag:"<\\/?"+N+P+">",tagPeek:"<",scriptStyleTag:"<("+r("script","style","textarea")+")"+P+">[^]*?<\\/\\1>",scriptStyleTagOpener:"<",url:"("+r("https?","mailto","javascript","ftp","data")+":\\/\\/[^\\s<]+[^<.,:;\"')\\]\\s])",bullet:"\\*",hr:h,heading:"[ \\f\\t\\v\\u00a0\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000]*(#{1,6})[ \\f\\t\\v\\u00a0\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000]*",align:y,column:m,bulleted:f,numbered:d,strikeOpener:t("~~"),italicOpener:t("//"),boldOpener:t("''"),supOpener:t("^^"),strongFront:t("**"),strongBack:t("**"),emFront:t("*"),emBack:t("*"),verbatimOpener:"`+",collapsedFront:"{",collapsedBack:"}",hookAppendedFront:"\\["+a("=+"),hookPrependedFront:I+"\\["+a("=+"),hookFront:"\\["+a("=+"),hookBack:"\\]"+a(M),hookAppendedBack:"\\]"+M,unclosedHook:"\\[=+",unclosedHookPrepended:I+"\\[=+",unclosedCollapsed:"\\{=+",passageLink:g.main+g.closer,passageLinkPeek:"[[",legacyLink:g.opener+g.legacyText+g.legacySeparator+g.legacyText+g.closer,legacyLinkPeek:"[[",simpleLink:g.opener+g.legacyText+g.closer,simpleLinkPeek:"[[",macroFront:E.opener+i(E.name),macroFrontPeek:"(",macroName:E.name,groupingFront:"\\("+a(E.name),groupingFrontPeek:"(",groupingBack:"\\)",twine1Macro:"<<[^>\\s]+\\s*(?:\\\\.|'(?:[^'\\\\]*\\\\.)*[^'\\\\]*'|\"(?:[^\"\\\\]*\\\\.)*[^\"\\\\]*\"|[^'\"\\\\>]|>(?!>))*>>",twine1MacroPeek:"<<",validPropertyName:v,property:T,propertyPeek:"'s",belongingProperty:S,possessiveOperator:x,belongingOperator:"of\\b",belongingOperatorPeek:"of",itsOperator:j,itsOperatorPeek:"its",belongingItOperator:C,belongingItOperatorPeek:"of",variable:b,variablePeek:"$",tempVariable:w,tempVariablePeek:"_",hookName:"\\?("+u+"+)\\b",hookNamePeek:"?",cssTime:"(\\d+\\.?\\d*|\\d*\\.?\\d+)(m?s)\\b",colour:r(r("Red","Orange","Yellow","Lime","Green","Cyan","Aqua","Blue","Navy","Purple","Fuchsia","Magenta","White","Gray","Grey","Black","Transparent"),"#[\\dA-Fa-f]{3}(?:[\\dA-Fa-f]{3})?"),datatype:r("alnum","alphanumeric","any(?:case)?","array","bool(?:ean)?","changer","colou?r","const","command","dm","data"+r("map","type","set"),"ds","digit","gradient","empty","even","int"+a("o")+"(?:eger)?","lambda","lowercase","macro","linebreak","newline","num(?:ber)?","odd","str(?:ing)?","uppercase","whitespace")+c,number:D,boolean:r("true","false")+c,identifier:k,itsProperty:O,itsPropertyPeek:"its",belongingItProperty:A,escapedStringChar:"\\\\[^\\n]",singleStringOpener:"'",doubleStringOpener:'"',singleStringCloser:"'",doubleStringCloser:'"',is:"is"+a(s+"not"+c,s+"an?"+c,s+"in"+c,s+"<",s+">")+c,isNot:"is"+s+"not"+a(s+r("an?","in")+c)+c,isA:"is"+s+"an?"+c,isNotA:"is"+s+"not"+s+"an?"+c,matches:"matches\\b",doesNotMatch:"does"+s+"not"+s+"match"+c,and:"and\\b",or:"or\\b",not:"not\\b",inequality:"((?:is(?:"+s+"not)?"+o+")*)("+r("<(?!=)","<=",">(?!=)",">=")+")",isIn:"is"+s+"in"+c,contains:"contains\\b",doesNotContain:"does"+s+"not"+s+"contain"+c,isNotIn:"is"+s+"not"+s+"in"+c,addition:t("+")+a("="),subtraction:t("-")+a("=","type"),multiplication:t("*")+a("="),division:r("/","%")+a("="),comma:",",spread:"\\.\\.\\."+a("\\."),to:r("to\\b","="),into:"into\\b",making:"making\\b",where:"where\\b",when:"when\\b",via:"via\\b",each:"each\\b",augmentedAssign:r("\\+","\\-","\\*","\\/","%")+"=",bind:"2?bind\\b",typeSignature:t("-type")+c,incorrectOperator:_},"object"===("undefined"==typeof module?"undefined":_typeof(module))?module.exports=e:"function"==typeof define&&define.amd?define("patterns",[],function(){return e}):this&&this.loaded?(this.modules||(this.modules={}),this.modules.Patterns=e):this.Patterns=e}.call(eval("this")||("undefined"!=typeof global?global:window)),function(){var e=void 0;Object.assign=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var t=Object.keys,n=Object.assign;function r(r){return Object.freeze({lex:function(r){function a(e){return e=e||"innerText",function(t){var n=t.reduceRight(function(e,t,n){return e||(n?t:"")},""),r={};return r[e]=n,r}}function i(e,t){var n={};return n[e]=t,function(){return{isFront:!0,matches:n,cannotCross:["verbatimOpener"]}}}var o=Object.bind(0,null);function s(e,t){return Object.keys(t).forEach(function(n){var r=t[n].fn;t[n].fn=function(t){var a=r(t);return a.text||(a.text=t[0]),a.type||(a.type=n),a.innerMode||(a.innerMode=e),a}}),t}var c=[],u=[],l=[],p=s(c,{hr:{fn:o},bulleted:{fn:function(e){return{depth:e[1].length}}},numbered:{fn:function(e){return{depth:e[1].length/2}}},heading:{fn:function(e){return{depth:e[1].length}}},align:{fn:function(e){var t=void 0,n=e[1],r=n.indexOf("><");return~r?25===(t=Math.round(r/(n.length-2)*50))&&(t="center"):"<"===n[0]&&">"===n.slice(-1)?t="justify":n.indexOf(">")>-1?t="right":n.indexOf("<")>-1&&(t="left"),{align:t}}},column:{fn:function(e){var t=void 0,n=e[1],r=n.indexOf("|");return r&&r<n.length-1?t="center":"|"===n[0]&&"|"===n.slice(-1)?t="none":r===n.length-1?t="right":r||(t="left"),{column:t,width:/\|+/.exec(n)[0].length,marginLeft:/^=*/.exec(n)[0].length,marginRight:/=*$/.exec(n)[0].length}}}});t(p).forEach(function(e){p[e].canFollow=[null,"br","hr","bulleted","numbered","heading","align","column","escapedLine"],p[e].cannotFollow=["text"]});var f=s(c,{twine1Macro:{fn:function(){return{type:"error",message:"Harlowe macros use a different syntax to Twine 1, SugarCube, and Yarn macros."}}},emBack:{fn:function(){return{matches:{emFront:"em"},cannotCross:["verbatimOpener"]}}},strongBack:{fn:function(){return{matches:{strongFront:"strong"},cannotCross:["verbatimOpener"]}}},strongFront:{fn:function(){return{isFront:!0}}},emFront:{fn:function(){return{isFront:!0}}},boldOpener:{fn:i("boldOpener","bold")},italicOpener:{fn:i("italicOpener","italic")},strikeOpener:{fn:i("strikeOpener","strike")},supOpener:{fn:i("supOpener","sup")},commentFront:{fn:function(){return{isFront:!0}}},commentBack:{fn:function(){return{matches:{commentFront:"comment"}}}},scriptStyleTag:{fn:o},tag:{fn:o},url:{fn:o},hookPrependedFront:{fn:function(e){return{name:e[1],hidden:")"===e[2],isFront:!0,tagPosition:"prepended"}}},hookFront:{fn:function(){return{isFront:!0}}},hookBack:{fn:function(){return{matches:{hookPrependedFront:"hook",hookFront:"hook"},cannotCross:["verbatimOpener"]}}},hookAppendedBack:{fn:function(e){return{name:e[2],hidden:"("===e[1],tagPosition:"appended",matches:{hookFront:"hook"},cannotCross:["verbatimOpener"]}}},unclosedHook:{fn:o},unclosedHookPrepended:{fn:function(e){return{type:"unclosedHook",name:e[1],hidden:")"===e[2]}}},verbatimOpener:{fn:function(e){var t=e[0].length,n={};return n["verbatim"+t]="verbatim",{type:"verbatim"+t,isFront:!0,matches:n}}},unclosedCollapsed:{fn:o},collapsedFront:{fn:function(){return{isFront:!0}}},collapsedBack:{fn:function(){return{matches:{collapsedFront:"collapsed"},cannotCross:["verbatimOpener"]}}},escapedLine:{fn:o},legacyLink:{fn:function(e){return{type:"twineLink",innerText:e[1],passage:e[2],innerMode:c}}},br:{fn:o}}),d=n(s(u,{macroFront:{fn:function(e){return{isFront:!0,name:e[1]}}},groupingBack:{fn:function(){return{matches:{groupingFront:"grouping",macroFront:"macro"},cannotCross:["singleStringOpener","doubleStringOpener"]}}},passageLink:{fn:function(e){var t=e[1]||"",n=e[2]||"",r=e[3]||"";return{type:"twineLink",innerText:n?r:t,passage:t?r:n,innerMode:c}}},simpleLink:{fn:function(e){return{type:"twineLink",innerText:e[1]||"",passage:e[1]||"",innerMode:c}}},variable:{cannotFollow:["macroFront"],fn:a("name")},tempVariable:{cannotFollow:["macroFront"],fn:a("name")}}),{hookFront:f.hookFront,hookBack:f.hookBack}),h=s(u,n({macroName:{canFollow:["macroFront"],fn:a("name")},groupingFront:{fn:function(){return{isFront:!0}}},property:{fn:a("name"),canFollow:["variable","hookName","property","tempVariable","colour","itsProperty","belongingItProperty","macro","grouping","string","datatype","hook","boolean","number"]},possessiveOperator:{fn:o},itsProperty:{cannotFollow:["text"],fn:a("name")},itsOperator:{cannotFollow:["text"],fn:o},belongingItProperty:{cannotFollow:["text"],fn:a("name")},belongingItOperator:{cannotFollow:["text"],fn:o},belongingProperty:{cannotFollow:["text"],fn:a("name")},belongingOperator:{cannotFollow:["text"],fn:o},escapedStringChar:{fn:function(){return{type:"text"}}},singleStringOpener:{fn:function(){return{isFront:!0,matches:{singleStringOpener:"string"},innerMode:l}}},doubleStringOpener:{fn:function(){return{isFront:!0,matches:{doubleStringOpener:"string"},innerMode:l}}},hookName:{fn:a("name")},cssTime:{fn:function(e){return{value:+e[1]*("s"===e[2].toLowerCase()?1e3:1)}}},datatype:{cannotFollow:["text"],fn:function(e){return{name:e[0].toLowerCase()}}},colour:{cannotFollow:["text"],fn:function(e){var t=e[0].toLowerCase(),n={red:"e61919",orange:"e68019",yellow:"e5e619",lime:"80e619",green:"19e619",cyan:"19e5e6",aqua:"19e5e6",blue:"197fe6",navy:"1919e6",purple:"7f19e6",fuchsia:"e619e5",magenta:"e619e5",white:"fff",black:"000",gray:"888",grey:"888"};return{colour:Object.hasOwnProperty.call(n,t)?"#"+n[t]:t}}},number:{fn:function(e){return{value:parseFloat(e[0])}}},inequality:{fn:function(e){return{operator:e[2],negate:e[1].indexOf("not")>-1}}},augmentedAssign:{fn:function(e){return{operator:e[0][0]}}},identifier:{fn:a("name"),cannotFollow:["text"]},whitespace:{fn:o,cannotFollow:"text"},incorrectOperator:{fn:function(e){var t={"=>":">=","=<":"<=",gte:">=",lte:"<=",gt:">",lt:"<",eq:"is",isnot:"is not",neq:"is not",isa:"is a",are:"is",x:"*","or a":"or"}[e[0].toLowerCase().replace(/\s+/g," ")];return{type:"error",message:"Please say "+(t?"'"+t+"'":"something else")+" instead of '"+e[0]+"'.",explanation:"In the interests of readability, I want certain operators to be in a specific form."}},cannotFollow:"text"}},["boolean","is","to","into","where","when","via","making","each","and","or","not","isNot","contains","doesNotContain","isIn","isA","isNotA","isNotIn","matches","doesNotMatch","bind"].reduce(function(e,t){return e[t]={fn:o,cannotFollow:["text"]},e},{}),["comma","spread","typeSignature","addition","subtraction","multiplication","division"].reduce(function(e,t){return e[t]={fn:o},e},{}))),y=s(l,{singleStringCloser:h.singleStringOpener,doubleStringCloser:h.doubleStringOpener,escapedStringChar:h.escapedStringChar});c.push.apply(c,_toConsumableArray(t(p)).concat(_toConsumableArray(t(d)),_toConsumableArray(t(f)))),u.push.apply(u,_toConsumableArray(t(d)).concat(_toConsumableArray(t(h)))),l.push.apply(l,_toConsumableArray(t(y)));var m=n({},p,f,d,h,y);t(m).forEach(function(t){var n=e[t];m[t].pattern="string"!=typeof n?n:RegExp("^(?:"+n+")","i"),e[t+"Peek"]&&(m[t].peek=e[t+"Peek"])}),n(r.rules,m);var g=r.modes;return g.start=g.markup=c,g.macro=u,g.string=l,r}(r).lex,Patterns:e})}"object"===("undefined"==typeof module?"undefined":_typeof(module))?(e=require("./patterns"),module.exports=r(require("./lexer"))):"function"==typeof define&&define.amd?define("markup",["lexer","patterns"],function(t,n){return e=n,r(t)}):this&&this.loaded&&this.modules?(e=this.modules.Patterns,this.modules.Markup=r(this.modules.Lexer)):(e=this.Patterns,this.TwineMarkup=r(this.TwineLexer))}.call(eval("this")||("undefined"!=typeof global?global:window)),define("utils/polyfills",[],function(){var e=Array.prototype;"function"!=typeof e.includes&&(e.includes=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!Number.isNaN(t)&&Number.isFinite(n)&&void 0!==t)return e.indexOf.call(this,t,n)>-1;var r=Object(this),a=parseInt(r.length);if(a<=0)return!1;for(var i=n>=0?n:Math.max(0,a+n);i<a;){if(Object.is(t,r[i]))return!0;i+=1}return!1}),!window.Symbol&&(window.Symbol={iterator:"_es6-shim iterator_"})}),define("utils",["jquery","markup","utils/polyfills"],function(e){var t=String.fromCharCode,n="audio,blockquote,canvas,div,h1,h2,h3,h4,h5,hr,ol,p,pre,table,ul,video,tw-align,tw-story,tw-passage,tw-sidebar,tw-columns,tw-column,tw-meter".split(","),r="a,b,i,em,strong,sup,sub,abbr,acronym,s,strike,del,big,small,script,img,button,input,tw-link,tw-broken-link,tw-verbatim,tw-collapsed,tw-error,tw-colour,tw-icon".split(","),a=["audio"],i=[function(e){return t(e)!==t(e).toLowerCase()},function(e){return t(e)!==t(e).toUpperCase()},function(e){return t(e).toLowerCase()!==t(e).toUpperCase()}].map(function(e){return"["+Array.from(Array(57343)).map(function(e,t){return t}).filter(e).map(function(e,n,r){return e===r[n-1]+1&&e===r[n+1]-1?"-":t(e)}).join("").replace(/\-+/g,"-")+"]"}),o=_slicedToArray(i,3),s=o[0],c=o[1],u=o[2];function l(e){return"instant"===e?0:800}var p=void 0,f=[],d={},h=0,y={},m=0,g={},v=void 0;function b(e,t,n,r,a){var i=null,o=0,s=t+n;function c(n){1&e[0].compareDocumentPosition(document)&&(s=0),i&&(s-=n-i,o+=n-i),i=n,r>0&&h+m>0&&(s-=r,e.css("animation-delay",(v.cssTimeUnit(e.css("animation-delay"))||0)-r+"ms")),s<=0?a(o):requestAnimationFrame(c),s<=t&&e.css("visibility","")}s?requestAnimationFrame(c):c()}return e(document.documentElement).on("keydown keyup mousedown mouseup",function(e){var t=e.key,n=e.button,r=e.type.includes("down"),a=t?d:y,i=t&&v.insensitiveName(t)||n;a[i]&&!r?t?h=Math.max(h-1,0):m=Math.max(m-1,0):!a[i]&&r&&(t?h+=1:m+=1),a[i]=r}).on("mousemove",function(e){var t=e.pageX,n=e.pageY;g.x=t,g.y=n}),v={lockProperty:function(e,t,n){var r=Object.create({configurable:0,writable:0});return n&&(r.value=n),Object.defineProperty(e,t,r),e},permutations:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=t.length,a=[[].concat(t)],i=Array(r).fill(0),o=1,s=void 0,c=void 0;o<r;)i[o]<o?(s=o%2&&i[o],c=t[o],t[o]=t[s],t[s]=c,++i[o],o=1,a.push([].concat(t))):(i[o]=0,++o);return a},shuffled:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t,n){var r=Math.random()*(n+1)|0;return r===n?e.push(t):(e.push(e[r]),e[r]=t),e},[])},matMul:function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];var i;if(r.length>0)return(i=v).matMul.apply(i,[v.matMul(e,t)].concat(r));if(!t)return e;for(var o=[],s=0;s<e.length;s++){o[s]=[];for(var c=0;c<t[0].length;c++){for(var u=0,l=0;l<e[0].length;l++)u+=e[s][l]*t[l][c];o[s][c]=u}}return o},cssTimeUnit:function(e){return"ms"===(e=e.toLowerCase()).slice(-2)?+e.slice(0,-2)||0:"s"===e.slice(-1)&&1e3*+e.slice(0,-1)||0},nth:function(e){var t=(+e+"").slice(-1);return e+("1"===t?"st":"2"===t?"nd":"3"===t?"rd":"th")},plural:function(e,t){return e+" "+t+(e>1?"s":"")},andList:function(e){return 1===e.length?e[0]:e.slice(0,-1).join(", ")+" and "+e[e.length-1]},realWhitespace:"[ \\n\\r\\f\\t\\v\\u00a0\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000]",anyRealLetter:"[\\dA-Za-z\\u00c0-\\u00de\\u00df-\\u00ff\\u0150\\u0170\\u0151\\u0171\\uD800-\\uDFFF]",anyUppercase:s,anyLowercase:c,anyCasedLetter:u,anyNewline:"(?:\\n|\\r|\\r\\n)",unescape:function(e){return e.replace(/&(?:amp|lt|gt|quot|nbsp|zwnj|#39|#96);/g,function(e){return{"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"',"&#39;":"'","&nbsp;":String.fromCharCode(160),"&zwnj;":String.fromCharCode(8204)}[e]})},escape:function(e){return e.replace(/[&><"']/g,function(e){return{"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#39;"}[e]})},insensitiveName:function(e){return(e+"").toLowerCase().replace(/-|_/g,"")},allKeysDown:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.every(function(e){return d[e]})},someKeysDown:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.some(function(e){return d[e]})},buttonsDown:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.every(function(e){return y[e]})},anyInputDown:function(){return h+m>0},mouseCoords:g,parentColours:function(e){for(var t={colour:null,backgroundColour:null},n=/^\w+a\(.+?,\s*0\s*\)$|^transparent$/;e.length&&e[0]!==document;e=e.parent()){if(!t.backgroundColour){var r=e.css("background-color");r.match(n)||(t.backgroundColour=r)}if(!t.colour){var a=e.css("color");a.match(n)||(t.colour=a)}if(t.colour&&t.backgroundColour)return t}return{colour:"#fff",backgroundColour:"#000"}},childrenProbablyInline:function(e){var t=[];return[].every.call(e.findAndFilter("*"),function(e){return!!(e.hidden||/none|inline/.test(e.style.display)||/display: (none|inline)/.test(e.getAttribute("style")))||!n.includes(e.tagName.toLowerCase())&&!/display: (?!none|inline|inherit|unset)/.test(e.getAttribute("style"))&&(!!r.includes(e.tagName.toLowerCase())||(t.push(e),!0))})&&t.every(function(e){return window.getComputedStyle(e).display.includes("inline")})},transitionReplace:function(t,n,r){var a=t.closest("tw-hook");a.length>0&&(t=a);var i=e("<tw-transition-container>").css("position","relative");i.insertBefore(t.first());var o=void 0;n&&(o=e("<tw-transition-container>").appendTo(i),n.appendTo(o));var s=e("<tw-transition-container>").css("position","absolute").prependTo(i);t.detach().appendTo(s),v.transitionOut(s,r),n&&v.transitionIn(o,r,function(){o.unwrap().children().first().unwrap()})},transitionOut:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0;0!==e.length&&(n=n||l(t),(e.length>1||!v.childrenProbablyInline(e)||!["tw-hook","tw-passage","tw-expression"].includes(e.tag()))&&(e=e.wrapAll("<tw-transition-container>").parent()),o&&e.css("transform-origin",o),e.attr("data-t8n",t).addClass("transition-out").css({"animation-duration":n+"ms","animation-delay":r-i+"ms"}),requestAnimationFrame(function(){v.childrenProbablyInline(e)?e.css("display","inline"):e.parent().is("tw-backdrop,tw-story")||e[0].setAttribute("style",e[0].getAttribute("style")+"display:block !important;width:100%")}),b(e,n,r-i,a,function(){e.remove()}))},transitionIn:function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0;if(0!==t.length){r=r||l(n);var u=t.length>1||!v.childrenProbablyInline(t)||!["tw-hook","tw-passage","tw-expression"].includes(t.tag());u&&(t=t.wrapAll("<tw-transition-container>").parent()),c&&t.css("transform-origin",c),t.attr("data-t8n",n).addClass("transition-in").css(Object.assign({"animation-duration":r+"ms","animation-delay":i-s+"ms"},i-s?{visibility:"hidden"}:{})),requestAnimationFrame(function(){v.childrenProbablyInline(t)?t.css("display","inline"):t.parent().is("tw-backdrop,tw-story")||t[0].setAttribute("style",t[0].getAttribute("style")+"display:block !important;width:100%")}),b(t,r,i-s,o,function(n){var r=0===t.filter(a.join(",")).length;u&&r?(t.find("tw-transition-container").each(function(t,r){(r=e(r)).css("animation-delay",v.cssTimeUnit(r.css("animation-delay")||0)-n+"ms")}),t.contents().unwrap()):t.removeClass("transition-in").removeAttr("data-t8n")})}},debounce:function(e){var t=void 0,n=void 0,r=0,a=function a(){Date.now()-r>300?(t=0,e.apply(void 0,_toConsumableArray(n))):t=requestAnimationFrame(a)};return function(){r=Date.now(),n=arguments,t&&cancelAnimationFrame(t),t=requestAnimationFrame(a)}},impossible:function(e,t){window.console&&console.error(e+"(): "+t)},assertMustHave:function(e,t){if(window.console)for(var n=0;n<t.length;n+=1)t[n]in e||console.error("Assertion failed: object lacks property "+t[n])},assertOnlyHas:function(e,t){if(window.console)for(var n in e)t.includes(n)||console.error("Assertion failed: object had unexpected property '"+n+"'!")},onStartup:function(e){f?f.push(e):e()},get storyElement(){return p}},e(function(){p=e("tw-story"),f.forEach(function(e){return e()}),f=null}),Object.freeze(v)}),define("utils/naturalsort",[],function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:String;return function(n,r){var a,i,o,s,c=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,u=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,l=/^0x[0-9a-f]+$/i,p=/^0/,f=t(n).trim(),d=t(r).trim(),h=f.replace(c,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),y=d.replace(c,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),m=parseInt(f.match(l))||1!==h.length&&f.match(u)&&Date.parse(f),g=parseInt(d.match(l))||m&&d.match(u)&&Date.parse(d)||null;if(e&&window.Intl&&window.Intl.Collator&&(o=window.Intl.Collator(e)),g){if(m<g)return-1;if(m>g)return 1}for(var v=0,b=Math.max(h.length,y.length);v<b;v++){if(a=!(h[v]||"").match(p)&&parseFloat(h[v])||h[v]||0,i=!(y[v]||"").match(p)&&parseFloat(y[v])||y[v]||0,isNaN(a)!==isNaN(i))return isNaN(a)?1:-1;if((void 0===a?"undefined":_typeof(a))!==(void 0===i?"undefined":_typeof(i)))a+="",i+="";else if("string"==typeof a&&o&&0!==(s=o.compare(a,i)))return s;if(a<i)return-1;if(a>i)return 1}return 0}}}),define("twinescript/compiler",["utils"],function(e){var t=e.impossible,n=JSON.stringify;function r(e,t){for(var n=0;n<e.length;n+=1)if(t.includes(e[n].type))return n;return NaN}function a(e,t){var n=[];return e.length?([["error"],["comma"],["to","into"],["where","when","via"],["making","each"],["typeSignature"],["augmentedAssign"],["and","or"],["is","isNot"],["contains","doesNotContain","isIn","isNotIn"],["isA","isNotA","matches","doesNotMatch"],["inequality"],["addition","subtraction"],["multiplication","division"],{rightAssociative:["spread","bind"]},{rightAssociative:["not","positive","negative"]},{rightAssociative:["belongingProperty","belongingItProperty","belongingOperator","belongingItOperator"]},["property","itsProperty","possessiveOperator","itsOperator"],["twineLink"],["macro"],["grouping"]]["most"===t?"reverse":"valueOf"]().some(function(t){var a=void 0;if(a=t.rightAssociative?r(e,t.rightAssociative):function(e,t){return e.length-1-r.apply(void 0,[[].concat(_toConsumableArray(e)).reverse(),t])}(e,t),!Number.isNaN(a)&&a>-1)return n=[e[a],a],!0}),n):n}function i(e){if("inequality"===e.type){var t=e.operator;return e.negate?{">":"<=","<":">=",">=":"<","<=":">"}[t]:t}return e.type}function o(e){var t=i(e);return{">":"<","<":">",">=":"<=","<=":">=",contains:"isIn",doesNotContain:"isNotIn",isIn:"contains",isA:"typifies",typifies:"isA",isNotA:"untypifies",untypifies:"isNotA"}[t]||t}var s=["inequality","is","isNot","isIn","contains","doesNotContain","isNotIn","isA","typifies","isNotA","untypifies","matches","doesNotMatch"];function c(e,t,r){return"TwineError.create("+n(e)+","+n(t)+","+n(r)+")"}return function e(r){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=u.isVarRef,p=u.isTypedVar,f=u.whitespaceError,d=u.elidedComparison,h=u.testNeedsRight,y="Operations.Identifiers.it";if(!(r=[].concat(r)).length)return l&&f?c("operation",f):"";var m=void 0;if(1===r.length){var g=(m=r[0]).type;if("identifier"===g)return l?"VarRef.create(Operations.Identifiers,"+n(m.text)+")":"Operations.Identifiers."+m.text.toLowerCase()+" ";if("variable"===g||"tempVariable"===g){var v="VarRef.create("+("tempVariable"===g?"section.stackTop.tempV":"State.v")+"ariables,"+n(m.name)+")"+(l||p?"":".get()");return p?"TypedVar.create(Datatype.create('any'),"+v+")":v}if("hookName"===g)return"HookSet.create({type:'name', data:'"+m.name+"'}) ";if("string"===g)return m.text.replace(/(.?)\n/g,function(e,t){return("\\"===t?"\\\\":"\n"===t?"\\n":t)+"\\n"});if("hook"===g)return"CodeHook.create("+n(m.text.slice(1,-1))+","+n(m.html||"")+")";if("colour"===g)return"Colour.create("+n(m.colour)+")";if("datatype"===g)return"Datatype.create("+n(m.name)+")";if("blockedValue"===g)return"section.blockedValue()";if("root"===g)return e(m.children);if("whitespace"===g&&l&&f)return c("operation",f)}var b,w=a(r,"least"),T=_slicedToArray(w,2);m=T[0],b=T[1];var S=(m||{}).type,x=r.slice(0,b),k=r.slice(b+1),O=function(e,t){return{isVarRef:!0,isTypedVar:t,whitespaceError:"I need usable data to be on the "+e+' of "'+m.text+'".'}},j="must",A="mustn't",C="may",E=void 0,_=void 0,N="",P="",I="",M=j,D=j,R=!1;if(S)if("comma"===S)P=",",D=C;else if("spread"===S)N="Operations.makeSpreader(",I=")",M=C;else if("bind"===S)N="VarBind.create(",_=e(k,O("right")),I=(m.text.startsWith("2")?",'two way'":"")+")",M=A;else if("to"===S)N="Operations.makeAssignmentRequest(Operations.setIt(",_=e(k,O("right")),P="),",E=e(x,O("left",!0)),I=",'to')";else if("into"===S)N="Operations.makeAssignmentRequest(",_=e(x,O("left")),P=",Operations.setIt(",E=e(k,O("right",!0)),I="),'into')";else if("typeSignature"===S)N="TypedVar.create(",P=",",_=e(k,O("right")),I=")",p=!1;else if("where"===S||"when"===S||"via"===S)N="Lambda.create(",E=e(x,{isVarRef:!0,whitespaceError:null}).trim()||"undefined",P=","+n(m.type)+",",_=n(e(k)),I=","+n(r.map(function(e){return e.text}).join(""))+")";else if("making"===S||"each"===S)"each"===S?(N="Lambda.create(",_=e(k,O("right")).trim(),I=",'where','true',"+n(r.map(function(e){return e.text}).join(""))+")",M=C):(N="Lambda.create(",E=e(x,{isVarRef:!0,whitespaceError:null}).trim()||"undefined",P=","+n(m.type)+",",_=e(k,O("right")).trim(),I=","+n(r.map(function(e){return e.text}).join(""))+")");else if("augmentedAssign"===S)N="Operations.makeAssignmentRequest(",E=e(x,O("left")),P=",",_="Operations["+n(m.operator)+"]("+e(x)+","+e(k)+")",I=","+n(m.operator)+")";else if("and"===S||"or"===S){var L=function e(t){var n=a(t,"least"),r=_slicedToArray(n,2),i=r[0],o=r[1];if(i)return s.includes(i.type)?i:["and","or"].includes(i.type)?e(t.slice(0,o))||e(t.slice(o+1)):void 0},F=L(x),q=L(k),V=c("operation",'This use of "is not" and "'+S+'" is grammatically ambiguous.','Maybe try rewriting this as "__ is not __ '+S+' __ is not __"');if(N="Operations."+S+"(",P=",",I=")",d===m.type)N=I="",E=e(x,{isVarRef:l,elidedComparison:d}).trim(),_=e(k,{elidedComparison:d}).trim();else if(F&&!q){var H=F,z=n(i(H));if("isNot"===H.type||"isNotA"===H.type||"untypifies"===H.type)return V;_="Operations.elidedComparisonOperator("+n(m.type)+","+z+","+e(k,{elidedComparison:S})+")"}else if(!F&&q){var W=q,$=r.indexOf(W),B=n(o(W));if("isNot"===W.type||"isNotA"===W.type||"untypifies"===W.type)return V;_="Operations.elidedComparisonOperator("+n(m.type)+","+B+","+e(x,{elidedComparison:S})+")",E=e([].concat(_toConsumableArray(r.slice($+1)),[Object.assign(Object.create(W),_defineProperty({},"inequality"===W.type?"operator":"type",o(W)))],_toConsumableArray(r.slice(b+1,$))))}l=!1}else if(s.includes(S))R=!0,l=!1,N="Operations["+n(i(m))+"](",P=",",I=")";else if("addition"===S||"subtraction"===S){if(!e(x,{testNeedsRight:!0}).trim())return m.type={addition:"positive",subtraction:"negative"}[S],e(r,{isVarRef:l,whitespaceError:f,elidedComparison:d,testNeedsRight:h});l=!1,N="Operations["+n(m.text)+"](",P=",",I=")"}else if("multiplication"===S||"division"===S)l=!1,N="Operations["+n(m.text)+"](",P=",",I=")";else if("positive"===S||"negative"===S)l=!1,E="negative"===S?"-1":"1",N="Operations['*'](",P=",",I=")";else if("not"===S)N="Operations.not(",_=e(k),I=")",M=C;else if("belongingProperty"===S)N="VarRef.create(",_=e(k,O("right")),I=","+n(m.name)+")"+(l?"":".get()"),M=C;else if("belongingOperator"===S||"belongingItOperator"===S)E=m.type.includes("It")?y:e(k,O("right")),_=e(x),N="VarRef.create(",P=",{computed:true,value:",I="})"+(l?"":".get()");else if("property"===S)N="VarRef.create(",E=e(x,O("left")),I=","+n(m.name)+")"+(l?"":".get()"),D=C;else if("itsProperty"===S||"belongingItProperty"===S)N="VarRef.create(",E=y,I=","+n(m.name)+")"+(l?"":".get()"),M=D=C;else if("possessiveOperator"===S||"itsOperator"===S)m.type.includes("it")&&(E=y,M=C),N="VarRef.create(",P=",{computed:true,value:",I="})"+(l?"":".get()"),p=!1;else if("twineLink"===S)P='Macros.run("link-goto", [section,'+n(m.innerText)+","+n(m.passage)+"])",M=D=A;else if("macro"===S){var U=m.children[0],G="$"===U.text[0]||"_"===U.text[0];"macroName"===U.type||G||t("Compiler.compile","macro token had no macroName child token"),P="Macros.run"+(G?"Custom":"")+"("+(G?"VarRef.create("+("_"===U.text[0]?"section.stackTop.tempV":"State.v")+"ariables,"+n(U.text.trim().slice(1,-1))+").get()":'"'+m.name+'"')+", [section,"+e(m.children.slice(1),{isTypedVar:p})+"])",M=D=A}else if("grouping"===S)P="("+e(m.children,{isVarRef:l})+")",M=D=A;else if("error"===S)return c("syntax",n(m.message),m.explanation?n(m.explanation):"");return b>-1?(E=(E||e(x,{isVarRef:l,isTypedVar:p})).trim(),_=(_||e(k)).trim(),R&&!E&&(E=y),M===j&&!E||D===j&&!_?h&&D&&!_?"":c("operation","I need usable code to be "+(M===j?"left ":"")+(M===j&&D===j?"and ":"")+(D===j?"right ":"")+"of "+m.text+"."):M===A&&E||D===A&&_?c("operation","There can't be a "+(E&&M===A&&_&&D===A?E+" or "+_:E&&M===A?E:_)+" to the "+(M===A?"left ":"")+(M===A&&D===A?"or ":"")+(D===A?"right ":"")+"of "+m.text+".","There could be a comma missing between them, or there could be a "):N+E+P+_+I):1===r.length?(("value"in r[0]?r[0].value:r[0].text)+"").trim()||" ":r.reduce(function(t,n){return t+e(n,{isVarRef:l,isTypedVar:p})},"")}}),define("internaltypes/twineerror",["jquery","utils"],function(e,t){var n=t.impossible,r=t.escape;e(document.documentElement).on("click","tw-folddown",function(t){var n=t.target;for((n=e(n)).toggleClass("open");n&&!n.next().length;)n=n.parent();n&&n.next().toggle()});var a={syntax:"The markup seems to contain a mistake.",saving:"I tried to save or load the game, but I couldn't do it.",operation:"I tried to perform an operation on some data, but the data's type was incorrect.",macrocall:"I tried to use a macro, but its call wasn't written correctly.",datatype:"I tried to use a macro, but was given the wrong type of data to it.",custommacro:"I tried to use a custom macro, but its code hook had a mistake in it.",infinite:"I almost ended up doing the same thing over and over, forever.",property:"I tried to access a value in a string/array/datamap, but I couldn't find it.",unimplemented:"I currently don't have this particular feature. I'm sorry.",javascript:"This error message was reported by your browser's Javascript engine. I don't understand it either, but it usually means that an expression was badly written.",propagated:"Click the 'Open' button to see the code hook as it was executed.",user:"This is a custom error created by (error:). It usually means you used a custom macro incorrectly.",assertion:"This command exists to provide a helpful error if a certain important condition wasn't true."},i={error:[],warning:[]},o={create:function(e,t,r,i){return t&&"string"==typeof t||n("TwineError.create","has a bad message string"),r||e in a||n("TwineError.create","no error explanation given"),"user"!==e&&(t=t[0].toUpperCase()+t.slice(1)),Object.assign(Object.create(this),{type:e,message:t,explanation:r,source:void 0,innerDOM:i,appendTitleText:!1})},fromError:function(e){return o.create("javascript","\u2615 "+e.message)},containsError:function(){for(var e=0;e<arguments.length;e+=1){var t=arguments.length<=e?void 0:arguments[e];if(t instanceof Error)return t;if(o.isPrototypeOf(t))return t;if(Array.isArray(t)){var n=o.containsError.apply(o,_toConsumableArray(t));if(n)return n}}return!1},createWarning:function(e,t){return Object.assign(this.create(e,t),{warning:!0})},render:function(n){var o=this;n=n||this.source||"";var s=e("<tw-error class='"+("javascript"===this.type?"javascript ":"")+(this.warning?"warning":"error")+"' title='"+r(n)+"'>"+r(this.message+(this.appendTitleText?" "+n:""))+"</tw-error>"),c=e("<tw-error-explanation>").text(this.explanation||a[this.type]).hide(),u=e("<tw-folddown tabindex=0>");return this.innerDOM&&e("<tw-open-button>").on("click",function(){var n=e("<tw-backdrop><tw-dialog></tw-backdrop>");n.find("tw-dialog").prepend(o.innerDOM,e("<tw-link tabindex=0>OK</tw-link>").on("click",function(){o.innerDOM.detach(),n.remove()}).wrap("<tw-dialog-links>").parent()),t.storyElement.prepend(n)}).appendTo(s),s.append(u).append(c),s.data("TwineError",this),i.error.forEach(function(e){return e(o,n)}),s},on:function(e,t){if(e in i)return"function"!=typeof t||i[e].includes(t)||i[e].push(t),o;n("TwineError.on","invalid event name")}};return o}),define("renderer",["utils","markup","twinescript/compiler","internaltypes/twineerror"],function(e,t,n,r){var a=e.escape,i=e.impossible,o=e.insensitiveName,s=void 0;function c(e,t){return"<"+t+">"+e+"</"+t+">"}function u(e,t){var n=s.render(e.children);return n&&c(n,t)}var l,p,f="text-align: center; max-width:50%; ",d=RegExp(t.Patterns.macroFront+t.Patterns.macroName,"ig");return s={options:{debug:!1,blockerMacros:[],metadataMacros:[]},preprocess:function(e){var a=s.options.metadataMacros;if(!(e.match(d)||[]).some(function(e){return a.some(function(t){return o(e.slice(1,-1))===t})}))return{};var i=!1,c={};return t.lex(e).children.forEach(function e(t){if("macro"===t.type){if(a.some(function(e){return t.name===e})){if(r.isPrototypeOf(c[t.name]))return;if(i)return void(c[t.name]=r.create("syntax","The ("+t.name+":) macro can't appear after non-metadata macros."));if(c[t.name])return void(c[t.name]=r.create("syntax","There is more than one ("+t.name+":) macro."));c[t.name]={code:n(t),source:t.text}}else i=!0;t.children.forEach(function e(t){"macro"===t.type&&a.some(function(e){return t.name===e})?c[t.name]=r.create("syntax","The ("+t.name+":) macro can't be inside another macro."):t.children.forEach(e)})}else t.children.forEach(e)}),c},exec:(l=void 0,p=void 0,function(e){return"string"!=typeof e?(i("Renderer.exec","source was not a string, but "+(void 0===e?"undefined":_typeof(e))),""):e===l?p:(l=e,p=s.render(t.lex(e).children))}),render:function e(i){var l="",p=[];if(!i)return l;for(var d=i.length,h=0;h<d;h+=1){var y=i[h];switch(y.type){case"error":l+=r.create("syntax",y.message,y.explanation).render(a(y.text))[0].outerHTML;break;case"numbered":case"bulleted":var m="numbered"===y.type?"ol":"ul";l+="<"+m+">";for(var g=1;h<d&&i[h];){if("br"===i[h].type){if(l+="</li>",!i[h+1]||i[h+1].type!==y.type)break}else i[h].type===y.type?(l+=("<"+m+">").repeat(Math.max(0,i[h].depth-g)),l+=("</"+m+">").repeat(Math.max(0,g-i[h].depth)),l+="<li>",g=i[h].depth):l+=e([i[h]]);h+=1}l+=("</"+m+">").repeat(g+1);break;case"align":for(;y&&"align"===y.type;){var v=y.align,b=h+=1;if("left"===v){h-=1;break}for(;h<d&&i[h]&&"align"!==i[h].type;)h+=1;var w=e(i.slice(b,h)),T="";switch(v){case"center":T+=f+"margin-left: auto; margin-right: auto;";break;case"justify":case"right":T+="text-align: "+v+";";break;default:+v&&(T+=f+"margin-left: "+v+"%;")}l+="<tw-align "+(T?'style="'+T+'"':"")+">"+w+"</tw-align>\n",y=i[h]}break;case"column":for(var S=[];y&&"column"===y.type;){var x=y.column,k=h+=1;if("none"===x){h-=1;break}for(;h<d&&i[h]&&"column"!==i[h].type;)h+=1;S.push({text:y.text,type:x,body:e(i.slice(k,h)),width:y.width,marginLeft:y.marginLeft,marginRight:y.marginRight}),y=i[h]}S.length&&function(){var e=S.reduce(function(e,t){return e+t.width},0);l+="<tw-columns>"+S.map(function(t){return"<tw-column type="+t.type+'  style="width:'+t.width/e*100+"%; margin-left: "+t.marginLeft+"em; margin-right: "+t.marginRight+'em;">'+t.body+"</tw-column>\n"}).join("")+"</tw-columns>"}();break;case"heading":for(l+="<h"+y.depth+">";++h<d&&i[h];){if("br"===i[h].type){l+="</h"+y.depth+">";break}l+=e([i[h]])}break;case"br":if(!p.length||/td|th/.test(p[0])){l+="<br>";for(var O=i[h+1];O&&("br"===O.type||"tag"===O.type&&/^<br\b/i.test(O.text));)l+="<tw-consecutive-br"+("tag"===O.type?" data-raw":"")+"></tw-consecutive-br>",O=i[(h+=1)+1]}break;case"hr":l+="<hr>";break;case"escapedLine":case"comment":break;case"inlineUrl":l+='<a class="link" href="'+a(y.text)+'">'+y.text+"</a>";break;case"scriptStyleTag":case"tag":var j=y.text.toLowerCase();/^<\/?(?:table|thead|tbody|tr|tfoot|td|th)\b/.test(j)&&p[y.text.startsWith("</")?"shift":"unshift"](j),l+=y.text.startsWith("</")?y.text:y.text.replace(/>$/," data-raw>");break;case"sub":case"sup":case"strong":case"em":l+=u(y,y.type);break;case"strike":l+=u(y,"s");break;case"bold":l+=u(y,"b");break;case"italic":l+=u(y,"i");break;case"twineLink":var A=_slicedToArray(t.lex("(link-goto:"+JSON.stringify(y.innerText)+","+JSON.stringify(y.passage)+")").children,1)[0];l+='<tw-expression type="macro" name="link-goto"'+(s.options.debug?' title="'+a(y.text)+'"':"")+' js="'+a(n(A))+'"></tw-expression>';break;case"hook":l+="<tw-hook "+(y.hidden?"hidden ":"")+(y.name?'name="'+o(y.name)+'"':"")+(s.options.debug&&y.name?' title="Hook: ?'+y.name+'"':"")+' source="'+a(y.innerText)+'"></tw-hook>';break;case"unclosedHook":return l+="<tw-hook "+(y.hidden?"hidden ":"")+(y.name?'name="'+o(y.name)+'"':"")+'source="'+a(i.slice(h+1,d).map(function(e){return e.text}).join(""))+'"></tw-hook>';case"verbatim":l+=c(a(y.innerText).replace(/\n/g,"<br>"),"tw-verbatim");break;case"collapsed":l+=u(y,"tw-collapsed");break;case"unclosedCollapsed":return l+="<tw-collapsed>"+e(i.slice(h+1,d))+"</tw-collapsed>";case"variable":case"tempVariable":case"macro":var C=function(){var t=[],i=[];if("macro"===y.type&&function n(r){"string"!==r.type&&"hook"!==r.type&&r.children.every(n);var a=r.firstChild();if("macro"===r.type&&a&&"macroName"===a.type&&s.options.blockerMacros.includes(o(a.text.slice(0,-1))))t.push(r);else if("hook"===r.type){if(!r.everyLeaf(function(e){return"error"!==e.type||(i.push(e),!1)}))return!1;r.html=e(r.children)}return!0}(y),i.length)return{v:r.create("syntax","This code hook's markup contained "+i.length+" error"+(i.length?"s":"")+":<br>\u2014"+i.map(function(e){return e.message}).join("<br>\u2014")).render(a(y.text))[0].outerHTML};var c=t.length&&t.map(function(e){var t=n(e);return e.type="blockedValue",t});l+='<tw-expression type="'+y.type+'" name="'+a(y.name||y.text)+'"'+(s.options.debug?' title="'+a(y.text)+'"':"")+(t.length?' blockers="'+a(JSON.stringify(c))+'"':"")+' js="'+a(n(y))+'"></tw-expression>',t.forEach(function(e){return e.type="macro"})}();if("object"===(void 0===C?"undefined":_typeof(C)))return C.v;break;default:l+=y.children&&y.children.length?e(y.children):y.text}}return l}},Object.freeze(s)}),define("passages",["jquery","utils/naturalsort","utils","markup","renderer","internaltypes/twineerror"],function(e,t,n,r,a,i){var o=n.unescape,s=n.onStartup,c=Object.assign;function u(e){var t=o(e.html()),n=a.preprocess(t);return c(new Map([["source",t],["tags",(e.attr("tags")||"").split(/\s/)||[]],["name",e.attr("name")]]),{TwineScript_TypeName:"a passage datamap",TwineScript_ObjectName:"a passage datamap",metadata:n})}var l=c(new Map,{TwineScript_ObjectName:"the Passages datamap",getTagged:function(e){var n=t("en",function(e){return e.get("name")}),r=[];return this.forEach(function(t){var n=t instanceof Map&&t.get("tags");Array.isArray(n)&&n.includes(e)&&r.push(t)}),r.sort(n)},getStorylets:function(e,n){var r=n?n.filter(e,[].concat(_toConsumableArray(l.values()))):[].concat(_toConsumableArray(l.values()));if(i.containsError(r))return r;var a=[],o=-1/0,s=r.reduce(function(t,n){if(t)return t;var r=n.get("storylet");if(r){var s=e.speculate(r,n.get("name"),"a (storylet:) macro");if(i.containsError(s))return s.message="There's an error in the storylet passage \""+n.get("name")+'":\n'+s.message,s.source=r.TwineScript_ToSource(),s;if(s){var c=n.get("exclusivity");o=Math.max(o,"number"==typeof c?c:0),a.push(n)}}},void 0);if(s)return s;var c=t("en");return a.filter(function(e){var t=e.get("exclusivity");return(t="number"==typeof t?t:0)===o}).sort(function(e,t){var n=e.get("urgency"),r=t.get("urgency");return(n="number"==typeof n?n:0)!==(r="number"==typeof r?r:0)?r-n:c(e.get("name"),t.get("name"))})},allStorylets:function(){return[].concat(_toConsumableArray(l.values())).filter(function(e){return e.get("storylet")})},loadMetadata:function(e){var t=[];return l.forEach(function(n){n.metadata&&Object.keys(n.metadata).forEach(function(r){if(i.containsError(n.metadata[r]))t.push(n.metadata[r]);else{var a=n.metadata[r],o=a.code,s=a.source,c=e.speculate(o,n.get("name"),"a ("+r+":) macro"),u='In "'+n.get("name")+'":\n';if(i.containsError(c))return c.message=u+c.message,c.source=s,void t.push(c);c instanceof Map?c.forEach(function(e,t){return l(t,e)}):l(r,c)}function l(e,r){n.has(e)?t.push(i.create("syntax","This passage's datamap already has a '"+JSON.stringify(e)+"' data name.")):n.set(e,r)}}),n.metadata=void 0}),t},hasValid:function(e){var t=this.get(e);return t&&t instanceof Map&&t.has("source")},create:u});return s(function(){Array.from(e("tw-storydata > tw-passagedata")).forEach(function(t){t=e(t),l.set(t.attr("name"),new u(t))})}),l}),define("utils/operationutils",["utils/naturalsort","utils","internaltypes/twineerror","patterns"],function(e,t,n,r){var a=t.impossible,i=t.nth,o=t.insensitiveName,s=t.permutations,c=r.validPropertyName,u="object",l="boolean",p="string",f="number",d="function";function h(e){return!!e&&((void 0===e?"undefined":_typeof(e))===u||(void 0===e?"undefined":_typeof(e))===d)}function y(e){return e&&Object.getPrototypeOf(e)===Object.prototype}function m(e){return Array.isArray(e)?"array":e instanceof Map?"datamap":e instanceof Set?"dataset":(void 0===e?"undefined":_typeof(e))===p?p:e&&(void 0===e?"undefined":_typeof(e))===u?u:""}function g(e){if(!h(e))return e;if(_typeof(e.TwineScript_Clone)===d)return e.TwineScript_Clone();if(Array.isArray(e))return[].concat(_toConsumableArray(e));if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if((void 0===e?"undefined":_typeof(e))===d)return Object.assign(e.bind(),e);switch(Object.getPrototypeOf(e)){case Object.prototype:return Object.assign({},e);case null:return Object.assign(Object.create(null),e)}return a("OperationUtils.clone","The value "+e+" cannot be cloned!"),e}function v(e){return h(e)&&"TwineScript_ObjectName"in e?e.TwineScript_ObjectName:Array.isArray(e)?"an array":e instanceof Map?"a datamap":e instanceof Set?"a dataset":(void 0===e?"undefined":_typeof(e))===l?"the boolean value '"+e+"'":(void 0===e?"undefined":_typeof(e))===p||(void 0===e?"undefined":_typeof(e))===f?"the "+(void 0===e?"undefined":_typeof(e))+" "+JSON.stringify(e):void 0===e?"an empty variable":"...whatever this is"}function b(e,t){return(void 0===e?"undefined":_typeof(e))!==u&&(void 0===t?"undefined":_typeof(t))!==u?e===t:Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&e.every(function(e,n){return b(t[n],e)}):e instanceof Map&&t instanceof Map?b(Array.from(e.entries()).sort(),Array.from(t.entries()).sort()):e instanceof Set&&t instanceof Set?b([].concat(_toConsumableArray(e)),[].concat(_toConsumableArray(t))):e&&_typeof(e.TwineScript_is)===d?e.TwineScript_is(t):e&&(void 0===e?"undefined":_typeof(e))===u&&t&&(void 0===t?"undefined":_typeof(t))===u&&y(e)&&y(t)?b(Object.getOwnPropertyNames(e).map(function(t){return[t,e[t]]}),Object.getOwnPropertyNames(t).map(function(e){return[e,t[e]]})):Object.is(e,t)}return Object.freeze({isObject:h,isPureObject:y,singleTypeCheck:function e(t,n){if(null===n)return void 0===t;var r=void 0===t?"undefined":_typeof(t);if((void 0===n?"undefined":_typeof(n))!==d&&n.pattern){if("optional"===n.pattern||"zero or more"===n.pattern)return void 0===t||e(t,n.innerType);if("either"===n.pattern)return n.innerType.some(function(n){return e(t,n)});if("lambda"===n.pattern&&e(t,n.innerType))return n.clauses.includes("where")==="where"in t&&n.clauses.includes("making")==="making"in t&&n.clauses.includes("via")==="via"in t&&n.clauses.includes("with")==="with"in t;if("insensitive set"===n.pattern)return n.innerType.includes(o(t));if("range"===n.pattern)return n.range(t);if("wrapped"===n.pattern)return e(t,n.innerType)}return(void 0===n||void 0!==t)&&("anything"===n.TwineScript_TypeName&&void 0!==t&&!t.TwineScript_Unstorable||"everything"===n.TwineScript_TypeName&&void 0!==t||(n===String?r===p:n===Boolean?r===l:n===parseInt?r===f&&!Number.isNaN(t)&&!(t+"").includes("."):n===Number?r===f&&!Number.isNaN(t):n===Array?Array.isArray(t):n===Map||n===Set?t instanceof n:Object.isPrototypeOf.call(n,t)))},isValidDatamapName:function(e,t){if(e instanceof Map||a("isValidDatamapName","called with non-Map"),n.containsError(t))return t;if((void 0===t?"undefined":_typeof(t))!==p&&(void 0===t?"undefined":_typeof(t))!==f)return n.create("property","Only strings and numbers can be used as data names for "+v(e)+", not "+v(t)+".");var r=(void 0===t?"undefined":_typeof(t))===p?+t:""+t;return!(!Number.isNaN(r)&&e.has(r))||n.create("property","You mustn't use both "+v(t)+" and "+v(r)+" as data names in the same datamap.")},collectionType:m,isSequential:function(e){return(void 0===e?"undefined":_typeof(e))===p||Array.isArray(e)||_typeof(e.hooks)===d},unstorableValue:function e(t){return t&&t.TwineScript_Unstorable&&t||Array.isArray(t)&&t.find(e)||t instanceof Map&&[].concat(_toConsumableArray(t.values())).find(e)||t instanceof Set&&[].concat(_toConsumableArray(t)).find(e)},clone:g,objectName:v,typeName:function e(t){var n=y(t);if(n&&t.innerType)return t.typeName?t.typeName:"insensitive set"===t.pattern?"a case-insensitive string name":"either"===t.pattern?(Array.isArray(t.innerType)||a("typeName",'"either" pattern had non-array inner type'),t.innerType.map(e).join(" or ")):"optional"===t.pattern?"(optional) "+e(t.innerType):e(t.innerType);if(n&&t.pattern&&"range"===t.pattern){if(t.name)return t.name;var r=t.min,i=t.max;return"a"+(r>0?" positive":"")+(t.integer?" whole":"")+" number"+(0===r?" between 0 and "+i:i<1/0?" up to "+i:"")}return t===String||t===Number||t===Boolean?"a "+_typeof(t()):t===parseInt?"a whole number":t===Map?"a datamap":t===Set?"a dataset":t===Array?"an array":h(t)&&"TwineScript_TypeName"in t?t.TwineScript_TypeName:v(t)},typeID:function(e){var t=void 0===e?"undefined":_typeof(e);return[l,p,f].includes(t)?t:Array.isArray(e)?"array":e instanceof Map?"datamap":e instanceof Set?"dataset":e.TwineScript_TypeID||""},toSource:function t(r,o){var s=n.containsError(r);return s&&a("toSource","received a TwineError: "+s.message),_typeof(r.TwineScript_ToSource)===d?r.TwineScript_ToSource():y(r)&&"first"in r&&"last"in r?(r.first<0?(-1!==r.first?i(-r.first):"")+"last":i(r.first+1))+"to"+(r.last<0?(-1!==r.last?i(-r.last):"")+"last":i(r.last+1)):Array.isArray(r)?"(a:"+("property"===o?r.map(function(e){return e+(e>0)}):r).map(t)+")":r instanceof Map?"(dm:"+Array.from(r.entries()).sort(function(t,n){return[t[0],n[0]].sort(e("en"))[0]===t[0]?-1:1}).map(function(e){return e.map(t)})+")":r instanceof Set?"(ds:"+Array.from(r).sort(e("en")).map(t)+")":(void 0===r?"undefined":_typeof(r))===f&&"property"===o?r<0?-1===r?"last":i(-r)+"last":i(r+1):(void 0===r?"undefined":_typeof(r))===p&&"property"===o?RegExp(c).test(r)?r:"("+JSON.stringify(r)+")":JSON.stringify(r)},is:b,contains:function(e,t){if(e||""===e){if((void 0===e?"undefined":_typeof(e))===p)return(void 0===t?"undefined":_typeof(t))!==p?n.create("operation",v(e)+" can only contain strings, not "+v(t)+"."):e.includes(t);if(Array.isArray(e))return e.some(function(e){return b(e,t)});if(e instanceof Set||e instanceof Map)return Array.from(e.keys()).some(function(e){return b(e,t)})}return n.create("operation",v(e)+" cannot contain any values, let alone "+v(t))},isA:function(e,t){return _typeof(t.TwineScript_IsTypeOf)===d?t.TwineScript_IsTypeOf(e):n.create("operation",'"is a" should only be used to compare type names, not '+v(t)+".")},matches:function e(t,r){var a=!1;if(t&&_typeof(t.TwineScript_IsTypeOf)===d){var i=t.TwineScript_IsTypeOf(r);if(n.containsError(i))return i;a|=i}if(r&&_typeof(r.TwineScript_IsTypeOf)===d){var o=r.TwineScript_IsTypeOf(t);if(n.containsError(o))return o;a|=o}if(a)return!0;if(Array.isArray(t)&&Array.isArray(r)){for(var c=0,u=0,l=!0;l&&c<t.length&&u<r.length;){var p=t[c],f=r[u];if(p.rest){for(;u<r.length&&e(p,f);)f=r[u+=1];c+=1}else if(f.rest){for(;c<t.length&&e(p,f);)p=t[c+=1];u+=1}else e(p,f)?(c+=1,u+=1):l=!1}return l&&c>=t.length&&u>=r.length}return t instanceof Map&&r instanceof Map?e(Array.from(t.entries()).sort(),Array.from(r.entries()).sort()):t instanceof Set&&r instanceof Set?(t=[].concat(_toConsumableArray(t)),s.apply(void 0,_toConsumableArray(r)).some(function(n){return e(t,n)})):b(t,r)},subset:function e(t,r,a){if(!r||!a)return n.create("macrocall","The sub"+m(t)+" index value must not be "+(r&&a)+".");var i=(void 0===t?"undefined":_typeof(t))===p;if(i&&(t=Array.from(t)),r<0&&(r=Math.max(0,t.length+r+1)),a<0&&(a=Math.max(0,t.length+a+1)),r>a)return e(arguments[0],a,r);var o=t.slice(r>0?r-1:r,a).map(g);return i?o.join(""):o},range:function e(t,n){if(t>n)return e(n,t);var r=[t];for(n-=t;n-- >0;)r.push(++t);return r},printBuiltinValue:function e(t){return n.containsError(t)?t:t&&_typeof(t.TwineScript_Print)===d?t.TwineScript_Print():t instanceof Map?(t=Array.from(t.entries()),n.containsError(t)?t:t.reduce(function(t,n){var r=_slicedToArray(n,2),a=r[0],i=r[1];return t+"<tr><td>`"+e(a)+"`</td><td>`"+e(i)+"`</td></tr>"},"<table class=datamap>")+"</table>"):t instanceof Set?Array.from(t.values()).map(e)+"":Array.isArray(t)?t.map(e)+"":t&&_typeof(t.jquery)===p?t:h(t)?n.create("unimplemented","I don't know how to print this value yet."):t+""},unique:function(e,t,n){return!n.slice(t+1).some(function(t){return b(e,t)})}})}),define("utils/renderutils",["jquery","utils","renderer"],function(e,t,n){var r=RegExp(t.realWhitespace+"+"),a=RegExp(t.realWhitespace+"+","g");function i(e,t,n){var r=e.textContent.length;if(!(t>=r)){var a=void 0,i=[a=0===t?e:e.splitText(t)];return n&&(n<=0&&(n=r-n),n<r&&i.push(a.splitText(n-t))),i}}var o,s=(o=void 0,function(){if(void 0!==o)return o;var t=e("<p>");return t[0].normalize?(t.append(document.createTextNode("0-"),document.createTextNode("2"),document.createTextNode(""))[0].normalize(),o=1===t.contents().length):o=!1});var c="tw-collapsed,[collapsing=true]";var u=/^(=*)([^=]+)=*$/;return Object.freeze({dialog:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=r.section,i=r.parent,o=void 0===i?t.storyElement:i,s=r.cd,c=r.message,u=void 0===c?"":c,l=r.defaultValue,p=r.buttons,f=void 0===p?[{name:"OK",confirm:!0,callback:Object}]:p,d=e("<tw-backdrop><tw-dialog>"+(l||""===l?"<input type=text style='display:block;margin:0 auto'></input>\n":"")+"<tw-dialog-links>"+(f.length?f.reduce(function(e,t,n){var r=t.name;return e+"<tw-link style='margin:0 "+(n===f.length-1?"0 0 0.5em":0===n?"0.5em 0 0":"0.5em")+"' tabindex=0>"+r+"</tw-link>"},""):"<tw-link tabindex=0>"+f[0].name+"</tw-link>")+"</tw-dialog-links></tw-dialog></tw-backdrop>"),h=d.find("tw-dialog");if(o.append(d),a){a.renderInto(u,h,Object.assign({},s,{append:"prepend"}));var y=s&&s.transition&&d.find("tw-dialog > tw-transition-container");y&&y.length&&y.appendTo(d).append(h.prepend(y.contents().detach()))}else h.prepend(n.exec(u));if(l){var m=d.find("input").last();m.val(l).on("keypress",function(e){13===e.which&&(d.remove(),f.filter(function(e){return e.confirm}).forEach(function(e){return e.callback()}))}),setTimeout(function(){return m.focus()},100)}return f.reverse().forEach(function(t,n){e(d.find("tw-link").get(-n-1)).on("click",function(){d.remove(),t.callback()})}),d},realWhitespace:r,textNodeToChars:function(e){var t=[].concat(_toConsumableArray(e.textContent));return 1===t.length?[e]:t.reduce(function(e,t){return t.match(r)&&e.length&&e[e.length-1].match(r)?e[e.length-1]+=t:e.push(t),e},[]).reduce(function(t,n){var r=e;return n.length<e.textContent.length&&(e=e.splitText(n.length)),t.concat(r)},[])},findTextInNodes:function e(t,n){var r=[],a="",o=[];if(!t.length||!n)return o;for(;t.length>0;){r.push(t[0]),a+=t[0].textContent,t.shift();var s=a.indexOf(n);if(s>-1){for(var c,u=a.length-(s+n.length);s>=r[0].textContent.length;)s-=r[0].textContent.length,r.shift();if(1===r.length){var l=i(r[0],s,s+n.length);o.push(l[0]),l[1]&&t.unshift(l[1]);break}o.push(i(r[0],s,r[0].length)[0]),(c=o).push.apply(c,_toConsumableArray(r.slice(1,-1)));var p=i(r[r.length-1],0,r[r.length-1].textContent.length-u);o.push(p[0]),p[1]&&t.unshift(p[1]),o=o.filter(Boolean);break}}return[o].concat(_toConsumableArray(e(t,n)))},collapse:function(t){function n(t){return 0===e(this||t).parentsUntil(c).filter("tw-verbatim, tw-expression, [collapsing=false]").length}var r=function e(t){var n=t[0],r=t.parent();if(!r.length||t.findAndFilter("tw-story").length)return null;var a=r.textNodes().filter(function(e){var t=e.compareDocumentPosition(n);return 4&t&&!(8&t)});return(a=a[a.length-1])||e(r)}(t);e(r).parents(c).length||(r=null);var i=function e(t){var n=t[0],r=t.parent();if(!r.length||t.findAndFilter("tw-story").length)return null;var a=r.textNodes().filter(function(e){var t=e.compareDocumentPosition(n);return 2&t&&!(8&t)})[0];return a||e(r)}(t);e(i).parents(c).length||(i=null);var o="br:not([data-raw]),tw-consecutive-br:not([data-raw])";t.find(o).filter(n).replaceWith(document.createTextNode(" "));var u=(t=e(t.get().map(function(t){return e(t).filter(n).is(o)?e(document.createTextNode(" ")).replaceAll(t)[0]:t}))).textNodes(),l=0;u.reduce(function(e,t){return n(t)?(t.textContent=t.textContent.replace(a," ")," "!==t.textContent[0]||e&&e.textContent&&!(e.textContent.search(/\s$/)>-1)||(t.textContent=t.textContent.slice(1)),t):document.createTextNode("A")},r),[].concat(_toConsumableArray(u)).reverse().every(function(e){return!!n(e)&&(e.textContent.match(/^\s*$/)?(l+=e.textContent.length,e.textContent="",!0):(e.textContent=e.textContent.replace(/\s+$/,function(e){return l+=e.length,""}),!1))}),l>0&&i&&(u[u.length-1].textContent+=" "),t[0]&&s()&&t[0].normalize()},geomStringRegExp:u,geomParse:function(e){var t=e.length,n=u.exec(e)||[],r=_slicedToArray(n,3),a=r[0],i=r[1],o=r[2];return a?{marginLeft:i.length/t*100,size:o.length/t*100}:{marginLeft:0,size:0}}})}),define("datatypes/hookset",["jquery","utils","utils/renderutils","utils/operationutils"],function(e,t,n,r){var a=n.textNodeToChars,i=n.realWhitespace,o=n.findTextInNodes,s=r.toSource;function c(n){var r=n.dom,s=e();this.next&&(s=s.add(c.call(this.next,n)));var u=function(t,n){if(Array.isArray(n))return n.reduce(function(e,n){return e.add(t.get(n))},e());if(n&&"object"===(void 0===n?"undefined":_typeof(n))&&"first"in n&&"last"in n){var r=n.first,o=n.last,s=t.length;r<0&&(r+=s),o<0&&(o+=s);for(var c=[t.get(r)];r!==o;)r+=Math.sign(o-r),c.push(t.get(r));return e(c)}if("string"==typeof n){if("chars"===n){var u=[],l=!0,p=!1,f=void 0;try{for(var d,h=t.textNodes(":not(tw-error, tw-error *)")[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var y=d.value,m=!0,g=!1,v=void 0;try{for(var b,w=a(y)[Symbol.iterator]();!(m=(b=w.next()).done);m=!0){var T=b.value;T.textContent.match(i)||u.push(T)}}catch(e){g=!0,v=e}finally{try{!m&&w.return&&w.return()}finally{if(g)throw v}}}}catch(e){p=!0,f=e}finally{try{!l&&h.return&&h.return()}finally{if(p)throw f}}return e(u)}if("links"===n)return t.findAndFilter("tw-link, .enchantment-link");if("visited"===n)return t.findAndFilter("tw-link.visited");if("lines"===n){var S=t.findAndFilter("br:not(tw-sidebar *),tw-consecutive-br:not(tw-sidebar *)").get(),x=[[]];return t.textNodes(":not(tw-error, tw-error *):not(tw-sidebar, tw-sidebar *)").forEach(function(e){S.length&&2&e.compareDocumentPosition(S[0])&&(S.shift(),x.push([])),x[x.length-1]=x[x.length-1].concat(e)}),x=x.map(function(t){return t.map(function(n){for(var r=n.parentNode;e(r).textNodes().every(function(e){return t.includes(e)})&&!t.every(function(t){return e(r).has(t).length});){r=(n=r).parentNode}return n})}),e(x.map(function(t){return e(t).wrapAll("<tw-pseudo-hook>").parent()[0]}))}}return e(t.get(n))};if(this.selector){var l=void 0;if("string"===this.selector.type)l=function(t,n){var r=o(n.textNodes(),t),a=e();return r.forEach(function(t){a=a.add(e(t).wrapAll("<tw-pseudo-hook>").parent())}),a}(this.selector.data,r);else{if("base"===this.selector.type)return s.add(u(c.call(this.selector.data,n),this.property));var p=function(e){var n='tw-hook[name="'+(e=t.insensitiveName(e).replace(/"/g,"&quot;"))+'"],tw-enchantment[name="'+e+'"]';return n+={page:", tw-story",passage:", tw-passage",sidebar:", tw-sidebar",link:", tw-link, .enchantment-link"}[e]||""}(this.selector.data);l=r.findAndFilter(p).add(r.parentsUntil(t.storyElement.parent())).filter(p)}s=this.property?s.add(u(l,this.property)):s.add(l)}return s}function u(e){if(!e)return[];var n=e.selector,r=e.property,a=e.next;return[JSON.stringify(["base"===n.type?u(n.data):t.insensitiveName(n.data),r])].concat(_toConsumableArray(u(a))).sort()}var l=Object.freeze({forEach:function(t,n){var r=c.call(this,t).each(function(t){n(e(this),t)});return t.dom.findAndFilter("tw-pseudo-hook").contents().unwrap(),r},hooks:function(e){return c.call(this,e)},get TwineScript_ObjectName(){return this.property||this.next?"a complex hook name":"?"+this.selector.data+" (a hook name)"},TwineScript_TypeID:"hookName",TwineScript_TypeName:"a hook name (like ?this)",TwineScript_Unstorable:!0,TwineScript_ToSource:function(){var e="",n=this.selector,r=n.type,a=n.data;return"name"===r?a.match(RegExp("^"+t.anyRealLetter+"+$"))?e+="?"+a:e+="(hooks-named:"+JSON.stringify(a)+")":"string"===r?e+=JSON.stringify(a):"base"===r&&(e+=a.TwineScript_ToSource()+"'s "+s(this.property,"property")),this.next&&(e+=" + "+this.next.TwineScript_ToSource()),e},"TwineScript_+":function(e){for(var t=this.TwineScript_Clone(),n=t;n.next;)n=n.next;return n.next=e,t},TwineScript_is:function(e){return u(this)+""==u(e)+""},TwineScript_GetProperty:function(e){return l.create({type:"base",data:this},e,void 0)},TwineScript_Properties:["chars","links","lines","visited"],TwineScript_Clone:function(){return l.create(this.selector,this.property,this.next)},create:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return Object.assign(Object.create(this||l),{selector:Object.freeze(e),property:t,next:n})},from:function(e){return l.isPrototypeOf(e)||"string"==typeof e||t.impossible("HookSet.from() was given a non-HookSet non-string."),l.isPrototypeOf(e)?e:l.create({type:"string",data:e})}});return l}),define("internaltypes/changedescriptor",["jquery","utils","renderer","datatypes/hookset"],function(e,t,n,r){var a=t.assertOnlyHas,i=t.impossible,o=t.transitionIn,s=n.exec,c=Object.assign,u=Object.keys,l=Object.create,p=Object.seal,f=function(e){return e.split(/\n/g).reduce(function(e,t,n,r){var a=r.length;return e.concat(document.createTextNode(t),n!==a-1&&document.createElement(t.length?"br":"tw-consecutive-br"))},[])},d=void 0,h={source:"",appendSource:null,enabled:!0,enablers:null,verbatim:!1,target:null,append:"",newTargets:null,transition:"",transitionTime:null,transitionDeferred:!1,transitionDelay:0,transitionSkip:0,transitionOrigin:null,loopVars:null,styles:null,attr:null,data:null,innerEnchantments:null,section:null,timestamp:0,summary:function(){var e=this;return["source","appendSource","enabled","verbatim","target","append","newTargets","transition","transitionTime","transitionDeferred","transitionDelay","transitionSkip","transitionOrigin","innerEnchantments","enablers"].filter(function(t){return e.hasOwnProperty(t)}).concat([this.attr.length&&"attr",this.styles.length&&"styles",u(this.loopVars).length&&"loopVars",u(this.data).length&&"data"].filter(Boolean))},create:function(e,t){var n=c(l(this),{attr:[].concat(this.attr||[]),styles:[].concat(this.styles||[]),loopVars:this.loopVars||{},data:this.data||{}},e);return t&&t.run(n),n},update:function(){var e=this,t=this.section,n=this.newTargets,a=this.transition,i=this.transitionDeferred,s=this.append,c=this.target;"function"==typeof c&&(c=c());var l=function(t){if(Array.isArray(e.styles)&&e.styles.length>0){var n=e.styles.reduce(function(e,t){return u(t).forEach(function(n){var r=t[n];e[+("function"==typeof r)].push(_defineProperty({},n,r))}),e},[[],[]]),r=_slicedToArray(n,2),a=r[0],i=r[1];a.forEach(function(e){return t.css(e)}),setTimeout(function(){i.forEach(function(e){return t.css(e)})})}e.attr&&e.attr.forEach(function(e){return t.attr(e)}),e.data&&t.data(e.data)};if(Array.isArray(n)&&n.length&&(c=n.map(function(e){return e.target})),[].concat(c).forEach(function(e){r.isPrototypeOf(e)?e.forEach(t,l):l(e)}),a&&!i&&!s){var p=c,f=void 0;do{!(f=p.data("timestamp"))&&(p=p.parent())}while(!f&&p.length);o(c,a,this.transitionTime,this.transitionDelay,this.transitionSkip,f?Date.now()-f:0,this.transitionOrigin)}},render:function(){var t=this,n=this.source,u=this.transition,l=this.transitionTime,p=this.transitionDeferred,y=this.enabled,m=this.enablers,g=this.data,v=this.section,b=this.newTargets,w=this.innerEnchantments,T=this.appendSource,S=this.target,x=this.target,k=this.append;if("function"==typeof S&&(S=S()),a(this,d),!k)return i("ChangeDescriptor.render","This doesn't have an 'append' method chosen."),e();if(m&&m.length){var O=m[0],j=O.descriptor,A=O.changer,C=j.render();if(A){var E=h.create({section:v,target:C});A.run(E),E.update()}return C}if(!y||void 0!==S.attr("hidden"))return h.create({target:S,attr:this.attr.filter(function(e){return!("style"in e)}),data:c({},g,{originalSource:n,hidden:!0})}).update(),e();if(Array.isArray(b)&&b.length&&(S=b),!S)return i("ChangeDescriptor.render","ChangeDescriptor has source but not a target!"),e();var _=e();if([].concat(S).filter(function(e){return!e.jquery}).map(function(e){var t=k,n=void 0;if(e.target&&e.append){var r=e;t=r.append,n=r.before,e=e.target}return{elements:e.hooks(v,x).filter(function(){return!(n&&1&this.compareDocumentPosition(document)&&2&this.compareDocumentPosition(x[0]))}),append:t}},[]).forEach(function(n){var r=n.elements,a=n.append;r.each(function(n,r){r=e(r),_=_.add(t.create({target:r,append:a,newTargets:null}).render()),r.filter("tw-pseudo-hook").contents().unwrap()})}),_.length||Array.isArray(S)||r.isPrototypeOf(S))return _;if(!(k in S)){if("replace"!==k)return i("ChangeDescriptor.render","The target doesn't have a '"+k+"' method."),e();S[0]instanceof Text?k="replaceWith":(S.empty(),k="append")}return S[0]instanceof Text&&("append"===k&&(k="after"),"prepend"===k&&(k="before")),_=e(n&&(this.verbatim?f(n):e.parseHTML(s(n),document,!0))),Array.isArray(T)&&T.forEach(function(n){var r=n.source,a=n.append,i=e(t.verbatim?f(r):e.parseHTML(s(r),document,!0));_="append"===a?_.add(i):"prepend"===a?i.add(_):i}),S[k](_.length?_:void 0),S.data("timestamp",Date.now()),this.update(),u&&!p&&o("replace"===k?S:_,u,l,this.transitionDelay,this.transitionSkip,this.expedite,this.transitionOrigin),w&&w.map(function(e){return e(S)}).forEach(function(e){return v.addEnchantment(e)}),_}};return d=u(h),p(h)}),define("datatypes/changercommand",["utils","utils/operationutils","internaltypes/changedescriptor","internaltypes/twineerror"],function(e,t,n,r){var a=e.impossible,i=t.is,o=t.toSource,s={},c={TwineScript_TypeID:"changer",TwineScript_TypeName:"a changer",TwineScript_Print:function(){return"`[A ("+this.macroName+":) changer]`"},TwineScript_ToSource:function(){return"("+this.macroName+":"+("else"===this.name?"":this.params.map(o))+")"+(this.next?"+"+this.next.TwineScript_ToSource():"")},summary:function(){var e=n.create();return this.run(e),e.summary()},create:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Array.isArray(t)||a("ChangerCommand.create","params was not an array but "+t),Object.assign(Object.create(this),{macroName:e,params:t,next:n,TwineScript_ObjectName:"a ("+e+":) changer"})},"TwineScript_+":function(e){for(var t=this.TwineScript_Clone(),n=t;n.next;)n=n.next;return n.next=e,t},TwineScript_is:function(e){if(c.isPrototypeOf(e))return this.macroName===e.macroName&&i(this.params,e.params)&&i(this.next,e.next)},TwineScript_Clone:function(){for(var e=this.create(this.macroName,this.params,this.next),t=e;t.next;)t=t.next=t.next.TwineScript_Clone();return e},run:function(e){var t=s[this.macroName].apply(s,[e].concat(_toConsumableArray(this.params)));if(r.containsError(t))return t;this.next&&this.next.run(e)},register:function(e,t){s[e]=t}};return Object.freeze(c)}),define("state",["utils","passages","datatypes/changercommand","internaltypes/twineerror","utils/operationutils","markup","twinescript/compiler"],function(e,t,n,r,a,i,o){var s=e.impossible,c=a.objectName,u=a.toSource,l=i.lex,p=Object.assign,f=Object.create,d=Object.defineProperty;d(Map.prototype,"toJSON",{value:void 0}),d(Set.prototype,"toJSON",{value:void 0});var h=["localStorage","sessionStorage"].map(function(e){try{return!!window[e]&&(window[e].setItem("test","1"),window[e].removeItem("test"),!0)}catch(e){return!1}}),y=p(f(null),{TwineScript_ObjectName:"this story's variables",TwineScript_TypeDefs:f(null),TwineScript_VariableStore:!0,TwineScript_MockVisits:null}),m={passage:"",variables:y,create:function(e,t){var n=f(m);return n.passage=e||"",n.variables=p(f(this.variables),t),n}},g=[],v=-1,b=m.create(),w=void 0,T={forward:[],back:[],load:[]},S=void 0;function x(e){b=(g[v]||m).create(e),function(){if(S.hasSessionStorage){var e=S.serialise();if("string"==typeof e)try{sessionStorage.setItem("Saved Session",e)}catch(e){return}}}()}return S=p({get passage(){return b.passage},get variables(){return b.variables},get pastLength(){return v},get futureLength(){return g.length-1-v},get mockVisits(){return b.variables.TwineScript_MockVisits||[]},set mockVisits(e){b.variables.TwineScript_MockVisits=e},passageNameVisited:function(e){var n=0;if(!t.get(e))return 0;for(var r=0;r<=v;r++)n+=+(e===g[r].passage);return n},passageNameLastVisited:function(e){if(!t.get(e))return 1/0;if(e===b.passage)return 0;for(var n=v;n>0;n--)if(g[n].passage===e)return v-n+1;return 1/0},pastPassageNames:function(){for(var e=[],t=v-1;t>=0;t--)e.unshift(g[t].passage);return e},timelinePassageNames:function(){return g.map(function(e){return e.passage})},play:function(e){b||s("State.play","present is undefined!"),b.passage=e,g=g.slice(0,v+1).concat(b),v+=1,x(e),T.forward.forEach(function(t){return t(e)})},rewind:function(e){var t=1,n=!1;if(e)if("string"==typeof e){if((t=this.passageNameLastVisited(e))===1/0)return}else"number"==typeof e&&(t=e);for(;t>0&&v>0;t--)n=!0,v-=1;return n&&(x(g[v].passage),T.back.forEach(function(e){return e()})),n},fastForward:function(e){var t=1,n=!1;for("number"==typeof e&&(t=e);t>0&&g.length>0;t--)n=!0,v+=1;return n&&(x(g[v].passage),T.forward.forEach(function(e){return e(g[v].passage,"fastForward")})),n},on:function(e,t){if(e in T)return"function"!=typeof t||T[e].includes(t)||T[e].push(t),S;s("State.on","invalid event name")},reset:function(){g=[],v=-1,b=m.create(),w=void 0,T.load.forEach(function(e){return e(g)})},hasStorage:h[0],hasSessionStorage:h[1]},function(){function e(e,t){Object.keys(t).forEach(function(n){return!n.startsWith("TwineScript_")&&(t[n]=e.eval(o(l(t[n],0,"macro"))))})}return{serialise:function(){var e=g.slice(0,v+1),t=e.map(function(e){return Object.keys(e.variables).filter(function(t){return e.variables[t]&&(n=e.variables[t],a=void 0===n?"undefined":_typeof(n),!(!r.containsError(n)&&("function"==typeof n.TwineScript_ToSource||Array.isArray(n)||n instanceof Map||n instanceof Set||"string"===a||"number"===a||"boolean"===a||Object.isPrototypeOf.call(y.TwineScript_TypeDefs,n))));var n,a}).map(function(t){return[t,e.variables[t]]})});if(w||(w=t.reduce(function(e,t,n){var r=_slicedToArray(t,2),a=r[0],i=r[1];return e||a&&[a,i,n+1]},void 0)),w){var n=_slicedToArray(w,3),a=n[0],i=n[1],o=n[2];return r.create("saving","The variable $"+a+" holds "+c(i)+" (which is, or contains, a complex data value) on turn "+o+"; the game can no longer be saved.")}try{return JSON.stringify(e,function(e,t){return this.TwineScript_VariableStore?"TwineScript_TypeDefs"===e?Object.keys(t).reduce(function(e,n){return e[n]=u(t[n]),e},{}):"TwineScript_MockVisits"===e?t:u(t):t})}catch(e){return!1}},deserialise:function(n,r){var a,i=void 0,o=y,s="The save data is unintelligible.";try{i=JSON.parse(r)}catch(e){return Error(s)}return Array.isArray(i)?(a=(i=i.map(function(r){if("object"!==(void 0===r?"undefined":_typeof(r))||!r.hasOwnProperty("passage")||!r.hasOwnProperty("variables"))return Error(s);if(!t.hasValid(r.passage))return Error("The data refers to a passage named '"+r.passage+"', but it isn't in this story.");if(r.variables=p(f(o),r.variables),Object.hasOwnProperty.call(r.variables,"TwineScript_TypeDefs")){var a=r.variables.TwineScript_TypeDefs=p(f(o.TwineScript_TypeDefs),r.variables.TwineScript_TypeDefs);try{e(n,a)}catch(e){return Error(s)}}try{e(n,r.variables)}catch(e){return Error(s)}return o=r.variables,p(f(m),r)})).find(function(e){return e instanceof Error}))?a:(g=i,T.load.forEach(function(e){return e(g)}),v=g.length-1,x(g[v].passage),!0):Error(s)}}}()),Object.seal(m),Object.freeze(S)}),define("internaltypes/varref",["state","internaltypes/twineerror","utils","utils/operationutils","datatypes/hookset"],function(e,t,n,r,a){var i=n.impossible,o=n.andList,s=n.nth,c=r.is,u=r.isObject,l=r.toSource,p=r.isSequential,f=r.objectName,d=r.typeName,h=r.clone,y=r.isValidDatamapName,m=r.subset,g=r.collectionType,v=r.unstorableValue,b=r.matches,w=void 0,T=0,S={set:[],delete:[]},x="You can only access position strings/numbers ('4th', 'last', '2ndlast', (2), etc.) or slices ('1stTo2ndlast', '3rdTo5th'), ",k="You can't access the '0th' or '0thlast' position of ";function O(e,n){var r=void 0;if(t.containsError(n))return r;if(e instanceof Map&&(r=t.containsError(y(e,n))))return r;if(p(e)){var i=void 0;if("number"==typeof n){if(0===n)return t.create("property","You can't access elements at position 0 of "+f(e)+".","Only positive and negative position values exist.");n>0&&(n-=1)}else if("string"==typeof n&&(i=/^(\d+)(?:st|[nr]d|th)last$/i.exec(n))){if("0"===i[1])return t.create("property",k+f(e)+".");n=-i[1]}else if("string"==typeof n&&(i=/^(\d+)(?:st|[nr]d|th)$/i.exec(n))){if("0"===i[1])return t.create("property",k+f(e)+".");n=i[1]-1}else if("string"==typeof n&&(i=/^(?:(\d+)(?:st|[nr]d|th)(last)?|last)to(?:(\d+)(?:st|[nr]d|th)(last)?|last)$/i.exec(n))){var s=_slicedToArray(i,5),c=s[1],u=void 0===c?0:c,l=s[2],d=s[3],h=void 0===d?0:d;n={last:h=s[4]?-h:h-1,first:u=l?-u:u-1}}else if("last"===n)n=-1;else if("random"===n){if(!e.length)return t.create("property","I can't get a random value from "+f(e)+", because it's empty");n=Math.random()*Array.from(e).length|0}else{if(a.isPrototypeOf(e)&&!a.TwineScript_Properties.includes(n))return t.create("property",x+o(a.TwineScript_Properties.map(function(e){return"'"+e+"'"}))+" of "+f(e)+", not "+f(n)+".");if(!["length","any","all","start","end","random"].includes(n)&&!a.isPrototypeOf(e))return t.create("property",x+"'length', 'any', 'all', 'start', 'end', and 'random' of "+f(e)+", not "+f(n)+".")}}else if(e instanceof Set){if(!["length","any","all"].includes(n))return t.create("property","You can only get the 'length', 'any' and 'all' of "+f(e)+".","To check contained values, use the 'contains' operator.");"length"===n&&(n="size")}else{if(Array.isArray(e.TwineScript_Properties)&&!e.TwineScript_Properties.includes(n))return t.create("property","You can only get the "+o(e.TwineScript_Properties.map(function(e){return"'"+e+"'"}))+" of "+f(e)+", not "+f(n)+".");if("number"==typeof e||"boolean"==typeof e)return t.create("property","You can't get data values from "+f(e)+".")}return n}function j(e,t){return t-0<0&&Math.abs(t)<=e.length?e.length+(t-0):t}var A=/[^\x0000-\xFFFF]/,C=new Map;function E(e,t){if(void 0===e)return e;if(e instanceof Map||w.isPrototypeOf(e))return e.get(t);if(("any"===t||"all"===t||"start"===t||"end"===t)&&!e.TwineScript_VariableStoreName)return function(e,t){var n="'"+t+"' value"+("any"===t?"":"s")+" of ";return{determiner:t,array:[].concat(_toConsumableArray(e)),string:"string"==typeof e&&e,TwineScript_ObjectName:n+f(e),TwineScript_TypeName:n+"a data structure",TwineScript_Unstorable:!0,TwineScript_Print:function(){return"`["+this.TwineScript_TypeName+"]`"}}}(e,t);if("string"==typeof e)if(C.has(e))e=C.get(e);else if(A.test(e)){var n=[].concat(_toConsumableArray(e));C.set(e,n),e=n}else C.set(e,e);if(p(e)&&Number.isFinite(t)&&(t=j(e,t)),e.TwineScript_GetProperty)return e.TwineScript_GetProperty(t);var r=e[t];return"function"!=typeof r?r:void 0}function _(e){if(e.computed){var t=e.value;return w.isPrototypeOf(t)&&(t=t.get()),"string"==typeof t?"('"+t+"')":"("+t+")"}return"number"==typeof e?s(e):"'"+e+"'"}function N(n,r,i){if(n.TwineScript_VariableStore){if(n.TwineScript_TypeDefs&&r in n.TwineScript_TypeDefs){var o=n.TwineScript_TypeDefs[r];if("const"===o.name){if(void 0!==n[r])return t.create("operation","I can't alter "+(n===e.variables?"$":"_")+r+" because it's been restricted to a constant value.","This variable can't be changed for the rest of the story.")}else if(!b(o,i))return t.create("operation","I can't set "+(n===e.variables?"$":"_")+r+" to "+d(i)+" because it's been restricted to "+l(o)+"-type data.","You can restrict a variable or data name by giving a typed variable to (set:) or (put:).")}return!0}return Array.isArray(r)?r.map(function(e){return N(n,e)}):n instanceof Map?"string"==typeof r||t.create("operation",f(n)+" can only have string data names, not "+f(r)+"."):p(n)?["length","random","any","all","start","end"].includes(r)?t.create("operation","I can't forcibly alter the '"+r+"' of "+f(n)+".","start"===r||"end"===r?"Alter the values at actual positions, like 1st or 2ndlast, rather than just the '"+r+"'.":void 0):+r==(0|r)||t.create("property",f(n)+" can only have position keys ('3rd', '1st', (5), etc.), not "+_(r)+"."):n.TwineScript_Identifiers&&r in n?t.create("keyword","I can't alter the value of the '"+r+"' identifier.","You can only alter data in variables and hooks, not fixed identifiers."):t.create("operation","I can't modify "+f(n),n instanceof Set?"You should use an (array:) if you need to modify the data inside this dataset.":a.isPrototypeOf(n)?"You should alter hooks indirectly using macros like (replace:) or (enchant:).":void 0)}function P(e,t,n){var r=t;e instanceof Map?e.set(t,n):(p(e)&&(t=j(e,t)),e.TwineScript_Set?e.TwineScript_Set(t):e[t]=n),S.set.forEach(function(t){return t(e,r,n)})}function I(e,t){var n=t;p(e)&&(t=j(e,t)),Array.isArray(e)&&/^(?:[1-9]\d*|0)$/.exec(t)?e.splice(t,1):e instanceof Map||e instanceof Set?e.delete(t):delete e[t],S.delete.forEach(function(t){return t(e,n)})}function M(e){return Object.assign(Object.create(w),{error:e})}function D(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;if(r&&"object"===(void 0===r?"undefined":_typeof(r))&&"last"in r&&"first"in r){if(a.isPrototypeOf(n))return n.TwineScript_GetProperty(r);var s=r.first,c=r.last;return m(n,s+(s>=0),c+(c>=0))}if(Array.isArray(r))return a.isPrototypeOf(n)?n.TwineScript_GetProperty(r):r.map(function(e){return D(n,e,e)})["string"==typeof n?"join":"valueOf"]("");var u=E(n,r);if(void 0===u){if(n===e.variables)return T;if(n.TwineScript_VariableStore)return t.create("property","There isn't a temp variable named _"+i+" in this place.","Temp variables only exist inside the same passage and hook in which they're (set:).");if(Array.isArray(n)&&"number"==typeof r)return t.create("property","This array of "+n.length+" elements doesn't have a "+_(i)+" element.",n.length?"It contains: "+o(n.map(f))+".":"The array is empty.");var l=Array.from("function"==typeof n.keys&&n.keys());return t.create("property","I can't find a "+_(i)+" data name in "+f(n),n instanceof Map&&l.length?"Its names include: "+o(l)+".":void 0)}return u}function R(e,n){var r=this,a=this.compiledPropertyChain.reduce(function(e,t){var n=void 0;return n=0===e.length?r.object:D.apply(void 0,_toConsumableArray(e[e.length-1])),e.push([n,t])&&e},[]).reduceRight(e,n);return t.containsError(a)?a:void 0}return w=Object.freeze({get:function(){if(this.error)return this.error;for(var e=this.object,t=0;t<this.compiledPropertyChain.length-1;t+=1)e=D(e,this.compiledPropertyChain[t]);return D(e,this.compiledPropertyChain.slice(-1)[0],this.propertyChain.slice(-1)[0])},set:function(n){var r=this;return this.error?this.error:!this.object||this.object.TwineScript_VariableStore||this.object.TwineScript_Identifiers?R.call(this,function(n,a,i){var o,s=_slicedToArray(a,2),c=s[0],l=s[1];if(o=t.containsError(n,c,l)||t.containsError(N(c,l,n)))return o;var d;if(d=v(n))return t.create("operation",f(n)+" can't be stored"+(g(n)?" because it holds "+f(d)+".":""));if(i>0)c=h(c);else if(c.TwineScript_VariableStore&&c!==e.variables){for(var y=c;y.TwineScript_VariableStore&&!y.hasOwnProperty(l);)y=Object.getPrototypeOf(y);y.TwineScript_VariableStore&&(c=y)}if("string"==typeof c){if("string"!=typeof n)return t.create("datatype","I can't put this non-string value, "+f(n)+", in a string.");if(n.length!==(Array.isArray(l)?l.length:1))return t.create("datatype",f(n)+"is not the right length to fit into this string location.");c=[].concat(_toConsumableArray(c));var m=[].concat(_toConsumableArray(n));[].concat(l).forEach(function(e){0+e<0&&(e=c.length+(0+e)),c=[].concat(_toConsumableArray(c.slice(0,e)),[m.shift()],_toConsumableArray(c.slice(e+1)))}),c=c.join("")}else u(c)&&(void 0!==n.TwineScript_KnownName&&(n.TwineScript_KnownName=r.TwineScript_ObjectName),Array.isArray(l)&&p(n)?("string"==typeof n&&(n=[].concat(_toConsumableArray(n))),l.map(function(e,t){return[e,n[t]]}).forEach(function(e){var t=_slicedToArray(e,2),n=t[0],r=t[1];return P(c,n,r)})):P(c,l,n));return c},n):t.create("macrocall","I can't (set:) "+f(this)+", if the "+(f(this.object).match(/ (.+$)/)||["","value"])[1]+" isn't stored in a variable.","Modifying data structures that aren't in variables won't change the game state at all.")},delete:function(){return this.error?this.error:R.call(this,function(e,n,r){var a,i=_slicedToArray(n,2),o=i[0],s=i[1];if(a=t.containsError(e,o,s)||t.containsError(N(o,s)))return a;if(r>0&&(o=h(o)),null===e){var c="string"==typeof o;c&&(o=[].concat(_toConsumableArray(o))),Array.isArray(s)?(p(o)&&(s=[].concat(_toConsumableArray(new Set(s)))).sort(function(e,t){return j(o,t)-j(o,e)}),s.forEach(function(e){return I(o,e)})):I(o,s),c&&(o=o.join(""))}else P(o,s,e);return o},null)},defineType:function(e){var n=this.object,r=this.compiledPropertyChain;if(!n||!n.TwineScript_VariableStore||1!==r.length||!n.TwineScript_TypeDefs)return t.create("unimplemented","I can only restrict the datatypes of variables, not data names or anything else.");var a=r[0];Object.hasOwnProperty.call(n,"TwineScript_TypeDefs")||(n.TwineScript_TypeDefs=Object.create(n.TwineScript_TypeDefs));var i=n.TwineScript_TypeDefs,o=i[a];if(o&&!c(o,e))return t.create("operation","I can't redefine the type of "+f(this)+" to "+(e.TwineScript_ObjectName||d(e))+", as it is already "+(o.TwineScript_ObjectName||d(o))+".");i[a]=e,"const"===e.name&&(n[a]=void 0)},matches:function(e,t){return this.object===e&&this.compiledPropertyChain[0]===t},getName:function(){return this.compiledPropertyChain[0]},create:function(e,n){var r=void 0;if(r=t.containsError(e))return M(r);if(n=[].concat(n),w.isPrototypeOf(e)){if(u(e.error))return e;n=e.propertyChain.concat(n),e=e.object}var a=function(e,n){return n.reduce(function(r,a,i){var o;return a.computed&&(a=a.value),w.isPrototypeOf(a)&&(a=a.get()),a=Array.isArray(a)?a.map(function(t){return O(e,t)}):O(e,a),(o=t.containsError(r,a))?o:(i<n.length-1&&(e=D(e,a)),r.push(a),r)},[])}(e,n);return(r=t.containsError(a))?M(r):Object.assign(Object.create(w),{object:e,propertyChain:n,compiledPropertyChain:a})},TwineScript_ToSource:function(){var t=this,n=function(e,n){return!n&&t.object.TwineScript_VariableStore?e:_(e)};return(this.object===e.variables?"$":this.object.TwineScript_VariableStore?"_":f(this.object)+"'s ")+(1===this.propertyChain.length?n(this.propertyChain[0]):this.propertyChain.reduce(function(e,t,r){return e+"'s "+n(t,r)}))},get TwineScript_ObjectName(){return this.TwineScript_ToSource()+(this.object.TwineScript_VariableStoreName?" in "+this.object.TwineScript_VariableStoreName:"")},on:function(e,t){if(e in S)return"function"!=typeof t||S[e].includes(t)||S[e].push(t),w;i("VarRef.on","invalid event name")}})}),define("internaltypes/varscope",[],function(){return Object.seal({TwineScript_ObjectName:"the temporary variables",TwineScript_VariableStore:!0,TwineScript_TypeDefs:Object.create(null)})}),define("internaltypes/twinenotifier",["jquery","utils"],function(e,t){var n=t.impossible,r={create:function(e){return e||n("TwineNotifier.create","called with only 1 string."),Object.assign(Object.create(r),{message:e})},render:function(){return e("<tw-notifier>").attr("message",this.message)}};return r}),define("datatypes/custommacro",["jquery","utils/operationutils","internaltypes/changedescriptor","internaltypes/varref","internaltypes/varscope","internaltypes/twineerror","internaltypes/twinenotifier"],function(e,t,n,r,a,i,o){var s=t.objectName,c=t.typeName,u=t.matches,l=Object.assign,p=Object.create,f=function(t){return function(c){for(var u=arguments.length,f=Array(u>1?u-1:0),d=1;d<u;d++)f[d-1]=arguments[d];t.called+=1;var h=t.varNames,y=t.params,m=t.body,g=l(p(a),{TwineScript_VariableStoreName:t.TwineScript_ObjectName+" call #"+t.called,TwineScript_TypeDefs:p(null)}),v=[],b=0;f.forEach(function(e,t){var n=h[b];g.TwineScript_TypeDefs[n]=y[b].datatype.rest?y[b].datatype.create("array"):y[b].datatype;var a=r.create(g,n);if(y[b].datatype.rest){var i=(g[n]||[]).concat([e]);if(t<f.length-1)return void(g[n]=i);a.set(i)}else a.set(e),b+=1;v.push(o.create(s(a)+" is now "+s(g[n])))}),f.length&&(b+=1),y[b]&&y[b].datatype.rest&&(r.create(g,h[b]).set([]),g.TwineScript_TypeDefs[name]=y[b].datatype.create("array"));var w=void 0,T=e("<p>").append(m.html),S=c.stack.length;for(c.stack.unshift({tempVariables:g,dom:T,output:function(e){w=e}}),c.execute();c.stack.length>S;)c.stack.shift();var x,k,O=T.find("tw-error");return O.length?(T.prepend(v.map(function(e){return e.render()}),"<br>"),i.create("propagated",O.length+" error"+(O.length>1?"s":"")+" occurred when running "+t.TwineScript_ObjectName+".",void 0,T)):void 0===w?i.create("custommacro",t.TwineScript_ObjectName+" didn't output any data or hooks using (output:) or (output-data:)."):n.isPrototypeOf(w)?(x=w,k=l({TwineScript_TypeID:"command",TwineScript_ObjectName:"a custom command",TwineScript_TypeName:"a custom command",TwineScript_Print:function(){return"`[a custom command]`"},TwineScript_Attach:function(e){return e.run(x),k},TwineScript_Run:function(){return x}})):w}},d=Object.freeze({TwineScript_TypeID:"macro",TwineScript_TypeName:"a custom macro",get TwineScript_ObjectName(){return this.TwineScript_KnownName?"the "+this.TwineScript_KnownName+" macro":"a custom macro"},TwineScript_GetProperty:function(e){if("params"===e)return[].concat(_toConsumableArray(this.params))},TwineScript_Properties:["params"],TwineScript_Print:function(){return"`["+this.TwineScript_ObjectName+"]`"},TwineScript_Clone:function(){return l(p(d),this)},TwineScript_ToSource:function(){return"(macro:"+this.params.map(function(e){return e.TwineScript_ToSource()}).concat("")+this.body.TwineScript_ToSource()+")"},create:function(e,t){var n=l(p(this),{params:e,called:0,varNames:e.map(function(e){return e.varRef.propertyChain[0]}),typeSignature:e.map(function(e){var t=void 0;return t=e.datatype.toTypeSignatureObject?e.datatype.toTypeSignatureObject({rest:e.rest}):{pattern:"range",range:function(t){return u(e.datatype,t)},name:c(e.datatype)},e.rest?{pattern:"zero or more",innerType:t}:t}),body:t,TwineScript_KnownName:""});return n.fn=f(n),n}});return d}),define("datatypes/lambda",["utils/operationutils","internaltypes/varscope","internaltypes/varref","internaltypes/twineerror"],function(e,t,n,r){var a=e.objectName,i=Object.freeze({TwineScript_TypeID:"lambda",TwineScript_TypeName:"a lambda",get TwineScript_ObjectName(){return'a "'+("making"in this?"making ... ":"")+("where"in this?"where ... ":"")+("when"in this?"when ... ":"")+("via"in this?"via ... ":"")+'" lambda'},TwineScript_Print:function(){return"`[A lambda]`"},TwineScript_is:function(e){return e===this},TwineScript_ToSource:function(){return this.source},TypeSignature:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return{pattern:"lambda",innerType:i,clauses:t,typeName:'a "'+t.concat("").join(" ...")+'" lambda'}},TwineScript_Clone:function(){return Object.assign(Object.create(i),this)},create:function(e,o,s,c){var u=void 0;function l(e){var r=e&&e.varRef?e.varRef:e;return void 0===r||r&&n.isPrototypeOf(r)&&t.isPrototypeOf(r.object)&&1===r.propertyChain.length}if("making"===o&&!l(s))return r.create("syntax","I need a temp variable, or typed temp variable, to the right of '"+o+"', not "+a(s)+".");if(r.containsError(e))return e;if(i.isPrototypeOf(e)){if("when"===o||"when"in e)return r.create("syntax","A 'when' lambda cannot have any other clauses, such as '"+o+"'.");if(o in e&&("where"!==o||"true"!==e[o]))return r.create("syntax","This lambda has two '"+o+"' clauses.");u=e}else{if("when"===o&&void 0!==e)return r.create("syntax","A 'when' lambda shouldn't begin with a temp variable (just use 'when' followed by the condition).");if(!l(e))return r.create("syntax","This lambda needs to start with a single temp variable, or typed temp variable, not "+a(e)+".");(u=Object.create(this)).loop=e||""}return u.source=c.trim(),u[o]=s,u.making&&u.making.getName()===(u.loop&&u.loop.getName())?r.create("syntax","This lambda has two variables named '"+u.loop.getName()+"'.","Lambdas should have all-unique parameter names."):u},apply:function(e,n){var a=n.loop,i=n.pos,o=n.making,s=n.ignoreVia,c=n.tempVariables;function u(e,t){if(e)if("datatype"in e&&"varRef"in e){var n=e.varRef.create(c,e.varRef.propertyChain);n.defineType(e.datatype);var a=n.set(t);if(r.containsError(a))return a}else c[e.getName()]=t}c=c||Object.create(e.stack.length?e.stackTop.tempVariables:t);var l=u(this.loop,a)||u(this.making,o);if(r.containsError(l))return l;e.stack.unshift(Object.assign(Object.create(e.stackTop||null),{tempVariables:c,lambdaPos:this.when?void 0:i}));var p=e.eval("Operations");!a||this.making||this.when?p.initialiseIt(r.create("operation","I can't use 'it', or an implied 'it', in "+this.TwineScript_ObjectName)):p.initialiseIt(a);var f=!s&&this.via,d=e.eval("where"in this||"when"in this?"Operations.where("+(this.where||this.when)+","+(f||"true")+",null)":f||"true");return e.stack.shift(),d},filter:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=void 0,o=t.reduce(function(t,o,s){if(i=r.containsError(t))return i;var c=n.apply(e,{loop:o,pos:s+1,ignoreVia:!0,tempVariables:a});return(i=r.containsError(c))?i:t.concat(c?[o]:[])},[]);return(i=r.containsError(o))?i:o}});return i}),define("datatypes/codehook",["internaltypes/twineerror","renderer"],function(e,t){var n=t.exec;return Object.freeze({TwineScript_TypeName:"a code hook",TwineScript_ObjectName:"a code hook",TwineScript_Unstorable:!0,TwineScript_ToSource:function(){return"["+this.source+"]"},create:function(t,r){r||(r=n(t));var a=e.containsError(r);return a||Object.assign(Object.create(this),{source:t,html:r})}})}),define("datatypes/colour",["jquery","utils"],function(e,t){var n=t.matMul,r=Math.max,a=Math.min,i=Math.sin,o=Math.cos,s=Math.pow,c=Math.round,u=Math.floor,l=Math.atan2,p=Math.cbrt,f=Math.sqrt,d=Math.PI,h=Object.assign,y=Object.create,m=/^([\da-fA-F])([\da-fA-F])([\da-fA-F])$/,g=/^([\da-fA-F])([\da-fA-F])([\da-fA-F])([\da-fA-F])([\da-fA-F])([\da-fA-F])$/,v=y(null);function b(e){var t=e.r,n=e.g,i=e.b,o=e.a,s=r(t/=255,n/=255,i/=255),u=a(t,n,i),l=(s+u)/2,p=s-u;if(s===u)return{h:0,s:0,l:l};var f=void 0;switch(s){case t:f=(n-i)/p+(n<i?6:0);break;case n:f=(i-t)/p+2;break;case i:f=(t-n)/p+4}return{h:f=c(60*f),s:l>.5?p/(2-s-u):p/(s+u),l:l,a:o}}var w=[.96422,1,.82521],T=24389/27,S=216/24389,x=function(e){return e.map(function(e){return[e]})},k=function(e){return e.map(function(e){return e[0]})};function O(e){var t=e.l,r=e.c,a=e.h,c=e.a;t*=100;var u=[];u[1]=(t+16)/116,u[0]=r*o(a*d/180)/500+u[1],u[2]=u[1]-r*i(a*d/180)/200;var l=[s(u[0],3)>S?s(u[0],3):(116*u[0]-16)/T,t>T*S?s((t+16)/116,3):t/T,s(u[2],3)>S?s(u[2],3):(116*u[2]-16)/T].map(function(e,t){return e*w[t]}),p=k(n([[.9555766,-.0230393,.0631636],[-.0282895,1.0099416,.0210077],[.0122982,-.020483,1.3299098]],n([[3.2404542,-1.5371385,-.4985314],[-.969266,1.8760108,.041556],[.0556434,-.2040259,1.0572252]],x(l)))).map(function(e){return 255*e}),f=_slicedToArray(p,3);return{r:f[0],g:f[1],b:f[2],a:c}}function j(e){var t=O(e);return[t.r,t.g,t.b].every(function(e){return e>=0&&e<=255})}var A=Object.freeze({TwineScript_TypeID:"colour",TwineScript_TypeName:"a colour",TwineScript_ObjectName:"a colour",TwineScript_DebugName:function(){return"a colour "+this.TwineScript_Print()},"TwineScript_+":function(e){var t=this.toRGBA(),n=e.toRGBA();return A.create({r:Math.min(Math.round(.6*(t.r+n.r)),255),g:Math.min(Math.round(.6*(t.g+n.g)),255),b:Math.min(Math.round(.6*(t.b+n.b)),255),a:(t.a+n.a)/2})},TwineScript_Print:function(){var e=this.toRGBA();return"<tw-colour style='background-color:rgba("+[e.r,e.g,e.b,e.a]+");'></tw-colour>"},TwineScript_is:function(e){if(!A.isPrototypeOf(e))return!1;if(e.lcha&&this.lcha)return e.lcha.l===this.lcha.l&&e.lcha.c===this.lcha.c&&e.lcha.h===this.lcha.h&&e.a===this.a;var t=this.toRGBA();return(e=e.toRGBA()).r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a},TwineScript_Clone:function(){return A.create(this)},toRGBAString:function(){var e=this.toRGBA();return"rgba("+e.r+", "+e.g+", "+e.b+", "+e.a+")"},toHSLA:function(){return b(this.toRGBA())},toRGBA:function(){return this.lch?O(function(e){if(j(e))return e;var t=(e=h({},e)).c,n=0;for(e.c/=2;t-n>1e-5;)j(e)?n=e.c:t=e.c,e.c=(t+n)/2;return e}(h({},this.lch,{a:this.a}))):this},toLCHA:function(){return this.lch?h({},this.lch):(t=(e=this).r,r=e.g,a=e.b,i=e.a,o=k(n([[1.0478112,.0228866,-.050127],[.0295424,.9904844,-.0170491],[-.0092345,.0150436,.7521316]],n([[.4124564,.3575761,.1804375],[.2126729,.7151522,.072175],[.0193339,.119192,.9503041]],x([t/255,r/255,a/255])))).map(function(e,t){return e/w[t]}).map(function(e){return e>S?p(e):(T*e+16)/116}),c=[116*o[1]-16,500*(o[0]-o[1]),200*(o[1]-o[2])],u=180*l(c[2],c[1])/d,{l:c[0]/100,c:f(s(c[1],2)+s(c[2],2)),h:u>=0?u:u+360,a:i});var e,t,r,a,i,o,c,u},LCHRotate:function(e){e<0&&(e=360+e);var t=this.toLCHA();return t.h=(t.h+e)%360,t.a=this.a,A.create(t)},TwineScript_GetProperty:function(e){if("lch"===e){var t=this.toLCHA();return new Map([["l",t.l],["c",t.c],["h",t.h]])}var n=this.toRGBA();return"h"===e||"s"===e||"l"===e?b(n)[e]:"r"===e||"g"===e||"b"===e||"a"===e?n[e]:void 0},TwineScript_Properties:["h","s","l","r","g","b","a","lch"],TwineScript_ToSource:function(){var e=!this.lch&&b(this);if(e&&!e.h&&!e.s){if(1===e.l)return"white";if(0===e.l)return"black"}return"("+(this.lch?"lch":"hsl")+":"+(this.lch?[this.lch.l,this.lch.c,this.lch.h]:[e.h,e.s,e.l])+(1!==this.a?","+this.a:"")+")"},create:function(t){return"string"==typeof t?this.create((A.isHexString(t)?function(e){return"string"!=typeof e?e:(e=(e=e.replace("#","")).replace(m,"$1$1$2$2$3$3"),{r:parseInt(e.slice(0,2),16),g:parseInt(e.slice(2,4),16),b:parseInt(e.slice(4,6),16)})}:function(t){if(t in v)return v[t];var n=e("<p>").css("background-color",t).css("background-color");return n="transparent"===n?{r:0,g:0,b:0,a:0}:n.startsWith("rgb")?n.match(/\d+/g).reduce(function(e,t,n){return e["rgb"[n]]=+t,e},{}):{r:192,g:192,b:192},v[t]=n,n})(t)):!("h"in t&&"s"in t&&"l"in t)||"r"in t||"g"in t||"b"in t?("a"in t&&"number"==typeof t.a||(t.a=1),h(y(this),"h"in t&&"c"in t&&!("s"in t)&&"l"in t?{a:t.a,lch:{l:t.l,c:t.c,h:t.h}}:t)):this.create(function(e){var t=e.h,n=e.s,r=e.l,a=e.a;if(0===n){var i=u(255*r);return{r:i,g:i,b:i}}var o=r<.5?r*(1+n):r+n-r*n,s=2*r-o;function c(e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?s+6*(o-s)*e:e<.5?o:e<2/3?s+(o-s)*(2/3-e)*6:s}return{r:u(255*c((t/=360)+1/3)),g:u(255*c(t)),b:u(255*c(t-1/3)),a:a}}(t))},isHexString:function(e){return"string"==typeof e&&"#"===e[0]&&(e.slice(1).match(m)||e.slice(1).match(g))},isCSS3Function:function(e){return"string"==typeof e&&/^(?:rgb|hsl)a?\(\s*\d+\s*,\s*\d+%?\s*,\s*\d+%?(?:,\s*\d+(?:\.\d+)?\s*)?\)$/.test(e)}});return A}),define("datatypes/gradient",["utils/operationutils"],function(e){var t=e.toSource,n=Object.freeze({TwineScript_TypeID:"gradient",TwineScript_TypeName:"a gradient",TwineScript_ObjectName:"a gradient",TwineScript_DebugName:function(){return"a gradient "+this.TwineScript_Print()},TwineScript_GetProperty:function(e){var t=this;return"angle"===e?this.angle:"stops"===e?this.stops.map(function(e){return new Map([[t.repeating?"pixels":"percent",e.stop],["colour",e.colour.TwineScript_Clone()]])}):void 0},TwineScript_Properties:["angle","stops"],TwineScript_ToSource:function(){return"(gradient:"+this.angle+","+this.stops.map(function(e){return t(e.stop)+","+t(e.colour)})+")"},TwineScript_is:function(e){var t=this;return e.angle===this.angle&&e.stops.length===this.stops.length&&e.stops.every(function(e,n){var r=e.colour,a=e.stop;return t.stops[n].stop===a&&t.stops[n].colour.TwineScript_is(r)})},TwineScript_Clone:function(){return n.create(this.angle,[].concat(_toConsumableArray(this.stops)))},TwineScript_Print:function(){return"<tw-colour style='background:"+this.toLinearGradientString()+"'></tw-colour>"},create:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object.assign(Object.create(this),{angle:e,stops:t.sort(function(e,t){return e.stop-t.stop}),repeating:n})},multiply:function(e){return n.create(this.angle,this.stops.map(function(t){return{colour:t.colour,stop:t.stop*e}}))},toLinearGradientString:function(){var e=this;return(this.repeating?"repeating-":"")+"linear-gradient("+this.angle+"deg, "+this.stops.reduce(function(t,n){var r=n.colour,a=n.stop;return t+r.toRGBAString()+" "+a*(e.repeating?1:100)+(e.repeating?"px,":"%,")},"").slice(0,-1)+")"}});return n}),define("datatypes/datatype",["utils","utils/operationutils","datatypes/changercommand","datatypes/colour","datatypes/gradient","datatypes/lambda","datatypes/custommacro","internaltypes/twineerror"],function(e,t,n,r,a,i,o,s){var c=e.realWhitespace,u=e.anyRealLetter,l=e.anyCasedLetter,p=e.anyNewline,f=t.objectName,d=Object.assign,h=Object.seal,y=Object.keys,m=Math.floor,g=Math.abs,v=void 0,b=void 0,w={TwineScript_TypeID:"datatype",TwineScript_TypeName:"a datatype",TwineScript_Print:function(){return"`["+this.TwineScript_ObjectName+"]`"},get TwineScript_ObjectName(){return"the "+(this.rest?"...":"")+this.name+" datatype"},TwineScript_is:function(e){return w.isPrototypeOf(e)&&e.name===this.name},TwineScript_Clone:function(){return this.rest?this:Object.create(this)},TwineScript_ToSource:function(){return(this.rest?"...":"")+this.name},TwineScript_IsTypeOf:function(e){var t=this.name,n=this.rest;return!!v[t]&&v[t](e,n)},toTypeSignatureObject:function(){var e=this.name,t={pattern:"range",range:v[e],name:"a "+("dm"===e?"datamap":"ds"===e?"dataset":"num"===e?e+"ber":"str"===e?e+"ing":"color"===e?"colour":"bool"===e?e+"ean":"alnum"===e?"alphanumeric character":"int"===e?e+"eger":"even"===e||"odd"===e?e+" number":e.endsWith("case")||"whitespace"===e?e+" character":"empty"===e?e+" value":e)};return this.rest?{pattern:"zero or more",innerType:t}:t},create:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e="datamap"===e?"dm":"dataset"===e?"ds":"number"===e?"num":"string"===e?"str":"color"===e?"colour":"boolean"===e?"bool":"alphanumeric"===e?"alnum":"integer"===e?"int":"newline"===e?"linebreak":e;var n=Object.create(this);return n.name=e,n.rest=t,n},from:function(e){var t=y(b).find(function(t){return b[t](e)});return t?w.create(t):s.create("datatype",f(e)+" doesn't correspond to a datatype value.")}};return b={array:Array.isArray,dm:function(e){return e instanceof Map},ds:function(e){return e instanceof Set},datatype:function(e){return w.isPrototypeOf(e)},changer:function(e){return n.isPrototypeOf(e)},colour:function(e){return r.isPrototypeOf(e)},gradient:function(e){return a.isPrototypeOf(e)},lambda:function(e){return i.isPrototypeOf(e)},macro:function(e){return o.isPrototypeOf(e)},str:function(e){return"string"==typeof e},num:function(e){return"number"==typeof e},bool:function(e){return"boolean"==typeof e}},v=d({},b,{even:function(e){return!isNaN(e)&&m(g(e))%2==0},odd:function(e){return!isNaN(e)&&m(g(e))%2==1},empty:function(e){return e instanceof Map||e instanceof Set?!e.size:!(!Array.isArray(e)&&"string"!=typeof e)&&!e.length},int:function(e){return"number"==typeof e&&e===(0|e)},uppercase:function(e){return"string"==typeof e&&1===[].concat(_toConsumableArray(e)).length&&[].concat(_toConsumableArray(e)).every(function(e){return e!==e.toLowerCase()})},lowercase:function(e){return"string"==typeof e&&1===[].concat(_toConsumableArray(e)).length&&[].concat(_toConsumableArray(e)).every(function(e){return e!==e.toUpperCase()})},whitespace:function(e){return"string"==typeof e&&!!e.match("^"+c+"$")},digit:function(e){return"string"==typeof e&&!!e.match("^\\d$")},alnum:function(e){return"string"==typeof e&&!!e.match("^"+u+"$")},anycase:function(e){return"string"==typeof e&&!!e.match("^"+l+"$")},linebreak:function(e){return"string"==typeof e&&!!e.match("^"+p+"$")},any:function(){return!0},const:function(){return!0}}),h(w)}),define("datatypes/typedvar",["utils/operationutils","datatypes/datatype","internaltypes/varref","internaltypes/twineerror"],function(e,t,n,r){var a=e.typeName,i=e.matches,o=e.toSource,s=e.unstorableValue,c=Object.freeze,u=Object.assign,l=Object.create,p=c({TwineScript_TypeName:"a typed variable name",get TwineScript_ObjectName(){return this.TwineScript_ToSource()},TwineScript_Print:function(){return"`[A typed variable name]`"},TwineScript_Unstorable:!0,TwineScript_Clone:function(){return u(l(p),{datatype:this.datatype.TwineScript_Clone(),varRef:this.varRef})},TwineScript_ToSource:function(){return o(this.datatype)+"-type "+this.varRef.TwineScript_ToSource()},TwineScript_GetProperty:function(e){return"name"===e?this.getName():this[e]},TwineScript_Properties:["datatype","name"],TwineScript_IsTypeOf:function(e){return i(this.datatype,e)},get:function(){var e;return(e=this.varRef).get.apply(e,arguments)},getName:function(){return this.varRef.getName()},defineType:function(){if("any"!==this.datatype.name)return this.varRef.defineType(this.datatype)},create:function(e,t){var n;if(n=r.containsError(t)||r.containsError(e)||t.error)return n;var i=s(e);return i&&!p.isPrototypeOf(i)?r.create("syntax","The -type syntax can't have "+a(i)+" to its left."):u(l(this),{datatype:e,varRef:t})}});return p}),define("macros",["jquery","utils/naturalsort","utils","utils/operationutils","datatypes/changercommand","datatypes/custommacro","datatypes/lambda","datatypes/hookset","datatypes/codehook","datatypes/typedvar","datatypes/datatype","internaltypes/changedescriptor","internaltypes/twineerror"],function(e,t,n,r,a,i,o,s,c,u,l,p,f){var d=n.insensitiveName,h=n.nth,y=n.plural,m=n.andList,g=n.lockProperty,v=(r.clone,r.objectName),b=r.typeName,w=r.singleTypeCheck,T=r.toSource,S=void 0,x={};function k(e,n,r){var a=n.fn,i=n.typeSignature,s=n.isChanger,u=void 0!==s&&s,l=r[0];r=function(e){return e.reduce(function(e,n){if(n&&!0===n.spreader){var r=n.value,a=f.containsError(r);if(a)e.push(a);else if(Array.isArray(r)||"string"==typeof r)for(var i=0;i<r.length;i++)e.push(r[i]);else r instanceof Set?e.push.apply(e,_toConsumableArray(Array.from(r).sort(t("en")))):e.push(f.create("operation","I can't spread out "+v(r)+", because it is not a string, dataset, or array."))}else e.push(n);return e},[])}(r.slice(1)),i=[].concat(i||[]);var p=!e,d=p?"":"("+(Array.isArray(e)&&e.length>1?e[0]:e)+":)";e=p?"this custom macro":"the "+d+" macro";var g=void 0;g=i.length>0?e+" must only be given "+m(i.map(b))+(i.length>1?", in that order":"."):e+" must not be given any data."+(p?"":" Just write "+d);for(var T=void 0,x=function(t,n){var a=i[t],s=r[t];if(f.containsError(s))return{v:s};if(c.isPrototypeOf(s)&&u)return{v:f.create("syntax","Please put this hook outside the parentheses of the changer macro, not inside it.","Hooks should appear after a macro"+(p?".":": "+d+"[Some text]"))};if(t>=i.length&&!T)return{v:f.create("datatype",r.length-i.length+" too many values were given to "+e+".",g)};if(a||(a=T),!a.innerType||"rest"!==a.pattern&&"zero or more"!==a.pattern||(T=a.innerType,"rest"===a.pattern&&(a=a.innerType)),!w(s,a)){if(void 0===s){var l=i.filter(function(e){return!("optional"===e.pattern||"zero or more"===e.pattern)}).length;return{v:f.create("datatype",e+" needs "+y(l-t,"more value")+".",g)}}return s&&s.TwineScript_Unstorable&&(a===S.TypeSignature.Any||a.innerType&&a.innerType===S.TypeSignature.Any)?{v:f.create("datatype",e+"'s "+h(t+1)+" value, "+v(s)+", is not valid data for this macro.",g)}:s&&o.isPrototypeOf(s)&&"lambda"===a.pattern?{v:f.create("datatype",e+"'s "+h(t+1)+" value (a lambda) should have "+m(["where","when","making","via","with"].filter(function(e){return a.clauses.includes(e)}).map(function(e){return"a '"+e+"' clause"}))+", not "+m(["where","when","making","via","with"].filter(function(e){return e in s}).map(function(e){return"a '"+e+"' clause"}))+".")}:"insensitive set"===a.pattern?{v:f.create("datatype",v(s)+" is not a valid name string for "+e+".","Only the following names are recognised (capitalisation and hyphens ignored): "+m(a.innerType)+".")}:{v:f.create("datatype",e+"'s "+h(t+1)+" value is "+v(s)+", but should be "+b(a)+".",a.message||g)}}},k=0,O=Math.max(r.length,i.length);k<O;k+=1){var j=x(k);if("object"===(void 0===j?"undefined":_typeof(j)))return j.v}return a.apply(void 0,[l].concat(_toConsumableArray(r)))}function O(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a={fn:t,typeSignature:n};r&&(a.isChanger=!0),Object.freeze(a),Array.isArray(e)?e.forEach(function(e){return g(x,d(e),a)}):g(x,d(e),a)}return S={has:function(e){return e=d(e),x.hasOwnProperty(e)},get:function(e){return e=d(e),x.hasOwnProperty(e)&&x[e]},add:function e(t,n,r){return O(t,n,r),e},addChanger:function e(t,n,r,i){return O(t,n,i,!0),a.register(Array.isArray(t)?t[0]:t,r),e},addCommand:function e(t,n,r,a){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return O(t,function(e,t,n,r){return function(a){for(var i=arguments.length,o=Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];var c=t.apply(void 0,o);if(c)return c;var u=p.create(),l=Object.assign({TwineScript_TypeID:"command",TwineScript_ObjectName:"a ("+e+":) command",TwineScript_TypeName:"a ("+e+":) command",TwineScript_Print:function(){return"`[A ("+e+":) command]`"},TwineScript_ToSource:function(){return"("+e+":"+o.map(T)+")"},TwineScript_is:function(e){return T(this)===T(e)}},r?{TwineScript_Attach:function(e,t){return u.section=e,t.run(u),l},TwineScript_Run:function(e){return n.apply(void 0,[u,e].concat(o))}}:{TwineScript_Run:function(e){return n.apply(void 0,[e].concat(o))}});return l}}([].concat(t)[0],n,r,i),a),e},TypeSignature:{optional:function(e){return{pattern:"optional",innerType:e}},zeroOrMore:function(e){return{pattern:"zero or more",innerType:e}},either:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return{pattern:"either",innerType:t}},rest:function(e){return{pattern:"rest",innerType:e}},insensitiveSet:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return{pattern:"insensitive set",innerType:t}},numberRange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;return{pattern:"range",min:e,max:t,range:function(n){return"number"==typeof n&&!Number.isNaN(n)&&n>=e&&n<=t}}},nonNegativeInteger:{pattern:"range",integer:!0,min:0,max:1/0,range:function(e){return"number"==typeof e&&!Number.isNaN(e)&&e>=0&&!(e+"").includes(".")}},positiveInteger:{pattern:"range",integer:!0,min:1,max:1/0,range:function(e){return"number"==typeof e&&!Number.isNaN(e)&&e>=1&&!(e+"").includes(".")}},wrapped:function(e,t){return{pattern:"wrapped",innerType:e,message:t}},Any:{TwineScript_TypeName:"anything"},Everything:{TwineScript_TypeName:"everything"}},run:function(e,t){return S.has(e)?k(e,S.get(e),t):f.create("macrocall","I can't run the macro '"+e+"' because it doesn't exist.","Did you mean to run a macro? If you have a word written like (this:), it is regarded as a macro name.")},runCustom:function(e,t){return i.isPrototypeOf(e)?k("",e,t):f.create("macrocall","I can't call "+v(e)+" because it isn't a custom macro.")}},Object.assign(S.TypeSignature,{positiveNumber:S.TypeSignature.numberRange(Math.pow(2,-52),1/0),nonNegativeNumber:S.TypeSignature.numberRange(0,1/0),percent:S.TypeSignature.numberRange(0,1)}),Object.freeze(S)}),define("datatypes/varbind",["jquery","utils","utils/operationutils","internaltypes/varref","internaltypes/twineerror"],function(e,t,n,r,a){var i=n.objectName;return r.on("set",function(n,r){n.TwineScript_VariableStore&&e(t.storyElement).find("[data-2bind]").each(function(t,a){var i=(a=e(a)).data("twoWayBindEvent");"function"==typeof i&&i(a,n,r)})}),Object.freeze({TwineScript_TypeName:"a bound variable",TwineScript_ObjectName:"a bound variable",TwineScript_Unstorable:!0,TwineScript_ToSource:function(){return("two way"===this.bind?"2":"")+"bind "+this.varRef.TwineScript_ToSource()},set:function(e){var t,n=this.varRef.set(e);if(t=a.containsError(n))return t},create:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"one way";return r.isPrototypeOf(e)?e.error?e.error:Object.assign(Object.create(this),{varRef:e,bind:t}):a.create("operation","I can only 'bind' a variable, not "+i(e)+".")}})}),define("datatypes/assignmentrequest",["utils/operationutils","datatypes/typedvar","datatypes/datatype","internaltypes/varref","internaltypes/twineerror"],function(e,t,n,r,a){var i=e.objectName,o=e.matches;return Object.freeze({assignmentRequest:!0,TwineScript_TypeName:"a 'to' or 'into' expression",TwineScript_ObjectName:"a 'to' or 'into' expression",TwineScript_Unstorable:!0,set:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=void 0,c=[],u=function e(s,c){var u,l=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],p=[],f=void 0;if(f=c&&r.isPrototypeOf(c)?c.get():c,u=a.containsError(f))return u;if(Array.isArray(f)&&Array.isArray(s)){for(var d=0,h=0;d<s.length&&h<f.length;){var y=s[d],m=f[h];if(t.isPrototypeOf(y)&&y.datatype.rest||n.isPrototypeOf(y)&&y.rest){for(var g=h;h<f.length&&o(y,m);)m=f[h+=1];t.isPrototypeOf(y)?y.datatype=[y.datatype]:n.isPrototypeOf(y)&&(y=n.create("array")),p=p.concat(e(y,r.isPrototypeOf(c)?r.create(c,{first:g+1,last:h+1}):f.slice(g,h)))}else p=p.concat(e(y,r.isPrototypeOf(c)?r.create(c,h+1):m)),h+=1;d+=1}return d<s.length?l&&a.create("operation","I can't unpack this array because it needs "+(s.length-d)+" more value"+(s.length-d>0?"s":"")+"."):p}if(s instanceof Map&&f instanceof Map){var v=!0,b=!1,w=void 0;try{for(var T,S=s.entries()[Symbol.iterator]();!(v=(T=S.next()).done);v=!0){var x=_slicedToArray(T.value,2),k=x[0],O=x[1];if(!f.has(k))return l&&a.create("operation","I can't unpack this datamap because it needs a '"+k+"' data name.");p=p.concat(e(O,r.isPrototypeOf(c)?r.create(c,k):f.get(k)))}}catch(e){b=!0,w=e}finally{try{!v&&S.return&&S.return()}finally{if(b)throw w}}return p}if(t.isPrototypeOf(s)){if("function"==typeof s.datatype.destructure)return[{dest:s,value:f,src:c}].concat(s.datatype.destructure(f));if(!o(f,s.datatype))return[l&&a.create("operation","I can't unpack "+i(f)+" into "+s.varRef.TwineScript_ToSource()+" because it doesn't match "+i(s.datatype)+".")];p=p.concat(e(s.datatype,f))}return r.isPrototypeOf(s)||t.isPrototypeOf(s)?p.concat({dest:s,value:f,src:c}):"function"==typeof s.destructure?p.concat(s.destructure(f)):o(f,s)?p:l&&a.create("operation","I tried to unpack, but "+i(s)+" in the pattern didn't match "+i(f)+".")}(this.dest,this.src);if(s=a.containsError(u))return s;if(!u.length)return a.create("operation","I can't store a new value inside "+i(this.dest)+" that isn't in a variable.","You need a variable, or a data structure containing variables at certain positions, to store the value.");var l=!0,p=!1,f=void 0;try{for(var d,h=u.reverse()[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var y=d.value,m=y.dest,g=y.value,v=y.src;if(t.isPrototypeOf(m)){if(s=a.containsError(m.defineType()))return s;m=m.varRef}if(s=m.set(g),a.isPrototypeOf(s))return s;e&&v&&v.delete(),c.shift(i(m)+" is now "+i(g))}}catch(e){p=!0,f=e}finally{try{!l&&h.return&&h.return()}finally{if(p)throw f}}return c.join("; ")},create:function(e,t,n){return Object.assign(Object.create(this),{dest:e,src:t,operator:n})}})}),define("twinescript/operations",["jquery","state","datatypes/assignmentrequest","utils/operationutils","internaltypes/varref","datatypes/typedvar","datatypes/datatype","internaltypes/twineerror"],function(e,t,n,r,a,i,o,s){var c=r.isObject,u=r.collectionType,l=r.is,p=r.isA,f=r.clone,d=r.unique,h=r.contains,y=r.matches,m=r.objectName,g=void 0,v=0;function b(e,t,n,r){return n=n||"do this to",function(a,i){1===t.length&&(i=a);var o;return(o=s.containsError(a,i))?o:(void 0===a?"undefined":_typeof(a))!==e||(void 0===i?"undefined":_typeof(i))!==e?s.create("operation","I can only "+n+" "+e+"s, not "+m((void 0===a?"undefined":_typeof(a))!==e?a:i)+".",r):t(a,i)}}function w(e){return function(t,n){var r;if(r=s.containsError(t,n))return r;if((void 0===t?"undefined":_typeof(t))!==(void 0===n?"undefined":_typeof(n))||c(t)&&"TwineScript_TypeName"in t&&c(n)&&"TwineScript_TypeName"in n&&t.TwineScript_TypeName!==n.TwineScript_TypeName||u(t)!==u(n)){var a=m(t)+" isn't the same type of data as "+m(n);return s.create("operation",a[0].toUpperCase()+a.slice(1))}return e(t,n)}}function T(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function r(a,i){var o=void 0;if(o=s.containsError(a,i))return o;v=a;var c=a.determiner?[a,i]:i.determiner?[i,a]:[],u=_slicedToArray(c,2),l=u[0],p=u[1];if(l){var f=l.determiner;if("start"===f||"end"===f){if(t)return s.create("operation","I can't use '"+t+"' with the 'start' or 'end' of "+m(l)+".");if(p.determiner){if("start"===p.determiner||"end"===p.determiner)return s.create("operation","I can't compare one value's 'start' or 'end' with another value's 'start' or 'end'.","Please change one of them to use an exact range, such as '1stto4th' or '2ndlasttolast'.");var d=[p,l];l=d[0],p=d[1]}for(var h=l.string||l.array,y=0;y<h.length+1;y+=1){var g=y?"end"===f?h.slice(-y):h.slice(0,y):h.constructor(),b=l===a?r(g,i):r(a,g);if(o=s.containsError(b))return o;if(b!==n)return b}return n}var w="all"===f;return l.array.reduce(function(e,t){var n,o=l===a?r(t,i):r(a,t);return(n=s.containsError(e,o))?n:w?e&&o:e||o},w)}return e(a,i)}}function S(e,t){return T(function(t,n){var r=e(t,n);return s.containsError(r)?r:!r},t,!0)}var x="If one of these values is a number, you may want to write a check that it 'is not 0'. Also, if one is a string, you may want to write a check that it 'is not \"\" '.";return g={create:function(n){var r=Object.create(this);return r.Identifiers={TwineScript_Identifiers:!0,get it(){return v},get time(){return n.stackTop&&n.stackTop.evaluateOnly?s.create("operation","'time' can't be used in "+n.stackTop.evaluateOnly+"."):Date.now()-n.timestamp},get visits(){var e=n.stackTop.speculativePassage,r=function(n){return n===(e||t.passage)};return t.pastPassageNames().filter(r).length+t.mockVisits.filter(r).length+(!e||e===t.passage)},get visit(){return r.Identifiers.visits},get exits(){return n.stackTop&&n.stackTop.evaluateOnly?s.create("operation","'exit' and 'exits' can't be used in "+n.stackTop.evaluateOnly+"."):n.dom.find("tw-enchantment, tw-link").filter(function(t,n){return e(n).data("enchantmentEvent")||e(n).parent().data("linkPassageName")||e(n).parent().data("clickEvent")}).length},get exit(){return r.Identifiers.exits},get pos(){return n.stackTop&&!n.stackTop.evaluateOnly&&n.stackTop.lambdaPos?+n.stackTop.lambdaPos||1:s.create("operation","'pos' can only be used in lambdas that aren't 'when' lambdas.")}},r},elidedComparisonOperator:function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return r.reduce(function(n,r){return"boolean"==typeof r?r:g[e](n,g[t](v,r))},"and"===e)},and:b("boolean",w(function(e,t){return e&&t}),"use 'and' to join",x),or:b("boolean",w(function(e,t){return e||t}),"use 'or' to join",x),not:b("boolean",function(e){return!e},"use 'not' to invert",x),"+":w(function(e,t){if(Array.isArray(e))return[].concat(_toConsumableArray(e),_toConsumableArray(t));var n=void 0;return e instanceof Map?(n=new Map(e),t.forEach(function(e,t){return n.set(t,e)}),n):e instanceof Set?new Set([].concat(_toConsumableArray(e),_toConsumableArray(t)).filter(d).map(f)):"function"==typeof e["TwineScript_+"]?e["TwineScript_+"](t):"string|number|boolean".includes(void 0===e?"undefined":_typeof(e))?e+t:s.create("operation","I can't use + on "+m(e)+".")}),"-":w(function(e,t){if(Array.isArray(e))return e.filter(function(e){return!t.some(function(t){return l(e,t)})});if(e instanceof Set){var n=[].concat(_toConsumableArray(t));return new Set([].concat(_toConsumableArray(e)).filter(function(e){return!n.some(function(t){return l(e,t)})}))}return"string"==typeof e?e.split(t).join(""):"number"==typeof e?e-t:s.create("operation","I can't use - on "+m(e)+".")}),"*":b("number",w(function(e,t){return e*t}),"multiply"),"/":b("number",w(function(e,t){return 0===t?s.create("operation","I can't divide "+m(e)+" by zero."):e/t}),"divide"),"%":b("number",w(function(e,t){return 0===t?s.create("operation","I can't modulo "+m(e)+" by zero."):e%t}),"modulus"),"<":T(b("number",w(function(e,t){return e<t}),"do < to"),"<"),">":T(b("number",w(function(e,t){return e>t}),"do > to"),">"),"<=":T(b("number",w(function(e,t){return e<=t}),"do <= to"),"<="),">=":T(b("number",w(function(e,t){return e>=t}),"do >= to"),">="),is:T(l),isNot:S(l),contains:T(h,"contains"),doesNotContain:S(h,"does not contain"),isIn:T(function(e,t){return h(t,e)},"is in"),isNotIn:S(function(e,t){return h(t,e)},"is not in"),isA:T(p,"is a"),isNotA:S(p,"is not a"),typifies:T(function(e,t){return p(t,e)}),untypifies:S(function(e,t){return p(t,e)}),matches:T(y),doesNotMatch:S(y),where:function(e,t,n){var r;return(r=s.containsError(e))?r:"boolean"!=typeof e?s.create("operation","This lambda's 'where' clause must evaluate to true or false, not "+m(e)+"."):e?t:n},makeSpreader:function(e){if(i.isPrototypeOf(e)||o.isPrototypeOf(e)){var t=f(e);return(i.isPrototypeOf(e)?t.datatype:t).rest=!0,t}return{value:e,spreader:!0,TwineScript_TypeName:"a spreaded '...' value",TwineScript_ObjectName:"a spreaded '...' value",TwineScript_Unstorable:!0}},makeAssignmentRequest:function(e,t,r){var a=s.containsError(e,t);return a||n.create(e,t,r)},setIt:function(e){return a.isPrototypeOf(e)||i.isPrototypeOf(e)?(v=e.get(),e):e},initialiseIt:function(e){v=e}},Object.freeze(g)}),define("twinescript/environ",["macros","state","utils","datatypes/colour","datatypes/hookset","datatypes/lambda","datatypes/datatype","datatypes/varbind","datatypes/codehook","datatypes/typedvar","internaltypes/varref","internaltypes/twineerror","twinescript/operations"],function(Macros,State,Utils,Colour,HookSet,Lambda,Datatype,VarBind,CodeHook,TypedVar,VarRef,TwineError,OperationsProto){return function(section){"object"===(void 0===section?"undefined":_typeof(section))&&section||Utils.impossible("TwineScript.environ","no Section argument was given!");var Operations=OperationsProto.create(section);return section.eval=function(){try{return eval(arguments[0])}catch(e){return e}},section}}),define("section",["jquery","utils","renderer","twinescript/environ","twinescript/operations","state","utils/operationutils","utils/renderutils","datatypes/changercommand","datatypes/hookset","datatypes/colour","datatypes/lambda","internaltypes/changedescriptor","internaltypes/varscope","internaltypes/twineerror","internaltypes/twinenotifier"],function(e,t,n,r,a,i,o,s,c,u,l,p,f,d,h,y){var m,g=o.printBuiltinValue,v=o.objectName,b=o.typeID,w=o.isObject,T=s.collapse;function S(e,n,r){if(n&&"object"===(void 0===n?"undefined":_typeof(n))&&c.isPrototypeOf(n)){if(r.data("originalSource",r.popAttr("source")),!this.renderInto(r.data("originalSource"),r,n)){var a=t.insensitiveName(e.attr("name"));if(["if","elseif","unless","else","testfalse"].includes(a)&&(e.addClass("false"),"elseif"!==a&&(this.stackTop.lastHookShown=!1)),r.data("live")){var i=r.data("live"),o=i.delay,s=i.event;(function(e,n){var r=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;i&&t.assertMustHave(i,["when"]);var o=n.data("originalSource")||"",s=_slicedToArray(this.stack,1)[0].tempVariables,c=this.whenUnblocked.bind(this,function(){if(r.inDOM()){var t=i&&i.filter(r,[!0],s);h.containsError(t)?t.render(e.attr("title")).replaceAll(e):!i||t[0]?(r.renderInto(o,n,{append:"replace"}),t||n.find("tw-expression[name='stop']").length||r.inDOM()&&setTimeout(c,a)):setTimeout(c,a)}});setTimeout(c,a)}).call(this,e,r,o,s)}return}}else{if(!1===n)return r.attr("source")&&(r.data("originalSource",r.popAttr("source")),r.data("hidden",!0)),e.addClass("false"),void(this.stackTop.lastHookShown=!1);!0!==n&&e.replaceWith(h.create("datatype",v(n)+" cannot be attached to this hook.","Only Booleans and changers can be attached to hooks.").render(e.attr("title")))}this.stackTop.lastHookShown=!0}function x(t){var n=(t instanceof e?t[0]:t).nextSibling;if(n&&(n instanceof Text&&!n.textContent.trim()||["br","tw-consecutive-br"].includes((n.tagName||"").toLowerCase()))){var r=x(n),a=r.whitespace,i=r.nextElem;return{whitespace:e(n).add(a),nextElem:i}}return{whitespace:e(),nextElem:e(n)}}var k={add:[],remove:[]};return m={create:function(e){var n=Object.assign(Object.create(this),{timestamp:Date.now(),dom:e||t.storyElement,stack:[],enchantments:[],unblockCallbacks:[]});return n=r(n)},get stackTop(){return this.stack[0]},inDOM:function(){return e(t.storyElement).find(this.dom).length>0},evaluateTwineMarkup:function(t,n){var r=e("<p>");this.stack.unshift({desc:f.create({target:r,source:t,section:this,append:"append"}),tempVariables:this.stackTop.tempVariables,evaluateOnly:n,finalIter:!0}),this.execute();var a;return(a=r.find("tw-error")).length>0?a:r},speculate:function(e,t,n){this.stack.unshift({evaluateOnly:n,finalIter:!0,tempVariables:Object.assign(Object.create(d),{TwineScript_VariableStoreName:n}),speculativePassage:t});var r=void 0;return r=p.isPrototypeOf(e)?e.apply(this,{fail:!1,pass:!0}):this.eval(e),this.stack.shift(),r},renderInto:function(t,n,r){var a=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=f.create({target:n,source:t,section:this,append:"append"});if(r)if(c.isPrototypeOf(r)){var s=r.run(o);if(h.containsError(s))return s.render(n.attr("title")).replaceAll(n),!1}else Object.assign(o,r);if((n=o.target,this.stack.length>=50)&&this.stack.reduce(function(e,t){return e+!!t.finalIter},0)>=50)return h.create("infinite","Printing this expression may have trapped me in an infinite loop.").render(n.attr("title")).replaceAll(n),!1;var u=function(t,r,i){var o=n instanceof e&&n.is("tw-hook")&&n.parents("tw-collapsed,[collapsing=true]").length>0;a.stack.unshift({desc:t,finalIter:i,tempVariables:r,collapses:o,evaluateOnly:a.stackTop&&a.stackTop.evaluateOnly})};if(i||(i=Object.create(this.stack.length?this.stackTop.tempVariables:d)),!i.hasOwnProperty("TwineScript_VariableStoreName")){var l=n&&n.tag();i.TwineScript_VariableStoreName="tw-hook"===l?n.attr("name")?"?"+n.attr("name"):"an unnamed hook":"tw-expression"===l?"a "+n.attr("type")+" expression":"tw-passage"===l?"this passage":"an unknown scope"}return Object.keys(o.loopVars).length?function(){var e=Object.assign({},o.loopVars),t=Math.min.apply(Math,_toConsumableArray(Object.keys(e).map(function(t){return e[t].length})));if(y.create(t+" loop"+(1!==t?"s":"")).render().prependTo(n),t){for(var r=function(n){u(o,Object.keys(e).reduce(function(t,r){return t[r]=e[r][n],t},Object.create(i),n===t-1))},s=t-1;s>=0;s-=1)r(s);for(s=t-1;s>=0&&!a.stackTop.blocked;s-=1)a.execute()}}():(u(o,i,!0),this.execute()),0===this.stack.length&&this.updateEnchantments(),o.enabled},execute:function(){var n=this,r=this.stackTop,i=r.desc,o=r.dom,s=r.collapses,u=r.evaluateOnly;i&&!o&&(o=i.render(),this.stackTop.dom=o,this.stackTop.desc=void 0),o.findAndFilter("tw-hook,tw-expression").each(function(r,i){if(n.stackTop.blocked)return!1;switch((i=e(i)).tag()){case"tw-hook":var o=i.popAttr("source")||"";if(o&&i.data("originalSource",o),i.data("tempVariables",n.stackTop.tempVariables),i.popAttr("hidden")){i.data("hidden",!0);break}o&&n.renderInto(o,i);break;case"tw-expression":if(i.attr("blockers")){if(u)return void i.removeAttr("blockers").removeAttr("js").replaceWith(h.create("syntax","I can't use a macro like (prompt:) or (confirm:) in "+u+".","Please rewrite this without putting such macros here.").render(i.attr("title"),i));var s=[];try{s=JSON.parse(i.popAttr("blockers")),i.data("blockers",s)}catch(e){t.impossible("Section.execute","JSON.parse blockers failed.")}}if(i.data("blockers")){var p=i.data("blockers");if(p.length){n.stackTop.blocked=!0;var d=n.eval(p.shift());return h.containsError(d)&&(n.stackTop.blocked=!1,i.removeData("blockers").replaceWith(d.render(i.attr("title"),i))),!1}i.removeData("blockers")}i.attr("js")&&function(n){var r=this.eval(n.popAttr("js")||"");this.stackTop.evaluateOnly&&r&&(c.isPrototypeOf(r)||"function"==typeof r.TwineScript_Run)&&(r=h.create("syntax","I can't work out what "+this.stackTop.evaluateOnly+" should evaluate to, because it contains a "+(c.isPrototypeOf(r)?"changer.":"command."),"Please rewrite this without putting changers or commands here."));var i=void 0,o=void 0,s=e();for(o=n;c.isPrototypeOf(r);){var u=x(o);if(i=u.whitespace,(o=u.nextElem)[0]instanceof Text&&"+"===o[0].textContent.trim()){var p,d=o,m=x(d);if(p=m.whitespace,(o=m.nextElem).is("tw-expression")){var T=this.eval(o.popAttr("js"));if(h.containsError(T)){r=T;break}var k=a["+"](r,T);e(i).add(d).add(p).remove(),r=h.containsError(k)?h.create("operation","I can't combine "+v(r)+" with "+v(T)+".","function"==typeof T.TwineScript_Run?"If you want to attach this changer to "+v(T)+", remove the + between them.":"Changers can only be added to other changers."):k;continue}}if(o.is("tw-expression")){var O=this.eval(o.popAttr("js"));if(h.containsError(O)){r=O;break}if(O&&"object"===(void 0===O?"undefined":_typeof(O))&&"function"==typeof O.TwineScript_Attach){r=O.TwineScript_Attach(this,r);break}return c.isPrototypeOf(O)?void n.replaceWith(h.create("operation","Changers like ("+r.macroName+":) need to be combined using + between them.","Place the + between the changer macros, or the variables holding them. The + is absent only between a changer and its attached hook or command.").render(n.attr("title"))):void n.replaceWith(h.create("operation",v(O)+" can't have changers like ("+r.macroName+":) attached.","Changers placed just before hooks, links and commands will attempt to attach, but in this case it didn't work.").render(n.attr("title")))}if(o.is("tw-hook")){i.remove(),s=o;break}r.macroName||t.impossible("Section.runExpression","changer has no macroName");var j=n.attr("title")||"("+r.macroName+": ...)";return void n.replaceWith(h.create("syntax","The ("+r.macroName+":) changer should be stored in a variable or attached to a hook.","Macros like this should appear before a hook: "+j+"[Some text]").render(n.attr("title")))}n.attr("return",b(r)),s=s.length?s:x(n).nextElem.filter("tw-hook");var A=void 0;if(A=h.containsError(r))A instanceof Error&&(A=h.fromError(A)),n.replaceWith(A.render(n.attr("title"),n));else if(y.isPrototypeOf(r))n.append(r.render());else if(r&&"function"==typeof r.TwineScript_Run)if(r=r.TwineScript_Run(this),h.containsError(r))n.replaceWith(r.render(n.attr("title")));else if(f.isPrototypeOf(r)){if(r.data&&r.data.live)return void n.replaceWith(h.create("unimplemented","I currently can't attach (live:) or (event:) macros to commands - only hooks.").render(n.attr("title")));r.section=this,r.target=o,this.renderInto("",o,r)}else{if(w(r)&&r.blocked)return this.stackTop.blocked=r.blocked,void n.attr("js","section.blockedValue()");r&&t.impossible("Section.runExpression","TwineScript_Run() returned a non-ChangeDescriptor "+(void 0===r?"undefined":_typeof(r))+': "'+r+'"')}else!s.length&&("string"==typeof r||"number"==typeof r||r instanceof Map||r instanceof Set||Array.isArray(r)||l.isPrototypeOf(r))||r&&"function"==typeof r.TwineScript_Print&&!c.isPrototypeOf(r)?(r=g(r),h.containsError(r)?(r instanceof Error&&(r=h.fromError(r)),n.replaceWith(r.render(n.attr("title")))):"string"!=typeof r?t.impossible("printBuiltinValue() produced a non-string "+(void 0===r?"undefined":_typeof(r))):this.renderInto(r,n)):s.length?S.call(this,n,r,s):c.isPrototypeOf(r)||"boolean"==typeof r||t.impossible("Section.runExpression","The expression evaluated to an unknown value: "+r)}.call(n,i)}}),this.stackTop.blocked||(o.length&&s&&T(o),o.findAndFilter("tw-collapsed,[collapsing=true]").each(function(){T(e(this))}),this.stack.shift())},updateEnchantments:function(){this.enchantments.forEach(function(e){e.disenchant(),e.enchantScope()})},on:function(e,t){return k[e].push(t),this},addEnchantment:function(e){var t=this;this.enchantments.push(e),k.add.forEach(function(n){return n(t,e)})},removeEnchantment:function(e){var t=this,n=this.enchantments.indexOf(e);this.enchantments.splice(n,1),e.disenchant(),k.remove.forEach(function(n){return n(t,e)})},unblock:function(e){for(this.stack.length||t.impossible("Section.unblock","stack is empty"),this.stackTop.blocked=!1,void 0!==e&&(this.stackTop.blockedValues=(this.stackTop.blockedValues||[]).concat(e));this.stack.length&&!this.stackTop.blocked;)this.execute();if(!this.stack.length)for(;this.unblockCallbacks.length>0;){if(this.unblockCallbacks.shift()(),this.stackTop&&this.stackTop.blocked)return}},whenUnblocked:function(e){this.stack.length&&this.stackTop.blocked?this.unblockCallbacks=this.unblockCallbacks.concat(e):e()},blockedValue:function(){var e=this.stackTop;return e||t.impossible("Section.blockedValue","stack is empty"),e.blockedValues&&e.blockedValues.length||t.impossible("Section.blockedValue","blockedValues is missing or empty"),e.blockedValues.shift()}},Object.preventExtensions(m)}),define("engine",["jquery","utils","state","section","passages"],function(e,t,n,r,a){var i,o=t.escape,s=t.impossible,c=t.passageSelector,u=t.transitionOut,l=Object.create(null);function p(e,t){return"<tw-include type="+e+" name='"+o(t.get("name"))+"'>"+t.get("source")+"</tw-include>"}function f(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.assertOnlyHas(o,["stretch","transition"]);var f=a.get(i),d=t.storyElement,h=d.parent(),y=o.stretch,m=o.transition,g=(m=void 0===m?{}:m).depart,v=void 0===g?"instant":g,b=m.arrive,w=void 0===b?"dissolve":b,T=m.departOrigin,S=m.arriveOrigin,x=m.time;h.findAndFilter("tw-enchantment").each(function(t,n){var r=(n=e(n)).data("enchantedProperties");r&&d.css(r.reduce(function(e,t){return e[t]="",e},{})),n[0]===h[0]&&(h=d.unwrap().parent())}),a.hasValid(i)||s("Engine.showPassage","There's no passage with the name \""+i+'"!');var k,O,j,A,C=d.children(c).not(".transition-out, .transition-out *"),E=(f.get("tags")||[]).join(" "),_=(k=e("<tw-passage><tw-sidebar>"),O=k.children("tw-sidebar"),j=e('<tw-icon tabindex=0 alt="Undo" title="Undo">&#8630;</tw-icon>'),A=e('<tw-icon tabindex=0 alt="Redo" title="Redo">&#8631;</tw-icon>'),n.pastLength<=0&&j.css("visibility","hidden"),n.futureLength<=0&&A.css("visibility","hidden"),O.append(j,A),k);"function"==typeof T&&(T=T.call(C)),"function"==typeof S&&(S=S.call(_)),d.detach(),_.appendTo(d).attr({tags:E}),!y&&v&&(u(C,v,x,0,0,0,T),C.css("position","absolute")),d.attr({tags:E});var N=r.create(_),P=f.get("source");P=a.getTagged("header").map(p.bind(0,"header")).join("")+(l.debug?a.getTagged("debug-header").map(p.bind(0,"debug-header")).join(""):"")+P+a.getTagged("footer").map(p.bind(0,"footer")).join("")+(l.debug?a.getTagged("debug-footer").map(p.bind(0,"debug-footer")).join(""):""),n.pastLength<=0&&(l.debug&&(P=a.getTagged("debug-startup").map(p.bind(0,"debug-startup")).join("")+P),P=a.getTagged("startup").map(p.bind(0,"startup")).join("")+P),N.renderInto(P,_,{transition:w,transitionTime:x,transitionOrigin:S}),h.append(d.parents().length?d.parents().last():d),scroll(0,y?_.offset().top-.05*e(window).height():d.offset().top)}return i={goBack:function(e){n.rewind()&&f(n.passage,e)},goForward:function(e){n.fastForward()&&f(n.passage,e)},goToPassage:function(e,t){n.play(e),f(e,t)},toggleFullscreen:function(){var e=document.documentElement;document.fullscreenElement?document.exitFullscreen():document.msFullscreenElement?document.msExitFullscreen():(e.msRequestFullscreen||e.requestFullscreen).call(e)},showPassage:f,options:l},Object.freeze(i)}),define("debugmode/panel",["jquery"],function(e){return Object.freeze({create:function(t){var n=t.className,r=t.rowWrite,a=t.rowCheck,i=t.columnHead,o=t.tabName,s=t.tabUpdate,c=e("<div class='panel panel-"+n+"' hidden><table class='panel-rows'></table></div>"),u=e("<button class='tab tab-"+n+"'>0 "+o+"s</button>");return u.click(function(){u.toggleClass("enabled"),u.parent().siblings(".panel").attr("hidden",""),u.is(".enabled")&&(u.siblings(".tab:not(.tab-"+n+")").removeClass("enabled"),c.removeAttr("hidden"))}),s||(s=function(e){return u.text(e+" "+o+(1!==e?"s":""))}),Object.assign(Object.create(this),{tabName:o,tab:u,panel:c,panelRows:c.find(".panel-rows"),rowWrite:r,rowCheck:a,columnHead:i,tabUpdate:s})},update:function(t,n){var r=this.rowCheck,a=this.rowWrite,i=this.panelRows,o=this.columnHead,s=[],c=i.children();t.forEach(function(t){var n=c.filter(function(n,a){return r(t,e(a))}),o=a(t,n.length&&n);n.length||i.append(o),s.push.apply(s,_toConsumableArray(o.get()))}),c.filter(function(e,t){return!s.includes(t)&&!t.className.includes("panel-head")}).remove(),this.tabUpdate(n),n>0&&!i.find(".panel-head").length?i.prepend(o()):0===n&&i.find(".panel-head").remove()}})}),define("debugmode/mode",["jquery","utils","state","internaltypes/varref","internaltypes/twineerror","utils/operationutils","engine","passages","section","debugmode/panel"],function(e,t,n,r,a,i,o,s,c,u){var l=t.escape,p=t.nth,f=t.storyElement,d=t.debounce,h=i.objectName,y=i.isObject,m=i.toSource;return function(t,i){var g=e(document.documentElement),v=e("<tw-debugger>\n\t\t<div class='panel panel-errors' hidden><table></table></div>\n\t\t<div class='tabs'></div>\n\t\t<label style='user-select:none'>Turns: </label><select class='turns' disabled></select><button class='show-invisibles'>Debug View</button><button class='show-dom'>DOM View</button>\n\t\t<div class='resizer'>\n\t\t</tw-debugger>"),b=v.find(".tabs"),w=v.find(".show-dom"),T=v.find(".show-invisibles"),S=v.find(".turns");v.find(".resizer").mousedown(function(e){if(1!==e.which)return!0;e.stopPropagation();var t=e.pageX,n=v.width();g.on("mousemove.debugger-resizer",function(e){var r=e.pageX;v.width((n+t-r|0)+"px")}).on("mouseup.debugger-resizer",function(){g.off(".debugger-resizer")})}),T.click(function(){g.toggleClass("debug-mode").removeClass("dom-debug-mode"),T.toggleClass("enabled"),w.removeClass("enabled")}),w.click(function(){g.toggleClass("dom-debug-mode").removeClass("debug-mode"),w.toggleClass("enabled"),T.removeClass("enabled")}),n.timelinePassageNames().forEach(function(e,t){S.append("<option value="+t+">"+(t+1)+": "+e+"</option>")}),S.val(n.pastLength),n.pastLength>0&&S.removeAttr("disabled"),S.change(function(e){var t=e.target.value-n.pastLength;0!==t&&(n[t<0?"rewind":"fastForward"](Math.abs(t)),o.showPassage(n.passage))}),n.on("forward",function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=n.pastLength;a>=1&&S.removeAttr("disabled"),r?(S.find("[selected]").removeAttr("selected"),S.val(a)):(S.children().each(function(t,n){t>=a&&e(n).remove()}),S.append("<option value="+a+">"+(a+1)+": "+t+"</option>").val(a))}).on("back",function(){n.pastLength<=1&&S.attr("disabled"),S.find("[selected]").removeAttr("selected"),S.val(n.pastLength)}).on("load",function(e){S.empty(),S[e.length<=1?"attr":"removeAttr"]("disabled"),e.forEach(function(e,t){return S.append("<option value="+t+">"+(t+1)+": "+e.passage+"</option>")})});var x=new Set,k=u.create({className:"variables",tabName:"Variable",rowWrite:function(t,n){var r=t.name,a=t.dataset,i=t.path,o=t.value,s=t.tempScope,c=t.type,u=o&&o.length>48&&!o.TwineScript_DebugName,p=y(o)&&o.TwineScript_DebugName?o.TwineScript_DebugName():l(h(o).slice(0,48)+(u?"\u2026":"")),f="";i.length&&(f=i.reduce(function(e,t){return e+t+"'s "},"")),a&&(r="???");var d=c?m(c):"",g="object"===(void 0===o?"undefined":_typeof(o))||u;return n?(n.find(".variable-type").html(d?d+"-type ":""),f&&n.find(".variable-path").html((s?"_":"$")+l(f)),n.find(".variable-name").html((f?"":s?"_":"$")+l(r+"")),n.find(".temporary-variable-scope").html(s||""),n.find(".variable-value").html(p),n.find("tw-folddown")[g?"show":"hide"](),n.next(".panel-row-source td").html(g?l(m(o)):""),n.add(n.next(".panel-row-source"))):e('<div class="variable-row">').attr("data-name",r).attr("data-path",i+"").attr("data-scope",s||"").css("padding-left",Math.min(5,i.length)+"em").append("<td class='variable-type'>"+(d?d+"-type ":"")+"</td>","<td class='variable-name'>"+(f?"<span class='variable-path'>"+(s?"_":"$")+l(f)+"</span> ":"")+(f?"":s?"_":"$")+l(r+"")+"</td>","<td class='temporary-variable-scope'>"+(s||"")+"</td>","<td class='variable-value'>"+p+"</td><td class='panel-row-buttons'><tw-folddown tabindex=0 style='display:"+(g?"visible":"none")+"'>(source:) </tw-folddown></td>").add("<tr class='variable-row panel-row-source' style='display:none'><td colspan='5'>"+(g?l(m(o)):"")+"</td></tr>")},rowCheck:function(e,t){var n=e.name,r=e.path,a=e.tempScope;return t.attr("data-name")===n&&t.attr("data-path")===r+""&&t.attr("data-scope")===a},columnHead:function(){return'<tr class="panel-head"><th>Type</th><th>Name</th><th>Scope</th><th>Value</th></tr>'}}),O=d(function(){var e=[],t=n.variables,r=e.length;function a(t){if(!(e.length>500)){e.push(t);var n=t.path.concat(t.name),r=t.value,i=t.tempScope;Array.isArray(r)?r.forEach(function(e,t){return a({name:p(t+1),path:n,value:e,tempScope:i})}):r instanceof Map?[].concat(_toConsumableArray(r)).forEach(function(e){var t=_slicedToArray(e,2),r=t[0],o=t[1];return a({name:r,path:n,value:o,tempScope:i})}):r instanceof Set&&[].concat(_toConsumableArray(r)).forEach(function(e,t){return a({name:t,dataset:!0,path:n,value:e,tempScope:i})})}}for(var i in t)i.startsWith("TwineScript")||(r+=1,a({name:i,path:[],value:t[i],tempScope:"",type:t.TwineScript_TypeDefs&&t.TwineScript_TypeDefs[i]}));e.push.apply(e,_toConsumableArray(x)),r+=x.size,k.update(e,r),k.panel[(r?"remove":"add")+"Class"]("panel-variables-empty")}),j=void 0;r.on("set",function(e,t,r){if(e!==n.variables&&e.TwineScript_VariableStoreName&&!e.TwineScript_VariableStoreName.match(/#\d+$/)){var a=e.TwineScript_VariableStoreName,i=e.TwineScript_TypeDefs&&e.TwineScript_TypeDefs[t],o=[].concat(_toConsumableArray(x)).find(function(e){return e.name===t&&e.tempScope===a});o?o.value=r:x.add({name:t,path:[],value:r,tempScope:a,type:i})}O(),j()}).on("delete",function(){O(),j()}),k.panel.append("<div class='panel-variables-bottom'>\n\t\t\t<button class='panel-variables-copy'>Copy $ variables as (set:) call</button>\n\t\t\t<input class='clipboard' type=\"text\" style='opacity:0;pointer-events:none;position:absolute;'></input>\n\t\t</div>").removeAttr("hidden"),k.tab.addClass("enabled");var A=k.panel.find(".clipboard");g.on("click",".panel-variables-copy",function(){var e=[];for(var t in n.variables)t.startsWith("TwineScript")||e.push("$"+t+" to "+m(n.variables[t]));A.val("(set:"+e+")")[0].select(),document.execCommand("copy")});var C=u.create({className:"enchantments",tabName:"Enchantment",rowWrite:function(t,n){var r=t.scope,a=t.changer,i=t.name,o=t.localHook,s=void 0;return s=a?l(h(a)):"<em>enchanted via ("+i+":)</em>",n||e('<div class="enchantment-row">').data("enchantment",t).append("<td><span class='enchantment-name'>"+m(r)+(o?"</span><span class=enchantment-local>"+("function"==typeof o.TwineScript_ToSource?o.TwineScript_ToSource():o.attr("name")?"?"+o.attr("name"):"an unnamed hook"):"")+"</span></td><td class='enchantment-value'>"+s+"</td>"+(a?"<td class='panel-row-buttons'><tw-folddown tabindex=0>(source:)</tw-folddown></td>":"")).add(a?"<tr class='panel-row-source' style='display:none'><td colspan='3'>"+l(m(a))+"</td></tr>":"")},rowCheck:function(e,t){return t.data("enchantment")===e},columnHead:function(){return'<tr class="panel-head"><th>Scope</th><th>Value</th></div>'}}),E=d(function(e){C.update(e.enchantments,e.enchantments.length)});c.on("add",E).on("remove",E);var _=c.create(f),N=u.create({className:"storylets",tabName:"Storylet",rowWrite:function(t,n){var r=t.name,a=t.active,i=t.storyletSource,o=t.exclusive,s=t.urgent;return n?(n[(a?"remove":"add")+"Class"]("storylet-closed"),n):e('<tr class="storylet-row '+(a?"":"storylet-closed")+'">').attr("data-name",r).append("<td class='storylet-name'>"+r+"</td><td class='storylet-lambda'>"+i+"</td><td class='storylet-exclusive'>"+o+"</td><td class='storylet-urgent'>"+s+"</td>")},rowCheck:function(e,t){var n=e.name;return t.attr("data-name")===l(n+"")},columnHead:function(){return"<tr class=\"panel-head\"><th>Name</th><th>Condition</th><th class='storylet-exclusive'>Exclusivity</th><th class='storylet-urgent'>Urgency</th></tr>"}});N.tab.hide(),j=d(function(){var e=s.getStorylets(_),t=a.containsError(e),n=s.allStorylets();N.update(n.map(function(n){return{name:n.get("name"),storyletSource:n.get("storylet").TwineScript_ToSource(),active:!t&&e.some(function(e){return e.get("name")===n.get("name")}),exclusive:"number"==typeof n.get("exclusivity")?n.get("exclusivity"):0,urgent:"number"==typeof n.get("urgency")?n.get("urgency"):0}}),t?0:e.length),N.panel[(t?"add":"remove")+"Class"]("storylet-error");var r=n.some(function(e){return e.get("exclusivity")&&"number"==typeof e.get("exclusivity")}),i=n.some(function(e){return e.get("urgency")&&"number"==typeof e.get("urgency")});N.panel[(r?"add":"remove")+"Class"]("panel-exclusive"),N.panel[(i?"add":"remove")+"Class"]("panel-urgent"),n.length&&N.tab.show()});var P=u.create({className:"source",tabName:"Source",rowWrite:e.noop,rowCheck:e.noop,tabUpdate:e.noop,columnHead:e.noop});P.tab.text("Source");var I=u.create({className:"errors",tabName:"Error",rowWrite:e.noop,rowCheck:e.noop,columnHead:e.noop,tabUpdate:function(e){return I.tab.css({background:e?"rgba(230,101,204,0.3)":""}).text(e+" Error"+(1!==e?"s":""))}}),M=function(t,r){if("propagated"!==t.type){I.panelRows.children().length>500&&I.panelRows.children(":first-child").remove();var a=e('<tr class="error-row"><td class="error-passage">'+n.passage+'</td><td class="error-message">'+t.message+"</td></tr>");a.find(".error-message").attr("title",r),I.panelRows.append(a),I.tabUpdate(I.panelRows.children().length)}};function D(){if(x=new Set,O(),j(),C.panelRows.empty(),C.tabUpdate(0),n.passage){var e=s.get(n.passage);e&&P.panelRows.text(e.get("source"))}}a.on("error",M),v.prepend(k.panel,C.panel,I.panel,N.panel,P.panel),b.prepend(k.tab,C.tab,I.tab,N.tab,P.tab),n.on("forward",D).on("back",D).on("load",D),t&&(M(t,i),D()),e(document.body).append(v)}}),define("macrolib/values",["macros","utils","utils/operationutils","datatypes/colour","datatypes/gradient","datatypes/datatype","datatypes/hookset","internaltypes/twineerror"],function(e,t,n,r,a,i,o,s){var c=t.realWhitespace,u=t.nth,l=t.anyRealLetter,p=n.subset,f=n.objectName,d=n.clone,h=n.toSource,y=e.TypeSignature,m=y.rest,g=y.zeroOrMore,v=y.either,b=y.optional,w=y.insensitiveSet,T=y.numberRange,S=y.percent,x=y.nonNegativeInteger,k=y.positiveInteger,O=y.Any,j=Math.max,A=Math.min,C=Math.round,E=Math.floor,_=Math.ceil;function N(e){return function(){var t=e.apply(void 0,arguments);return"number"!=typeof t||isNaN(t)?s.create("macrocall","This mathematical expression doesn't compute!"):t}}e.add(["str","string","text"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.join("")},[g(e.TypeSignature.either(String,Number,Boolean,Array))])("source",function(e,t){return t&&"command"===t.TwineScript_TypeID&&!t.TwineScript_ToSource?s.create("datatype","I can't construct the source code of a command created by a custom macro."):h(t)},[O])("substring",function(e,t,n,r){return p(t,n,r)},[String,parseInt,parseInt])("lowercase",function(e,t){return t.toLowerCase()},[String])("uppercase",function(e,t){return t.toUpperCase()},[String])("lowerfirst",function(e,t){return t.replace(RegExp(l+"+"),function(e){return(e=Array.from(e))[0].toLowerCase()+e.slice(1).join("").toLowerCase()})},[String])("upperfirst",function(e,t){return t.replace(RegExp(l+"+"),function(e){return(e=Array.from(e))[0].toUpperCase()+e.slice(1).join("").toLowerCase()})},[String])("words",function(e,t){return t.split(RegExp(c+"+")).filter(Boolean)},[String])(["str-repeated","string-repeated"],function(e,t,n){return 0===n.length?s.create("macrocall","I can't repeat an empty string."):n.repeat(t)},[x,String])(["str-reversed","string-reversed"],function(e,t){return[].concat(_toConsumableArray(t)).reverse().join("")},[String])("joined",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return r.join(t)},[m(String)])("plural",function(e,t,n,r){return n&&""!==r?t+" "+(1!==Math.abs(t)?r||n+"s":n):s.create("macrocall","The (plural:) macro can't be given empty strings.")},[parseInt,String,b(String)])(["str-nth","string-nth"],function(e,t){return u(t)},[parseInt])(["num","number"],function(e,t){return Number.isNaN(+t)?s.create("macrocall","I couldn't convert "+f(t)+" to a number."):+t},[String])("datatype",function(e,t){return i.from(t)},[O])("datapattern",function(e,t){return function e(t){var n,r=void 0;return Array.isArray(t)?r=t.map(e):t instanceof Map?(r=new Map,[].concat(_toConsumableArray(t)).forEach(function(t){var n=_slicedToArray(t,2),a=n[0],i=n[1];return r.set(a,e(i))})):r=i.from(t),(n=s.containsError(r))?n:r}(t)},[O])(["rgb","rgba"],function(e){return r.create({r:arguments.length<=1?void 0:arguments[1],g:arguments.length<=2?void 0:arguments[2],b:arguments.length<=3?void 0:arguments[3],a:arguments.length<=4?void 0:arguments[4]})},[T(0,255),T(0,255),T(0,255),b(S)])(["hsl","hsla"],function(e,t,n,a,i){return(t=C(t)%360)<0&&(t+=360),r.create({h:t,s:n,l:a,a:i})},[Number,S,S,b(S)])(["lch","lcha"],function(e,t,n,a,i){return(a=C(a)%360)<0&&(a+=360),r.create({l:t,c:n,h:a,a:i})},[S,T(0,132),Number,b(S)])("complement",function(e,t){return t.LCHRotate(180)},[r])("palette",function(e,t,n){var a=n.toLCHA(),i=a.l,o={l:i<=.75?.75+i/3:.75-3*(1-i),c:80,h:a.h,a:1},s=void 0,c=void 0,u=void 0;return s=r.create(o),o.l+=i<=.75?-.1:.1,o.l<.5&&(o.l*=.5/o.l),c=r.create(o),o.l+=i<=.85?.15:-.15,u=r.create(o),"adjacent"===t?(c=(s=s.LCHRotate(-30)).LCHRotate(30),u=s.LCHRotate(60)):"triad"===t&&(u=s.LCHRotate(180),c=s.LCHRotate(140),s=s.LCHRotate(-140)),[n,s,c,u]},[w("mono","adjacent","triad"),r])("gradient",function(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];if((t=C(t)%360)<0&&(t+=360),i.length<4)return s.create("datatype","(gradient:) must be given at least 2 colour-stop pairs of numbers and colours.");var c=void 0,u=[],l=i.reduce(function(e,t){if(s.containsError(e))return e;if(void 0===c)c=t;else{if("number"!=typeof c||!r.isPrototypeOf(t))return s.create("datatype","(gradient:) colour-stops should be pairs of numbers and colours, not colours and numbers.");u.push({stop:c,colour:d(t)}),c=void 0}return e},!0);return s.containsError(l)?l:void 0!==c?s.create("macrocall","This gradient has a colour-stop percent without a colour."):a.create(t,u)},[Number,m(v(S,r))])("stripes",function(e,t,n){for(var r=arguments.length,i=Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];(t=C(t)%360)<0&&(t+=360);var s=0,c=[];return i.forEach(function(e){c.push({stop:s,colour:d(e)}),s+=n,c.push({stop:s,colour:d(e)})}),a.create(t,c,!0)},[Number,k,r,m(r)])("hooks-named",function(e,t){return t?o.create({type:"name",data:t}):s.create("datatype","(hooks-named:) can't be given an empty string.")},[String])("cond",function(e){for(var t=0;t<(arguments.length<=1?0:arguments.length-1);t+=2){var n=arguments.length<=t+1?void 0:arguments[t+1];if(t===(arguments.length<=1?0:arguments.length-1)-1||s.containsError(n))return n;if("boolean"!=typeof n)return s.create("datatype","(cond:)'s "+u(t+1)+" value is "+f(n)+", but should be a boolean.");if(n)return arguments.length<=t+1+1?void 0:arguments[t+1+1]}return s.create("macrocall","An odd number of values must be given to (cond:), not "+(arguments.length<=1?0:arguments.length-1),"(cond:) must be given one or more pairs of booleans and values, as well as one final value.")},[Boolean,O,m(O)]),{weekday:[function(){return["Sun","Mon","Tues","Wednes","Thurs","Fri","Satur"][(new Date).getDay()]+"day"},null],monthday:[function(){return(new Date).getDate()},null],currenttime:[function(){var e=new Date,t=e.getHours()<12;return(e.getHours()%12||12)+":"+((e.getMinutes()<10?"0":"")+e.getMinutes())+" "+(t?"A":"P")+"M"},null],currentdate:[function(){return(new Date).toDateString()},null],min:[A,m(Number)],max:[j,m(Number)],abs:[Math.abs,Number],sign:[Math.sign,Number],sin:[Math.sin,Number],cos:[Math.cos,Number],tan:[Math.tan,Number],floor:[E,Number],round:[C,Number],trunc:[function(e){return e>0?E(e):_(e)},Number],ceil:[_,Number],pow:[N(Math.pow),[Number,Number]],exp:[Math.exp,Number],sqrt:[N(Math.sqrt),Number],log:[N(Math.log),Number],log10:[N(Math.log10),Number],log2:[N(Math.log2),Number],random:[function(e,t){var n=void 0,r=void 0;return t?(n=A(e,t),r=j(e,t)):(n=0,r=e),r+=1,~~(Math.random()*(r-n))+n},[parseInt,e.TypeSignature.optional(parseInt)]],either:[function(){var e;return e=~~(Math.random()*arguments.length),arguments.length<=e?void 0:arguments[e]},m(O)],nth:[function(e){var t;return e<=0?s.create("datatype","(nth:)'s first value should be a positive whole number, not "+e):(t=(e-1)%(arguments.length<=1?0:arguments.length-1)+1,arguments.length<=t?void 0:arguments[t])},[parseInt,m(O)]],"":function(){var t=this;Object.keys(this).forEach(function(n){if(n){var r=t[n][0],a=t[n][1];e.add(n,function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return r.apply(void 0,n)},a)}})}}[""]()}),define("macrolib/commands",["jquery","macros","utils","state","passages","renderer","engine","internaltypes/twineerror","internaltypes/twinenotifier","datatypes/assignmentrequest","datatypes/hookset","datatypes/codehook","datatypes/lambda","datatypes/colour","datatypes/gradient","internaltypes/varref","datatypes/typedvar","datatypes/varbind","utils/operationutils","utils/renderutils"],function(e,t,n,r,a,i,o,s,c,u,l,p,f,d,h,y,m,g,v,b){var w=v.printBuiltinValue,T=v.objectName,S=v.clone,x=v.toSource,k=b.dialog,O=b.geomParse,j=b.geomStringRegExp,A=t.TypeSignature,C=A.Any,E=A.Everything,_=A.rest,N=A.either,P=A.optional,I=A.zeroOrMore,M=A.positiveInteger,D=A.positiveNumber,R=Object.assign,L=Math.floor,F=Math.ceil,q=Math.abs,V=Math.max,H=Math.min,z=e.noop;function W(e){return"("+e+" "+o.options.ifid+") "}["set","put","unpack"].forEach(function(e){return t.add(e,function(t){for(var n=0;n<(arguments.length<=1?0:arguments.length-1);n+=1){var r=arguments.length<=n+1?void 0:arguments[n+1];if("into"===r.operator&&"set"===e)return s.create("macrocall","Please say 'to' when using the (set:) macro.");if("to"===r.operator&&"set"!==e)return s.create("macrocall","Please say 'into' when using the (put:) or (unpack:) macro.");if((y.isPrototypeOf(r.dest)||m.isPrototypeOf(r.dest))===("unpack"===e))return s.create("macrocall","unpack"===e?"Please use the (unpack:) macro with arrays, datamaps or (p:) patterns containing variables to the right of 'into'.":"Please use the ("+e+":) macro with just single variables and typed variables to the "+("set"===e?"left of 'to'.":"right of 'into'."));var a=r.set();if(s.containsError(a))return a}return{TwineScript_TypeID:"instant",TwineScript_TypeName:"a ("+e+":) operation",TwineScript_ObjectName:"a ("+e+":) operation",TwineScript_Unstorable:!0,TwineScript_Print:function(){return o.options.debug,""}}},[_(u)])}),t.add("move",function(e){for(var t=0;t<(arguments.length<=1?0:arguments.length-1);t+=1){var n=arguments.length<=t+1?void 0:arguments[t+1];if("into"!==n.operator)return s.create("macrocall","Please say 'into' when using the (move:) macro.");var r=n.set(!0);if(s.containsError(r))return r}return{TwineScript_TypeID:"instant",TwineScript_TypeName:"a (move:) operation",TwineScript_ObjectName:"a (move:) operation",TwineScript_Unstorable:!0,TwineScript_Print:function(){return o.options.debug,""}}},[_(u)]),t.addCommand("display",function(e){if(!a.hasValid(e))return s.create("macrocall","I can't (display:) the passage '"+e+"' because it doesn't exist.")},function(e,t,r){return R(e,{source:n.unescape(a.get(r).get("source"))})},[String])("print",z,function(e,t,n){return R(e,{source:w(n)})},[C])(["verbatim-print","v6m-print"],z,function(e,t,n){return R(e,{verbatim:!0,source:w(n)})},[C])(["verbatim-source","v6m-source"],function(e){if(e&&"command"===e.TwineScript_TypeID&&!e.TwineScript_ToSource)return s.create("datatype","I can't construct the source code of a command created by a custom macro.")},function(e,t,n){return R(e,{verbatim:!0,source:w(x(n))})},[C])("go-to",function(e){if(!a.hasValid(e))return s.create("macrocall","I can't (go-to:) the passage '"+e+"' because it doesn't exist.")},function(e,t,n){return requestAnimationFrame(function(){return o.goToPassage(n,{transition:e.data.passageT8n})}),{blocked:!0}},[String])("undo",z,function(e){return r.pastLength<1?s.create("macrocall","I can't (undo:) on the first turn."):(requestAnimationFrame(function(){return o.goBack({transition:e.data.passageT8n})}),{blocked:!0})},[]),n.onStartup(function(){return e(n.storyElement).on("click.icon","tw-icon",function(t){var n=e(this),a=n.data("clickEvent"),i=n.attr("alt");a&&a(n),"Undo"===i&&(t.stopPropagation(),o.goBack()),"Redo"===i&&(t.stopPropagation(),o.goForward()),"Fullscreen"===i&&(t.stopPropagation(),o.toggleFullscreen()),"Restart"===i&&(r.hasSessionStorage&&sessionStorage.removeItem("Saved Session"),window.location.reload())})}),[["Undo","&#8630;",function(){return r.pastLength>0}],["Redo","&#8631;",function(){return r.futureLength>0}],["Fullscreen","&#9974;",function(){return document.fullscreenEnabled||document.msFullscreenEnabled}],["Restart","&#10226;",Object]].forEach(function(e){var n=_slicedToArray(e,3),r=n[0],a=n[1],i=n[2];t.addCommand("icon-"+r.toLowerCase(),function(e,t){if("string"==typeof e&&"string"==typeof t){var n=[].concat(_toConsumableArray(e)).length,a=[].concat(_toConsumableArray(t)).length;if(n>1&&a>1)return s.create("datatype","One of the two strings given to (icon-"+r.toLowerCase()+":) should be 1 character long, for its icon.");if(1===n&&1===a)return s.create("datatype","One of the two strings given to (icon-"+r.toLowerCase()+":) should be 2 or more characters long, for its label.")}},function(e,t,n,o){if("string"==typeof o&&1===[].concat(_toConsumableArray(o)).length||"string"==typeof n&&[].concat(_toConsumableArray(n)).length>1){var s=[o,n];n=s[0],o=s[1]}return R(e,{source:'<tw-icon tabindex=0 alt="'+r+'" '+(o?'data-label="'+o.replace('"',"&quot;")+'"':"")+' title="'+r+'" '+(i()?"":'style="visibility:hidden"')+">"+(n||a)+"</tw-icon>"})},[P(String),P(String)])}),t.addCommand("icon-counter",function(e,t,n){var r=" label string given to (icon-counter:) can't be empty or only whitespace.";return t&&t.trim()?"string"!=typeof n||n.trim()?void 0:s.create("datatype","The 2nd "+r):s.create("datatype","The 1st "+r)},function(e,t,r,a,i){e.attr.push({"data-2bind":!0}),e.data.twoWayBindEvent=function(t,n,o){if(r.varRef.matches(n,o)){var s=r.varRef.get();if("number"==typeof s)e.target.children("tw-icon").text(s>0?L(s):F(s)).attr("data-label",1!==q(s)&&void 0!==i?i:a)}};var o=r.varRef.get();return"number"!=typeof o?s.create("datatype","(icon-counter:) can only be bound to a variable holding a number, not "+T(o)+"."):R(e,{source:'<tw-icon data-label="'+n.escape(1!==q(o)&&void 0!==i?i:a)+'">'+(o>0?L(o):F(o))+"</tw-icon>"})},[g,String,P(String)]),t.addCommand("meter",function(e,t,n,r){return"string"!=typeof r||r.trim()?-1===n.search(j)||!n.includes("=")&&n.length>1?s.create("datatype",'The (meter:) macro requires a sizing line("==X==", "==X", "=XXXX=" etc.) be provided, not '+JSON.stringify(n)+"."):void 0:s.create("datatype","The label string given to (meter:) can't be empty or only whitespace.")},function(e,t,n,r,a,i,o){i&&"string"!=typeof i&&(o=i,i=void 0),o||(o=d.create({h:0,s:0,l:.5,a:.5})),d.isPrototypeOf(o)&&(o=h.create(90,[{colour:o,stop:0},{colour:o,stop:1}]));var c=O(a),u=c.marginLeft,l=c.size,p=u>0&&Math.ceil(u+l)<100,f=function(e){var t=V(0,H(1,e/r)),n=o.repeating?o:o.multiply(r/e);return"height:100%;background-repeat:no-repeat;background-image:"+(p?R(n,n.repeating?{}:{angle:270}).toLinearGradientString()+", ":"")+R(n,n.repeating?{}:{angle:p||0===u?90:270}).toLinearGradientString()+";background-size:"+(p?Array(2).fill(50*t+"%"):100*t+"%")+";background-position-x:"+(p?-100/(2-t)+100+"%,"+100/(2-t)+"%":0===u?"left":"right")+";text-align:"+(p?"center":0===u?"left":"right")};e.styles.push({"margin-left":u+"%",width:l+"%",height:"1.5em",display:"block"}),e.attr.push({"data-2bind":!0});var y=i&&t.stackTop.tempVariables;e.data.twoWayBindEvent=function(t,r,a){if(n.varRef.matches(r,a)){var o=n.varRef.get();if("number"==typeof o){var s=e.target.children("tw-meter");s.attr("style",f(o)),i&&e.section.renderInto("",null,{source:i,target:s,append:"replace",transitionDeferred:!1},y)}}};var m=n.varRef.get();return"number"!=typeof m?s.create("datatype","(meter:) can only be bound to a variable holding a number, not "+T(m)+"."):R(e,{source:'<tw-meter style="'+f(m)+'">'+(i||"")+"</tw-meter>"})},[g,D,String,P(N(String,d,h)),P(N(d,h))]),[["cycling-link"],["seq-link","sequence-link"]].forEach(function(e,n){return t.addCommand(e,function(){return""===(arguments.length<=0?void 0:arguments[0])?s.create("datatype","The first string in a ("+e[0]+":) can't be empty."):arguments.length<=(g.isPrototypeOf(arguments.length<=0?void 0:arguments[0])?2:1)?s.create("datatype","I need two or more strings to "+(n?"sequence":"cycle")+" through, not just '"+(t=arguments.length-1,arguments.length<=t?void 0:arguments[t])+"'."):void 0;var t},function(e,t){for(var r=arguments.length,a=Array(r>2?r-2:0),i=2;i<r;i++)a[i-2]=arguments[i];var o=void 0;g.isPrototypeOf(a[0])&&(o=a.shift());var c=0;if(o&&"two way"===o.bind){e.attr.push({"data-2bind":!0});var u=a.indexOf(o.varRef.get());u>-1&&(c=u)}var l=t.stackTop.tempVariables;function p(t,r){var i=c>=a.length-1&&n,u=""===a[c]?"":i?a[c]:"<tw-link>"+a[c]+"</tw-link>";if(i&&(e.data.clickEvent=void 0),o&&!r){var p=o.set(a[c]);if(s.containsError(p))return void t.replaceWith(p.render(a[c]))}var f=R({},e,{source:u,transitionDeferred:!1});e.section.renderInto("",null,f,l)}a[c]&&(e.data.clickEvent=function(e){c=(c+1)%a.length,p(e,!1)})&&(e.data.twoWayBindEvent=function(e,t,n){if(o.varRef.matches(t,n)){var r=o.varRef.get(),i=a.indexOf(r);i>-1&&i!==c&&(c=i,p(e,!0))}});var f="<tw-link>"+a[c]+"</tw-link>";if(o){var d=o.set(a[c]);if(s.containsError(d))return d}return R(e,{source:f,append:"replace",transitionDeferred:!0})},[N(g,String),_(String)])}),n.onStartup(function(){return e(n.storyElement).on("change.dropdown-macro","select",function(){var t=e(this),n=t.closest("tw-expression, tw-hook").data("dropdownEvent");n&&n(t)})}),t.addCommand("dropdown",function(e){var t;return""===(arguments.length<=1?void 0:arguments[1])||""===(t=(arguments.length<=1?0:arguments.length-1)-1+1,arguments.length<=t?void 0:arguments[t])?s.create("datatype","The first or last strings in a (dropdown:) can't be empty.","Because empty strings create separators within (dropdown:)s, having them at the start or end doesn't make sense."):(arguments.length<=1?0:arguments.length-1)<=1?s.create("datatype","I need two or more strings to create a (dropdown:) menu, not just "+(arguments.length<=1?0:arguments.length-1)+"."):void 0},function(t,r,a){for(var i=arguments.length,o=Array(i>3?i-3:0),c=3;c<i;c++)o[c-3]=arguments[c];var u=0;if("two way"===a.bind){t.attr.push({"data-2bind":!0});var l=o.indexOf(a.varRef.get());l>-1&&(u=l)}var p=Math.max.apply(Math,_toConsumableArray(o.map(function(e){return[].concat(_toConsumableArray(e)).length}))),f="<select>"+o.map(function(e,t){return"<option"+(t===u?" selected":"")+(""===e?" disabled":"")+">"+n.escape(e||"\u2500".repeat(p))+"</option>"}).join("\n")+"</select>";t.data.dropdownEvent=function(e){var t=e.val(),n=a.set(t);s.containsError(n)&&e.replaceWith(n.render(t))},t.data.twoWayBindEvent=function(e,t,n){if(a.varRef.matches(t,n)){var r=a.varRef.get(),i=o.indexOf(r);i>-1&&i!==u&&(e.find("select").val(r),u=i)}},t.styles.push({"background-color":function(){return n.parentColours(e(this)).backgroundColour}});var d=a.set(o[u]);return s.containsError(d)?d:R(t,{source:f,append:"replace"})},[g,String,_(String)]),n.onStartup(function(){return e(n.storyElement).on("input.checkbox-macro","input[type=checkbox]",function(){var t=e(this),n=t.closest("tw-expression").data("checkboxEvent");n&&n(t)})});var $=1;t.addCommand("checkbox",function(){},function(e,t,n,r){var a=!1,i="checkbox-"+ ++$;if("two way"===n.bind){e.attr.push({"data-2bind":!0});var o=n.varRef.get();"boolean"==typeof o&&(a=o),e.data.twoWayBindEvent=function(e,t,r){if(n.varRef.matches(t,r)){var a=n.varRef.get();"boolean"==typeof a&&e.children("input[type=checkbox]").prop("checked",a)}}}return e.data.checkboxEvent=function(e){var t=e.is(":checked"),r=n.set(t);s.containsError(r)&&e.replaceWith(r.render(""))},R(e,{source:'<input id="'+i+'" type="checkbox" '+(a?"checked":"")+'><label for="'+i+'">'+r+"</label>",append:"replace"})},[g,String]),n.onStartup(function(){return e(document).on("fullscreenchange",function(){e("input[type=checkbox][id^=fullscreen]",n.storyElement).each(function(t,n){(e(n).closest("tw-expression").data("fullscreenEvent")||Object)(n)})})}),t.addCommand("checkbox-fullscreen",function(){},function(t,n,r){var a="fullscreenCheckbox-"+ ++$;return t.data.fullscreenEvent=function(t){return e(t).prop("checked",!(!document.fullscreenElement&&!document.msFullscreenElement))},t.data.checkboxEvent=function(){return o.toggleFullscreen()},R(t,{source:'<input id="'+a+'" type="checkbox" '+(document.fullscreenEnabled||document.msFullscreenEnabled?" ":"disabled ")+(document.fullscreenElement||document.msFullscreenElement?"checked":"")+'><label for="'+a+'">'+r+"</label>",append:"replace"})},[String]),n.onStartup(function(){return e(n.storyElement).on("input.input-box-macro","textarea",function(){var t=e(this),n=t.closest("tw-expression").data("inputBoxEvent");n&&n(t)})}),["input-box","force-input-box"].forEach(function(e){return t.addCommand(e,function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=g.isPrototypeOf(n[0]),i="number"==typeof n[1+a],o="string"==typeof n[1+a+i],c=n[+a];if("string"!=typeof c||-1===c.search(j)||!c.includes("=")&&c.length>1)return s.create("datatype","The ("+e+':) macro requires a sizing line("==X==", "==X", "=XXXX=" etc.) be provided, not '+JSON.stringify(c)+".");if("force-input-box"===e&&!o)return s.create("datatype","The ("+e+":) macro requires a string of text to forcibly input.");var u=1+a+i+o;return n.length>u?s.create("datatype","An incorrect combination of values was given to this ("+e+":) macro."):void 0},function(t,r){for(var a=arguments.length,i=Array(a>2?a-2:0),o=2;o<a;o++)i[o-2]=arguments[o];var c="force-input-box"===e,u=g.isPrototypeOf(i[0]),l="number"==typeof i[1+u],p=u&&i[0],f=l?i[1+u]:3,d=O(i[+u]),h=d.marginLeft,y=d.size,m="string"==typeof i[1+u+l]?i[1+u+l]:"",v=c?"":m;if("two way"===p.bind){t.attr.push({"data-2bind":!0});var b=p.varRef.get();if("string"==typeof b){v=c?m.slice(0,b.length):b;var w=p.set(v);if(s.containsError(w))return w}t.data.twoWayBindEvent=function(e,t,n){if(p.varRef.matches(t,n)){var r=p.varRef.get();"string"==typeof r&&e.find("textarea").val(c?m.slice(0,r.length):r)}}}else if(p){var T=p.set(c?"":m);if(s.containsError(T))return T}!c&&p&&(t.data.inputBoxEvent=function(e){var t=e.val(),n=p.set(t);s.containsError(n)&&e.replaceWith(n.render(""))});var S='<textarea style="width:100%" rows='+f+">"+n.escape(v)+"</textarea>";if(c){var x=Array.from(m);t.data.inputBoxEvent=function(e){var t=e.val().length,n=x.slice(0,t).join("");if(e.val(n),p){var r=p.set(n);s.containsError(r)&&e.replaceWith(r.render(""))}return!0}}return t.styles.push({display:"block","margin-left":h+"%",width:y+"%","border-style":function(){return this.style.borderStyle||"solid"}}),R(t,{source:S,append:"replace"})},[N(g,String),P(N(M,String)),P(N(M,String)),P(String)])}),["show","rerun"].forEach(function(n){return t.addCommand(n,z,function(t,r){for(var a=arguments.length,i=Array(a>2?a-2:0),o=2;o<a;o++)i[o-2]=arguments[o];return i.forEach(function(a){return a.forEach(r,function(a){var i=a.data("hidden");if(void 0!==i!=("rerun"===n))if(a.removeData("hidden"),i instanceof e)a.empty().append(i);else{var o=a.data("tempVariables");r.renderInto("",null,R({},t,{append:"replace",source:a.data("originalSource")||"",target:a}),o&&Object.create(o))}})}),t},[_(l)])});var B=function(e){return["I can't use a dialog macro in "+e+".","Please rewrite this without putting such macros here."]};t.addCommand("hide",z,function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.forEach(function(t){return t.forEach(e,function(e){Boolean(e.data("hidden"))||e.data("hidden",e.contents().detach())})})},[_(l)],!1)("stop",z,z,[],!1)("load-game",z,function(e,t){var n=localStorage.getItem(W("Saved Game")+t);if(!n)return s.create("saving","I can't find a save slot named '"+t+"'!");var a=r.deserialise(e,n);if(a instanceof Error){var i=k({message:"Sorry to interrupt... The story tried to load saved data, but there was a problem.\n"+a.message+"\n\nThat data might have been saved from a different version of this story. Should I delete it?\n(Type 'delete' and choose Yes to delete it.)\n\nEither way, the story will now continue without loading the data.",defaultValue:"",buttons:[{name:"Yes",confirm:!0,callback:function(){"delete"===i.find("input").last().val()&&localStorage.removeItem(W("Saved Game")+t),e.unblock("")}},{name:"No",cancel:!0,callback:function(){return e.unblock()}}]});return{blocked:i}}requestAnimationFrame(o.showPassage.bind(o,r.passage,!1))},[String],!1)("mock-visits",function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!o.options.debug)return s.create("operation","(mock-visits:) cannot be used outside of debug mode.","This macro is not meant to be used outside of debugging your story.");var r=t.find(function(e){return!a.hasValid(e)});return r?s.create("datatype","I can't mock-visit '"+r+"' because no passage with that name exists."):void 0},function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];r.mockVisits=S(n)},[_(String)],!1)(["dialog","alert"],function(e,t){for(var r=arguments.length,a=Array(r>2?r-2:0),i=2;i<r;i++)a[i-2]=arguments[i];if(g.isPrototypeOf(e)){if("two way"===e.bind)return s.create("datatype","(dialog:) shouldn't be given two-way bound variables.");if(void 0===t)return s.create("datatype","(dialog:) needs a message string to display.")}else void 0!==t&&a.unshift(t);var o=a.findIndex(function(e){return""===e});if(o>-1)return s.create("datatype","(dialog:)'s "+n.nth(o+1)+" link text shouldn't be an empty string.")},function(e,t,n,r){for(var a=arguments.length,i=Array(a>4?a-4:0),o=4;o<a;o++)i[o-4]=arguments[o];return g.isPrototypeOf(n)||(void 0!==r&&i.unshift(r),r=n,n=void 0),i.length||(i=["OK"]),{blocked:k({section:t,message:r,cd:e,buttons:i.map(function(e){return{name:e,callback:function(){t.unblock(n&&n.set(e)||"")}}})})}},[N(g,String),I(String)])("open-url",z,function(e,t){window.open(t,"")},[String],!1)(["restart","reload"],z,function(){if(r.pastLength<1)return s.create("infinite","I mustn't (restart:) the story in the starting passage.");r.hasSessionStorage&&sessionStorage.removeItem("Saved Session"),window.location.reload()},[],!1)("goto-url",z,function(e,t){window.location.assign(t)},[String],!1)("ignore",z,z,[I(E)])("assert-exists",function(e){if(""===e)return s.create("datatype","(assert-exists:) mustn't be given an empty string.")},function(e,t,n){var r=0;return("string"==typeof n?l.create({type:"string",data:n}):n).forEach(t,function(){++r}),r?e:s.create("assertion","I didn't see any "+("string"==typeof n?"text occurrences of":"hooks matching")+" "+x(n)+" in this passage.")},[N(l,String)]),t.add("assert",function(e,t){return t?{TwineScript_TypeID:"instant",TwineScript_TypeName:"an (assert:) operation",TwineScript_ObjectName:"an (assert:) operation",TwineScript_Unstorable:!0,TwineScript_Print:function(){return""}}:R(s.create("assertion","An assertion failed: "),{appendTitleText:!0})},[Boolean])("save-game",function(e,t,n){if(n=n||"",!r.hasStorage)return!1;var a=r.serialise();if(s.containsError(a))return a;if(!1===a)return!1;try{return localStorage.setItem(W("Saved Game")+t,a),localStorage.setItem(W("Saved Game Filename")+t,n),!0}catch(e){return!1}},[String,P(String)])("prompt",function(e,t,n,r,a){if(e.stackTop&&e.stackTop.evaluateOnly)return s.create.apply(s,["macrocall"].concat(_toConsumableArray(B(e.stackTop.evaluateOnly))));if(""===a)return s.create("datatype","The text for (prompt:)'s confirm link can't be blank.");var i=k({section:e,message:t,defaultValue:n,buttons:[{name:a||"OK",confirm:!0,callback:function(){return e.unblock(i.find("input").last().val())}}].concat(""===r?[]:{name:r||"Cancel",cancel:!0,callback:function(){return e.unblock(n)}})});e.stackTop.blocked=i,setTimeout(function(){return i.find("input").last().focus()},100)},[String,String,P(String),P(String)])("confirm",function(e,t,n,r){if(e.stackTop&&e.stackTop.evaluateOnly)return s.create.apply(s,["macrocall"].concat(_toConsumableArray(B(e.stackTop.evaluateOnly))));if(""===r)return s.create("datatype","The text for (confirm:)'s confirm link can't be blank.");var a=k({section:e,message:t,defaultValue:!1,buttons:[{name:r||"OK",confirm:!0,callback:function(){return e.unblock(!0)}}].concat(""===n?[]:{name:n||"Cancel",cancel:!0,callback:function(){return e.unblock(!1)}})});e.stackTop.blocked=a},[String,P(String),P(String)])("page-url",function(){return window.location.href},[]),i.options.blockerMacros.push("prompt","confirm")}),define("macrolib/datastructures",["jquery","utils","utils/naturalsort","macros","utils/operationutils","state","engine","passages","datatypes/lambda","datatypes/datatype","datatypes/typedvar","internaltypes/varref","internaltypes/twineerror"],function(e,t,n,r,a,i,o,s,c,u,l,p,f){var d=t.shuffled,h=t.permutations,y=a.objectName,m=a.subset,g=a.collectionType,v=a.isValidDatamapName,b=a.is,w=a.unique,T=a.clone,S=a.range,x=r.TypeSignature,k=x.optional,O=x.rest,j=x.either,A=x.zeroOrMore,C=x.Any,E=x.nonNegativeInteger;r.add(["a","array"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n},A(j(l,C)))("range",function(e,t,n){return S(t,n)},[parseInt,parseInt])("subarray",function(e,t,n,r){return m(t,n,r)},[Array,parseInt,parseInt])("reversed",function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reverse().map(T)},A(C))("shuffled",function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return d.apply(void 0,n).map(T)},[C,O(C)])("sorted",function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return r.sort(n("en"))},[j(Number,String),O(j(Number,String))])("rotated",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return 0===(t*=-1)?f.create("macrocall","I can't rotate these values by 0 positions."):Math.abs(t)>=r.length?f.create("macrocall","I can't rotate these "+r.length+" values by "+t+" positions."):r.slice(t).concat(r.slice(0,t)).map(T)},[parseInt,C,O(C)])("rotated-to",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];var i=t.filter(e,r);if(f.containsError(i))return i;if(!i.length)return f.create("macrocall","None of these "+r.length+" values matched the lambda, so I can't rotate them.");var o=r.indexOf(i[0]);return r.slice(o).concat(r.slice(0,o)).map(T)},[c.TypeSignature("where"),C,O(C)])("repeated",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];for(var i=[];t-- >0;)i.push.apply(i,r);return i.map(T)},[E,O(C)])("interlaced",function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var a=Math.min.apply(Math,_toConsumableArray(n.map(function(e){return e.length}))),i=[],o=0;o<a;o+=1)for(var s=0;s<n.length;s+=1)i.push(T(n[s][o]));return i},[Array,O(Array)])("permutations",function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.length?h.apply(void 0,n):[]},[A(C)]),r.add("altered",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return r.map(function(n,r){return t.apply(e,{loop:n,pos:r+1})})},[c.TypeSignature("via"),A(C)])("find",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return t.filter(e,r)},[c.TypeSignature("where"),A(C)])(["all-pass","pass"],function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];var i=t.filter(e,r);return f.containsError(i)||i.length===r.length},[c.TypeSignature("where"),A(C)])("some-pass",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];var i=t.filter(e,r);return f.containsError(i)||i.length>0},[c.TypeSignature("where"),A(C)])("none-pass",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];var i=t.filter(e,r);return f.containsError(i)||0===i.length},[c.TypeSignature("where"),A(C)])("folded",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return"where"in t&&(r=t.filter(e,r)),f.containsError(r)||r.reduce(function(n,r,a){return t.apply(e,{making:n,loop:r,pos:a+1})})},[j(c.TypeSignature("where","via","making"),c.TypeSignature("via","making")),O(C)]),r.add("datanames",function(e,t){return Array.from(t.keys()).sort(n("en"))},[Map])("datavalues",function(e,t){return Array.from(t.entries()).sort(n("en",function(e){return String(e[0])})).map(function(e){return T(e[1])})},[Map])("dataentries",function(e,t){return Array.from(t.entries()).sort(function(e,t){return[e[0],t[0]].sort(n("en"))[0]===e[0]?-1:1}).map(function(e){return new Map([["name",e[0]],["value",T(e[1])]])})},[Map])("history",function(e,t){var n=i.mockVisits.concat(i.pastPassageNames());if(!t)return n;var r=t.filter(e,n.map(function(e){return s.get(e)}));return f.containsError(r)?r:r.map(function(e){return e.get("name")})},[k(c.TypeSignature("where"))])("passage",function(e,t){return T(s.get(t||i.passage))||f.create("macrocall","There's no passage named '"+t+"' in this story.")},[k(String)])("passages",function(e,t){var r=n("en"),a=[].concat(_toConsumableArray(s.values())).map(function(e){return T(e)}),i=t?t.filter(e,a):a,o=f.containsError(i);return o||i.sort(function(e,t){return r(e.get("name"),t.get("name"))})},[k(c.TypeSignature("where"))])("open-storylets",function(e,t){if(e.stackTop.evaluateOnly)return f.create("macrocall","(open-storylets:) can't be used in "+e.stackTop.evaluateOnly+".");var n=s.getStorylets(e,t),r=f.containsError(n);return r||n.map(T)},[k(c.TypeSignature("where"))])("savedgames",function(){function e(e){return"("+e+" "+o.options.ifid+") "}var t=0,n=void 0,r=new Map;do{if(!i.hasStorage)break;n=localStorage.key(t),t+=1;var a=e("Saved Game");n&&n.startsWith(a)&&(n=n.slice(a.length),r.set(n,localStorage.getItem(e("Saved Game Filename")+n)))}while(n);return r},[])(["datamap","dm"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=void 0,i=new Map,o=n.reduce(function(e,t){var n=void 0;if(f.containsError(e))return e;if(void 0===a)a=t;else{if(n=f.containsError(v(i,a)))return n;if(i.has(a))return f.create("macrocall","You used the same data name ("+y(a)+") twice in the same (datamap:) call.");i.set(a,T(t)),a=void 0}return e},!0);return f.containsError(o)?o:void 0!==a?f.create("macrocall","This datamap has a data name without a value."):i},A(j(l,C)))(["dataset","ds"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new Set(n.filter(w).map(T))},A(C))("count",function e(t,n){for(var r=arguments.length,a=Array(r>2?r-2:0),i=2;i<r;i++)a[i-2]=arguments[i];if(a.length>1){var o,s=a.map(function(r){return e(t,n,r)});return(o=f.containsError(s))?o:s.reduce(function(e,t){return e+t},0)}var c=a[0];switch(g(n)){case"dataset":case"datamap":return f.create("macrocall","(count:) shouldn't be given a datamap or dataset.","You should use the 'contains' operator instead. For instance, write: $variable contains 'value'.");case"string":return"string"!=typeof c?f.create("macrocall",y(n)+" can't contain  "+y(c)+" because it isn't also a string."):c?n.split(c).length-1:0;case"array":return n.reduce(function(e,t){return e+b(t,c)},0);default:return f.create("macrocall",y(n)+" can't contain values, let alone "+y(c)+".")}},[C,O(C)])}),define("macrolib/stylechangers",["jquery","macros","utils","utils/renderutils","datatypes/colour","datatypes/hookset","datatypes/gradient","datatypes/changercommand","datatypes/lambda","internaltypes/changedescriptor","internaltypes/twineerror"],function(e,t,n,r,a,i,o,s,c,u,l){var p=r.geomParse,f=r.geomStringRegExp,d=Object.assign,h=t.TypeSignature,y=h.either,m=h.wrapped,g=h.optional,v=h.Any,b=h.Everything,w=h.zeroOrMore,T=h.rest,S=h.insensitiveSet,x=h.positiveNumber,k=h.positiveInteger,O=h.nonNegativeNumber,j=h.percent,A=[m(Boolean,'If you gave a number, you may instead want to check that the number is not 0. If you gave a string, you may instead want to check that the string is not "".')];n.onStartup(function(){return e(n.storyElement).on("mouseenter.hover-macro","[hover=false]",function(){var t=e(this),n=t.data("hoverChanger");t.data({mouseoutStyle:t.attr("style")||""}),u.create({target:t},n).update(),t.attr("hover",!0)}).on("mouseleave.hover-macro","[hover=true]",function(){var t=e(this),n=t.data("mouseoutStyle");t.attr("style",n).removeData("mouseoutStyle").attr("hover",!1)})});var C,E,_=S("instant","dissolve","fade","rumble","shudder","pulse","zoom","flicker","slideleft","slideright","slideup","slidedown","fadeleft","faderight","fadeup","fadedown","blur"),N=S("dotted","dashed","solid","double","groove","ridge","inset","outset","none");t.addChanger("if",function(e,t){return s.create("if",[t])},function(e,t){return e.enabled=e.enabled&&t},A)("unless",function(e,t){return s.create("unless",[t])},function(e,t){return e.enabled=e.enabled&&!t},A)("elseif",function(e,t){return"lastHookShown"in e.stack[0]?s.create("elseif",[!1===e.stack[0].lastHookShown&&!!t]):l.create("macrocall","There's no (if:) or something else before this to do (else-if:) with.")},function(e,t){return e.enabled=e.enabled&&t},A)("else",function(e){return"lastHookShown"in e.stack[0]?s.create("else",[!1===e.stack[0].lastHookShown]):l.create("macrocall","There's nothing before this to do (else:) with.")},function(e,t){return e.enabled=e.enabled&&t},null)("hidden",function(){return s.create("hidden")},function(e){return e.enabled=!1},null)(["verbatim","v6m"],function(){return s.create("verbatim")},function(e){return e.verbatim=!0},null)("live",function(e,t){return s.create("live",[t])},function(e,t){e.enabled=!1,e.data.live={delay:t}},g(Number))("event",function(e,t){return s.create("event",[t])},function(e,t){e.enabled=!1,e.data.live={event:t}},c.TypeSignature("when"))("more",function(){return s.create("more")},function(e){e.enabled=!1,e.data.live={event:{when:!0,filter:function(e){return 0!==e.eval("Operations").Identifiers.exits?[]:[!0]}}}},null)("after",function(e,t,n){return s.create("after",[t].concat(void 0!==n?[n]:[]))},function(e,t,r){e.enabled=!1,e.data.live={event:{when:!0,filter:function(e){return n.anyInputDown()&&r&&(t-=r),e.eval("Operations").Identifiers.time>t?[!0]:[]}}}},[x,g(O)])("hook",function(e,t){return t?s.create("hook",[t]):l.create("datatype","(hook:) names can't be empty strings.")},function(e,t){return e.attr.push({name:t})},[String])(["for","loop"],function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return t.loop?s.create("for",[t].concat(r)):l.create("datatype","The lambda provided to (for:) must refer to a temp variable, not just 'it'.")},function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];var i,o=t.filter(e.section,r);if(i=l.containsError(o))return i;e.loopVars[t.loop.getName()]=o||[]},[c.TypeSignature("where"),w(v)])(["transition","t8n"],function(e,t){return s.create("transition",[n.insensitiveName(t)])},function(t,r){return t.transition=r,"zoom"===r&&(t.transitionOrigin=function(){var t=e(this).offset(),r=t.left,a=t.top;return n.mouseCoords.x-r+"px "+(n.mouseCoords.y-a)+"px"}),t},[_])(["transition-time","t8n-time"],function(e,t){return s.create("transition-time",[t])},function(e,t){return e.transitionTime=t,e.data.passageT8n=d(e.data.passageT8n||{},{time:t}),e},[x])(["transition-delay","t8n-delay"],function(e,t){return s.create("transition-delay",[t])},function(e,t){return e.transitionDelay=t,e},[O])(["transition-skip","t8n-skip"],function(e,t){return s.create("transition-skip",[t])},function(e,t){return e.transitionSkip=t,e},[x])(["transition-depart","t8n-depart"],function(e,t){return s.create("transition-depart",[n.insensitiveName(t)])},function(t,r){return t.data.passageT8n=d(t.data.passageT8n||{},{depart:r}),"zoom"===r&&(t.data.passageT8n.departOrigin=function(){var t=e(this).offset(),r=t.left,a=t.top;return n.mouseCoords.x-r+"px "+(n.mouseCoords.y-a)+"px"}),t},[_])(["transition-arrive","t8n-arrive"],function(e,t){return s.create("transition-arrive",[n.insensitiveName(t)])},function(t,r){return t.data.passageT8n=d(t.data.passageT8n||{},{arrive:r}),"zoom"===r&&(t.data.passageT8n.arriveOrigin=function(){var t=e(this),r=t.offset(),a=r.left,i=r.top,o=t.height();return{"transform-origin":100*(n.mouseCoords.x-a)/t.width()+"% "+100*(n.mouseCoords.y-i)/o+"%",height:o+"px"}}),t},[_])("button",function(){return s.create("button",[])},function(e){return e.attr.push({class:function(){return this.className+(this.classList.contains("enchantment-button")?"":" ".repeat(this.className.length>0)+"enchantment-button")}}),e},[])(["border","b4r"],function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return s.create("border",r.map(n.insensitiveName))},function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return t.styles.push({display:function(){var t=e(this).css("display");return r.every(function(e){return"none"===e})||!t.includes("inline")?t:"inline-block"},"border-style":r.join(" "),"border-width":function(){return this.style.borderWidth||"2px"}}),t},[N].concat(_toConsumableArray(Array(3).fill(g(N)))))(["border-size","b4r-size"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return s.create("border-size",n)},function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.styles.push({"border-width":n.map(function(e){return e+"px"}).join(" ")}),e},[O].concat(_toConsumableArray(Array(3).fill(g(O)))))("corner-radius",function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return s.create("corner-radius",n)},function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.styles.push({"border-radius":n.map(function(e){return e+"px"}).join(" "),padding:function(){return this.style.padding||n.map(function(e){return e+"px"}).join(" ")}}),e},[O].concat(_toConsumableArray(Array(3).fill(g(O)))))(["border-colour","b4r-colour","border-color","b4r-color"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return s.create("border-colour",n.map(function(e){return a.isPrototypeOf(e)?e.toRGBAString(e):e}))},function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.styles.push({"border-color":n.join(" ")}),e},[y(String,a)].concat(_toConsumableArray(Array(3).fill(g(y(String,a))))))("opacity",function(e,t){return s.create("opacity",[t])},function(e,t){return e.styles.push({opacity:t})},[j])("font",function(e,t){return s.create("font",[t])},function(e,t){return e.styles.push({"font-family":t}),e},[String])("align",function(e,t){var n=void 0,r=t.indexOf("><");if(!/^(==+>|<=+|=+><=+|<==+>)$/.test(t))return l.create("datatype",'The (align:) macro requires an alignment arrow ("==>", "<==", "==><=" etc.) be provided, not "'+t+'"');if(~r){var a=Math.round(r/(t.length-2)*50);n=d({"text-align":"center","max-width":"50%"},25===a?{"margin-left":"auto","margin-right":"auto"}:{"margin-left":a+"%"})}else n="<"===t[0]&&">"===t.slice(-1)?{"text-align":"justify","max-width":"50%"}:t.includes(">")?{"text-align":"right"}:{"text-align":"left"};return n.display="inline-block",s.create("align",[n])},function(e,t){e.styles.push(t)},[String])(["text-colour","text-color","color","colour"],function(e,t){return s.create("text-colour",[t])},function(e,t){return a.isPrototypeOf(t)&&(t=t.toRGBAString(t)),e.styles.push({color:t}),e},[y(String,a)])(["text-size","size"],function(e,t){return s.create("text-size",[t])},function(e,t){return e.styles.push({"font-size":24*t+"px","line-height":36*t+"px"}),e},[O])("text-indent",function(e,t){return s.create("text-indent",[t])},function(e,t){return e.styles.push({"text-indent":t+"px",display:"inline-block"}),e},[O])(["text-rotate-z","text-rotate"],function(e,t){return s.create("text-rotate-z",[t])},function(t,n){return t.styles.push({display:"inline-block",transform:function(){var t=e(this).css("transform")||"";return"none"===t&&(t=""),t+" rotate("+n+"deg)"}}),t},[Number])("text-rotate-y",function(e,t){return s.create("text-rotate-y",[t])},function(t,n){return t.styles.push({display:"inline-block",transform:function(){var t=e(this).css("transform")||"";return"none"===t&&(t=""),t+" perspective(50vw) rotateY("+n+"deg)"}}),t},[Number])("text-rotate-x",function(e,t){return s.create("text-rotate-x",[t])},function(t,n){return t.styles.push({display:"inline-block",transform:function(){var t=e(this).css("transform")||"";return"none"===t&&(t=""),t+" perspective(50vw) rotateX("+n+"deg)"}}),t},[Number])(["background","bg"],function(e,t){return s.create("background",[t])},function(t,r){var i=void 0;return a.isPrototypeOf(r)?r=r.toRGBAString(r):o.isPrototypeOf(r)&&(r=r.toLinearGradientString(r)),i=a.isHexString(r)||a.isCSS3Function(r)?{"background-color":r}:r.startsWith("linear-gradient(")||r.startsWith("repeating-linear-gradient(")?{"background-image":r}:{"background-size":"cover","background-image":"url("+r+")"},t.styles.push(i,{display:function(){var t=e(this);return!t.children().length||n.childrenProbablyInline(t)?e(this).css("display"):"block"}}),t},[y(String,a,o)]).apply(void 0,_toConsumableArray((C={color:function(){return"transparent"}},E=d(Object.create(null),{none:{},bold:{"font-weight":"bold"},italic:{"font-style":"italic"},underline:{"text-decoration":"underline"},doubleunderline:{"text-decoration":"underline","text-decoration-style":"double"},wavyunderline:{"text-decoration":"underline","text-decoration-style":"wavy"},strike:{"text-decoration":"line-through"},doublestrike:{"text-decoration":"line-through","text-decoration-style":"double"},wavystrike:{"text-decoration":"line-through","text-decoration-style":"wavy"},superscript:{"vertical-align":"super","font-size":".83em"},subscript:{"vertical-align":"sub","font-size":".83em"},blink:{animation:"fade-in-out 1s steps(1,end) infinite alternate"},shudder:{animation:"shudder linear 0.1s 0s infinite"},mark:{"background-color":"hsla(60, 100%, 50%, 0.6)"},condense:{"letter-spacing":"-0.08em"},expand:{"letter-spacing":"0.1em"},outline:[{"text-shadow":function(){var t=e(this).css("color");return"-1px -1px 0 "+t+", 1px -1px 0 "+t+",-1px  1px 0 "+t+", 1px  1px 0 "+t}},{color:function(){return n.parentColours(e(this)).backgroundColour}}],shadow:{"text-shadow":function(){return"0.08em 0.08em 0.08em "+e(this).css("color")}},emboss:{"text-shadow":function(){return"0.04em 0.04em 0em "+e(this).css("color")}},smear:[{"text-shadow":function(){var t=e(this).css("color");return"0em   0em 0.02em "+t+",-0.2em 0em  0.5em "+t+", 0.2em 0em  0.5em "+t}},C],blur:[{"text-shadow":function(){return"0em 0em 0.08em "+e(this).css("color")}},C],blurrier:[{"text-shadow":function(){return"0em 0em 0.2em "+e(this).css("color")},"user-select":"none"},C],mirror:{display:"inline-block",transform:"scaleX(-1)"},upsidedown:{display:"inline-block",transform:"scaleY(-1)"},fadeinout:{animation:"fade-in-out 2s ease-in-out infinite alternate"},rumble:{animation:"rumble linear 0.1s 0s infinite"},sway:{animation:"sway linear 2.5s 0s infinite"},buoy:{animation:"buoy linear 2.5s 0s infinite"},fidget:{animation:function(){return"fidget step-end 60s "+60*-Math.random()+"s infinite"+(Math.random()<.5?" reverse":"")}}}),["text-style",function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return s.create("text-style",r.map(n.insensitiveName))},function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var a=0;a<n.length;a+=1)"none"===n[a]?e.styles=[]:e.styles=e.styles.concat(E[n[a]]);return e},[T(S.apply(void 0,_toConsumableArray(Object.keys(E))))]])))("collapse",function(){return s.create("collapse")},function(e){return e.attr.push({collapsing:!0}),e},[])("hover-style",function(e,t){var n=u.create(),r=(t.run(n),n.summary());return r+""=="styles"||r.every(function(e){return"styles"===e||"attr"===e})&&n.attr.every(function(e){return Object.keys(e)+""=="style"})?s.create("hover-style",[t]):l.create("datatype","The changer given to (hover-style:) must only change the hook's style.")},function(e,t){return e.data.hoverChanger=t,e.attr.push({hover:function(e,t){return void 0!==t&&t}}),e},[s])("css",function(e,t){return t.trim().endsWith(";")||(t+=";"),s.create("css",[t])},function(t,n){return t.attr.push({style:function(){return(e(this).attr("style")||"")+n}}),t},[String])("test-true",function(){return s.create("test-true",[])},function(e){return e.enabled=!0},w(b))("test-false",function(){return s.create("test-false",[])},function(e){return e.enabled=!1},w(b)),t.addCommand("animate",e.noop,function(e,t,r,a,i){r.forEach(t,function(t){var r=void 0;if("zoom"===name){var o=t.offset(),s=o.left,c=o.top;r=n.mouseCoords.x-s+"px "+(n.mouseCoords.y-c)+"px"}n.transitionIn(t,a,e.transitionTime||i,e.transitionDelay,e.transitionSkip,0,r)})},[T(i),S.apply(void 0,_toConsumableArray(_.innerType.filter(function(e){return"instant"!==e}))),g(x)]),["box","float-box"].forEach(function(r){return t.addChanger(r,function(e,t,n){var a=-1===t.search(f)||t.length>1&&!t.includes("="),i="float-box"===r&&(-1===n.search(f)||n.length>1&&!n.includes("="));return a||i?l.create("datatype","The ("+r+':) macro requires a sizing line("==X==", "==X", "=XXXX=" etc.) be provided, not "'+(a?t:n)+'".'):s.create(r,[t,n].filter(function(e){return void 0!==e}))},function(t,a,i){var o,s=p(a),c=s.marginLeft,u=s.size,l=void 0;if("float-box"===r){var f=p(i);l=f.marginLeft,i=f.size}var h="box"===r?"%":"vw",y=(_defineProperty(o={display:"block",width:u+h,"max-width":u+h},"box"===r?"margin-left":"left",c+h),_defineProperty(o,"box-sizing","content-box"),_defineProperty(o,"overflow-y","auto"),_defineProperty(o,"padding",function(){var t=e(this).css("padding");return t&&"0px"!==t?t:"1em"}),o);return void 0!==i&&(y.height=i+("box"===r?"em":"vh")),"float-box"===r&&d(y,{position:"fixed",top:l+"vh","background-color":function(){return n.parentColours(e(this)).backgroundColour}}),t.styles.push(y),t},[String,"box"===r?g(k):String])})}),define("internaltypes/enchantment",["jquery","utils","internaltypes/changedescriptor","datatypes/changercommand","utils/operationutils","internaltypes/twineerror","utils/renderutils"],function(e,t,n,r,a,i,o){var s=a.objectName,c=o.collapse,u={create:function(n){return t.assertOnlyHas(n,["scope","localHook","section","attr","data","changer","functions","lambda","name"]),Object.assign(Object.create(this),{enchantments:e()},n)},enchantScope:function(){var a=this,o=this.attr,u=this.data,l=this.functions,p=this.section,f=this.scope,d=this.localHook,h=this.lambda,y=[];f.forEach(p,function(m,g){if(!d||(d.jquery?d:d.hooks(p)).has(m[0]).length){var v=void 0;if(h)if(v=h.apply(p,{loop:f.TwineScript_GetProperty(g),pos:g+1}),i.containsError(v))m.replaceWith(v.render("")),h=v=null;else if(r.isPrototypeOf(v)){var b=v.summary();(b.includes("newTargets")||b.includes("target"))&&(m.replaceWith(i.create("macrocall","The changer produced by the 'via' lambda given to enchantment macros can't include a revision or enchantment changer like (replace:) or (click:).").render("")),h=v=null)}else m.replaceWith(i.create("macrocall","The 'via' lambda given to enchantment macros must return a changer, not "+s(v)+".").render("")),h=v=null;else v=a.changer;var w=!o&&!u&&(!v||v.summary().every(function(e){return e.startsWith("transition")})),T=w?m:m.wrap("<tw-enchantment>").parent();if(o&&T.attr(o),u&&T.data(u),l&&l.forEach(function(e){return e(T)}),v){var S=n.create({section:p,target:T});if(v.run(S),S.update(),m.is(t.storyElement)){var x=Object.keys(Object.assign.apply(Object,[{}].concat(_toConsumableArray(S.styles))));m.css(x.reduce(function(e,t){return"background-color"===t||"background-image"===t?e.background="transparent":e[t]="inherit",e},{})),T.data({enchantedProperties:x})}else if(m.is("tw-passage")&&S.styles.some(function(e){return"margin-left"in e||"margin"in e||"margin-right"in e})){var k="padding-left",O="padding-right";t.storyElement.css(k,"0px").css(O,"0px"),T.data({enchantedProperties:[k,O]})}}m.is(t.storyElement)&&T.css({width:"100%",height:"100%"}),"true"===T.attr("collapsing")&&(T.find("[collapsing=false]").each(function(){e(this).removeAttr("collapsing")}),c(T)),w||y.push(T)}}),this.enchantments=e(y)},disenchant:function(){this.enchantments.each(function(){e(this).contents().unwrap();var n=e(this).data("enchantedProperties");n&&t.storyElement.css(n.reduce(function(e,t){return e[t]="",e},{}))})}};return Object.freeze(u)}),define("macrolib/enchantments",["jquery","utils","utils/operationutils","engine","state","passages","macros","datatypes/hookset","datatypes/changercommand","datatypes/lambda","internaltypes/changedescriptor","internaltypes/enchantment","internaltypes/twineerror"],function(e,t,n,r,a,i,o,s,c,u,l,p,f){var d=n.is,h=o.TypeSignature,y=h.either,m=h.rest,g=h.optional;function v(e,t){if(c.isPrototypeOf(t)){var n=t.summary();if(["newTargets","target","appendSource","functions"].some(function(e){return n.includes(e)}))return f.create("datatype","The changer given to ("+e+":) can't include a revision or enchantment changer like (replace:) or (click:).")}}["enchant","change"].forEach(function(e){o.addCommand(e,function(t,n){var r=v(e,n);if(r)return r},function(t,n,r){var a;n=s.from(n);var i=[];if(c.isPrototypeOf(r)){var o=l.create({section:t});if(r.run(o),(o.innerEnchantments||[]).length>0){var u=o.innerEnchantments.map(function(e){return e(n)});i.push.apply(i,_toConsumableArray(u))}}return i.push(p.create((_defineProperty(a={scope:n},c.isPrototypeOf(r)?"changer":"lambda",r),_defineProperty(a,"section",t),a))),i.forEach(function(n){"enchant"===e?(t.addEnchantment(n),t.updateEnchantments()):n.enchantScope()}),""},[y(s,String),y(c,u.TypeSignature("via"))],!1)}),o.addChanger("enchant-in",function(e,t,n){var r=v("enchant-in",n);return r||c.create("enchant-in",[t,n])},function(e,t,n){return e.innerEnchantments=(e.innerEnchantments||[]).concat(function(r){var a;return p.create((_defineProperty(a={scope:s.from(t),localHook:r},c.isPrototypeOf(n)?"changer":"lambda",n),_defineProperty(a,"section",e.section),a))}),e},[y(s,String),y(c,u.TypeSignature("via"))]),[["link-style",s.create({type:"name",data:"link"})],["line-style",s.create({type:"base",data:s.create({type:"name",data:"page"})},"lines",void 0)],["char-style",s.create({type:"base",data:s.create({type:"name",data:"page"})},"chars",void 0)]].forEach(function(e){var t=_slicedToArray(e,2),n=t[0],r=t[1];o.addChanger(n,function(e,t){var r=v(n,t);return r||c.create(n,[t])},function(e,t){return e.innerEnchantments=(e.innerEnchantments||[]).concat(function(n){var a;return p.create((_defineProperty(a={scope:r,localHook:n},c.isPrototypeOf(t)?"changer":"lambda",t),_defineProperty(a,"section",e.section),a))}),e},[y(c,u.TypeSignature("via"))])});var b=["replace","append","prepend"];function w(n,a){return t.onStartup(function(){var r=n.classList.replace(/ /g,"."),a=n.blockClassList?n.blockClassList.replace(/ /g,"."):"",i="."+r+(a?",."+a:"");t.storyElement.on(n.event.map(function(e){return e+".enchantment"}).join(" "),i,function(){var t=e(Array.from(e(this).parents(i).add(this)).sort(function(e,t){return 8&e.compareDocumentPosition(t)?1:-1})[0]),n=t.data("enchantmentEvent");n&&n(t)})}),[function(e,t,n){if(!t)return f.create("datatype","A string given to this ("+a+":) macro was empty.");if(n){var r=v(a,n);if(r)return r}return c.create(a,[s.from(t)].concat(n?[n]:[]))},function(e,t,i){e.enabled=!1,e.transitionDeferred=!0,n.rerender&&(e.newTargets=(e.newTargets||[]).concat({target:t,append:n.rerender}));var o=e.section&&e.section.stackTop?e.section.stackTop.tempVariables:Object.create(null),s=p.create(_defineProperty({functions:[function(e){e.attr("class",e.children().is("tw-story, tw-sidebar, tw-passage")||"block"===e.children().css("display")?n.blockClassList:n.classList)}],attr:(n.classList+"").match(/\b(?:link|enchantment-clickblock)\b/)?{tabIndex:"0"}:{},data:{enchantmentEvent:function(){e.section.stackTop&&e.section.stackTop.blocked||(n.once&&e.section.removeEnchantment(s),n.goto?r.goToPassage(n.goto,{transition:n.transition}):n.undo?r.goBack({transition:n.transition}):e.section.renderInto(e.source,null,Object.assign({},e,{enabled:!0,transitionDeferred:!1}),o))}},scope:t,section:e.section,name:a},c.isPrototypeOf(i)?"changer":"lambda",i));return e.section&&(e.section.addEnchantment(s),s.enchantScope()),e},[y(s,String),g(y(c,u.TypeSignature("via")))]]}b.forEach(function(t){o.addChanger(t,function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.every(Boolean)?c.create(t,r.map(s.from)):f.create("datatype","A string given to this ("+t+":) macro was empty.")},function(n){for(var r,a=arguments.length,i=Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];return e(n.target).parents().filter("tw-collapsed,[collapsing=true]").length>0||n.attr.some(function(e){return e.collapsing})||(n.attr=[].concat(_toConsumableArray(n.attr),[{collapsing:!1}])),n.newTargets=n.newTargets||[],(r=n.newTargets).push.apply(r,_toConsumableArray(i.filter(function(e){return!n.newTargets.some(function(n){var r=n.target,a=n.append;return d(e,r)&&t===a})}).map(function(e){return{target:e,append:t,before:!0}}))),n},m(y(s,String)))(t+"-with",function(e,n){return c.create(t+"-with",[n])},function(e,n){return e.appendSource=(e.appendSource||[]).concat({source:n,append:t}),e},String)});var T="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,S=[{name:"click",enchantDesc:{event:["click"],once:!0,rerender:"",classList:"link enchantment-link",blockClassList:"enchantment-clickblock"}},{name:"mouseover",enchantDesc:{event:["mouseenter",T?"click":""].filter(Boolean),once:!0,rerender:"",classList:"enchantment-mouseover",blockClassList:"enchantment-mouseoverblock"}},{name:"mouseout",enchantDesc:{event:["mouseleave",T?"click":""].filter(Boolean),once:!0,rerender:"",classList:"enchantment-mouseout",blockClassList:"enchantment-mouseoutblock"}}];S.forEach(function(e){return o.addChanger.apply(o,[e.name].concat(_toConsumableArray(w(e.enchantDesc,e.name))))}),t.onStartup(function(){S.forEach(function(n){var r=n.enchantDesc;r.blockClassList&&t.storyElement.on(r.event.map(function(e){return e+".enchantment"}).join(" "),function(){var t=e(Array.from(e(this).parents("."+r.blockClassList.replace(/ /g,"."))).sort(function(e,t){return 8&e.compareDocumentPosition(t)?1:-1})[0]),n=t.data("enchantmentEvent");n&&n(t)})})}),b.forEach(function(e){S.forEach(function(t){var n=Object.assign({},t.enchantDesc,{rerender:e}),r=t.name+"-"+e;o.addChanger.apply(o,[r].concat(_toConsumableArray(w(n,r))))})}),S.forEach(function(e){["goto","undo"].forEach(function(t){var n=e.name+"-"+t;o.addCommand(n,function(e,r){return!e||!r&&"goto"===t?f.create("datatype","A string given to this ("+n+":) macro was empty."):"goto"!==t||i.hasValid(r)?void 0:f.create("macrocall","I can't ("+n+":) the passage '"+r+"' because it doesn't exist.")},function(r,i,o,c){if("undo"===t&&a.pastLength<1)return f.create("macrocall","I can't (undo:) on the first turn.");var u=w(Object.assign({},e.enchantDesc,{transition:r.data.passageT8n},"undo"===t?{undo:!0}:{goto:c}),n);return(0,_slicedToArray(u,2)[1])({section:i},s.from(o)),Object.assign(r,{source:""})},[y(s,String)].concat("undo"===t?[]:String))})})}),define("macrolib/metadata",["macros","renderer","utils/operationutils","datatypes/lambda","internaltypes/twineerror"],function(e,t,n,r,a){var i=n.clone,o=n.objectName,s=n.isValidDatamapName,c=e.TypeSignature,u=c.zeroOrMore,l=c.Any,p=t.options.metadataMacros,f=function(e){return{TwineScript_TypeName:"a ("+e+":) macro",TwineScript_ObjectName:"a ("+e+":) macro",TwineScript_Unstorable:!0,TwineScript_Print:function(){return""}}};[["storylet",r.TypeSignature("when")],["urgency",Number],["exclusivity",Number]].forEach(function(t){var n=_slicedToArray(t,2),r=n[0],a=n[1];e.add(r,function(e,t){return e.stackTop.speculativePassage?t:f(r)},a),p.push(r)}),e.add("metadata",function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var c=void 0,u=new Map,l=n.reduce(function(e,t){var n=void 0;if(a.containsError(e))return e;if(void 0===c)c=t;else{if(n=a.containsError(s(u,c)))return n;if(u.has(c))return a.create("macrocall","You used the same data name ("+o(c)+") twice in the same (metadata:) call.");u.set(c,i(t)),c=void 0}return e},!0);return a.containsError(l)?l:void 0!==c?a.create("macrocall","This (metadata:) macro has a data name without a value."):e.stackTop.speculativePassage?u:f("storylet")},u(l)),p.push("metadata")}),define("macrolib/patterns",["jquery","macros","utils","utils/operationutils","datatypes/datatype","datatypes/typedvar","internaltypes/twineerror"],function(e,t,n,r,a,i,o){var s=n.anyRealLetter,c=n.anyUppercase,u=n.anyLowercase,l=n.anyCasedLetter,p=n.realWhitespace,f=n.impossible,d=r.objectName,h=r.toSource,y=t.TypeSignature,m=y.rest,g=y.either,v=y.optional,b=y.nonNegativeInteger,w=Object.assign,T=Object.create,S=m(g(String,a,i)),x=function e(t){var n,r=t.name,y=t.fullArgs,m=t.args,g=t.makeRegExpString,v=void 0===g?function(e){return e.join("")}:g,b=t.insensitive,S=void 0!==b&&b,x=t.canContainTypedVars,k=void 0===x||x,O=t.canBeUsedAlone,j=void 0===O||O,A=m||y,C=A.map(function e(t){if(i.isPrototypeOf(t)){if(!k)return o.create("operation","Optional string patterns, like ("+r+":)"+("p-many"===r?" with min 0":"")+", can't have typed variables inside them.");var n=e(t.datatype);return o.containsError(n)?n:"("+n+")"}if(a.isPrototypeOf(t)){if(!k&&"typedVars"in t&&t.typedVars().length)return o.create("operation","("+r+":) can't have typed variables inside its pattern.");if(t.regExp)return(t.rest?"(?:":"")+(S?t.insensitive().regExp:t.regExp)+(t.rest?")*":"");var h=t.name,y=t.rest?"*":"";return"alnum"===h?s+y:"whitespace"===h?p+y:"uppercase"===h?(S?l:c)+y:"lowercase"===h?(S?l:u)+y:"anycase"===h?l+y:"digit"===h?"\\d"+y:"linebreak"===h?"(?:\\r|\\n|\\r\\n)"+y:"str"===h?".*?":["even","odd","int","num"].includes(h)?o.create("datatype","Please use string datatypes like 'digit' in ("+r+":) instead of number datatypes."):o.create("datatype","The ("+r+":) macro must only be given string-related datatypes, not "+d(t)+".")}return"string"==typeof t?(t=t.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&"),S&&(t=t.replace(RegExp("("+c+"|"+u+")","g"),function(e){return"["+e.toUpperCase()+e.toLowerCase()+"]"})),t):(f("createPattern","mapper() was given a non-string non-datatype "+t),"")});if(n=o.containsError(C))return n;var E=v(C),_=w(T(a),{name:r,regExp:E,insensitive:function(){return S?_:e({name:r,fullArgs:y,args:A.map(function(e){return a.isPrototypeOf(e)&&"function"==typeof e.insensitive?e.insensitive():e}),makeRegExpString:v,insensitive:!0,canContainTypedVars:k,canBeUsedAlone:j})},typedVars:function(){return A.reduce(function(t,n){return i.isPrototypeOf(n)&&(t=t.concat(S?i.create(e({name:"p-ins",fullArgs:[n.datatype],insensitive:!0}),n.varRef):n),n=n.datatype),a.isPrototypeOf(n)&&"function"==typeof n.typedVars&&(t=t.concat(n.typedVars())),t},[])},destructure:function(t){if("string"!=typeof t)return[o.create("operation","I can't unpack "+d(t)+" into "+this.TwineScript_ToSource()+" because it isn't a string.")];var n=this.typedVars();if(!n.length)return[];var r=(RegExp("^"+(this.rest?"(?:":"")+E+(this.rest?")*":"")+"$").exec(t)||[]).slice(1);return r.length?r.map(function(t,r){var a=n[r];if(a)return a.datatype.rest&&!a.datatype.regExp&&((a=a.TwineScript_Clone()).datatype=e({name:"p",fullArgs:[a.datatype]})),{dest:a,value:t||"",src:void 0}}).filter(Boolean):[o.create("operation","I can't unpack "+d(t)+" because it doesn't match the pattern "+this.TwineScript_ToSource()+".")]},TwineScript_IsTypeOf:function(e){return j?"string"==typeof e&&!!e.match("^"+(this.rest?"(?:":"")+E+(this.rest?")*":"")+"$"):o.create("operation","A ("+r+":) datatype must only be used with a (p:) macro.")},TwineScript_toTypeSignatureObject:function(){var e=this;return{pattern:"range",name:r,range:function(t){return e.TwineScript_IsTypeOf(t)}}},TwineScript_ToSource:function(){return(this.rest?"...":"")+"("+r+":"+y.map(h)+")"}});return Object.defineProperty(_,"TwineScript_ObjectName",{get:function(){return"a ("+r+":) datatype"}}),_};t.add(["p","pattern"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return x({name:"p",fullArgs:n})},S)(["p-either","pattern-either"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return x({name:"p-either",fullArgs:n,canContainTypedVars:!1,makeRegExpString:function(e){return"(?:"+e.join("|")+")"}})},S)(["p-opt","pattern-opt","p-optional","pattern-optional"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return x({name:"p-opt",fullArgs:n,canContainTypedVars:!1,makeRegExpString:function(e){return"(?:"+e.join("")+")?"}})},S)(["p-not","pattern-not"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.find(function(e){return"string"==typeof e?1!==[].concat(_toConsumableArray(e)).length:e.rest||e.regExp||["str","empty"].includes(e.name)})?o.create("datatype","(p-not:) should only be given single character"):x({name:"p-not",fullArgs:n,canContainTypedVars:!1,makeRegExpString:function(e){return"[^"+e.map(function(e){return e.startsWith("[")&&e.endsWith("]")?e.slice(1,-1):e}).join("")+"]"}})},S)(["p-many","pattern-many"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var s=n.slice(),c=void 0,u=void 0;if("number"==typeof n[0]&&(c=n.shift(),u="number"==typeof n[0]?n.shift():1/0),void 0!==u&&u<c)return o.create("datatype","The (p-many:) macro needs to be given string patterns, not just min and max numbers.");if(!n.length)return o.create("datatype","The (p-many:) macro needs to be given string patterns, not just min and max numbers.");var l=n.find(function(e){return"string"!=typeof e&&!a.isPrototypeOf(e)&&!i.isPrototypeOf(e)});return l?o.create("datatype","This (p-many:) macro can only be given a min and max number followed by datatypes or strings, but was also given "+d(l)+"."):x({name:"p-many",args:n,fullArgs:s,canContainTypedVars:c>0,makeRegExpString:function(e){return"(?:"+e.join("")+")"+(void 0!==c?"{"+c+(u===1/0?",":u!==c?","+u:"")+"}":"+")}})},[m(g(b,String,a,i))])(["p-ins","pattern-ins","p-insensitive","pattern-insensitive"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return x({name:"p-ins",fullArgs:n,insensitive:!0})},S)(["split","splitted"],function(e,t,n){if(t=x({name:"split",fullArgs:[t],canContainTypedVars:!1}),o.containsError(t))return t;if(!n)return[""];if(!t.regExp)return[].concat(_toConsumableArray(n));for(var r=RegExp(t.regExp),a=[],i=void 0;n&&(i=r.exec(n));){if(i.index+i[0].length===0)return a;a.push(n.slice(0,i.index)),n=n.slice(i.index+i[0].length)}return a.concat(n||[])},[g(String,a),String])("trimmed",function(e,t,n){return void 0===n||a.isPrototypeOf(t)&&"whitespace"===t.name?t.trim():(t=x({name:"trimmed",fullArgs:[t],canContainTypedVars:!1}),o.containsError(t)?t:t.regExp?n.replace(RegExp("^("+t.regExp+")*|("+t.regExp+")*$","g"),""):n)},[g(String,a),v(String)])}),define("macrolib/links",["jquery","macros","utils","state","passages","engine","datatypes/changercommand","internaltypes/changedescriptor","datatypes/hookset","datatypes/lambda","internaltypes/twineerror"],function(e,t,n,r,a,i,o,s,c,u,l){var p=t.TypeSignature,f=p.optional,d=p.rest,h=p.either,y=["Links can't have empty strings for their displayed text.","In the link syntax, a link's displayed text is inside the [[ and ]], and on the non-pointy side of the -> or <- arrow if it's there."],m=Object.assign;function g(e,t,r){r=r||t;var i=a.hasValid(t)&&t===r,o=e.evaluateTwineMarkup(n.unescape(r),"a link's passage name"),s=void 0;if(i){var c=o.children().length>0?"`".repeat((r.match(/`+/)||[]).reduce(function(e,t){return Math.max(e,t.length+1)},1)):"";t=c+"\0".repeat(!!c)+t+"\0".repeat(!!c)+c}else o.findAndFilter("tw-error").length&&(s=o.findAndFilter("tw-error").data("TwineError")),r=o.text();return{text:t,passage:r,error:s}}n.onStartup(function(){e(n.storyElement).on("click.passage-link","tw-link",function(t){var n=e(this),r=n.closest("tw-expression"),a=n.closest("tw-expression, tw-hook"),o=a.data("clickEvent"),s=a.data("section");if(!(s&&s.stackTop&&s.stackTop.blocked)||s.stackTop.blocked instanceof e&&s.stackTop.blocked.find(n).length){if(o){if(n.find("tw-error").length>0)return;return t.stopPropagation(),void o(n)}var c=r.data("linkPassageName"),u=Object.assign({},r.data("passageT8n")||{});return r.find("tw-enchantment").each(function(t,n){Object.assign(u,e(n).data("passageT8n")||{})}),c?(t.stopPropagation(),void i.goToPassage(c,{transition:u})):n.is("[undo]")?(t.stopPropagation(),void i.goBack({transition:u})):n.is("[fullscreen]")?(t.stopPropagation(),void i.toggleFullscreen()):void 0}}),e(document).on("fullscreenchange",function(){e("tw-link[fullscreen]",n.storyElement).each(function(t,n){(e(n).closest("tw-expression, tw-hook").data("fullscreenEvent")||Object)(n)})})}),[["link","link-replace"],["link-reveal"],["link-repeat"],["link-rerun"]].forEach(function(e){return t.addChanger(e,function(t,n,r){if(!n)return l.create("datatype",y[0]);if(r){var a=r.summary();if(["newTargets","target","appendSource","functions"].some(function(e){return a.includes(e)}))return l.create("datatype","The changer given to ("+e[0]+":) can't include a revision or enchantment changer like (replace:) or (click:).")}return o.create(e[0],[n].concat(r||[]))},function(t,n,r){var a=e[0],i=t.section&&t.section.stackTop?t.section.stackTop.tempVariables:Object.create(null),o=s.create({source:"<tw-link tabindex=0>"+n+"</tw-link>",target:function(){return t.target},append:"replace",data:{section:t.section,clickEvent:function(e){t.enablers=t.enablers.filter(function(e){return e.descriptor!==o}),"link-reveal"===a&&e.contents().unwrap();var n=e.parentsUntil(":not(tw-enchantment)").parent();if(n.length||(n=e.parent()),"link-rerun"===a){var r=e.parentsUntil(":not(tw-enchantment)");e.detach(),r.remove()}"link"!==a&&"link-rerun"!==a||n.empty(),t.section.renderInto("",null,t,i),"link-rerun"===a&&n.prepend(e)}}});return t.enablers=(t.enablers||[]).concat({descriptor:o,changer:r}),t},[String,f(o)])}),t.addCommand("link-goto",function(e){if(!e)return l.create.apply(l,["datatype"].concat(y))},function(e,t,i,o){var s,c=g(t,i,o);if(i=c.text,o=c.passage,s=c.error)return s;if(e.transition){var u="transition";return l.create("datatype","Please attach ("+u+"-depart:) or ("+u+"-arrive:) to a passage link, not ("+u+":).")}var p=void 0;return a.hasValid(o)||(p='<tw-broken-link passage-name="'+n.escape(o)+'">'+i+"</tw-broken-link>"),p=p||"<tw-link tabindex=0 "+(r.passageNameVisited(o)>0?'class="visited" ':"")+">"+i+"</tw-link>",e.data.linkPassageName=o,e.data.section=t,m(e,{source:p,transitionDeferred:!0})},[String,f(String)])("link-storylet",function(){var e,t=(e=1===arguments.length||"string"!=typeof(arguments.length<=0?void 0:arguments[0])?0:1,arguments.length<=e?void 0:arguments[e]);if(!t||"string"==typeof t)return l.create("datatype","(link-storylet:) should be given one index number or one 'where' lambda, after the optional link text string.")},function(e,t){var n,i,o,s=(n=2+(1==(arguments.length<=2?0:arguments.length-2)?0:3==(arguments.length<=2?0:arguments.length-2)||"string"==typeof(arguments.length<=2?void 0:arguments[2])?1:2),arguments.length<=n?void 0:arguments[n]),c="string"==typeof(arguments.length<=2?void 0:arguments[2])&&(arguments.length<=2?void 0:arguments[2]),p=(i=(arguments.length<=2?0:arguments.length-2)-1+2,(arguments.length<=i?void 0:arguments[i])!==s&&(o=(arguments.length<=2?0:arguments.length-2)-1+2,arguments.length<=o?void 0:arguments[o]));if(e.transition){var f="transition";return l.create("datatype","Please attach ("+f+"-depart:) or ("+f+"-arrive:) to (link-storylet:), not ("+f+":).")}var d=u.isPrototypeOf(s),h=a.getStorylets(t,d&&s),y=l.containsError(h);if(y)return y;var g=h[d?0:s<0?h.length+s:s-1],v=void 0;if(g)g=g.get("name"),c=c||g,v=v||"<tw-link tabindex=0 "+(r.passageNameVisited(g)>0?'class="visited" ':"")+">"+c+"</tw-link>",e.data.linkPassageName=g,e.data.section=t;else{if(!p)return e;v=p}return m(e,{source:v,transitionDeferred:!0})},[h(parseInt,String,u.TypeSignature("where")),f(h(parseInt,String,u.TypeSignature("where"))),f(String)])("link-undo",function(e){if(!e)return l.create("datatype",y[0])},function(e,t,n){return r.pastLength<1?l.create("macrocall","I can't use (link-undo:) on the first turn."):(e.data.section=t,m(e,{source:"<tw-link tabindex=0 undo>"+n+"</tw-link>",transitionDeferred:!0}))},[String])("link-show",function(e){if(!e)return l.create("datatype",y[0])},function(t,n,r){for(var a=arguments.length,i=Array(a>3?a-3:0),o=3;o<a;o++)i[o-3]=arguments[o];return t.data.section=n,t.data.clickEvent=function(r){r.contents().unwrap(),i.forEach(function(r){return r.forEach(n,function(r){var a=r.data("originalSource")||"",i=r.data("hidden");if(i)if(r.removeData("hidden"),i instanceof e)r.empty().append(i);else{var o=r.data("tempVariables");n.renderInto("",null,m({},t,{source:a,target:r,transitionDeferred:!1}),o&&Object.create(o))}})})},m(t,{source:"<tw-link tabindex=0>"+r+"</tw-link>",transitionDeferred:!0})},[String,d(c)])("link-fullscreen",function(e,t){if(!e||!t)return l.create("datatype",y[0])},function(e,t,n,r){var a=function(){return document.fullscreenEnabled||document.msFullscreenEnabled?"<tw-link tabindex=0 fullscreen>"+(document.fullscreenElement||document.msFullscreenElement?r:n)+"</tw-link>":r?"<tw-broken-link>"+r+"</tw-broken-link>":""},i=t.stackTop.tempVariables;return e.data.section=t,e.data.fullscreenEvent=function(){(document.fullscreenEnabled||document.msFullscreenEnabled)&&e.data.section.whenUnblocked(function(){var t=m({},e,{append:"replace",source:a(),transitionDeferred:!1});e.section.renderInto("",null,t,i)})},m(e,{source:a(),transitionDeferred:!0})},[String,String,f(String)]),t.addChanger(["link-reveal-goto"],function(e,t,n,r){if(!t)return l.create.apply(l,["datatype"].concat(y));if(o.isPrototypeOf(n)){if(o.isPrototypeOf(r))return l.create("datatype","You mustn't give two changers to (link-reveal-goto:)");r=n,n=void 0}if(r){var a=r.summary();if(["newTargets","target","appendSource","functions"].some(function(e){return a.includes(e)}))return l.create("datatype","The changer given to (link-reveal-goto:) can't include a revision or enchantment changer like (replace:) or (click:).")}var i=g(e,t,n);return t=i.text,n=i.passage,i.error||o.create("link-reveal-goto",[t,n,r].filter(function(e){return void 0!==e}))},function(e,t,o,c){if(a.hasValid(o)){var u=r.passageNameVisited(o),l=e.section&&e.section.stackTop?e.section.stackTop.tempVariables:Object.create(null),p=s.create({source:"<tw-link tabindex=0 "+(u>0?'class="visited" ':"")+">"+t+"</tw-link>",target:e.target,append:"replace",data:{section:e.section,append:"replace",clickEvent:function(t){e.enablers=e.enablers.filter(function(e){return e.descriptor!==p}),t.contents().unwrap(),e.section.renderInto("",null,e,l),e.section.whenUnblocked(function(){return i.goToPassage(o,{transition:e.data.passageT8n})})}}});return e.enablers=(e.enablers||[]).concat({descriptor:p,changer:c}),e}e.source='<tw-broken-link passage-name="'+n.escape(o)+'">'+t+"</tw-broken-link>"},[String,f(h(o,String)),f(o)])}),define("macrolib/custommacros",["utils","macros","state","utils/operationutils","datatypes/changercommand","datatypes/custommacro","datatypes/codehook","datatypes/typedvar","internaltypes/twineerror"],function(e,t,n,r,a,i,o,s,c){var u=t.add,l=t.addChanger,p=t.addCommand,f=t.TypeSignature,d=f.rest,h=f.either,y=f.Any,m=r.objectName;u("macro",function(t){for(var r=arguments.length,a=Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];var u=void 0,l=[];for(u=0;u<a.length;u+=1){var p=u===a.length-1;if(s.isPrototypeOf(a[u])===p)return c.create("datatype","The "+(p?"":e.nth(a.length-u+1)+"-")+"last value given to (macro:) should be a "+(p?"code hook":"datatyped variable")+", not "+m(a[u]));if(!p){var f="A custom macro";if(a[u].varRef.object===n.variables)return c.create("datatype",f+"'s typed variables must be temp variables (with a '_'), not global variables (with a '$').","Write them with a _ symbol at the start instead of a $ symbol.");if(a[u].varRef.propertyChain.length>1)return c.create("datatype",f+"'s typed variables can't be properties inside a data structure.");if(a[u].datatype.rest&&u!==a.length-2)return c.create("datatype",f+" can only have one spread variable, and it must be its last variable.");var d=a[u].varRef.propertyChain[0];if(l.includes(d))return c.create("datatype",f+"'s typed variables can't both be named '"+d+"'.");l.push(d)}}return i.create(a.slice(0,-1),a[a.length-1])},[d(h(s,o))]);var g=function(e,t,n){if(!t.some(function(e){if("function"==typeof e.output)return e.output(n),!0}))return c.create("macrocall","("+e+":) should only be used inside a code hook passed to (macro:).")};p(["output-data","out-data"],function(){},function(e,t){var n=e.stack;return g("output-data",n,t)||{blocked:!0}},[y],!1),l(["output","out"],function(e){return Object.assign(a.create("output",[e]))},function(e,t){var n=t.stack,r=t.stackTop;return e.loopVars=Object.keys(r.tempVariables).reduce(function(e,t){return e[t]=[r.tempVariables[t]],e},{}),g("output",n,e),r.blocked=!0,e},[]),p("error",function(e){if(!e)return c.create("datatype","This (error:) macro was given an empty string.")},function(e,t){var n=e.stack;return g("error",n,c.create("user",t))||{blocked:!0}},[String],!1)}),define("repl",["utils","engine","markup","twinescript/compiler","twinescript/environ"],function(e,t,n,r,a){e.onStartup(function(){return setTimeout(function(){t.options.debug&&(window.REPL=function(e){var t=r(n.lex("(print:"+e+")"));console.log(t);var i=a({}).eval(t);return i.TwineScript_Run?i.TwineScript_Run().source:i},window.LEX=function(e){var t=n.lex(e);return 1===t.length?t[0]:t})})})}),require.config({paths:{jquery:"../node_modules/jquery/dist/jquery",almond:"../node_modules/almond/almond","es6-shim":"../node_modules/es6-shim/es6-shim",jqueryplugins:"utils/jqueryplugins",markup:"./markup/markup",lexer:"./markup/lexer",patterns:"./markup/patterns"},deps:["es6-shim","jqueryplugins"]}),require(["jquery","debugmode/mode","renderer","state","section","engine","passages","utils","utils/renderutils","internaltypes/varscope","internaltypes/twineerror","macros","macrolib/values","macrolib/commands","macrolib/datastructures","macrolib/stylechangers","macrolib/enchantments","macrolib/metadata","macrolib/patterns","macrolib/links","macrolib/custommacros","repl"],function($,DebugMode,Renderer,State,Section,Engine,Passages,Utils,_ref118,VarScope,TwineError){var dialog=_ref118.dialog;function __HarloweEval(text){return eval(text+"")}var _installHandlers=function(){$(document.documentElement).on("keydown",function(e){13===e.which&&"0"===e.target.getAttribute("tabindex")&&$(e.target).trigger("click")}),Engine.options.debug?DebugMode():TwineError.on("error",function(e,t){return!$("tw-debugger").length&&DebugMode(e,t)}),_installHandlers=null},oldOnError;function printJSError(e){var t=e.name+": "+e.message;if(e.stack){var n=e.stack.split("\n"),r=n.findIndex(function(e){return e.includes("__HarloweEval")});t+="\n"+n.slice(0,r).join("\n").replace(/\([^\)]+\)/g,"")}return"<div style='font-family:monospace;overflow-y:scroll;max-height:30vh'>```"+t+"```</div>"}oldOnError=window.onerror,window.onerror=function(e,t,n,r,a){window.onerror=oldOnError,Utils.storyElement.parent().append(dialog({message:"Sorry to interrupt, but this page's code has got itself in a mess.\n\n"+printJSError(a)+"\n(This is probably due to a bug in the Harlowe game engine.)"})),"function"==typeof oldOnError&&oldOnError.apply(void 0,arguments)},Utils.onStartup(function(){var e=$("tw-storydata");if(0!==e.length){var t=e.attr("options");t&&t.split(/\s/).forEach(function(e){Renderer.options[e]=Engine.options[e]=!0});var n=e.attr("startnode");Renderer.options.ifid=Engine.options.ifid=e.attr("ifid"),n||(n=[].reduce.call($("tw-passagedata"),function(e,t){var n=t.getAttribute("pid");return n<e?n:e},1/0)),n=$("tw-passagedata[pid="+n+"]").attr("name"),_installHandlers();var r=!1;$("[role=script]").each(function(e){try{__HarloweEval($(this).html())}catch(t){r||(r=!0,dialog({parent:Utils.storyElement.parent(),message:"There is a problem with this story's "+Utils.nth(e+1)+" script:\n\n"+printJSError(t)}))}}),$("[role=stylesheet]").each(function(e){$(document.head).append('<style data-title="Story stylesheet '+(e+1)+'">'+$(this).html())});var a=Section.create();a.stack=[{tempVariables:Object.create(VarScope)}];var i=Passages.loadMetadata(a);if(i.length){var o=dialog({parent:Utils.storyElement.parent(),message:"These errors occurred when running the `(metadata:)` macro calls in this story's passages:<p></p>"});i.forEach(function(e){return o.find("p").append(e.render(""))})}var s=!Engine.options.debug&&State.hasSessionStorage&&sessionStorage.getItem("Saved Session");s&&!0===State.deserialise(a,s)?Engine.showPassage(State.passage,!1):Engine.goToPassage(n)}})}),define("harlowe",function(){}),require(["harlowe"])}();
</script>

</body>
</html>
